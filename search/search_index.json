{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to InfraSonar","text":"<p>InfraSonar a powerful infrastructure monitoring platform as a service.</p> <p></p> <p>Features</p> <ul> <li>Agentless data collection where possible, minimizing our footprint in a monitored infrastructure;</li> <li>We excel in detailed state and performance monitoring;</li> <li>Effortless realtime anomaly detection;</li> <li>Crystal clear conditions.</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#0212","title":"0.2.12","text":"<p>_ Wednesday 03 Aug 2022 @ 22:00 CET</p> <ul> <li>Minor Enodo updates.</li> </ul>"},{"location":"changelog/#0211","title":"0.2.11","text":"<p>_ Monday 01 Aug 2022 @ 21:00 CET</p> <ul> <li>Added Enodo.</li> <li>No more Guest probes.</li> </ul>"},{"location":"changelog/#0210","title":"0.2.10","text":"<p>_ Friday 15 Jul 2022 @ 13:00 CET</p> <ul> <li>Improved DNS probe dialog.</li> <li>Removed Lift, SQL SSH, VmwareGuest, WinRm and XenGuest probes.</li> <li>Added feedback for failed reports.</li> <li>Fixed adding a user with same email address but different auth provider.</li> <li>Fixed a few spelling mistakes.</li> <li>Added TcpProbe.</li> <li>Added WMI Check for files option using the <code>cimDatafiles</code> class.</li> <li>Added services-name to the windows services widget.</li> </ul>"},{"location":"changelog/#029","title":"0.2.9","text":"<p>_ Tuesday 17 May 2022 @ 17:00 CET</p> <ul> <li>Fix saving the order of metrics in a grid.</li> <li>Changed caption column to description in application widget.</li> </ul>"},{"location":"changelog/#028","title":"0.2.8","text":"<p>_ Monday 16 May 2022 @ 21:00 CET</p> <ul> <li>Added <code>allowRedirects</code> option to the http probe configuration.</li> <li>Added <code>docker</code> icon.</li> <li>Removed <code>text</code> widget.</li> <li>Added Azure probe.</li> <li>Allow <code>agents</code> to be added in InfraSonar.</li> <li>Fix display <code>probe</code> address.</li> <li>Fix filter for assigned alerts.</li> <li>Fix displaying the correct metrics in a widget.</li> <li>Fix application widget by using description field instead of caption.</li> <li>Fix closing a legend when moving mouse focus out the widget.</li> <li>No longer close a widget edit dialog when clicking outside the editor.</li> </ul>"},{"location":"changelog/#027","title":"0.2.7","text":"<p>_ Tuesday 11 Apr 2022 @ 21:00 CET</p> <ul> <li>Upgraded packages.</li> <li>Fixed broken widget when switching between hosts.</li> <li>Enable search on host-name in alerts and closed-alerts page.</li> <li>Added pingProbe and removed psProbe.</li> <li>Added httpProbe.</li> <li>Added nmapProbe (v2.x.x).</li> <li>Fixed broken check interval select box.</li> <li>Fixed broken boolean probe switch.</li> <li>Added probe configuration checks on asset edit.</li> <li>Fixed broken filter component for <code>True</code> values in data table.</li> <li>Re-direct to the requested link after sign-in.</li> <li>Fixed typo in subscriptions.</li> <li>Fixed overlay bug on drop-down-arrows in \"edit widget\" dialog.</li> <li>Fixed bug with \"Add widget\" button when a asset has no label.</li> <li>Changed the no-environment page for new users and added copyright text.</li> <li>Changed the link to \"Contact support\".</li> <li>Fixed bug with resetting the check interval.</li> <li>No longer allow to change dialog tabs while providing a reason for change.</li> <li>Remove missing network probe warning message as this is no longer a best practice.</li> </ul>"},{"location":"changelog/#026","title":"0.2.6","text":"<p>_ Thursday 17 Feb 2022 @ 21:00 CET</p> <ul> <li>Fixed CSV download for InfraSonar Accounts (sysadmin).</li> <li>Add \"show more\" when more text-lines are available in logging message.</li> <li>Fixed missing email address at the no-environments page.</li> <li>Changed menu behavior at probe page (solves highlight last item).</li> <li>Added icon for Pure Storage.</li> <li>Prevent view changes of probe page on refresh.</li> </ul>"},{"location":"changelog/#025","title":"0.2.5","text":"<p>_ Tuesday 01 Feb 2022 @ 21:30 CET</p> <ul> <li>Fixed bug with incognito browsing.</li> </ul>"},{"location":"changelog/#024","title":"0.2.4","text":"<p>_ Tuesday 01 Feb 2022 @ 20:00 CET</p> <ul> <li>Fixed bug in filter host specific closed alerts.</li> <li>Changed ordering on first click in a grid.</li> <li>Fixed bug in host filter on alerts page (not showing the name of the host).</li> <li>Switched to FireBase authentication.</li> <li>Added support for Microsoft Azure (work) accounts.</li> <li>Switched to NPM 8.x for website building.</li> </ul>"},{"location":"changelog/#023","title":"0.2.3","text":"<p>_ Wednesday 12 Jan 2022 @ 22:00 CET</p> <ul> <li>Fixed bug with filter selection (not visible) in grid.</li> <li>Fixed bug with user container view when having no users.</li> <li>Fixed minor widget editor bugs.</li> <li>Changed filter and sort icon appearance to make active filter or order visible.</li> </ul>"},{"location":"changelog/#022","title":"0.2.2","text":"<p>_ Friday 24 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed column sorting on container view.</li> <li>Fixed filter outline with little space to render the filter selection.</li> <li>Fixed missing condition options in expression builder.</li> <li>Added Last seen column to host overview as alternative to the Active column.</li> </ul>"},{"location":"changelog/#021","title":"0.2.1","text":"<p>_ Wednesday 22 Dec 2021 @ 20:00 CET</p> <ul> <li>Added environment to Breadcrumbs bar when the name equals the parent container.</li> <li>Fixed access check for modifying Views and return with an appropriate message if not.</li> <li>Fixed spacing between name and body in an alert message.</li> <li>Removed incorrect icon in front of Agent-core in host overview.</li> </ul>"},{"location":"changelog/#020","title":"0.2.0","text":"<p>_ Tuesday 21 Dec 2021 @ 20:00 CET</p> <ul> <li>Updated UI using the Material design language.</li> <li>Added Light/Dark mode.</li> <li>Added a dashboard which shows useful information and shortcuts.</li> <li>Added the Tasks overview. In this overview, Admins can see all tasks related to the current environment.</li> <li>The Closed alerts and the Search closed alerts pages are merged into a single page.</li> <li>Added the option to \"star\" Views and Environments as favorite.</li> <li>Added a \"Share\" button to Views.</li> <li>Added \"click-on-tag\" for \"copy-to-clipboard\".</li> <li>Merged the container and environment logging into one page.</li> <li>Added a \"Task\" column and a \"Parent\" column to log entries.</li> <li>Replaced the counter with tags in the Conditions page.</li> <li>Authentication provider is now implied when adding a user to a container.</li> <li>Improved feedback when submitting invalid forms.</li> <li>Added specific icons to all Hosts.</li> <li>Added \"No environments found\" screen, for users without container access.</li> <li>Added time selection to the statistics page.</li> <li>Added the \"Windows Services\" widget to the Insight page.</li> </ul>"},{"location":"changelog/#01109","title":"0.1.109","text":"<p>_ Tuesday 07 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed API checks.</li> </ul>"},{"location":"changelog/#01108","title":"0.1.108","text":"<p>_ Monday 29 Nov 2021 @ 20:00 CET</p> <ul> <li>Enable <code>changed</code> option for boolean and timestamp type.</li> <li>Removed CRM from InfraSonar.</li> </ul>"},{"location":"changelog/#01107","title":"0.1.107","text":"<p>_ Saturday 13 Nov 2021 @ 14:00 CET</p> <ul> <li>Critical update: <code>aiogcd</code>.</li> </ul>"},{"location":"changelog/#01106","title":"0.1.106","text":"<p>_ Friday 12 Nov 2021 @ 20:00 CET</p> <ul> <li>Collapsible raster on double mouse click.</li> <li>Added audit logging to re-discover changes on a host.</li> <li>Fixed bug with selecting a time range within a modal.</li> <li>Fixed socket message on re-connect.</li> <li>Added search in my alerts view.</li> <li>Prevent inserting invalid metric info.</li> </ul>"},{"location":"changelog/#01105","title":"0.1.105","text":"<p>_ Tuesday 12 Oct 2021 @ 20:00 CET</p> <ul> <li>Log tasks using the user who initiated the task.</li> <li>Return the taskId when creating a task using the API.</li> <li>Send an email to the user when a schedules task has failed.</li> </ul>"},{"location":"changelog/#01104","title":"0.1.104","text":"<p>_ Monday 13 Sep 2021 @ 20:00 CET</p> <ul> <li>Added Id column to environment overview page.</li> <li>Added /api/environments API call.</li> <li>Added support for custom time zone per environment.</li> <li>Fixed bug with assigned alerts for users without key string.</li> </ul>"},{"location":"changelog/#01103","title":"0.1.103","text":"<p>_ Tuesday 27 Jul 2021 @ 11:00 CET</p> <ul> <li>Loosely name validation for check and type in data query API call.</li> </ul>"},{"location":"changelog/#01102","title":"0.1.102","text":"<p>_ Wednesday 21 Jul 2021 @ 22:00 CET</p> <ul> <li>Added <code>environment</code> and <code>lastSeen</code> columns to <code>api/hosts</code> API call.</li> <li>Added <code>api/labels</code> API call to query for labels in an environment.</li> <li>Fixed bug in widget editor when no hosts are configured.</li> <li>Fixed minor widget bugs (no panel data, handle escape key correctly).</li> </ul>"},{"location":"changelog/#01101","title":"0.1.101","text":"<p>_ Thursday 15 Jul 2021 @ 20:00 CET</p> <ul> <li>Added check for valid labels in API call <code>api/host/label/add</code>.</li> <li>Added filter for empty hosts in view.</li> <li>Added filter item option in widgets.</li> <li>Added the option to exclude host with specified labels from a view.</li> <li>Auto convert <code>int</code> to <code>float</code> for the insert API call.</li> <li>Fixed bug in auto refresh on a view.</li> <li>Fixed bug in validate API metric names.</li> <li>Fixed bug when moving a root widget on a host overview page.</li> <li>Fixed minor bug in side menu on probe pages.</li> <li>Required metrics no longer accept a <code>null</code> value.</li> </ul>"},{"location":"changelog/#01100","title":"0.1.100","text":"<p>_ Tuesday 22 Jun 2021 @ 20:00 CET</p> <ul> <li>Added link to new InfraSonar documentation.</li> <li>Added query data API call and added <code>/api/data</code> to replace <code>api/data/insert</code>.</li> <li>Added support for <code>withLabel</code> and <code>withProbe</code> keys to hosts query API.</li> <li>Replaced <code>accept</code>/<code>reject</code> lists with <code>item (not) in list</code>.</li> <li>Check for int64 when using the API to insert data.</li> <li>Improved error messages when using incorrect API calls.</li> <li>Fixed double boolean naming when choosing a display function.</li> </ul>"},{"location":"changelog/#0199","title":"0.1.99","text":"<p>_ Tuesday 18 Apr 2021 @ 9:00 CET</p> <ul> <li>Fix alerts overview.</li> </ul>"},{"location":"changelog/#0198","title":"0.1.98","text":"<p>_ Monday 17 May 2021 @ 20:00 CET</p> <ul> <li>Added tool for generating encryption keys.</li> <li>Fix ConnectWise member API call.</li> <li>Fix My-Alert view (too many alerts).</li> <li>Fix time range selection on aggregation grid.</li> <li>Sort series on environment in time-series chart.</li> <li>Update: ThingsDB client (fix re-connect Emitter bug).</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0197","title":"0.1.97","text":"<p>_ Tuesday 20 Apr 2021 @ 12:00 CET</p> <ul> <li>Fix alerts.</li> </ul>"},{"location":"changelog/#0196","title":"0.1.96","text":"<p>_ Monday 19 Apr 2021 @ 19:45 CET</p> <ul> <li>Fix charts.</li> </ul>"},{"location":"changelog/#0195","title":"0.1.95","text":"<p>_ Monday 19 Apr 2021 @ 19:00 CET</p> <ul> <li>Improved item-list in expression editor.</li> <li>Fixed number of rows in grid after using a filter (search).</li> <li>Update browser title when opening a view.</li> <li>Fixed CTRL-F when viewing a data-table with search disabled.</li> <li>Added column suppressed label count on conditions page.</li> <li>Fixed bug with auto-refresh.</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0194","title":"0.1.94","text":"<p>_ Wednesday 7 Apr 2021 @ 15:30 CET</p> <ul> <li>Fixed ConnectWise manage bug, maximum summary length.</li> </ul>"},{"location":"changelog/#0193","title":"0.1.93","text":"<p>_ Tuesday 6 Apr 2021 @ 20:00 CET</p> <ul> <li>Added API route for posting InfraSonar (host) data.</li> <li>Added API routes for controlling metadata.</li> <li>Added derived metric option.</li> </ul>"},{"location":"changelog/#0192","title":"0.1.92","text":"<p>_ Monday 15 Mar 2021 @ 20:00 CET</p> <ul> <li>Fixed check for valid hostUuids in API handler.</li> <li>Select current user as default owner for an alert.</li> </ul>"},{"location":"changelog/#0191","title":"0.1.91","text":"<p>_ Wednesday 24 Feb 2021 @ 20:00 CET</p> <ul> <li>Allow ticket in CWM without owner.</li> <li>Update API documentation.</li> </ul>"},{"location":"changelog/#0190","title":"0.1.90","text":"<p>_ Tuesday 23 Feb 2021 @ 20:00 CET</p> <ul> <li>Added ConnectWise Manage support.</li> <li>Added environment widget for installed software on Windows.</li> <li>Added option to select a time range for the aggregation grid widget.</li> <li>Fixed bug in top menu after window resize.</li> </ul>"},{"location":"changelog/#0189","title":"0.1.89","text":"<p>_ Thursday 14 Jan 2021 @ 20:00 CET</p> <ul> <li>Added channels column on labels overview page.</li> <li>Added item (not) in list expression to replace black/white list.</li> <li>Added option to accept or reject specific conditions for DutyCalls.</li> <li>Added option to show/hide self signed certificates.</li> <li>Added option to sort on environemt in a gid widget.</li> <li>Added search box to certificate widget.</li> <li>Auto-complete default probe address unless changed by the user.</li> <li>Changed export to CSV for time and age values.</li> <li>Prevent saving conditions with empty expressions.</li> </ul>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#authentication","title":"Authentication","text":"<p>The authentication scheme that the InfraSonar API makes use of is \"Bearer authentication\".</p>"},{"location":"api/authentication/#bearer-authentication","title":"Bearer Authentication","text":"<p>Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name \u201cBearer authentication\u201d can be understood as \u201cgive access to the bearer of this token.\u201d The client must send this token in the Authorization header when making requests to the InfraSonar API:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"api/authentication/#creating-a-token","title":"Creating a token","text":"<p>Infrasonar supports two types of tokens:</p> User tokens <p>User tokens are bound to an user and can be used to automated actions as the user issuing the token.</p> <p>Warning</p> <p>This token has the same privileges as the user!</p> <p>User can be valuable for scripts or integrations that require access to multiple containers.</p> Container tokens <p>Container tokens can be used to give granular access to a specific container.</p>"},{"location":"api/authentication/#user-tokens","title":"User tokens","text":"<p>Follow these steps below to create and add a token to your user account.</p> <ol> <li>Open the \"My access\" dialog by clicking on the My access button in the account menu.    </li> <li>Navigate to the tokens tab and click on the + button.    </li> <li>Enter a useful description and click on the Create button to add the token to your account.</li> </ol>"},{"location":"api/authentication/#container-tokens","title":"Container tokens","text":"<p>Tip</p> <p>We strongly suggest setting up separate tokens when possible.</p> <p>Container tokens are also required for agentcore and agent authentication.</p> <ol> <li>Navigate to the container you want to create a token for.</li> <li>Click the tokens icon  in the left hand menu.</li> <li>Click the Add token button.</li> <li>Give the token a identifiable name and provide just enough accessobserve we added some shorcuts to create access tokens for agentcores and probes</li> <li>Click Save, enter a reason and click confirm</li> <li>Reopen the just created token and copy the ID.</li> </ol> <p>Rules</p> <ul> <li>User who have the de <code>container Access</code> flag set can create container tokens.</li> <li>A user can not grant more access permissions to a token then he or she already has.</li> </ul>"},{"location":"api/ids/","title":"ID's","text":""},{"location":"api/ids/#ids","title":"ID's","text":"<p>InfraSonar uses ID's to identify:</p> <ul> <li>Assets</li> <li>Conditions</li> <li>Containers</li> <li>Labels</li> </ul>"},{"location":"api/ids/#figuring-out-ids","title":"Figuring out ID's","text":""},{"location":"api/ids/#asset-id","title":"Asset ID","text":"<ol> <li>Navigate to the container to which the asset belongs.</li> <li>Open the asset overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The asset ID is now visible in the most left hand column.</li> </ol> <p>Query asset ID using our API</p> <p>Asset ID's can be retrieved using our API</p>"},{"location":"api/ids/#condition-id","title":"Condition ID","text":"<ol> <li>Navigate to the container to which the condition belongs.</li> <li>Open the condtions overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The condition ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/ids/#container-id","title":"Container ID","text":"<ol> <li>Open the containers view.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The container ID is now visible in the most left hand column.</li> </ol> <p>Query container ID using our API</p> <p>Container ID's can be retrieved using our API</p>"},{"location":"api/ids/#label-id","title":"Label ID","text":"<ol> <li>Navigate to the container to which the label belongs.</li> <li>Open the label overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The label ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/overview/","title":"Overview","text":"<p>The InfraSonar API is used for accessing and manipulating data within InfraSonar.</p> <p>InfraSonar agents and services use the API to bring data into the platform while automation solutions such as Ansible and Salt can be used to query data but also change modes to avoid getting notified while automation tasks are performing maintenance.</p> <p>The API is also used by InfraSonar ready to run integrations</p>"},{"location":"api/alert/query/","title":"Query alert","text":"<p><code>GET</code>/alert/&lt;alertKs&gt;?fields=...&amp;actions=...</p>"},{"location":"api/alert/query/#description","title":"Description","text":"<p>Query alert details. This API call will work for both an open and closed alert.</p>"},{"location":"api/alert/query/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>actions</code> none Action fields. If at least one field is given, the result will include \"actions\" with an array of action objects (see Actions below for all available action fields)."},{"location":"api/alert/query/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner. <code>closedTimestamp</code> integer/null Unix timestamp in seconds when the alert was closed or null if not closed."},{"location":"api/alert/query/#actions","title":"Actions","text":"Action field Return type Description <code>kind</code> string One of: <code>Assign</code>, <code>Comment</code>, <code>IntegrationCall</code>, <code>Close</code>, <code>AutoClose</code>, <code>IndirectClose</code> <code>timestamp</code> integer Unix timestamp in seconds. <code>data</code> object/null Additional data object."},{"location":"api/alert/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or action. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Alert not found."},{"location":"api/alert/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/alert/xxx?actions=kind,timestamp,data' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"timestamp\": 1667511262,\n\"lastMessage\": \"Last message of the alert\",\n\"lastSeverity\": 3,\n\"listTimestamp\": 1667511523,\n\"ownerId\": 123,\n\"closedTimestamp\": null,\n\"actions\": [\n{\n\"kind\": \"Assign\",\n\"timestamp\": 1667511469,\n\"data\": {\n\"userId\": 123,\n\"ownerId\": 123,\n\"message\": \"Alert assigned to me!\"\n}\n}\n]\n}\n</code></pre></p>"},{"location":"api/asset/add-label/","title":"Add label to asset","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/add-label/#description","title":"Description","text":"<p>Add a label to an asset. Success (204) is also returned when the label was already assigned to the asset.</p>"},{"location":"api/asset/add-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/add-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/add-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/add-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/add-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/label/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/insert-check-data/","title":"Insert check data","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;</p>"},{"location":"api/asset/insert-check-data/#description","title":"Description","text":"<p>Insert check data.</p>"},{"location":"api/asset/insert-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/insert-check-data/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/insert-check-data/#body","title":"Body","text":"Param Type Required Description <code>data</code> object Yes Object with check data. <code>version</code> string Yes Version of the collector. <code>runtime</code> float No Time it took for the check to run in seconds. <code>timestamp</code> integer No Unix timestamp in seconds. If omitted, InfraSonar will set the timestamp for the check data."},{"location":"api/asset/insert-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>INSERT_CHECK_DATA</code>). <code>404</code> Asset or collector or check not found. <code>409</code> Collector is not assigned to the asset. <code>413</code> Body size too large (maximum 500 KB)."},{"location":"api/asset/insert-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/collector/docker/check/network' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"data\": {\n        \"networks\": [\n            {\n                \"name\": \"myNetwork\",\n                \"ipAddress\": \"1.2.3.4\"\n            }\n        ]\n    },\n    \"version\": \"0.1.0\"\n}'\n</code></pre> In this example, \"docker\" is the collector, \"network\" the check, \"networks\" a type, \"name\" is a required metric and \"ipAddress\" is a metric.</p>"},{"location":"api/asset/query-alerts/","title":"Query asset alerts","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/alerts?fields=...</p>"},{"location":"api/asset/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given asset.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/asset/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/asset/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/asset/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123/alerts?fields=ks,message,severity,ownerId' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"ownerId\": null\n}\n]\n</code></pre></p>"},{"location":"api/asset/query-check-data/","title":"Query check data","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;?raw=false</p>"},{"location":"api/asset/query-check-data/#description","title":"Description","text":"<p>Query check data. The result might be <code>null</code> when both the collector and check exist, but no data for the given asset exists. If only the framework is <code>null</code>, then the check is enabled for the asset but no data is received (yet).</p>"},{"location":"api/asset/query-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/query-check-data/#query-parameters","title":"Query parameters","text":"Param Default Description <code>raw</code> <code>false</code> Either <code>true</code> or <code>false</code>. When <code>false</code> the display function is used to format the values and if <code>true</code>, the raw values are returned."},{"location":"api/asset/query-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid value for raw query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset, collector or check not found."},{"location":"api/asset/query-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123/collector/ping/check/ping' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"data\": {\n\"icmp\": [\n{\n\"address\": \"192.168.1.2\",\n\"maxTime\": \"1 ms\",\n\"name\": \"ping\",\n\"count\": \"5\",\n\"dropped\": \"0\",\n\"minTime\": \"165 \u03bcs\"\n}\n]\n},\n\"framework\": {\n\"duration\": 4.015371322631836,\n\"timestamp\": 1673471283,\n\"prev\": {\n\"timestamp\": 1673470983\n}\n}\n}\n</code></pre></p> <p>In this example, \"ping\" is a collector, \"ping\" a check, \"icmp\" a type and \"name\", address, maxTime etc, are the metrics.</p>"},{"location":"api/asset/query-id/","title":"Query asset Id","text":"<p><code>GET</code> /asset/&lt;assetName&gt;/id</p>"},{"location":"api/asset/query-id/#description","title":"Description","text":"<p>Query an asset Id by name. This route only works with a container token.</p> <p>Removed assets (assets in trash) are ignored and will not be found using this API call.</p>"},{"location":"api/asset/query-id/#path-parameters","title":"Path parameters","text":"Param Description <code>assetName</code> Asset name."},{"location":"api/asset/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>). <code>404</code> No asset with the given name is found in the container. <code>409</code> Multiple assets with the same name are found within the container."},{"location":"api/asset/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/my-asset.local/id' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"assetId\": 123\n}\n</code></pre></p>"},{"location":"api/asset/query/","title":"Query asset","text":"<p><code>GET</code>/asset/&lt;assetId&gt;?fields=...</p>"},{"location":"api/asset/query/#description","title":"Description","text":"<p>Query asset details.</p>"},{"location":"api/asset/query/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields)."},{"location":"api/asset/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id. <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids."},{"location":"api/asset/query/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/asset/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"id\": 123,\n\"name\": \"my-host.local\",\n\"kind\": \"Asset\",\n\"description\": \"My host\",\n\"mode\": \"normal\",\n\"labels\": [456, 789]\n}\n</code></pre></p>"},{"location":"api/asset/remove-collector/","title":"Remove collector from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/remove-collector/#description","title":"Description","text":"<p>Remove a collector from an asset. Success (204) is also returned when the collector was not attached to the asset.</p>"},{"location":"api/asset/remove-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/remove-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/remove-collector/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X DELETE 'https://api.infrasonar.com/asset/123/collector/docker' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/remove-label/","title":"Remove label from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/remove-label/#description","title":"Description","text":"<p>Remove a label from an asset. Success (204) is also returned when the label was not assigned to the asset.</p>"},{"location":"api/asset/remove-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/remove-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/remove-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X DELETE 'https://api.infrasonar.com/asset/123/label/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/set-description/","title":"Set asset description","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/description</p>"},{"location":"api/asset/set-description/#description","title":"Description","text":"<p>Set the asset description. Success (204) is also returned when the asset description has not changed.</p>"},{"location":"api/asset/set-description/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-description/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-description/#body","title":"Body","text":"Param Type Required Description <code>description</code> string Yes Asset description."},{"location":"api/asset/set-description/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-description/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/description' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"description\": \"This is cool asset!\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-kind/","title":"Set asset kind","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/kind</p>"},{"location":"api/asset/set-kind/#description","title":"Description","text":"<p>Set the asset kind. Success (204) is also returned when the asset kind remains unchanged.</p>"},{"location":"api/asset/set-kind/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-kind/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-kind/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes Asset kind. See table below for all available kinds."},{"location":"api/asset/set-kind/#kind","title":"Kind","text":"Logo Name <code>Asset</code> (default) <code>APC</code> <code>Apple</code> <code>Azure</code> <code>Citrix</code> <code>Dell</code> <code>DNS</code> <code>Docker</code> <code>Eaton</code> <code>Firewall</code> <code>FreeBSD</code> <code>HP</code> <code>Linux</code> <code>NetApp</code> <code>PaloAlto</code> <code>PureStorage</code> <code>Supermicro</code> <code>Switch</code> <code>Synology</code> <code>VMware</code> <code>Website</code> <code>Windows</code>"},{"location":"api/asset/set-kind/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-kind/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/kind' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"kind\": \"Linux\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-mode/","title":"Set asset mode","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/mode</p>"},{"location":"api/asset/set-mode/#description","title":"Description","text":"<p>Set the asset mode. Success (204) is also returned when the asset was already in the desired mode.</p>"},{"location":"api/asset/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/asset/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-name/","title":"Set asset name","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/name</p>"},{"location":"api/asset/set-name/#description","title":"Description","text":"<p>Set the asset name. Success (204) is also returned when the asset name has not been changed.</p>"},{"location":"api/asset/set-name/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-name/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-name/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Asset name."},{"location":"api/asset/set-name/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-name/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/name' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"name\": \"This is cool asset!\"\n}'\n</code></pre></p>"},{"location":"api/asset/upsert-collector/","title":"Upsert collector to asset","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/upsert-collector/#description","title":"Description","text":"<p>Add or configure a collector on an asset. If the collector is already attached to the asset, the configuration will be updated unless no configuration is provided in the body.</p>"},{"location":"api/asset/upsert-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/upsert-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/upsert-collector/#body","title":"Body","text":"Param Type Required Description <code>config</code> Object Depends Configuration of the collector. <p>A body might be required for some collectors. For most collectors the <code>config</code> field is optional.</p>"},{"location":"api/asset/upsert-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/upsert-collector/#example","title":"Example","text":"<p>Curl request: (no config required for docker agent) <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/collector/docker' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/create-asset/","title":"Create asset","text":"<p><code>POST</code> /container/&lt;containerId&gt;/asset</p>"},{"location":"api/container/create-asset/#description","title":"Description","text":"<p>Create a new asset.</p> <p>Duplicated asset names are allowed although not recommended.</p>"},{"location":"api/container/create-asset/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/create-asset/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-asset/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Name of the asset."},{"location":"api/container/create-asset/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/create-asset/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/asset' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"name\": \"my-host.local\"\n}'\n</code></pre></p> <p>Response: <pre><code>{\n\"assetId\": 123\n}\n</code></pre></p>"},{"location":"api/container/purge-notifications/","title":"Purge notifications","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-notifications</p>"},{"location":"api/container/purge-notifications/#description","title":"Description","text":"<p>Purge notifications by notification kind.</p>"},{"location":"api/container/purge-notifications/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-notifications/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-notifications/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes One of <code>ConnectionStatus</code>, <code>ConnectionTimeDelta</code>, <code>ProbeVersion</code>, <code>ProbeMissing</code>, <code>ProbeTimeDelta</code>, <code>ProbeNoHeartbeat</code>, <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code>, <code>CheckInvalidData</code> or <code>ConditionError</code>."},{"location":"api/container/purge-notifications/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/purge-notifications/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/purge-notifications' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"kind\": \"ConnectionStatus\"\n}'\n</code></pre></p>"},{"location":"api/container/purge-time-series/","title":"Purge time-series","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-time-series</p>"},{"location":"api/container/purge-time-series/#description","title":"Description","text":"<p>Purge dead time-series. Time series are considered dead if they didn't got any new data for a period of time. This period must be given in weeks.</p>"},{"location":"api/container/purge-time-series/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-time-series/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-time-series/#body","title":"Body","text":"Param Type Required Description <code>weeks</code> integer Yes Integer value between 1 and 999 (recommended: 5 weeks or more)."},{"location":"api/container/purge-time-series/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>PURGE_TIME_SERIES</code>). <code>404</code> Container not found."},{"location":"api/container/purge-time-series/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/purge-time-series' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"weeks\": 5\n}'\n</code></pre></p> <p>Response: <pre><code>{\n\"purgedTimeSeries\": 12345\n}\n</code></pre></p>"},{"location":"api/container/query-alerts/","title":"Query container alerts","text":"<p><code>GET</code> /container/&lt;containerId&gt;/alerts?fields=...</p>"},{"location":"api/container/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given container.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/container/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/container/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/container/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/alerts?fields=ks,message,severity,ownerId' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"ownerId\": null\n}\n]\n</code></pre></p>"},{"location":"api/container/query-assets/","title":"Query container assets","text":"<p><code>GET</code> /container/&lt;containerId&gt;/assets?fields=...</p>"},{"location":"api/container/query-assets/#description","title":"Description","text":"<p>Query all assets for a given container. (removed assets are not included).</p>"},{"location":"api/container/query-assets/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-assets/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>id</code> Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields). <code>kind</code> none Only assets with the given kind (e.g kind=Windows). <code>not-kind</code> none Only assets with another kind than the given kind (e.g not-kind=Asset). <code>mode</code> none Only assets with the given mode (e.g mode=normal). <code>not-mode</code> none Only assets with another mode than the given mode (e.g not-mode=disabled). <code>collector</code> none Only assets with the given collector (e.g collector=tcp). <code>not-collector</code> none Only assets without the given collector (e.g not-collector=wmi). <code>label</code> none Only assets with the given label Id (e.g label=123). <code>not-label</code> none Only assets without the given label Id (e.g not-label=456)."},{"location":"api/container/query-assets/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id (Equal to containerId). <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids."},{"location":"api/container/query-assets/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/container/query-assets/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-assets/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/assets?fields=id,name,mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"id\": 123,\n\"name\": \"my-host.local\",\n\"mode\": \"normal\"\n}\n]\n</code></pre></p>"},{"location":"api/container/query-collectors/","title":"Query container collectors","text":"<p><code>GET</code> /container/&lt;containerId&gt;/collectors?fields=...</p>"},{"location":"api/container/query-collectors/#description","title":"Description","text":"<p>Query all collectors for a given container. (only enabled collectors are included).</p>"},{"location":"api/container/query-collectors/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-collectors/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>key</code> Fields to return (see fields below for all available fields). <code>options</code> none Option fields. If at least one field is given, the result will include \"options\" with an array of option objects (see Options below for all available option fields)."},{"location":"api/container/query-collectors/#fields","title":"Fields","text":"Field Return type Description <code>key</code> string Collector Id. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>info</code> string Collector info. <code>min-version</code> string Minimal required version for the collector."},{"location":"api/container/query-collectors/#options","title":"Options","text":"Option field Return type Description <code>key</code> string Option key. <code>name</code> string Option name. <code>info</code> string Option info. <code>type</code> string One of <code>Bool</code>, <code>Int</code>, <code>Float</code>, <code>String</code>, <code>ListBool</code>, <code>ListInt</code>, <code>ListFloat</code> or <code>ListString</code>. <code>default</code> any Default value (The default value is not guaranteed to pass the validation function)."},{"location":"api/container/query-collectors/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-collectors/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/collectors?fields=key,kind&amp;options=key,type,default' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"key\": \"wmi\",\n\"kind\": \"probe\",\n\"options\": [\n{\n\"key\": \"address\",\n\"type\": \"String\",\n\"default\": \"\",\n}\n]\n}\n]\n</code></pre></p>"},{"location":"api/container/query-id/","title":"Query container Id","text":"<p><code>GET</code> /container/id</p>"},{"location":"api/container/query-id/#description","title":"Description","text":"<p>Query a container Id by token. This route only works with a container token.</p>"},{"location":"api/container/query-id/#path-parameters","title":"Path parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>)."},{"location":"api/container/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/id' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"containerId\": 123\n}\n</code></pre></p>"},{"location":"api/container/query/","title":"Query container","text":"<p><code>GET</code>/container/&lt;containerId&gt;?fields=...</p>"},{"location":"api/container/query/#description","title":"Description","text":"<p>Query container details.</p>"},{"location":"api/container/query/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Container Id. <code>name</code> string Container name. <code>timezone</code> string Container time-zone. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/container/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"id\": 123,\n\"mode\": \"normal\",\n\"name\": \"My Container\",\n\"timezone\": \"Europe/Amsterdam\"\n}\n</code></pre></p>"},{"location":"api/container/set-mode/","title":"Set container mode","text":"<p><code>PATCH</code> /container/&lt;containerId&gt;/mode</p>"},{"location":"api/container/set-mode/#description","title":"Description","text":"<p>Set the container mode. Success (204) is also returned when the container was already in the desired mode.</p>"},{"location":"api/container/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/container/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found. <code>409</code> Too many open alerts. (mode \"normal\" is only allowed with less than 500 open alerts)"},{"location":"api/container/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/container/123/mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/cwm/set-cwm/","title":"Set ConnectWise Manage","text":"<p><code>POST</code> /container/&lt;containerId&gt;/set-cwm</p>"},{"location":"api/cwm/set-cwm/#description","title":"Description","text":"<p>This API call can be used to create a mapping between a ConnectWise Manage company Id and an InfraSonar container. The ConnectWise Manage add-on is required, contact InfraSonar for more information.</p>"},{"location":"api/cwm/set-cwm/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/cwm/set-cwm/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/cwm/set-cwm/#body","title":"Body","text":"Param Type Required Description <code>companyId</code> integer/null Yes Company Id used by ConnectWise Manage to link to the container. If <code>null</code>, CWM will be disabled for the container."},{"location":"api/cwm/set-cwm/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found. <code>409</code> ConnectWise Manage add-on is not available for the container."},{"location":"api/cwm/set-cwm/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/set-cwm' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"companyId\": 123\n}'\n</code></pre></p>"},{"location":"api/examples/powershell/","title":"Powershell","text":"<p> Under construction </p>"},{"location":"api/label/query/","title":"Query label","text":"<p><code>GET</code>/label/&lt;labelId&gt;?fields=...</p>"},{"location":"api/label/query/#description","title":"Description","text":"<p>Query label details.</p>"},{"location":"api/label/query/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/label/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Label Id. <code>name</code> string Label name. <code>color</code> string One of <code>Steel</code>, <code>Olive</code>, <code>Mauve</code>, <code>Emerald</code>, <code>Orange</code>, <code>Magenta</code> or <code>InfraSonarBlue</code>. <code>description</code> string Label description."},{"location":"api/label/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Label not found."},{"location":"api/label/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/label/123?fields=name,color' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"name\": \"windows\",\n\"color\": \"InfraSonarBlue\"\n}\n</code></pre></p>"},{"location":"documentation/application/","title":"InfraSonar web application","text":"<p>The InfraSonar front end is accessed using any modern browser.</p> <ul> <li> Dashboard</li> <li> Environments</li> <li> Home</li> <li> Conditions</li> <li> Labels</li> <li>group-work</li> <li> Accounts</li> <li>: Tasks</li> </ul>"},{"location":"documentation/application/agentcores/","title":"Agentcores","text":""},{"location":"documentation/application/agentcores/#agentcore","title":"Agentcore","text":"<p>The Agentcore orchestrates our probes and is responsible for scheduling checks. During the startup sequence of a probe, it will \u201c announce\u201d itself to the Agentcore.</p> <p>The Agentcore also acts as a communication gateway. Data retrieved by the probes is sent to the InfraSonar cloud platform via the Agentcore.</p> <pre><code>graph LR\n  probe[Probe] --&gt; | TCP 8750 | Agentcore[Agentcore] --&gt; | HTTPS 443 | infrasonarcloud[InfraSonar Cloud Platform];</code></pre> <p>Because probes usually run in the same Docker network as the Agentcore, they can easily connect to it.</p>"},{"location":"documentation/application/agentcores/#features","title":"Features","text":""},{"location":"documentation/application/agentcores/#resumable-operation","title":"Resumable operation","text":"<p>If an agentcore is shutdown properly a list of assets and a check result queue are saved on disk. Given the agentcore starts and it can't connect to the InfraSonar cloud platform the list of saved assets will be used to resume operations. Check results up to a maximum of 100.000 packages will be stored in a queue</p>"},{"location":"documentation/application/agentcores/#multiple-agentcores","title":"Multiple agentcores","text":"<p>InfraSonar supports multiple agentcores within a monitored environment. Deploying multiple agentcores can be useful in spreading the network load, accommodate for network segmentation, and supporting large-scale implementations.</p> <p>To support network segmentation, assets can be assigned to a zone. When this zone also has an agentcore assigned its assets will automatically be monitored using the agentcores in this zone.</p> <p>When you deploy multiple agentcores in a zone, assets will be evenly distributed between all agentcores in this zone..</p> <p>No automagic failover</p> <p>If an agentcore fails it's role will not automatically be taken over by another agentcore. To accomplish this, the failing agentcore needs to be removed by an InfraSonar admin.</p>"},{"location":"documentation/application/agentcores/#operational","title":"Operational","text":""},{"location":"documentation/application/agentcores/#removing-an-agentcore","title":"Removing an Agentcore","text":"<p>When an Agentcore is decommissioned, all hosts monitored by are automatically transferred to other agentcores in the configured zone.</p>"},{"location":"documentation/application/alerts/","title":"Alerts","text":""},{"location":"documentation/application/alerts/#alerts","title":"Alerts","text":"<p>Alerts are raised by conditions using the <code>return</code> statement in our condition edition.</p> <p>Using rules it is possible to route the alert to email or DutyCalls.</p>"},{"location":"documentation/application/alerts/#viewing-alerts","title":"Viewing alerts","text":"<p>When you are in a container view (1) you can view the alerts and notifications in the  Alerts &amp; Notifications page (2)</p> <p></p> <p>This view shows:</p> <ul> <li>Open alerts (3) </li> <li>Closed alerts (4)</li> <li>Notifications (5)</li> </ul>"},{"location":"documentation/application/alerts/#open-alerts","title":"Open alerts","text":"<p>The open alerts (3) pane shows a list (6) of all open alerts and its status.</p> <p></p> <p>When you click the show details button  the details pane opens.</p> <p></p> <ol> <li>Add message, allows you to add a message to the alert; this might be useful to inform coworkers.</li> <li>Assign alert, allows you to assign the alert to yourself or another member of this container.</li> <li>Close alert, closes the alert; when the issue is not resolved, the issue is reopened and automatically assigned to the user who closed the alert.</li> <li>Refresh, refreshes the alert pane.</li> </ol>"},{"location":"documentation/application/alerts/#closed-alerts","title":"Closed alerts","text":"<p>The closed alerts pane (4) shows a list of closed alerts.</p>"},{"location":"documentation/application/alerts/#notifications","title":"Notifications","text":"<p>The closed alerts pane (5) shows a list of all open notifications (6); see our detailed notification section for more information.</p>"},{"location":"documentation/application/alerts/#managing-alerts","title":"Managing alerts","text":""},{"location":"documentation/application/alerts/#closing-alerts","title":"Closing alerts","text":"<p>There are three ways an alert gets closed:</p> <ol> <li>User close, an end users closed the alert;</li> <li>auto close, the condition is configured to close the alert if the issue is resolved;</li> <li>indirect close, the relation between the condition and asset is removed:<ol> <li>When the asset is removed from the condition (e.g. removing the label applying the condition);</li> <li>When the check triggering the condition is disabled;</li> <li>When the asset is removed.</li> </ol> </li> </ol> <p>Auto close caveat</p> <p>it is possible that an auto close fails when the item triggering the alert no longer exists upon a new check result. This can happen for example when you create a condition on cpu usage in a list of processes, if you then kill the process InfraSonar will never see this item again. When this happens you need to close the alert manually.</p>"},{"location":"documentation/application/assets/","title":"Assets","text":""},{"location":"documentation/application/assets/#assets","title":"Assets","text":"<p>Assets are in essence the monitored objects in an InfraSonar implementation. Assets can be IT components such as routers, switches, servers etc but can easily also consists of any other device which can be monitored such as elevators , IOT devices , etc. </p>"},{"location":"documentation/application/assets/#add-asset","title":"Add asset","text":"<p>When you are in the assets view you can add a new asset using the Add asset button.</p> <p> </p> InfraSonar add asset"},{"location":"documentation/application/assets/#asset-configuration","title":"Asset configuration","text":"InfraSonar add asset details <p>Configuring an asset involves the following steps:</p> <ol> <li>Enter an asset name. We strongly suggest entering the correct hostname in FQDN format here, but do not enforce this.</li> <li>Enter an optional description.</li> <li>Select the mode. This is usually normal, see our mode documentation for more details</li> <li>Select the zone.    This is usually 0, see our zone documentation for more details</li> <li>Select the collectors you want to use.</li> <li>Enter the correct labels for this asset.</li> </ol> <p>Advanced asset configuration and credentials</p> <p>Some collectors require a more advanced configuration or credentials to be setup on the appliance running the collector. See our credentials section if this applies to your setup.</p>"},{"location":"documentation/application/assets/#adding-multiple-assets","title":"Adding multiple assets","text":"<p>When there is a need to add multiple assets at once we suggest using our api</p>"},{"location":"documentation/application/conditions/","title":"Conditions","text":""},{"location":"documentation/application/conditions/#conditions","title":"Conditions","text":"<p> Under construction </p> <p>Check results sent to the InfraSonar cloud platform are immediately evaluated using the conditions configured for the specific asset. </p> <p>InfraSonar comes with many predefined conditions based on years of experience and best practices.</p> <p>In order to manage conditions you need to have the ContainerAdmin role on the container you want to manage conditions for.</p>"},{"location":"documentation/application/conditions/#managing-condtions","title":"Managing condtions","text":"<p>While our condition editor might feel intimidating at first glance, it is potent. We urge you to look at our predefined conditions for inspiration and a deeper understanding.</p>"},{"location":"documentation/application/conditions/#general-tab","title":"General tab","text":"<p>Name </p> <p>The name you want to use for your condition, we suggest a shot descriptive name.</p> <p>Description</p> <p>use the description to provide a short description of the purpose and usage of the condition.</p> <p>Collector</p> <p>Select the path to the data you want this condition.</p> <p>For probes this is: <code>Collector</code>, <code>Check</code>, <code>Type</code></p> <p>Condition kind</p> <p>We identify three kind of Conditions:</p> Kind Description EXPRESSION Detailed expression used to evaluate the check result. ITEMS MUST EXIST Used to detect items which must exist. ITEMS_MISSING Used to detect items missing compared to the previous check result. <p>Ticks</p> <p>The number of times this condition must be hit in a row before an actual alert will be raised.</p> <p>Note</p> <p>Ticks can not be set for the condition kind <code>ITEMS_MISSING</code> as this compares with a previous check result.</p> <p>Single alert </p> <p>Gathers up all alerts into a single alert per asset. When disabled, each item will be tested and may raise an alert.</p>"},{"location":"documentation/application/conditions/#labels-tab","title":"Labels tab","text":"<p>In this tab you configure for which labels the condition is active.</p>"},{"location":"documentation/application/conditions/#items-tab","title":"Items tab","text":"<p>This tab allows you to set the severity and specify for which items this conditions is a active in case of <code>ITEMS MUST EXIST</code> or which items this condition should exclude in the case of <code>ITEMS_MISSING</code></p>"},{"location":"documentation/application/conditions/#items-must-exist","title":"Items must exist","text":"<p>All items will be checked for existence by the given list or regular expression. </p> <ul> <li>Condition will be executed when added to an asset or when the condition has been changed.</li> <li>Auto-close is always enabled.</li> <li>The item list or regular expression work as \"include\" by the item.name property.</li> <li>When a list is used, all items in the list must exist otherwise the condition is hit.</li> <li>When a regular expression is used, at least one item must match with the given regular expression otherwise the condition is hit.</li> </ul>"},{"location":"documentation/application/conditions/#items-missing","title":"Items missing","text":"<p>All items will be compared towards the previous items. If one (or more) items is missing which is not excluded by either the item list or regular expression, the condition is hit.</p> <ul> <li>Will re-run when added to an asset or when the condition has changed.</li> <li>Open alerts will never auto-close. Note that they can be closed indirectly, for example when the condition or check is removed from an asset.</li> <li>The item list or regular expression work as \"exclude\" by the item.name property.</li> <li>When a list is used, the items in the list will be ignored when missing.</li> <li>When a regular expression is used, an item match will ignore the item when missing.</li> </ul> <p>enodo.metric.upper lower value (+aggregation mix)</p>"},{"location":"documentation/application/conditions/#expression-tab","title":"Expression tab","text":"<p>InfraSonar uses a powerful expression language that allows for precise and tailored conditions.</p> <p>Each item is processed by the given expression. If <code>new</code> is used in the expression, it is best practice not to use <code>return OK</code> in the expression as auto close does not make sense. This is because an item will only be new once. - Condition will be executed when added to an asset or when the condition has been changed, unless <code>prev</code> (previous item) is used in the expression. When <code>prev</code> is used, only when new data is received the condition will evaluate again. - <code>return OK</code>  -&gt; Success, Auto-close open alert if there is one. - <code>return</code> -&gt; Success, Do not auto-close an open alert if there was one. - <code>return ERROR, \"...\"</code> -&gt; return with severity and optional message. (ERROR might be INFO, CRITICAL etc.)</p> <p>Example expression</p> <pre><code>// alert message template\nvar.template = \"\nCertificate almost expires!\nname: @item.name\nexpires in: @item.expiresIn seconds\n\"\n\ncase item.expiresIn &lt; 604_800:  \n    // Certificate will expire in less than 7 days\n    return WARNING, var.template\n\ncase item.expiresIn &lt; 1_209_600:  \n    // Certificate will expire in less than 14 days\n    return NOTICE, var.template\n\ncase \"organisationName=Let's Encrypt\" in item.issuer:\n    // Skip less than 28 days for Let's Encrypt certificates\n    return OK \n\ncase item.expiresIn &lt; 2_419_200:  \n    // Certificate will expire in less than 28 days\n    return INFORMATIONAL, var.template\n\n// this add's autoclose\nreturn OK\n</code></pre>"},{"location":"documentation/application/conditions/#case-statement","title":"case statement","text":"<p>The <code>case</code> statement is</p> <p><code>case new</code></p>"},{"location":"documentation/application/conditions/#return-statement","title":"return statement","text":"<p><code>return &lt;severity&gt;, &lt;message&gt;</code></p> <p>The return statement is used to return the severity and a message.</p> <p><code>return</code> without any parameters is also possible.</p> <p><code>severity</code> </p> Severity Description EMERGENCY System is unusable. ALERT Action must be taken immediately. CRITICAL Critical conditions. ERROR Error conditions. WARNING Warning conditions. NOTICE Normal but significant conditions. INFORMATIONAL Informational. DEBUG Messages that contain information normally of use only when debugging. OK This is an explicit OK which results in an alert auto closing when hit. <p>Info</p> <p>Our severity levels are derived from the Syslog levels, see this Syslog  wikipedia article for additional information.</p> <p><code>message</code></p> <p>The message can be a string message including variable substitution. E.g. <code>My @item.name</code></p>"},{"location":"documentation/application/container/","title":"Containers","text":""},{"location":"documentation/application/container/#infrasonar-containers","title":"InfraSonar containers","text":"<p>InfraSonor containers are a hierarchial setup of you monitored infrastructure.</p> <p>A container can contain monitored assets and/or sub-containers.</p> <p>On the container level an admin can configure authorization, custom labels, and conditions.</p>"},{"location":"documentation/application/container/#hierarchy","title":"Hierarchy","text":""},{"location":"documentation/application/container/#principles","title":"Principles","text":"<ul> <li>Authorization is inherited to \"lower\" containers. Inheritance can be \"broken\" down the chain.</li> <li>Timezones can be configured per container.</li> </ul>"},{"location":"documentation/application/container/#infrasonar-hierarchical-setup","title":"InfraSonar hierarchical setup","text":"<pre><code>graph LR\n  A[InfraSonar] --&gt; B[container];\n  B --&gt;C((assets));\n  A --&gt;D[container];\n  D --&gt;E[container];\n  D --&gt;F[container];\n  E --&gt;G((assets));\n  F --&gt;H((assets));\n  A --&gt;I[container];\n  I --&gt;J((assets));\n  I --&gt;K[container];\n  K --&gt;L[container];\n  L --&gt;N[container];\n  L --&gt;O((assets));\n  N --&gt;S((assets));</code></pre> Hierarchy implementation for a service provider <pre><code>graph LR\n  A[InfraSonar] --&gt; B[service provider];\n  B --&gt; C[internal infrastructure]\n  B --&gt; D[monitoring only]\n  B --&gt; E[managed service]\n  C --&gt; F((assets))\n  D --&gt; customer1[customer 1]\n  D --&gt; customer2[customer 2]\n  customer1 --&gt; I((assets))\n  customer2 --&gt; J((assets))\n  E --&gt; customer3[customer 3]\n  customer3 --&gt; K((assets))\n  E --&gt; customer4[customer 4]\n  customer4 --&gt; L((assets))\n  E --&gt; customer5[customer 5]\n  customer5 --&gt; M[development]\n  customer5 --&gt; N[acceptance]\n  customer5 --&gt; O[production]\n  M --&gt; Q((assets))\n  N --&gt; R((assets))\n  O --&gt; S((assets))</code></pre>"},{"location":"documentation/application/container/#setup-a-new-container","title":"Setup a new container","text":"<p>Note</p> <p>When you are new to InfraSonar and sign in for the first time, you will see the message:</p> <p>Welcome to InfraSonar! It appears that you are not yet a member of an InfraSonar container. If you are a member of an organization that uses InfraSonar, ask for permission from an authorized person to add you to the relevant container. Otherwise, request a free demo via the website!</p> <p>From the container view, you can add a new container.</p> <p> </p> InfraSonar add container <ol> <li>When you are in asset view you can use the child containers button  to switch to container view;</li> <li>Click the add container button;</li> <li>Enter a name for your container;</li> <li>Select the mode, this is usual normal;</li> <li>Select the timezone for this container;</li> <li>CLick save.</li> </ol>"},{"location":"documentation/application/labels/","title":"Labels","text":""},{"location":"documentation/application/labels/#labels","title":"Labels","text":""},{"location":"documentation/application/labels/#purpose","title":"Purpose","text":"<p>Grouping, labels can be added to hosts to group and identify them quickly.</p> <p>Apply conditions, Labels are also used to control which conditions are active.</p> <p>Glue</p> <p>Labels \"glue\" conditions onto hosts.</p> <pre><code>graph LR\n  condition1[Condition] --- label; \n  condition2[Condition] --- label; \n  condition3[Condition] --- label; \n  label{{Label}} --- host1[Host];\n  label --- host2[Host];\n  label --- host3[Host];</code></pre>"},{"location":"documentation/application/labels/#how-to-use","title":"How to use","text":"<p>Labels can be assigned to hosts either by  editing a host or by selecting one or more hosts and using the action menu.</p> <p> </p> Action menu in action"},{"location":"documentation/application/labels/#custom-labels","title":"Custom labels","text":"<p>InfraSonar container admins can create custom labels for a container.</p> <p> </p> InfraSonar add label <p>Pro Tip</p> <p>As must browsers support emoji it is possible to use these in your labels. Examples:</p> <ul> <li>The round pushpin \ud83d\udccd to indicate labels used for locations. <code>\ud83d\udccd InfraSonar HQ</code></li> <li>Bust in Silhouette \ud83d\udc64 to indicate labels used for to indicate who is responsible for an asset. <code>\ud83d\udc64 C.E. Shannon</code></li> </ul> <ol> <li>Navigate to the labels page () in the left navigation drawer;</li> <li>Click the Add label button;</li> <li>Enter a name (1);</li> <li>Pick a color (2):   Steel   Olive   Mauve   Emerald   Orange   Magenta   InfraSonar-blue, (reserved for InfraSonar labels)</li> <li>Enter a description(3).</li> </ol>"},{"location":"documentation/application/labels/#predefined-labels","title":"Predefined labels","text":""},{"location":"documentation/application/modes/","title":"Modes","text":""},{"location":"documentation/application/modes/#modes","title":"Modes","text":"<p>Modes can be used to temporary change the monitoring operation on a container or an asset or group of assets.</p> <p>We identify the following modes within the InfraSonar application:</p> mode description <code>normal</code> normal operations, all conditions are evaluated. <code>maintenance</code> All asset notifications and alert messages suppressed <code>disabled</code> All data send by an agent for this asset is ignored. Any probes / checks configured for this asset are stopped. <p>Modes in day to day operations</p> <p>Modes are a powerful instrument when performing maintenance on assets as it allows on easy way to temporary stop the monitoring avoiding being flood with messages.</p>"},{"location":"documentation/application/modes/#mode-operations","title":"Mode operations","text":""},{"location":"documentation/application/modes/#container","title":"Container","text":"<p>Modes can be set on container level. Effectively changing the mode for all assets in the container.</p> <p>Changing the mode on a container can be done using our a  schedular or in the  container view.</p>"},{"location":"documentation/application/modes/#asset","title":"Asset","text":"<p>Changing the mode on an asset can be done while editing  an asset or  scheduled</p>"},{"location":"documentation/application/modes/#api","title":"API","text":"<p>It is also possible to change the mode using our API:</p> <ul> <li>Change mode on a asset</li> <li>Change mode on a container</li> </ul>"},{"location":"documentation/application/notifications/","title":"Notifications","text":""},{"location":"documentation/application/notifications/#notifications","title":"Notifications","text":"<p>Notification are used to notify InfraSonar users of issues with the monitoring platform.</p> <p>Notifications offer a clear distinction between actual \"Alerts\" and when monitoring is failing.</p> <p>Notifications auto-close when the issue is resolved, users can't close a notification only the system can once the issue is resolved.  As such all notifications should be handled as an indication that something is wrong with monitoring.</p> <p>Good to known</p> <p>Notifications are not the result of a\u00a0condition. The only notifications which are raised by incoming data, are the check errors. These are not\u00a0conditions\u00a0but errors which directly result in a notification.</p>"},{"location":"documentation/application/rules/","title":"Rules","text":""},{"location":"documentation/application/rules/#rules","title":"Rules","text":"<p>Rules are a great way to configure notifications for end-users.</p> <p>InfraSonor supports the following notification services:</p> <ul> <li>email</li> <li>DutyCalls</li> </ul>"},{"location":"documentation/application/rules/#email","title":"email","text":""},{"location":"documentation/application/rules/#duycalls","title":"DuyCalls","text":""},{"location":"documentation/application/schedule/","title":"Schedule","text":""},{"location":"documentation/application/schedule/#schedule","title":"Schedule","text":"<p>Our schedular allows you to schedule a mode change on a specific time or at specific intervals.</p>"},{"location":"documentation/application/tokens/","title":"Tokens","text":""},{"location":"documentation/application/user_management/","title":"User management","text":""},{"location":"documentation/application/user_management/#user-management","title":"User management","text":""},{"location":"documentation/application/user_management/#authentication","title":"Authentication","text":"<p>We support user authentication using using one of these cloud identities:</p> <ul> <li> GitHub account</li> <li> Microsoft account (this can be a work or personal account)</li> <li> Google account (this can be a personal or Google workspace account)</li> </ul> <p>Tip</p> <p>Users can only be added to our platform if they are \"known\" to us. As such a user should fist authenticate once on our platform and from there on the user can be added to a container.</p>"},{"location":"documentation/application/user_management/#authorization","title":"Authorization","text":"<p>A user's identity can be authorized on a container container using a specific role.</p>"},{"location":"documentation/application/user_management/#authorization-flags","title":"Authorization flags","text":"<code>Alerts can be assigned to this user (\"Is member\")</code> <ul> <li>Allows alerts to be assigned to this user, makes the user \"visible\" for alert assignment.</li> </ul> <code>View</code> <ul> <li>When applied to the root container, this gives sysadmin access;</li> <li>Required for viewing this container.</li> </ul> <code>Billing</code> <ul> <li>Required for viewing the credits tab on this container (only when credits are available on the container).</li> </ul> <code>InsertCheckData</code> <ul> <li>Required for inserting data using the API (used by agents).</li> </ul> <code>AgentcoreConnect</code> <ul> <li>Required for AgentCores to connect to the hub.</li> </ul> <code>AssetManagement</code> <ul> <li>Required for changing the container mode (and/or schedule container mode);</li> <li>Required for changing the asset mode (and/or schedule asset mode);</li> <li>Required for creating new assets;</li> <li>Required for removing assets (including delete from trash);</li> <li>Required for changing asset configuration (including labels and collector related configuration).</li> </ul> <code>AlertAssign</code> <ul> <li>Required for assigning alerts.</li> </ul> <code>AlertChange</code> <ul> <li>Required for closing alerts;</li> <li>Required for adding comments to alerts.</li> </ul> <code>API</code> <ul> <li>Required for any API request.</li> </ul> <code>ContainerManagement</code> <ul> <li>Required for adding child containers to this container;</li> <li>Required for removing this container;</li> <li>Required for renaming this container.</li> </ul> <code>ContainerAdmin</code> <ul> <li>Required for creating/changing/removing labels within this container;</li> <li>Required for creating/changing/removing conditions within this container;</li> <li>Required to create/change/remove a DutyCalls service to this container.</li> </ul> <code>ContainerAccess</code> <ul> <li>Required for managing user access to this container;</li> <li>Required for managing tokens on this container.</li> </ul> <code>CheckManagement</code> <ul> <li>Required for enable/disable/configure checks per collector on assets.</li> </ul> <code>TimeSeriesManagement</code> <ul> <li>Required for enable/disable time-series for this container.</li> </ul> <code>RuleManagement</code> <ul> <li>Required for managing DutyCalls rules on this container;</li> <li>Required for managing Email rules (including rules by other users) on this container.</li> </ul> <code>RuleEmail</code> <ul> <li>Required for creating a personal email rule on this container. (other email rules are only visible when having the admin role)</li> </ul> <code>PurgeTimeSeries</code> <ul> <li>Required for purging dead-time-series within this container.</li> </ul> <code>ViewLog</code> <ul> <li>Required for viewing logging.</li> </ul> <code>ConnectWiseManageAddOn</code> <ul> <li>Required to use the CWM_ADDON on this container; (only if the container has CWM configured).</li> </ul>"},{"location":"documentation/application/zones/","title":"Zones","text":""},{"location":"documentation/application/zones/#zones","title":"zones","text":"<p>When one or more agentcores are configured in the specified zone an asset is bound to an agentcore in this zone. If no agentcores are configured in the specified zone we fall back to any other agent core.</p> <p>This feature can be useful for assets in a dmz or remote networks as it allows to direct probes to a specific zone.</p> <p>For assets being monitored using an agent the zone configuration is purely cosmetic.</p> <p>In the future we might add a link between zones and locations.</p>"},{"location":"documentation/collectors/","title":"Index","text":""},{"location":"documentation/collectors/#collectors","title":"Collectors","text":"<p>InfraSonar collectors collect monitoring data to be parsed by the InfraSonar cloud platform.</p> <p>All our general purpose collectors are available as open-source  on our GitHub  page.</p> <p>Using the provided libraries third parties can easily add additional collectors to our platform.</p>"},{"location":"documentation/collectors/#collection-concepts","title":"Collection concepts","text":"<p>InfraSonar identities three collection concepts to gather data from monitored assets.</p> Agents <p>Agents run autonomously on a monitored asset and send data directly the to InfraSonar platform</p> Probes <p>Probes are most often deployed on an appliance and are orchestrated by an agentcore</p> <p>Probes are typically used for agentless monitoring scenario's.</p> Services <p>Services collect data \"as a service\".</p>"},{"location":"documentation/collectors/agents/","title":"Index","text":""},{"location":"documentation/collectors/agents/#agents","title":"Agents","text":"<p>An InfraSonar agents is an installable software component that autonomously and send the retrieved monitoring data to the InfraSonar platform using the InfraSonar API</p>"},{"location":"documentation/collectors/agents/#available-agents","title":"Available agents","text":"<p> Docker agent</p> <p> Microsoft Windows Agent</p>"},{"location":"documentation/collectors/agents/docker/","title":"Docker","text":""},{"location":"documentation/collectors/agents/docker/#docker","title":"Docker","text":"<p>The Docker-agent is a Docker container that can be used to monitor other Docker containers. The Docker-agent itself runs as a Docker container on the host, which hosts the containers and uses the Unix socket <code>docker.sock</code> to retrieve relevant monitoring data which, is send to the InfraSonar API.</p>"},{"location":"documentation/collectors/agents/docker/#prerequisites","title":"Prerequisites","text":"<ul> <li>The Docker-agent must be able to connect to the InfraSonar API</li> <li>The Docker-agent must be allowed access to the Unix socket <code>docker.sock</code>.</li> <li>The Docker-agent requires a valid token.</li> </ul>"},{"location":"documentation/collectors/agents/docker/#deployment","title":"Deployment","text":"<p>There are multiple scenario's that can be used to deploy the docker agent and it depends on your use case which one would suites best for you.</p> <p>Host network vs bridge network</p> <p>When using a bridge network it is highly recommended to set the container host name using the <code>--hostname</code> / <code>-h</code> flag as this is the name used by the agent to present itself.</p> <p>Upon first run the Docker agents registers itself as an asset in InfraSonar, to ensure reconnection to the same asset an asset-id is stored in <code>/data/.asset.json</code> hence the reason we mount the the <code>/data</code> folder.</p>"},{"location":"documentation/collectors/agents/docker/#docker-command","title":"Docker command","text":"<p>Deploys the docker agent using a bridged network and names the hostname to the system hostname:</p> <pre><code>docker run \\\n--name dockeragent \\\n-h $HOSTNAME \\\n-v infraSonarData:/data \\\n-e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\nghcr.io/infrasonar/docker-agent\n</code></pre> <p>Deploys the docker agent using the host network and thus automatically uses the system hostname:</p> <pre><code>docker run \\\n--name dockeragent \\\n--network host \\\n-v infraSonarData:/data \\\n-e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\nghcr.io/infrasonar/docker-agent\n</code></pre>"},{"location":"documentation/collectors/agents/docker/#docker-compose","title":"docker-compose","text":"<p>You can also add the Docker-agent to your <code>docker-compose.yml</code> file:</p> <pre><code>volumes:\ninfraSonarData:\n\nservices:\ndockeragent:\nnetwork_mode: host\ncontainer_name: dockeragent\nhostname: dockeragent\nrestart: always\nlogging:\noptions:\nmax-size: 5m\nimage: ghcr.io/infrasonar/docker-agent\nenvironment:\nTOKEN: \"&lt;&lt;agent token&gt;&gt;\"\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n- infraSonarData:/data\n</code></pre>"},{"location":"documentation/collectors/agents/microsoft_windows/","title":"Microsoft Windows","text":""},{"location":"documentation/collectors/agents/microsoft_windows/#microsoft-windows-agent","title":"Microsoft Windows agent","text":"<p>The Microsoft Windows agent is under active development.</p> <p>The expected release is Q1 - 2023.</p>"},{"location":"documentation/collectors/probes/","title":"Probes","text":"<p>Probe mission</p> <p>We use open standards and vendor-provided technologies to query controlled systems.</p> <p>Probes are collectors that use open standards or vendor provided methods to retrieve monitoring data from a remote asset.</p> <p>All InfraSonar provided probes are available as  open source on our  GitHub repository as we believe in transparency with regards to data collection and systems access.</p> <p>When a new asset (host) is added and the InfraSonar admin enables a specific probe for this asset, a discovery routine will be started to identify the asset and determine which checks InfraSonar can perform.</p>"},{"location":"documentation/collectors/probes/#deployment","title":"Deployment","text":"<p>Probes are typically deployed using a Docker image running as a Docker container one or more InfraSonar appliances.</p> <p>Upon startup a probe registers itself to the for this probe configured agentcore</p> <p>Because probes usually run in the same Docker network as the agentcore, they can easily connect to it.</p>"},{"location":"documentation/collectors/probes/#configuration","title":"Configuration","text":"<p>As probes are typically deployed using Docker compose, probe behavior, such as setting the log level, can easily be accomplished by environment variables in the coresponding <code>docker-compose.yml</code> file. The usage of this file is outlined here</p>"},{"location":"documentation/collectors/probes/dns/","title":"DNS","text":""},{"location":"documentation/collectors/probes/dns/#dns","title":"DNS","text":"<p>The DNS probe monitors DNS servers and can even monitor changes to specific DNS records.</p>"},{"location":"documentation/collectors/probes/dns/#configuration","title":"Configuration","text":"Property Description DNS Servers DNS servers to query, note all configured DNS servers are queried FQDN FQDN of the DNS record you want to monitor <p>Reverse DNS lookups</p> <p>Using the special <code>.arpa.</code> domain it is possible to perform a reverse DNS lookup. See our PTR section for a detailed explanation and examples.</p>"},{"location":"documentation/collectors/probes/dns/#example-configuration","title":"Example configuration","text":"<ul> <li>DNS servers: <code>8.8.8.8, 8.8.4.4</code></li> <li>FQDN: <code>dns.google.com</code></li> </ul>"},{"location":"documentation/collectors/probes/dns/#check-specifics","title":"Check specifics","text":"<p>We support the DNS record types described in the next paragraphs.</p> <p>Most of the information in this chapter is an extract from this Wikipedia article.</p>"},{"location":"documentation/collectors/probes/dns/#a","title":"A","text":"<p>Address record, List of IPv4 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>185.199.111.153, 185.199.108.153, 185.199.109.153, 185.199.110.153</code>"},{"location":"documentation/collectors/probes/dns/#aaaa","title":"AAAA","text":"<p>IPv6 address record, list of IPv6 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>2606:50c0:8003::153, 2606:50c0:8002::153, 2606:50c0:8001::153, 2606:50c0:8000::153</code>"},{"location":"documentation/collectors/probes/dns/#caa","title":"CAA","text":"<p>Certification Authority Authorization. DNS Certification Authority Authorization, constraining acceptable CAs for a host/domain.</p> <p>CAA record structure: <code>flag</code> <code>tag</code> <code>value</code></p> <code>flag</code> A flags byte which implements an extensible signaling system for future use. As of 2018, only the issuer critical flag has been defined, which instructs certificate authorities that they must understand the corresponding property tag before issuing a certificate. This flag allows the protocol to be extended in the future with mandatory extensions, similar to critical extensions in X.509 certificates. <code>tag</code> <p>One of the following property:</p> <code>issue</code> This property authorizes the holder of the domain specified in associated property value to issue certificates for the domain for which the property is published. <code>issuewild</code> This property acts like issue but only authorizes the issuance of wildcard certificates, and takes precedence over the issue property for wildcard certificate requests. <code>iodef</code> This property specifies a method for certificate authorities to report invalid certificate requests to the domain name holder using the Incident Object Description Exchange Format. As of 2018, not all certificate authorities support this tag, so there is no guarantee that all certificate issuances will be reported. <code>contactemail</code> Increasingly, contact information is not available in WHOIS due to concerns about potential GDPR violations. This property allows domain holders to publish contact information in DNS. <code>contactphone</code> As above, for phone numbers. <code>value</code> The value associated with the chosen property tag. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>0 issue \"pki.goog\"</code>"},{"location":"documentation/collectors/probes/dns/#cname","title":"CNAME","text":"<p>Canonical name record, alias of one name to another.</p> <p>A CNAME lookup returns only one canonical name.</p> <p>Example:</p> FQDN Result <code>docs.infrasonar.com</code> <code>cesbit.github.io.</code>"},{"location":"documentation/collectors/probes/dns/#ds","title":"DS","text":"<p>Delegation signer. The record used to identify the DNSSEC signing key of a delegated zone.</p> <p>DS record structure: <code>Key Tag</code> <code>Algorithm</code> <code>Digest</code> <code>Type</code> <code>Digest</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>9907 8 2 33D13AB164664236CF3EF302E8057AF46FC226AAE2B6A2759E4E80BA AF448970</code>"},{"location":"documentation/collectors/probes/dns/#mx","title":"MX","text":"<p>Mail exchange record, list of mail exchange servers that accept email for a domain.</p> <p>Example output: <code>1 aspmx.l.google.com.,10 alt3.aspmx.l.google.com.,10 alt4.aspmx.l.google.com.,5 alt1.aspmx.l.google.com.,5 alt2.aspmx.l.google.com.</code></p> <p>MX Record</p> <p>An MX record is returned as follows: <code>preference</code> <code>address</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>1 aspmx.l.google.com., 5 alt1.aspmx.l.google.com., 5 alt2.aspmx.l.google.com., 10 alt3.aspmx.l.google.com., 10 alt4.aspmx.l.google.com.</code>"},{"location":"documentation/collectors/probes/dns/#ns","title":"NS","text":"<p>Name server record, Delegates a DNS zone to use the given authoritative name servers.</p> <p>Example: </p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-a1.googledomains.com, ns-cloud-a2.googledomains.com, ns-cloud-a3.googledomains.com, ns-cloud-a4.googledomains.com</code>"},{"location":"documentation/collectors/probes/dns/#ptr","title":"PTR","text":"<p>PTR Resource Record, possible for IP addresses in the format:</p> <p><code>in-addr.arpa</code> is the namespace within <code>.arpa</code> for reverse DNS lookups in IPv4.</p> <p>IPv6</p> <p>IPv6 addresses are constructed differently from IPv4 addresses, and IPv6 PTR records exist in a different namespace within .arpa. IPv6 PTR records are stored under the IPv6 address, reversed and converted into four-bit sections (as opposed to 8-bit sections, as in IPv4), plus \".ip6.arpa\".</p> <p>So <code>2001:4860:4860::8844</code> becomes: <code>4.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code></p> <p>Example:</p> FQDN Result <code>8.8.8.8.in-addr.arpa.</code> <code>dns.google.</code> <code>.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code> <code>dns.google.</code>"},{"location":"documentation/collectors/probes/dns/#srv","title":"SRV","text":"<p>Service locator, generalized service location record, used for newer protocols instead of creating protocol-specific records such as MX.</p> <p>SRV record structure: <code>Priority</code> <code>Weight</code> <code>Port</code> <code>Target</code></p> <code>priority</code> the priority of the target host, lower value means more preferred. <code>weight</code> A relative weight for records with the same priority, higher value means higher chance of getting picked. <code>port</code> the TCP or UDP port on which the service is to be found. <code>target</code> the canonical hostname of the machine providing the service, ending in a dot. <p>Example:</p> FQDN Result <code>_srv._test.test-technology.nl.</code> <code>0 5 5060 srvrecordtest.test-technology.nl.</code>"},{"location":"documentation/collectors/probes/dns/#soa","title":"SOA","text":"<p>Start of [a zone of] authority record. Specifies authoritative information about a DNS zone, including the primary name server, the email of the domain administrator, the domain serial number, and several timers relating to refreshing the zone.</p> <p>SOA record structure: <code>Primary NS</code> <code>Responsible name</code> <code>Serial</code> <code>Refresh</code> <code>Retry</code> <code>Expire</code> <code>Miniumum</code></p> <code>Primary NS</code> Primary master name server for this zone. <code>Responsible name</code> Email address of the administrator responsible for this zone. (As usual, the email address is encoded as a name. The part of the email address before the @ becomes the first label of the name; the domain name after the @ becomes the rest of the name. In zone-file format, dots in labels are escaped with backslashes; thus the email address john.doe@example.com would be represented in a zone file as john.doe.example.com.) <code>Serial</code> Serial number for this zone. If a secondary name server slaved to this one observes an increase in this number, the slave will assume that the zone has been updated and initiate a zone transfer. <code>Refresh</code> Number of seconds after which secondary name servers should query the master for the SOA record, to detect zone changes. Recommendation for small and stable zones: 86400 seconds (24 hours). <code>Retry</code> Number of seconds after which secondary name servers should retry to request the serial number from the master if the master does not respond. It must be less than Refresh. Recommendation for small and stable zones: 7200 seconds (2 hours). <code>Expire</code> Number of seconds after which secondary name servers should stop answering request for this zone if the master does not respond. This value must be bigger than the sum of Refresh and Retry. Recommendation for small and stable zones: 3600000 seconds (1000 hours). <code>Miniumum</code> Used in calculating the time to live for purposes of negative caching. Authoritative name servers take the smaller of the SOA TTL and the SOA MINIMUM to send as the SOA TTL in negative responses. Resolvers use the resulting SOA TTL to understand for how long they are allowed to cache a negative response. Recommendation for small and stable zones: 172800 seconds (2 days). Originally this field had the meaning of a minimum TTL value for resource records in this zone; it was changed to its current meaning by RFC 2308. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-e1.googledomains.com. cloud-dns-hostmaster.google.com. 15 21600 3600 259200 300</code>"},{"location":"documentation/collectors/probes/dns/#best-practices","title":"Best practices","text":""},{"location":"documentation/collectors/probes/dns/#internal-vs-external-response","title":"Internal vs External response","text":"<p>Setup an asset to monitor your internal and external DNS response.</p> <p>This can easily be done by monitoring for example <code>google.com</code> on your internal DNS servers and Google DNS servers, for IPv4: <code>8.8.8.8</code> and/or <code>8.8.4.4</code>  and for IPv6: <code>2001:4860:4860::8888</code> and/or <code>2001:4860:4860::8844</code>.</p> <p>The average DNS lookup time is between 20 and 120 milliseconds. Anything between that and under is generally considered very good.</p>"},{"location":"documentation/collectors/probes/dns/#microsoft-active-directory","title":"Microsoft Active Directory","text":"<p>source</p> <p>Setup a DNS probe to monitor for Microsoft Active Directory specific DNS entries for each DNS server in your forest / domain.</p> <p>Legend</p> <ul> <li>Domain_Name is the name of your domain.</li> <li>SiteName, name of your Active Directory Site</li> <li>DnsForestName, name of your DNS Forest.</li> </ul> <p>The following SRV records are registered by Net Logon:</p> <code>_ldap._tcp.&lt;Domain_Name&gt;.</code> Allows a client to locate servers running the LDAP service in the domain of Domain_Name. <code>_ldap._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code> Allows a client to locate servers running the LDAP service in a domain in a site SiteName Domain_Name. SiteName relative file name, which is stored in the Configuration container in Active Directory. <code>_ldap._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code> Allows a client to find a domain controller in the domain Domain_Name. All DC register this SRV record. <code>_ldap._tcp. &lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code> Allows a client to find a domain controller in the domain in site SiteName Domain_Name. All DC register this SRV record. <code>_ldap._tcp.pdc._msdcs.&lt;Domain_Name&gt;.</code> Allows a client to find a domain PDC Domain_Name. Only PDC server registers this SRV record. <code>_ldap._tcp.gc._msdcs.&lt;DnsForestName&gt;.</code> Allows a client to find a DC in the forest DnsForestName. Only GC servers register this SRV record. <code>_ldap._tcp. &lt;SiteName&gt;._sites.gc._msdcs.&lt;DnsForestName&gt;.</code> Allows a client to find a GC in the forest Only GC server DnsForestName owned by this forest register this SRV record <code>_gc._tcp.&lt;DnsForestName&gt;.</code> Allows a client to find a GC in the domain. Only GC servers owned by this forest DnsForestName register this SRV record. <code>_gc._tcp.&lt;SiteName&gt;._sites.&lt;DnsForestName&gt;.</code> Allows a client to find a GC in this forest site SiteName DnsForestName. Only GC servers owned by this forest DnsForestName register this SRV record. <code>_ldap._tcp.DomainGuid.domains._msdcs.&lt;DnsForestName&gt;.</code> Allows customers to find the DC GUID. A GUID is a 128-bit unique index. Admits when Domain_Name DnsForestName and changed. <code>_kerberos._tcp.&lt;Domain_Name&gt;.</code> Allows clients to find a Kerberos KDC in that domain: Domain_Name. All DC register this SRV record. <code>_kerberos._udp.&lt;Domain_Name&gt;.</code> Same as _kerberos <code>._tcp.&lt;Domain_Name&gt;</code> only over UDP <code>_kerberos._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code> Allows clients to find a Kerberos KDC in that domain: Domain_Name site SiteName. All DC register this SRV record. <code>_kerberos._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code> Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name. All DC with the KDC log this SRV record. <code>_kerberos.tcp.&lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code> Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name site SiteName. All DC with the KDC log this SRV record. <code>_kpasswd._tcp.&lt;Domain_Name&gt;.</code> Kerberos Password Change allows you to search for current domain. All kerberos KDC DC (c) role of the register this SRV record <code>_kpasswd._udp.&lt;Domain_Name&gt;.</code> <p>Same as <code>_kpassword._tcp.&lt;Domain_Name&gt;</code> only over UDP</p>"},{"location":"documentation/collectors/probes/http/","title":"HTTP","text":""},{"location":"documentation/collectors/probes/http/#http-probe","title":"HTTP Probe","text":"<p>The HTTP probe sends an HTTP(s) request to an URI and measures its roundtrip time.</p> <p>The probe also retrieves the returned HTTP status code.</p>"},{"location":"documentation/collectors/probes/http/#configuration","title":"Configuration","text":"Property Description URI URI of the website you want to monitor Timeout Timeout in seconds should be a value between 0 and 240. The default timeout is 10.0 Verify SSL If turned off, the check ignores invalid certificates; when on, the URI must have a valid certificate. Nots, this is only applicable for HTTPS URI. The default is off. With payload Retrieves the payload, bare in mind the payload is limited to 500 Kb Allow redirects When turned on, redirects are followed. <p>Tip</p> <p>When monitoring cloud services, enable Allow redirects as these services heavily rely on http redirects.</p>"},{"location":"documentation/collectors/probes/http/#check-specifics","title":"Check specifics","text":""},{"location":"documentation/collectors/probes/http/#http-status-codes","title":"HTTP Status codes","text":"<p>See RFC9110 or the List of HTTP status codes on Wikipedia for more detailed information.</p> code class code Meaning 100 Informational Continue 101 Informational Switching protocols 102 Informational Processing 103 Informational Early Hints 200 Successful OK 201 Successful Created 202 Successful Accepted 203 Successful Non-Authoritative Information 204 Successful No Content 205 Successful Reset Content 206 Successful Partial Content 207 Successful Multi-Status 208 Successful Already Reported 226 Successful IM Used 300 Redirection Multiple Choices 301 Redirection Moved Permanently 302 Redirection Found (Previously \"Moved Temporarily\") 303 Redirection See Other 304 Redirection Not Modified 305 Redirection Use Proxy 306 Redirection Switch Proxy 307 Redirection Temporary Redirect 308 Redirection Permanent Redirect 400 Client Error Bad Request 401 Client Error Unauthorized 402 Client Error Payment Required 403 Client Error Forbidden 404 Client Error Not Found 405 Client Error Method Not Allowed 406 Client Error Not Acceptable 407 Client Error Proxy Authentication Required 408 Client Error Request Timeout 409 Client Error Conflict 410 Client Error Gone 411 Client Error Length Required 412 Client Error Precondition Failed 413 Client Error Payload Too Large 414 Client Error URI Too Long 415 Client Error Unsupported Media Type 416 Client Error Range Not Satisfiable 417 Client Error Expectation Failed 418 Client Error I'm a Teapot 421 Client Error Misdirected Request 422 Client Error Unprocessable Entity 423 Client Error Locked 424 Client Error Failed Dependency 425 Client Error Too Early 426 Client Error Upgrade Required 428 Client Error Precondition Required 429 Client Error Too Many Requests 431 Client Error Request Header Fields Too Large 451 Client Error Unavailable For Legal Reasons 500 Server Error Internal Server Error 501 Server Error Not Implemented 502 Server Error Bad Gateway 503 Server Error Service Unavailable 504 Server Error Gateway Timeout 505 Server Error HTTP Version Not Supported 506 Server Error Variant Also Negotiates 507 Server Error Insufficient Storage 508 Server Error Loop Detected 510 Server Error Not Extended 511 Server Error Network Authentication Required"},{"location":"documentation/collectors/probes/microsoft_azure/","title":"Microsoft Azure","text":"<p>Beta</p> <p>The Azure probe is still an alpha \u03b1 release. Contact InfraSonar support if you want to get involved in the alpha testing phase.</p>"},{"location":"documentation/collectors/probes/microsoft_azure/#features","title":"Features","text":"<p>Add the moment the following Azure resources are supported:</p> <ul> <li>Virtual machine</li> <li>Private DNS zone</li> <li>DNS zone</li> <li>Regular Network Interface</li> <li>Public IP address</li> </ul>"},{"location":"documentation/collectors/probes/microsoft_azure/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/microsoft_azure/#prepare-your-azure-environment","title":"Prepare your Azure environment","text":"<p>Two steps are required to prepare your Azure environment for the InfraSonar Azure probe.</p> <ol> <li>Register the InfraSonar probe as an Azure app</li> <li>Authorize the registered app to the resources you want to monitor</li> </ol> <p>Open the Azure portal (https://portal.azure.com/) to ensure your account has sufficient privileges.</p>"},{"location":"documentation/collectors/probes/microsoft_azure/#create-an-app-registration","title":"Create an app registration","text":"<ol> <li>From the main menu, open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub-menu</li> <li>Select new registration</li> <li>Enter the user-facing display name e.g., InfraSonar Azure Probe</li> <li>Who can use this application or access this API: Select Accounts in this organizational directory only</li> <li>Click register application</li> </ol>"},{"location":"documentation/collectors/probes/microsoft_azure/#app-authorization","title":"app authorization","text":"<ol> <li>Open the resource group containing the Azure resource you want to monitor</li> <li>Open Access control (IAM)</li> <li>Select the tab Role assignments</li> <li>Click Add and then Add role assignment</li> <li>Search the Reader role from the Role tab</li> <li>Open the Members tab</li> <li>Ensure Assign access to User, group, or service principal is selected</li> <li>Click Select members</li> <li>Search the name used by the app registration e.g., InfraSonar Azure Probe</li> <li>Select the app and click the select button</li> <li>Give an optional description</li> <li>Verify the role assignment and press Review + assign </li> </ol> <p>The registered app can now query the Azure portal's resources via the Azure API</p> <p>Rinse and repeat</p> <p>Repeat the above app authorization steps for each resource group containing the resource you want to monitor.</p>"},{"location":"documentation/collectors/probes/microsoft_azure/#credentials","title":"Credentials","text":"<p>The Data needed for the credentials are:</p> <ul> <li>Directory (tenant) ID</li> <li>Application (client) ID</li> <li>Client Secret </li> </ul> <p>These can be found in the registered app:</p> <ol> <li>From the main menu open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub menu</li> <li>Open the previous created application e.g. InfraSonar Azure Probe</li> <li>Note down the <code>Application (client) ID</code> and <code>Directory (tenant) ID</code> </li> <li>Open Certificates &amp; secrets from the Manage submenu</li> <li>Click New client secret</li> <li>Enter a description e.g. InfraSonar azure probe</li> <li>Provide an expiration date</li> <li>Note down the <code>Value</code>, note this can not be retrieved again once you close this window.</li> </ol> <p>Create a <code>defaultAssetConfig.ini</code> for in <code>/etc/infrasonar/azureprobe</code> as documented here</p>"},{"location":"documentation/collectors/probes/microsoft_azure/#setup-azure-resources-as-infrasonar-assets","title":"Setup Azure resources as InfraSonar assets","text":"<p>Ensure the container is running</p> <p>Ensure the Azure probe docker container has been setup</p> <p>The next step is to add the Azure resources you want to monitor to InfraSonar.</p> <ol> <li>Navigate to the InfraSonar environment you want to add Azure resources to</li> <li>Click Add host in the host overview screen</li> <li>Enter a name in the hostname field</li> <li>Add the AzureProbe</li> <li>Open the Azureprobe tab</li> <li>Fill out the required details:</li> <li>Resource Name</li> <li>Resource Group</li> <li>Subscription Id</li> <li>Click save</li> </ol> <p>Patience is a virtue</p> <p>The first time it can take up to 5 minutes for the first data to come in.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/","title":"Microsoft SQL Server","text":"<p>The MSSQL probe uses SQL statements to monitor and analyze the health of a Microsoft SQL Server database.</p> <p>Goal</p> <p>The MSSQL probe offers a unified view that provides common ground for infrastructure engineers, DBA, and application managers to analyze and troubleshoot Microsoft SQL server performance issues.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#features","title":"Features","text":"<p>The MSSQL probe allows for in-depth analyses of a SQL server.</p> <p>Some of the included measurements:</p> <ul> <li>Memory Page life Expectancy.</li> <li>Parallelism configuration.</li> <li>CPU, memory and disk IO per database.</li> </ul> <p> </p> Microsoft SQL server CPU usage <ul> <li>SQL Table information.</li> <li>Wait statistics.</li> <li>Top 25 query information (all queries would put too much strain on the SQL server).</li> <li>Top worker time; which queries consume a lot of time and thus cpu usage.</li> <li>Top logical reads; which queries cost the most IO.</li> <li>Top execution count; shows the most active queries.</li> <li>Index information.</li> <li>Frequently used indexes (top used).</li> <li>Missing indexes, where would an index make sense.</li> <li>Unused indexes, only written but never queried.</li> </ul> <p> </p> Microsoft SQL server missing indexes <ul> <li>Fragmentation.</li> </ul> <p> </p> Microsoft SQL server fragmentation <ul> <li>IO, per file and per volume.</li> <li>Backup status.</li> <li>Agent jobs.</li> <li>SQL Config.</li> <li>Session and application information.</li> <li>Plan cache.</li> <li>Blocked count.</li> </ul> <p>Tip</p> <p>Our implementation consultants can assist in creating a detailed analysis of a Microsoft SQL server.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/microsoft_sql/#probe-configuration","title":"Probe configuration","text":"<p>The MSSQL probe requires the host's IP address running the monitored SQL server.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#sql-server-configuration","title":"SQL Server configuration","text":""},{"location":"documentation/collectors/probes/microsoft_sql/#authentication","title":"Authentication","text":"<p>Microsoft SQL Server supports SQL and Windows authentication.</p> <p>We have implementation scripts for both options but prefer to use Windows authentication, preventing passwords from being stored.</p> <p>Choose the correct script for your setup and execute the script using SQL Server Management Studio. Both scripts will grant the account used for monitoring sufficient access to query performance metrics.</p> <p>The InfraSonar admin must configure the credentials to query the database on the appliance that monitors the specific SQL server. See the credentials section on how to configure these.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#grants-for-domain-user","title":"Grants for domain user","text":"<p>Replace <code>domainnamehere\\usernamehere</code> in this script with the correct domain/username and execute it in SQL Server Management Studio to grant the user sufficient permissions.</p> <p>It is good practice to create a dedicated account for SQL monitoring.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#grants-for-sql-user","title":"Grants for SQL User","text":"<p>This script uses the default username <code>svc_infrasonar</code> and the password <code>someSuperSecurePasswordHereOfCourse</code>, which you should change before running the script.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#appliance","title":"Appliance","text":"<p>In order to use the Microsoft MSSQL-probe, it should be added as a service to the docker-compose file.</p> <pre><code>  mssqlprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/mssqlprobe\nenvironment: *default-infrasonar-environment\n</code></pre>"},{"location":"documentation/collectors/probes/microsoft_sql/#operational","title":"Operational","text":""},{"location":"documentation/collectors/probes/microsoft_sql/#new-databases","title":"New databases","text":"<p>The monitoring account does not automatically gain access to databases created after the initial setup.  This scenario results in the following InfraSonar alert:</p> <p>The server principal \"account\" is not able to access the database \"databasename\" under the current security context.</p> <p>Either grant script contains a marked section that a SQL Admin must run to grant access to these newly created databases.</p>"},{"location":"documentation/collectors/probes/microsoft_sql/#analysis","title":"Analysis","text":""},{"location":"documentation/collectors/probes/microsoft_sql/#sql-server-cost-threshold-for-parallelism","title":"SQL Server Cost threshold for parallelism","text":"<p>InfraSonar can report the following message:</p> <p>SQL Server Cost threshold for parallelism is set to 5. Suggested is to set this value to 50.</p> <p>A Microsoft SQL DBA can resolve this by changing the threshold for parallelism to 50, using this SQL statement:</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'cost threshold for parallelism', 50;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"documentation/collectors/probes/microsoft_sql/#max-degree-of-parallelism","title":"Max Degree of parallelism","text":"<p>A typical SQL server misconfiguration is the Max Degree of parallelism.</p> <p>Rules of thumb:</p> <ul> <li>MDOP (Max Degree of parallelism) equal the number of CPU cores.</li> <li>MDOP should not be set greater then 8, so a 16 core system should have MDOP configured as 8.</li> </ul> <p>Set <code>ChangeMe</code> to the desired MDOP and execute it using SQL Server Management Studio.</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'Max Degree of parallelism', ChangeMe;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"documentation/collectors/probes/netapp/","title":"NetApp","text":""},{"location":"documentation/collectors/probes/netapp/#features","title":"Features","text":"<p>InfraSonar monitors NetApp systems running Data ONTAP using the ONTAP REST API.</p> <p>SNMP-probe for 7mode</p> <p>It is possible to monitor 7mode NetApp systems using SNMP. The monitoring is not as elaborate as the API Probe.</p>"},{"location":"documentation/collectors/probes/netapp/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/netapp/#probe-configuration","title":"Probe configuration","text":"<p>NetApp storage systems are monitored using the root account. See the credentials section on how to configure credentials.</p> <p>The probe retrieves monitoring data using the ONTAP REST API on TCP port 443.</p>"},{"location":"documentation/collectors/probes/netapp/#operational","title":"Operational","text":""},{"location":"documentation/collectors/probes/netapp/#danglingsnapshots","title":"danglingSnapshots","text":"<p>When the time difference between 2 snapshots is greater than 21 (also known as monthly backup), an InfraSonar alert is triggered. There is also a label (<code>dangling snapshots (vmfs) 7d</code>) which generates an alert if the snapshot contains the word <code>vmfs</code> and the time difference is greater then 7 days.</p> <p>Possible causes:</p> <ul> <li>Manual snapshots that have not been cleaned up.</li> <li>A reconfigured snapmanager.</li> <li>A server that is powered off while the mirror is still running.</li> </ul>"},{"location":"documentation/collectors/probes/ping/","title":"Ping","text":"<p>The ping-probe utilizes the icmp protocol to monitor the network roundtrip between the monitoring appliance and the monitored host.</p> <p>Next to the roundtrip time, the ping probe monitors the number of dropped and successful packets.</p> <p>When the number of successful equals 0, a condition is raised.</p>"},{"location":"documentation/collectors/probes/ping/#configuration","title":"Configuration","text":"Property Description Address The address that the probe should ping. Interval Interval should be a value between 1 and 9, The default interval is 1. Count Count should be a value between 1 and 9, the default count is 5 Timeout Timeout in seconds should be a value between 0 and 240, the default timeout is 10 seconds."},{"location":"documentation/collectors/probes/ping/#check-specifics","title":"Check specifics","text":"<p>Ping returns the <code>minimum time</code> and <code>maximum time</code> as this provides a better insight than just an average ping response.</p> <p>The number of <code>successful</code> and <code>dropped</code> ping packages are also monitored.</p>"},{"location":"documentation/collectors/probes/pure_probe/","title":"Pure","text":"<p>Pure Storage is monitored from the InfraSonar appliance using the Pure API.</p>"},{"location":"documentation/collectors/probes/pure_probe/#probe-configuration","title":"Probe configuration","text":"<p>The Pure probe only requires the IP address of the monitored Pure array.</p>"},{"location":"documentation/collectors/probes/smtp/","title":"SMTP probe","text":""},{"location":"documentation/collectors/probes/smtp/#description","title":"Description","text":"<p>The SMTP probe consists of three components:</p> <ul> <li>Email roundtrip</li> <li>DNS check</li> <li>SMTP connection</li> </ul>"},{"location":"documentation/collectors/probes/smtp/#email-roundtrip","title":"email roundtrip","text":"<p>The InfraSonar email rountrip is a synthetic monitor verifying the complete email flow.</p> <p>The steps below outline the email roundtip for <code>example.org</code>:</p> <ol> <li>The first step is to lookup all MX records for <code>example.org</code>.</li> <li>The synthetic email monitor sends an email to all MX records.</li> <li>The receiving email server is configured to automatically forward all mail sent to the probe address. In our case <code>mailroundtrip@example.org</code> is forwarded to <code>mailroundtrip@mrt.oversig.ht</code>.</li> <li>The mail server <code>mrt.oversig.ht</code> passes the email to the synthetic monitor.</li> <li>The synthetic monitor extracts timestamps en relevant data from the received email and sends the check result to Oversight for further analysis.</li> </ol> <p>This approach ensures all components such, as DNS, internet connection, email filtering, and email server components involved in receiving and sending email, are part of the measurement.</p> <p>Note</p> <p>Sending an email to all MX records ensures the email fallback scenarios work when you need to rely on them.</p>"},{"location":"documentation/collectors/probes/smtp/#dns-check","title":"DNS check","text":"<p>The DNS check verifies if an SPF record is configured and valid.</p>"},{"location":"documentation/collectors/probes/smtp/#smtp-connection","title":"SMTP connection","text":"<p>We attempt to connect to each mail server found in the DNS MX lookup.</p>"},{"location":"documentation/collectors/probes/smtp/#probe-configuration","title":"Probe configuration","text":"<p>The only required configuration property for the SMTP-probe is the mail domain. So in our case this would be: oversig.ht.</p> <p>The email domain is used to lookup the MX records, and optional SPF records and starts monitoring these.</p> <p>As an option, the email roundtrip can be configured by adding a configured email address.</p>"},{"location":"documentation/collectors/probes/smtp/#labels","title":"Labels","text":""},{"location":"documentation/collectors/probes/smtp/#base-label","title":"Base label","text":"# Mailroundtrip <p>Conditions used for the Mailroundtrip check:</p> <ul> <li>Blacklist check</li> <li>Check for open relay</li> <li>MX record changes</li> <li>Email roundtrip</li> <li>SPF record status</li> </ul>"},{"location":"documentation/collectors/probes/smtp/#ignore-labels","title":"Ignore labels","text":"\u2260 open relay <p>Ignores open relay check. Useful when an open relay is ok.</p>  \u2260 spf record <p>Ignores the SPF record condition.</p>"},{"location":"documentation/collectors/probes/smtp/#mail-round-trip","title":"Mail Round Trip","text":"<p>The email roundtrip check is part of the SNMP-probe.</p> <p>When configured, it sends an email every 5 minutes to a configured email address. This email address is in turn configured to forward the email back to its originator, creating a closed email loop.</p>"},{"location":"documentation/collectors/probes/smtp/#microsoft-exchange-configuration","title":"Microsoft Exchange Configuration","text":"<p>The email roundtrip flow works as follows on a Microsoft Exchange infrastructure:</p> <ol> <li>The central monitoring server sends an email to a pre-configured user.</li> <li>The Exchange user auto-forwards the message to the email contact, which is the email address used by the central monitoring server.</li> <li>The central server receives and parses the message.</li> </ol>"},{"location":"documentation/collectors/probes/smtp/#detailed-configuration-guides","title":"Detailed configuration guides","text":"<ul> <li>Google Workspace</li> <li>Microsoft Exchange 2003</li> <li>Microsoft Exchange 2010</li> </ul>"},{"location":"documentation/collectors/probes/smtp_mailroundtrip_google_workspace/","title":"Google workspace","text":"<ol> <li>Open the Google Admin Console.</li> <li>Navigate to: Apps &gt; Google Workspace &gt; Gmail.</li> <li> <p>Select Default routing:         ![mailroundtrip google workspace routing](../../../images/mailroundtrip_google_workspace_routing.png){ width=\"600\" }     &lt;figcaption&gt;Google workspace routing&lt;/figcaption&gt;    </p> </li> <li> <p>Click on ADD ANOTHER RULE:</p> </li> <li>In the section Specify envelope recipients to match, select Single recipient and enter the email address: mailroundtrip@.       Where  is your email domain. <li>In the section If the envelope recipient matches the above, select Change envelope recipient, set Replace recipient* and enter: <code>mailroundtrip@mrt.oversig.ht</code>.</li> <li>Under Spam, select Bypass spam filter for this message.</li> <li>Click Save.</li>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2003/","title":"Microsoft Exchange 2003","text":"<p>Start the \"Active Directory Users and Computers\" tool on a server, which also contains the Exchange 2003 management tools. Usually the exchange or SBS server.</p>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2003/#create-a-receiving-mailbox-user","title":"Create a receiving mailbox user","text":"<ol> <li>Create a new user in the for your organization correct OU:<ol> <li>Provide the Full name. We recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name. We recommend: mailroundtrip.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Password options:<ol> <li>Enter a secure password. This password is not used and can be changed anytime.</li> <li>Select \"User cannot change password\" and \"Password never expires\".</li> <li>Click on Next to continue.</li> </ol> </li> <li>Create the actual mailbox:<ol> <li>Usually you can leave this default. Adjust the Server and mailbox store if required.</li> </ol> </li> <li>Finish the creation of the user:<ol> <li>Verify the configuration.</li> <li>Click on Finish to finalize the user creation process.</li> </ol> </li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2003/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Add a mail contact. This contact is required to forward the mail back to the monitoring host.</p> <ol> <li>Right click in the organization unit where you want to create the mail contact.</li> <li>Select Cew -&gt; Contact.</li> <li>Enter the contact details:</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Click on Next to continue.</li> <li>Add the SMTP address:<ol> <li>Click on Modify:<ol> <li>Select SMTP Address.</li> <li>Click on OK.</li> </ol> </li> <li>Enter the return email address:<ol> <li>Enter the return mail address in the E-mail address field: mailroundtrip@mrt.oversig.ht.</li> <li>Click on OK.</li> </ol> </li> <li>Finish:<ol> <li>Verify the settings.</li> <li>Click on Next to continue.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2003/#hide-the-return-mail-contact","title":"Hide the return mail contact","text":"<p>We suggest hiding the contact from the address-book, so details will not be shown to end-users.</p> <ol> <li>Right-click on the Mail Round Trip Monitoring Return Address contact you just created and select Properties.</li> <li>Open the Exchange advanced tab.</li> <li>Select Hide from Exchange address lists.</li> <li>Click on OK.</li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2003/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<ol> <li>Double click on the previously created Mail Round Trip Monitoring Receive mailbox user.</li> <li>Open the Exchange Features tab:<ol> <li>Disable all features.</li> </ol> </li> <li>Open the Exchange Advanced tab:<ol> <li>Enable Hide from Exchange address lists.</li> </ol> </li> <li>Open the \"Exchange General\" tab:<ol> <li>Click on Delivery options.</li> <li>Click on Modify.</li> <li>Enter the Mail Round Trip Monitoring Return Address.</li> </ol> </li> <li>Click on Ok three times.</li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2010/","title":"Microsoft Exchange 2010","text":"<p>Start the Microsoft \"Exchange Management Console\" on a server which also contains the Exchange 2010 management tools. This console can usually be found on the Microsoft Exchange or SBS server.</p>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2010/#create-a-new-mailbox","title":"Create a new mailbox","text":"<ol> <li>Right click on Mailbox under Recipient Configuration:<ol> <li>Select New Mailbox.</li> <li>Select User Mailbox.</li> <li>Click on Next.</li> <li>Select New User.</li> <li>Click on Next.</li> <li>Provide User Information:<ol> <li>Provide the Full name, we recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name, we recommend: mailroundtrip.</li> <li>Provide a password. (Note: this password is not used anywhere so any random password will suffice)</li> <li>Optionally select the OU were you want this account to be created.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Specify mailbox settings:<ol> <li>Optionally select the mailbox database, were you want the mailbox to reside.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Set archive settings:<ol> <li>Select Don't create an archive. This mailbox does not contain any email.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Review settings:<ol> <li>Click on New to create the new mailbox.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2010/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Create a mail contact containing the mail round trip return address.</p> <ol> <li>Open Recipient configuration.</li> <li>Right click on Mail contact.</li> <li>Select New Mail Contact.</li> <li>Create a new mail contact:<ol> <li>Select New Contact.</li> <li>Click on Next.</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Enter an alias, we suggest: mailroundtripreturn.</li> <li>Click on the Edit... button:<ol> <li>Enter the following return email address in the E-mail address field: mailroundtrip@mrt.oversig.ht.</li> </ol> </li> <li>Click on Next:<ol> <li>Review settings.</li> </ol> </li> <li>Click on New to create the mail contact:</li> <li>Verify that the mail contact was created successfully:<ol> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2010/#modify-the-return-contact","title":"Modify the return contact","text":"<ol> <li>Right click on on the previously created mail contact.</li> <li>Select Properties from the dropdown menu.</li> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Click on OK to close the dialog.</li> </ol>"},{"location":"documentation/collectors/probes/smtp_mailrountrip_exchange2010/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<p>Forward all mail to the \"Mail Round Trip Monitoring Mailbox\" from the previously created \"Mail Round Trip Monitoring Return Address\" contact.</p> <ol> <li>Right click on the previously created receive mailbox user.</li> <li>Select Properties from the drop down menu:<ol> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Open the Mail Flow Settings tab.</li> <li>Double click on Delivery Options:<ol> <li>Select the Forward to selection box.</li> <li>Click on Browse:<ol> <li>Select the \"Mail Round Trip Monitoring Return Address\" contact.</li> <li>Click on OK.</li> </ol> </li> <li>Click on OK to close the previous screen.</li> </ol> </li> </ol> </li> </ol>"},{"location":"documentation/collectors/probes/snmp/","title":"SNMP","text":"<p>\"Simple Network Management Protocol is an Internet Standard protocol for collecting and organizing information about managed devices on IP networks and for modifying that information to change device behavior.\" - wikipedia</p>"},{"location":"documentation/collectors/probes/snmp/#features","title":"Features","text":"<p>InfraSonar supports retrieving data from remote assets using the SNMPv1, SNMPv2c, and SNMPv3 protocol.</p> <p>The SNMP probe consists of a base probe and various vendor specific add-ons:</p> <ul> <li>APC PDU</li> <li>APC UPS</li> <li>Dell</li> <li>HP Integrated Lights-Out (iLO)</li> <li>HP ProCurve </li> <li>Synology</li> </ul>"},{"location":"documentation/collectors/probes/snmp/#deployment","title":"Deployment","text":"<p>We assume you deployed the SNMP probe as part of our appliance implementation.</p>"},{"location":"documentation/collectors/probes/snmp/#prerequisites","title":"Prerequisites","text":"<p>To monitor an asset using SNMP there ar two things two setup on the monitored asset:</p> Access <p>Most SNMP implementation require you to add the monitoring IP as an authorized host. In our appliance based setup this is usually the IP address used by the monitoring appliance.</p> <p>When you deploy multiple appliances be aware to configure all IP addresses on the SNMP monitored assets.</p> <p>Also note Adding a host requires access to SNMP (udp/161) from the InfraSonar appliance running the SNMP probe.</p> Authentication <p>SNMPv1 and SNMPv2c versions \"plain\" community string for authentication; SNMPv3 is more secure but not supported on all devices.</p> <p>The community string or credentials should be stored on the appliance as described here.</p> <p>default configuration</p> <p>When no configuration file is specified the probe falls back SNMPv2c and used the community string <code>public</code>.</p>"},{"location":"documentation/collectors/probes/snmp/#how-to-configure-snmp","title":"How to configure SNMP","text":"<p>The SNMP probe requires SNMP to be configured on devices you wish to monitor. The next chapter describes how to configure SNMP on some standard devices.</p>"},{"location":"documentation/collectors/probes/snmp/#ubuntu","title":"Ubuntu","text":"<p>First step is to install the SNMP Daemon:</p> <pre><code>sudo apt-get update\nsudo apt-get install snmpd\n</code></pre> <p>Next is to edit the <code>snmpd.conf</code> file, this requires a few setting in this file to change:</p> /etc/snmp/snmpd.conf<pre><code>sysLocation    Sitting on the Dock of the Bay\nsysContact     Me &lt;me@example.org&gt;\n\nagentAddress udp:161,udp6:[::1]:161\n\nrocommunity  public default\nrocommunity6 public default\n</code></pre> <p>Set <code>sysLocation</code> to the correct location for this device and set <code>sysContact</code> to the system administrator contact.</p> <p><code>agentAddress</code> configures which IPv4 and IPv6 the SNMP daemon should listen on.</p> <p>Setting this to: <code>agentAddress udp:161,udp6:[::1]:161</code> will set the server to listen on all IPv4 and IPv6 addresses.</p> <p>Alternatively you can bind to a specific IP address as such: <pre><code>agentAddress udp:192.168.1.5:161\n</code></pre> This binds the SNMPD daemon to the IP address 192.168.1.5 on port 161.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>rocommunity: rocommunity public\n</code></pre></p> <p>Last step is to restart the SNMPD service: <code>sudo service snmpd restart</code></p> <p>YOu can verify the  SNMPD is started using: <code>sudo service snmpd status</code></p>"},{"location":"documentation/collectors/probes/snmp/#freebsd","title":"FreeBSD","text":"<p>Edit (as root) the file <code>/etc/snmpd.config</code>, find the following lines in the file:</p> <pre><code>location := \"Room 200\"\ncontact := \"sysmeister@example.com\"\n\nread := \"public\"\n\nwrite := \"geheim\"\ntrap := \"mytrap\"\n</code></pre> <p>Set <code>location</code> to the correct location for this device and set <code>contact</code> to the system administrator contact.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>read := \"public\"\n</code></pre></p> <p>Enable bsnmpd in <code>/etc/rc.conf</code></p> <p>Add this at the end of the file: <pre><code>bsnmpd_enable=\"YES\"\n</code></pre></p> <p>Start snmpd: <pre><code>service bsnmpd start\n</code></pre></p> <p>We recommend to unstall the bsnmp-ucd package for more complete monitoring. </p> <p>Installing this package involves the following steps:</p> <pre><code>pkg_add -r bsnmp-ucd\n</code></pre> <p>Locate and uncomment the line in <code>/etc/snmpd.config</code> <pre><code>begemotSnmpdModulePath.\"hostres\" = \"/usr/lib/snmp_hostres.so\"\n</code></pre> Add the next line below the just uncommented line: <pre><code>begemotSnmpdModulePath.\"ucd\" = \"/usr/local/lib/snmp_ucd.so\"\n</code></pre></p> <p>When done restart the bsnmp daemon: <pre><code>/etc/rc.d/bsnmpd restart\n</code></pre></p>"},{"location":"documentation/collectors/probes/snmp/#debian-based-systems","title":"Debian based systems","text":"<p>The first step is to install <code>snmpd</code> using<code>apt</code>:</p> <pre><code>sudo apt install snmpd\n</code></pre> <p>The next step is configuring <code>snmpd</code>. For this we need to edit <code>/etc/snmp/snmpd.conf</code>. Prior to editing this file we suggest making a backup of the existing configuration. This can be done by using the following command:</p> <pre><code>sudo cp /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.bak\n</code></pre> <p>Example <code>snmpd.conf</code> file:</p> <pre><code>############# InfraSonar SNMP Config ##################\ncom2sec readonly  default         infrasonar\ngroup InfraSonarGroup v2c        readonly\nview all    included  .1\naccess InfraSonarGroup \"\"      any       noauth    exact  all    none   none\nsyslocation planetearth\nsyscontact support@infrasonar.com\n</code></pre> <p>Note</p> <p>The community string in the above example is set to <code>infrasonar</code>. Also note the settings for <code>syslocation</code> and <code>syscontact</code>.</p> <p>Restart the SNMP daemon to make the configuration effective:</p> <pre><code>sudo service snmpd restart\n</code></pre> <p>Verify that the service is running correctly:</p> <pre><code>sudo service snmpd status\n</code></pre> <p>This should result in a similar output like this:</p> <pre><code>\u25cf snmpd.service - Simple Network Management Protocol (SNMP) Daemon.\n   Loaded: loaded (/lib/systemd/system/snmpd.service; enabled; vendor preset: enabled)\nActive: active (running) since Thu 2021-07-29 10:37:24 CEST; 1s ago\n  Process: 14393 ExecStartPre=/bin/mkdir -p /var/run/agentx (code=exited, status=0/SUCCESS)\nMain PID: 14394 (snmpd)\nTasks: 1 (limit: 2358)\nMemory: 5.0M\n   CGroup: /system.slice/snmpd.service\n           \u2514\u250014394 /usr/sbin/snmpd -Lsd -Lf /dev/null -u Debian-snmp -g Debian-snmp -I -smux mteTrigger mteTriggerConf -f -p /run/snmpd.pid\n\nJul 29 10:37:24 donkey-kong systemd[1]: Starting Simple Network Management Protocol (SNMP) Daemon....\nJul 29 10:37:24 donkey-kong systemd[1]: Started Simple Network Management Protocol (SNMP) Daemon..\nJul 29 10:37:24 donkey-kong snmpd[14394]: NET-SNMP version 5.7.3\n</code></pre>"},{"location":"documentation/collectors/probes/snmp/#centos","title":"CentOS","text":"<p>You can find a guide on how to install SNMP on CentOS here.</p>"},{"location":"documentation/collectors/probes/snmp/#hp-proliant-hosts","title":"HP Proliant hosts","text":"<p>The HP agents can be installed and queried on HP Proliant hosts using SNMP. This section describes the setup.</p> <p>Add the following section to the repository file: <code>/etc/yum.repos.d/hp.repo</code>:</p> <pre><code>[HP-Proliant]\nname=HP Proliant Red Hat Enterprise Linux $releasever - $basearch\n#baseurl=ftp://ftp.redhat.com/pub/redhat/linux/enterprise/$releasever/en/os/$basearch/Debuginfo/\nbaseurl=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/$releasever/$basearch/current/\n#http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/5/x86_64/current/\nenabled=1\ngpgcheck=0\ngpgkey=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/GPG-KEY-ProLiantSupportPack\n</code></pre> <p>Install the HP agents:</p> <pre><code>yum install hp-snmp-agents hp-health\n</code></pre> <p>You will get additional questions about the desired configuration. This will update the <code>snmpd.conf</code> file.</p> <p>Start the agents:</p> <pre><code>/sbin/hpsnmpconfig\n/etc/init.d/hp-snmp-agents start\n/etc/init.d/snmpd restart\n</code></pre>"},{"location":"documentation/collectors/probes/snmp/#vwware","title":"VWware","text":""},{"location":"documentation/collectors/probes/snmp/#virtual-center-appliance","title":"Virtual center appliance","text":"<p>The VMware virtual center appliance can be configured to be monitored using SNMP.</p> <ol> <li>Log in to the webinterface (https://ip:5480) using a root account.</li> <li>Enable shell access: access --&gt; shell / ssh.</li> <li>Log in using SSH and execute the following commands: <pre><code>snmp.set --port 161\nsnmp.set --communities public\nsnmp.enable\n</code></pre></li> <li>Verify if the snmpd service is started: <pre><code>shell.set --enabled.true\nshell\nservice snmpd status\n</code></pre></li> <li>Add the SNMP-probe in InfraSonar.</li> </ol>"},{"location":"documentation/collectors/probes/snmp/#esxi","title":"ESXi","text":"<p>For the monitoring appliance to query the ESXi host, the following modifications must be made to the <code>/etc/snmp/snmpd.conf</code> file. This can be achieved by logging on to the ESXi hosts using SSH.</p> <pre><code>rocommunity  &lt;RO_Community_String&gt;\ntrapcommunity &lt;TRAPS_Community_String&gt;\ntrapsink &lt;IP_ADDRESS_Monitoring_Appliance&gt;\npublic syscontact &lt;sysadmin_contact_email_address&gt;\nsyslocation &lt;system_location&gt;\n</code></pre> <p>Where:</p> Variable Description <code>&lt;RO_Community_String&gt;</code> Read only community string. This string should be added to the host config. <code>&lt;TRAPS_Community_String&gt;</code> Enter a trap community string. InfraSonar does not use this. <code>&lt;IP_ADDRESS_Monitoring_Appliance&gt;</code> IP address of the monitoring appliance. <code>&lt;sysadmin_contact_email_address&gt;</code> optional Email address of the sysadmin. <code>&lt;system_location&gt;</code> optional Note describing the physical location of the device. <p>For the modifications to take effect, the SNMPD must be restarted using the following command:</p> <pre><code>/etc/init.d/snmpd restart\n</code></pre>"},{"location":"documentation/collectors/probes/tcp/","title":"TCP","text":"<p>The TCP probe consists of two checks:</p> <ul> <li>Check TCP ports</li> <li>Check certificates</li> </ul>"},{"location":"documentation/collectors/probes/tcp/#configuration","title":"Configuration","text":"Property Description Address The address that the probe should check. Certificate Ports List of ports to perform certificates check on. TCP Ports List of ports to perform a port check on.Each port must be a numeric value between 1 and 65535, where ports are separated by a comma."},{"location":"documentation/collectors/probes/tcp/#check-specifics","title":"Check specifics","text":""},{"location":"documentation/collectors/probes/tcp/#check-tcp-ports","title":"Check TCP ports","text":"<p>Check TCP ports allows for monitoring specific TCP port statuses.</p> <p>As the TCP probe uses NMAP at its core it can identify the same six ports states as nmap.</p> Port state Description <code>open</code> An application is actively accepting TCP connections, UDP datagrams or SCTP associations on this port. <code>closed</code> A closed port is accessible (it receives and responds to Nmap probe packets), but there is no application listening on it. <code>filtered</code> Nmap cannot determine whether the port is open because packet filtering prevents its probes from reaching the port. The filtering could be from a dedicated firewall device, router rules, or host-based firewall software. <code>unfiltered</code> The unfiltered state means that a port is accessible, but Nmap is unable to determine whether it is open or closed. <code>open|filtered</code> Nmap places ports in this state when it is unable to determine whether a port is open or filtered. <code>closed|filtered</code> This state is used when Nmap is unable to determine whether a port is closed or filtered."},{"location":"documentation/collectors/probes/tcp/#check-certificates","title":"Check certificates","text":"<p>Gathers certificates and ciphers present on the specified TCP port.</p>"},{"location":"documentation/collectors/probes/vmware-esx/","title":"VMware ESX","text":""},{"location":"documentation/collectors/probes/vmware-esx/#features","title":"Features","text":"<p>The VMware ESX probe uses the VMware API to monitor VMware ESX hosts.</p> <p>THe ESX probe can be used to monitor standalone VMware ESX hosts as hosts part of a VMware V-center deployment</p>"},{"location":"documentation/collectors/probes/vmware-esx/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/vmware-esx/#credentials","title":"Credentials","text":"<p>The VMware API requires a root account to access monitoring data on VMware ESX hosts and an administrative account for monitoring data on VMware Virtual center hosts.</p> <p>When your VMware implementation uses multiple ESX hosts using the same root password, it can be beneficial to create a defaultCredentials file containing the root account and set up a device-specific credentials file for the virtual center hosts.</p>"},{"location":"documentation/collectors/probes/vmware-esx/#operational","title":"Operational","text":""},{"location":"documentation/collectors/probes/vmware-esx/#known-issues","title":"Known issues","text":""},{"location":"documentation/collectors/probes/vmware-esx/#cached-api-response","title":"Cached API response","text":"<p>Sometimes InfraSonar reports different values than VMware consoles.</p> <p>The cause for this is that the VMware API sends cached data as a response to queries.</p> <p>The solution to mitigate this situation is to clean the VMware cache using the following commands on the affected ESX host:</p> <pre><code>localcli hardware ipmi sel clear\netc/init.d/sfcbd-watchdog restart\netc/init.d/hostd restart\netc/init.d/vpxa restart\n</code></pre>"},{"location":"documentation/collectors/probes/vmware-vcenter/","title":"VMware vCenter","text":""},{"location":"documentation/collectors/probes/vmware-vcenter/#features","title":"Features","text":"<p>The VMware-probe uses the VMware API to monitor VMware ESX and VMware Virtual center hosts.</p>"},{"location":"documentation/collectors/probes/vmware-vcenter/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/vmware-vcenter/#credentials","title":"Credentials","text":"<p>The VMware API requires a root account to access monitoring data on VMware ESX hosts and an administrative account for monitoring data on VMware Virtual center hosts.</p> <p>When your VMware implementation uses multiple ESX hosts using the same root password, it can be beneficial to create a defaultCredentials file containing the root account and set up a device-specific credentials file for the virtual center hosts.</p>"},{"location":"documentation/collectors/probes/vmware-vcenter/#operational","title":"Operational","text":""},{"location":"documentation/collectors/probes/vmware-vcenter/#known-issues","title":"Known issues","text":""},{"location":"documentation/collectors/probes/vmware-vcenter/#cached-api-response","title":"Cached API response","text":"<p>Sometimes InfraSonar reports different values than VMware consoles.</p> <p>The cause for this is that the VMware API sends cached data as a response to queries.</p> <p>The solution to mitigate this situation is to clean the VMware cache using the following commands on the affected ESX host:</p> <pre><code>localcli hardware ipmi sel clear\netc/init.d/sfcbd-watchdog restart\netc/init.d/hostd restart\netc/init.d/vpxa restart\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/","title":"WMI troubleshooting","text":""},{"location":"documentation/collectors/probes/wmi-troubleshooting/#manual-query","title":"Manual query","text":"<p>You can test WMI access from a Windows host or the Linux appliance.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#linux-appliance","title":"Linux appliance","text":"<p>WMI command line query for the Linux appliance or any host running Docker.</p> <pre><code>docker run --rm -it \\\n--network host \\\nghcr.io/infrasonar/wmiprobe \\\npywmitool \\\n-a &lt;computername or IP&gt; \\\n-u userid&gt; \\\n-d &lt;domain&gt; \\\n-q \"SELECT Name FROM Win32_OperatingSystem\"\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#windows-host","title":"Windows host","text":"<p>You can test if WMI is working correctly on a Windows host by using the <code>wbemtest</code> command:</p> <pre><code>wbemtest\nnamespace \\\\&lt;computername or IP&gt;\\root\\cimv2\nquery\nselect name from win32_computersystem\n</code></pre> <p>Note</p> <p>Make sure to replace <code>&lt;domain&gt;</code>, <code>&lt;userid&gt;</code>, and <code>&lt;computername or IP&gt;</code> with the correct values.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#wmi-probe-known-issues","title":"WMI-probe - Known issues","text":""},{"location":"documentation/collectors/probes/wmi-troubleshooting/#access-denied","title":"Access denied","text":"<p>There are various possible solutions for an access denied error.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#winrm-quickconfig","title":"winrm quickconfig","text":"<p>Run the following command to verify the configuration:</p> command<pre><code>winrm quickconfig\n</code></pre> <p>This should result in an output similar to the example output below:</p> output<pre><code>WinRM service is already running on this machine.\nWinRM is not set up to allow remote access to this machine for management.\nThe following changes must be made:\n\nConfigure LocalAccountTokenFilterPolicy to grant administrative rights remotely\nto local users.\n\nMake these changes [y/n]? y\n\nWinRM has been updated for remote management.\n\nConfigured LocalAccountTokenFilterPolicy to grant administrative rights remotely\n  to local users.\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#verify-security-policy-settings","title":"Verify Security Policy settings","text":"<p>In Security Settings --&gt; Local Policies --&gt; Security Options check these settings:</p> <ul> <li>Network access</li> <li>Do not allow storage of passwords and credentials for network authentication, must be DISABLED.</li> <li>Sharing and security model for local accounts must be set to CLASSIC.</li> </ul> <p>Typically we see these settings configured via Group Policy for standalone systems. These are part of the Local Security Policy.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#lan-manager-authentication-level","title":"LAN Manager authentication level","text":"<p>LAN Manager authentication level can cause the query error: <code>NTSTATUS: NT_STATUS_ACCESS_DENIED</code>:</p> <ol> <li>Start the group policy editor <code>gpedit.msc</code>.</li> <li>Browse to:</li> <li>Computer Configuration</li> <li>Windows Settings</li> <li>Security Settings</li> <li>Local Policies</li> <li>Security Options</li> <li>Verify if Network security: LAN Manager authentication level is set to: <code>Send LM &amp; NTLM - use NTLMv2 session security if negotiated</code>.</li> </ol>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#wmi-error-0x80041010","title":"WMI error 0x80041010","text":"<p>Performance counter based checks such as:</p> <ul> <li>base.cpu</li> <li>base.uptime</li> <li>base.volume-io</li> </ul> <p>Might give the following WMI Query error:</p> <p>WMI Query error occured, error message: NTSTATUS: NT code 0x80041010 - NT code 0x80041010</p> <p>To resolve this error, use the following command on the troubled host:</p> <pre><code>%windir%\\system32\\wbem\\wmiadap.exe /f\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#fix-broken-wmi-setup","title":"Fix broken WMI setup","text":""},{"location":"documentation/collectors/probes/wmi-troubleshooting/#rebuild-the-wmi-repository","title":"Rebuild the WMI repository","text":"<p>On Windows XP and above you can use the following command to rebuild the WMI repository:</p> <pre><code>rundll32 wbemupgd, UpgradeRepository\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#reinstall-wmi-in-the-registry","title":"Reinstall WMI in the registry","text":"<p>The following commands will reinstall WMI in the registry:</p> <pre><code>winmgmt /clearadap\nwinmgmt /kill\nwinmgmt /unregserver\nwinmgmt /regserver\nwinmgmt /resyncperf\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#broken-performance-counters","title":"Broken performance counters","text":"<p>To rebuild all Performance counters including extensible and third-party counters, enter the following commands in an Administrative command prompt. Press ENTER after each command.</p> <p>Rebuilding the counters:</p> <pre><code>cd c:\\windows\\system32\nlodctr /R\ncd c:\\windows\\sysWOW64\nlodctr /R\n</code></pre> <p>Resyncing the counters with Windows Management Instrumentation (WMI):</p> <pre><code>WINMGMT.EXE /RESYNCPERF\n</code></pre> <p>Stop and restart the Performance Logs and Alerts service. Stop and restart the Windows Management Instrumentation service.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#disk-performance-data-missing","title":"Disk performance data missing","text":"<p>Enable Disk performance counters using the following command:</p> <pre><code>DISKPERF -Y\n</code></pre> <p>You will receive the following message:</p> <p>Disk performance counters on this system are now set to start at boot. This change will take effect after the system is rebooted.</p> <p>See also: kb102020.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#access-denied-on-select-from-win32_service","title":"Access denied on SELECT * FROM Win32_Service","text":"<p>Run the following command in an administrative prompt:</p> <pre><code>sc sdset SCMANAGER D:(A;;CCLCRPRC;;;AU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)\n</code></pre>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#reverse-dns","title":"Reverse DNS","text":"<p>WMI can fail when querying on an IP address, if reverse DNS is not ok.</p>"},{"location":"documentation/collectors/probes/wmi-troubleshooting/#netlogon-service","title":"Netlogon service","text":"<p>Verify that the Netlogon service is running and set to start automatically.</p>"},{"location":"documentation/collectors/probes/wmi/","title":"Microsoft WMI","text":""},{"location":"documentation/collectors/probes/wmi/#features","title":"Features","text":"<p>InfraSonar can use the WMI protocol to monitor Microsoft Windows hosts without installing an agent on them. Monitoring in this scenario is performed by periodically querying the Windows host using WQL queries.</p> <p>InfraSonar uses the open source aiowmi library released in 2021 by Cesbit.</p>"},{"location":"documentation/collectors/probes/wmi/#prerequisites","title":"Prerequisites","text":"<p>The WMI-probe requires a service account with domain admin rights or a local administrative to perform the WMI queries.</p> <p>While it is possible to configure a regular user with additional DCOM permissions we feel this provides a false sense of security as the DCOM privileges required are quite broad.</p>"},{"location":"documentation/collectors/probes/wmi/#configuration","title":"Configuration","text":""},{"location":"documentation/collectors/probes/wmi/#probe","title":"Probe","text":""},{"location":"documentation/collectors/probes/wmi/#credentials","title":"Credentials","text":"<p>Credentials for the WMI probe are stored in a credential ini file, see the credentials section in our documentation for detailed information on how to use the credentials file.</p>"},{"location":"documentation/collectors/probes/wmi/#monitored-asset","title":"Monitored asset","text":"<p>The WMI-probe requires no configuration on the monitored asset, other then access via the WMI protocol.</p>"},{"location":"documentation/collectors/probes/wmi/#firewall-requirements","title":"Firewall requirements","text":""},{"location":"documentation/collectors/probes/wmi/#local-firewall","title":"Local firewall","text":"<p>If the Microsoft Windows local firewall is enabled, you will need to allow \"Windows Management Instrumentation\" traffic.</p> <p>To enable or disable WMI traffic using the firewall UI</p> <ol> <li>In the Control Panel, click on Security and then click on Windows Firewall.</li> <li>Click on Change Settings and then click on the Exceptions tab.</li> <li>In the Exceptions window, select the check box for Windows Management Instrumentation (WMI) to enable WMI traffic through the firewall. To disable WMI traffic, clear the check box.</li> </ol> <p>Tip</p> <p>Windows 11 has a special firewall that only allows access from hosts inside the same local subnet.</p> <p>To enable WMI traffic at command prompt using WMI rule group</p> <p>We can easily allow remote WMI using the following set of <code>netsh</code> commands:</p> <pre><code>netsh advfirewall firewall set rule group=\"Windows Management Instrumentation (WMI-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (DCOM-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (ASync-In)\" new enable=yes\n</code></pre>"},{"location":"documentation/collectors/probes/wmi/#corporate-firewall","title":"Corporate firewall","text":"<p>When monitoring hosts which are located behind a firewall, for example hosts in a DMZ, the firewall must be configured to allow WMI.</p> <p>To comply with Internet Assigned Numbers Authority (IANA) recommendations, Microsoft has increased the dynamic client port range for outgoing connections in Windows Vista and Windows Server 2008. The new default start port is 49152, and the new default end port is 65535. This is a change from the configuration of earlier versions of Windows that used a default port range of 1025 through 5000.</p> <ul> <li>Windows server below 2008, access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 1024-5000) should be granted.</li> <li>Windows server 2008 and higher versions. access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 49152-65535) should be granted.</li> </ul> <p>You can lookup the dynamic port range actually used by the Windows host using these commands:</p> <pre><code>netsh int ipv4 show dynamicport tcp\nnetsh int ipv4 show dynamicport udp\nnetsh int ipv6 show dynamicport tcp\nnetsh int ipv6 show dynamicport udp\n</code></pre> <p>Note</p> <p>The range is set separately for each transport (TCP or UDP).</p> <p>The port range is now truly a range that has a starting point and an ending point. </p> <p>Microsoft customers who deploy servers that are running Windows Server 2008 may have problems that affect RPC communication between servers if firewalls are used on the internal network. </p> <p>In these situations, we recommend that you reconfigure the firewalls to allow traffic between servers in the dynamic port range of 49152 through 65535.</p> <p>This range is in addition to well-known ports that are used by services and applications. Or, the port range that is used by the servers can be modified on each server.</p> <p>You adjust this range by using the netsh command, as follows: netsh int  set dynamic  start= number num= range. This command sets the dynamic port range for TCP. The start port is number, and the total number of ports is range."},{"location":"documentation/collectors/probes/wmi/#faq","title":"FAQ","text":""},{"location":"documentation/collectors/probes/wmi/#how-can-i-troubleshoot-wmi","title":"How can I troubleshoot WMI?","text":"<p>See our troubleshooting section for known issues and ways to troubleshot WMI queries.</p>"},{"location":"documentation/collectors/probes/wmi/#how-to-use-a-local-account","title":"How to use a local account?","text":"<p>None domain members</p> <p>This is only required for hosts that are not a member of your Windows domain or when using a local account is required due to other circumstances.</p> <p>By default only the true local administrator account can be used for remote WMI queries. You can use the following steps to create a local account:</p> <ol> <li>Create a local account and ensure the account is member of the group Remote Management Users.</li> <li>Authorize CIMV2 access:</li> <li>Open the WMI management console <code>wmimgmt.msc</code>.</li> <li>Right click WMI Control (Local) and select properties from the menu.</li> <li>Select the security tab.</li> <li>Browse to Root\\CIMV2.</li> <li>Click the button labeled security.</li> <li>Authorize COM access:</li> <li>Start the component Services console.</li> <li>Browse in the left pane to: Component Services \\ Computers.</li> <li>Right click My Computer and select **properties from the menu.</li> <li>Open the tab COM Security.</li> <li>Click Edit Limits in the Access Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure the account has Remote Access permissions.</li> <li>Close the access permission screen by clicking OK.</li> <li>Click on Edit Limits in the Launch and Activation Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure to allow: Local Launch, Remote Launch, Local Activation and Remote Activation.</li> <li>Close the windows by clicking OK twice and exit the Component Services console.</li> </ol>"},{"location":"documentation/collectors/probes/wmi/#how-to-monitor-microsoft-windows-server-2003","title":"How to monitor Microsoft Windows server 2003?","text":"<p>You should ensure Management and Monitoring Tools are installed using Add/remove windows components</p> <p>The software and updates check might not work as expected.</p>"},{"location":"documentation/collectors/probes/wmi/#how-to-monitor-a-microsoft-isa-server","title":"How to monitor a Microsoft ISA Server?","text":"<p>Monitoring a Microsoft ISA server requires the following rules on the ISA server:</p> <ul> <li>Allow traffic from the monitoring appliance to localhost for all protocols.</li> <li>Within this rule, filtering \"Enforce strict RPC compliance\" must be disabled.</li> </ul>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/","title":"InfraSonar Appliance","text":""},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#getting-started","title":"Getting started","text":"<p>We strongly advise to set up a dedicated (virtual) Linux  appliance for InfraSonar.</p> <p>This appliance can be set up manually using this guide or by downloading our ready-to-run OVA (Open Virtual Appliance) here.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#initialization","title":"Initialization","text":"<p>Initializing the InfraSonar appliances consists of three steps:</p> <ol> <li>Change the default <code>sysadmin</code> password. (<code>0versight!</code>)</li> <li>Configure the network stack.</li> <li>Set the environment variables in the compose file.</li> </ol> <p>All these steps can be performed via an SSH shell and a text editor such as Nano.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#remote-management","title":"Remote management","text":"<p>InfraSonar runs in Docker containers on Linux. Access is possible through the console in your virtualization solution. But a more straightforward approach is to use SSH.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#ssh-access","title":"SSH access","text":"<p>Modern desktop operating systems have the ssh command as part of their terminal. Alternatively, you can download and use PuTTY.</p> <p>SSH access is granted to the <code>sysadmin</code> user.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#nano-basics","title":"Nano basics","text":"<p>The InfraSonar appliance configuration requires you to edit files using SSH access. The appliance includes the main text editors of vi and nano.</p> <p>Since Nano is easier to use, we outline its essential functions here.</p> <p>In this example, we create a <code>defaultCredentials.ini</code> file for the WMI-probe. See the credentials section for more in-depth information regarding credential files.</p> <p>The easiest way to use Nano, is to open the file you want to edit or create directly using Nano, like this:</p> <pre><code>sudo nano /etc/infrasonar/config/wmiprobe/defaultCredentials.ini\n</code></pre> <p>Note</p> <p>We assume you are logged on to the appliance using SSH.</p> <p>This command will launch the Nano editor, where you can immediately make changes to the file:</p> <p> </p> Nano screenshot <p>When your edits are done, exit using Ctrl+X. Nano now prompts if you want to Save modified buffers.</p> <p>If you want to save your edits press Y, followed by an Enter to confirm the filename.</p> <p>Press N if you want to discard your edits or Ctrl+C if you want to continue editing.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#change-password","title":"Change password","text":"<p>Change the <code>sysadmin</code> password and keep it safe.</p> <p>Login to the appliance using SSH or via virtual machine console and use the <code>passwd</code> command to set the password.</p> <pre><code>$ passwd\nChanging password for sysadmin.\nCurrent password:\nNew password:\nRetype new password:\npasswd: password updated successfully\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#network-configuration","title":"Network configuration","text":"<p>The InfraSonar appliance ova uses DHCP by default. You can change this to a static IP by editing the file <code>/etc/netplan/00-installer-config.yaml</code>.</p> <p>Note</p> <p>This config file is a YAML file and as such proper indentation is crucial.</p> DHCP configuration <p>Example DHCP configuration (default):</p> <p>/etc/netplan/00-installer-config.yaml<pre><code>network:\nethernets:\nens160:\ndhcp4: true\nversion: 2\n</code></pre> Static IP config</p> <p>Example static IP configuration:</p> /etc/netplan/00-installer-config.yaml<pre><code>network:\nethernets:\nens160:\naddresses: [192.168.1.3/24]\ngateway4: 192.168.1.1\nnameservers:\naddresses: [192.168.1.10, 192.168.1.11]\nversion: 2\n</code></pre> <p>Apply netplan</p> <p>Apply the netplan configuration using the following command:</p> <pre><code>$ sudo netplan apply\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#starting-infrasonar","title":"Starting InfraSonar","text":"<p>For each InfraSonar appliance, the <code>TOKEN</code> must be set in the <code>/etc/infrasonar/docker-compose.yml</code> file.</p> <p>See our token documentation on how to retrieve a token.</p> <p>When a token set, you can start the appliance using the following <code>docker compose</code> command:</p> <pre><code>docker compose -f /etc/infrasonar/docker-compose.yml pull\ndocker compose -f /etc/infrasonar/docker-compose.yml up -d\n</code></pre> <p>docker-compose.yml details</p> <p>Detailed documentation about the docker-compose.yml file in use by InfraSonar can be found here.</p> <p>When the Docker environment is up and running, you should see the agentcore as a host in your environment. Contact InfraSonar support if you require any assistance.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_deployment/#monitor-the-appliance","title":"Monitor the appliance","text":"<p>Since InfraSonar is a monitoring platform, the first thing to do is monitor the appliance using the SNMP-probe.</p> <p>TODO</p>"},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/","title":"Docker","text":"<p>InfraSonar probes and the InfraSonar agentcore are distributed using Docker containers. </p> <p>This section outlines this docker-compose setup.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/#data-location","title":"Data location","text":"<p>We opt to store all InfraSonar related data and configuration in one directory, preferably in <code>/etc/infrasonar</code>.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/#docker-compose-file","title":"Docker compose file","text":"<p>The docker-compose file below can be used to deploy all currently available probes and an agentcore. </p> /etc/infrasonar/docker-compose.yml<pre><code>x-infrasonar-template:\n&amp;infrasonar\nnetwork_mode: host\nrestart: always\nlogging:\noptions:\nmax-size: 5m\nvolumes:\n- ./data:/data/\n\nservices:\nagentcore:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/agentcore\nenvironment:\nTOKEN: \"&lt;&lt;agentcore-token&gt;&gt;\"\n\npingprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/ping-probe\n\nhttpprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/httpprobe\n\ndnsprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/dnsprobe\n\ntcpprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/tcpprobe\n\nsnmpprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/snmpprobe\n\nwmiprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/wmiprobe\n\nmssqlprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/mssqlprobe\n\nvmwareprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/vmwareprobe\n\nnetappprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/netappprobe\n\npureprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/pureprobe\n\nsmtpprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/smtpprobe\n\ndockeragent:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/docker-agent\nenvironment:\nTOKEN: \"&lt;&lt;agent token&gt;&gt;\"\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/#section-outline","title":"Section outline","text":""},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/#x-infrasonar-template","title":"x-infrasonar-template","text":"<p>The <code>x-infrasonar-template</code> section ensures the default settings are the same for all InfraSonar containers.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_docker_compose/#agentcore-service","title":"Agentcore service","text":"<p>The gentcore service contains an environment variable containing a TOKEN that must be set correctly prior to starting the InfraSonar environment. See the tokens section on how to determine the correct variable.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/","title":"Appliance","text":"<p>This section outlines how to install the  Linux appliance from scratch.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#installation","title":"Installation","text":"<p> Ubuntu Server 22.04 LTS is used as the basis for the InfraSonar appliance.</p> <p>Create a new virtual machine using these specifications:</p> <ul> <li>Compatibility: Compatible with: ESXi 6.5 and later VM version 13</li> <li>Guest OS Family: Linux</li> <li>Guest OS Version: Ubuntu Linux (64-bit) </li> <li>CPU: 1 CPU</li> <li>Memory: 2 GB memory</li> <li>Disk: 16 GB HDD</li> <li>Name: infrasonar-appliance</li> </ul>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#installation-steps","title":"Installation steps","text":"<p>Boot from the Ubuntu Server 22.04.1 ISO and then follow these steps:</p> <ol> <li>Select your language: English.</li> <li>Keyboard configuration:<ol> <li>Layout: English (US).</li> <li>Variant: English (US).</li> </ol> </li> <li>Choose the type of install: Ubuntu server (minimized)</li> <li>Network configuration: DHCP. (Note it can take some time for an IP address to get assigned)</li> <li>Proxy address: enter a proxy address if your environment uses a proxy, otherwise leave empty.</li> <li>Mirror address: keep as it is, unless you know what you are doing.</li> <li>Guided storage configuration:<ol> <li>Select: Use an entire disk.</li> <li>Deselect: Set up this disk as an LVM group.</li> </ol> </li> <li>Storage configuration:</li> <li>Review the file system summary and select: Done.</li> <li>Confirm destructive action, by clicking: Continue.</li> <li>Profile setup:<ol> <li>Your name: sysadmin.</li> <li>Your server's name: infrasonar-appliance.</li> <li>Pick a username: sysdmin.</li> <li>Choose a password: ...</li> <li>Confirm your password: ...</li> </ol> </li> <li>SSH Setup:<ol> <li>Select: Install OpenSSH Server.</li> <li>Import SSH identity: No.</li> </ol> </li> <li>Featured Server Snaps: do not select any server snaps.</li> <li>If the installation is ready, select: Reboot now.</li> </ol> <p>Note</p> <p>Do not forget to unmount the ISO.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#post-installation-steps","title":"Post installation steps","text":"<p>Login to the appliance using SSH to perform the post installation steps.</p> <pre><code>ssh sysadmin@&lt;server-ip&gt;\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#upgrade","title":"Upgrade","text":"<p>```bash update and upgrade sudo apt update sudo apt upgrade sudo reboot <pre><code>### VMware tools\n\nIt is recommended to install [open-vm-tools](https://github.com/vmware/open-vm-tools), when the appliance is installed on a VMware hypervisor platform.\n\n```bash \n# Update the APT package index.\nsudo apt update\n# Install open VMware tools.\nsudo apt install -y open-vm-tools\n</code></pre></p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#miscellaneous-tools","title":"Miscellaneous tools","text":"<pre><code>sudo apt install -y vim nano cron dns-utils snmp\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#docker-installation","title":"Docker installation","text":"<p>All InfraSonar components run as Docker containers and are orchestrated using docker-compose.</p> <p>The official Docker engine installation instructions can be found here.</p> <pre><code>sudo apt update\nsudo apt install -y \\\nca-certificates \\\ncurl \\\ngnupg \\\nlsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\necho \\\n\"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt update\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\nsudo groupadd docker\nsudo usermod -aG docker $USER\nsudo systemctl enable docker.service\nsudo systemctl enable containerd.service\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#unattended-updates","title":"Unattended updates","text":"<p>As we want the InfraSonar appliance to be zero maintenance, we configure unattended updates and allow the appliance to reboot when necessary at 2:00 CET.</p> <p>Ubuntu unattended upgrades installation</p> <pre><code># Install the unattended-upgrades package.\nsudo apt install -y unattended-upgrades\n# Verify using the following systemctl command.\nsudo systemctl status unattended-upgrades\n# To set automatic updates, we are going to install the update-notifier-common package.\nsudo apt install -y update-notifier-common\n</code></pre> <p>Ubuntu unattended upgrades configuration</p> <p>Change the file <code>/etc/apt/apt.conf.d/50unattended-upgrades</code>, so it reflects these changes:</p> <pre><code>....\nUnattended-Upgrade::Allowed-Origins {\n        \"${distro_id}:${distro_codename}\";\n        \"${distro_id}:${distro_codename}-security\";\n        // Extended Security Maintenance; doesn't necessarily exist for\n        // every release and this system may not have it installed, but if\n        // available, the policy for updates is such that unattended-upgrades\n        // should also install from here by default.\n        \"${distro_id}ESMApps:${distro_codename}-apps-security\";\n        \"${distro_id}ESM:${distro_codename}-infra-security\";\n        \"${distro_id}:${distro_codename}-updates\";\n//      \"${distro_id}:${distro_codename}-proposed\";\n//      \"${distro_id}:${distro_codename}-backports\";\n        \"Docker:${distro_codename}\";\n};\n\n....\n\n// Automatically reboot *WITHOUT CONFIRMATION* if\n// the file /var/run/reboot-required is found after the upgrade.\nUnattended-Upgrade::Automatic-Reboot \"true\";\n\n// Automatically reboot even if there are users currently logged in\n// when Unattended-Upgrade::Automatic-Reboot is set to true.\nUnattended-Upgrade::Automatic-Reboot-WithUsers \"true\";\n\n// If automatic reboot is enabled and needed, reboot at the specific\n// time instead of immediately.\n// Default: \"now\".\nUnattended-Upgrade::Automatic-Reboot-Time \"02:00\";\n....\n</code></pre> <p>Enable daily unattended upgrades</p> <pre><code>echo unattended-upgrades unattended-upgrades/enable_auto_updates boolean true | sudo tee -a debconf-set-selections\nsudo dpkg-reconfigure -f noninteractive unattended-upgrades\n</code></pre> <p>You can verify that automatic updates are turned on, with this command:</p> <pre><code>sudo debconf-get-selections | grep -i enable_auto_updates\n</code></pre> <p>Note</p> <p><code>debconf-get-selections</code> requires debconf-utils to be installed (<code>sudo apt-get install debconf-utils</code>). We opt not to install this on production appliances, as we want to keep them as clean as possible.</p> <p>Logging</p> <p>Unattended Upgrades Log.</p> <p>The <code>unattended-upgrades.log</code> is a log file where you can view all actions done by the unattended upgrade system. You can view the file with, for example, the tail command:</p> <pre><code>tail -n 100 /var/log/unattended-upgrades/unattended-upgrades.log\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#ssh-configuration","title":"SSH configuration","text":"<p>Edit the file <code>/etc/ssh/sshd_config</code> to harden SSH access:</p> /etc/ssh/sshd_config<pre><code>...\n# Logging\nSyslogFacility AUTHPRIV\n# LogLevel INFO\n\n...\n\n# Authentication:\nLoginGraceTime 10m\nPermitRootLogin no\n#StrictModes yes\nMaxAuthTries 3\nMaxSessions 1\n\n...\n\nAllowAgentForwarding no\nAllowTcpForwarding no\n#GatewayPorts no\nX11Forwarding no\n</code></pre> <p>Restart the SSH service to load the changes made.</p> <pre><code>sudo service ssh restart\n</code></pre> <p>SSH hardening options</p> <p>The above change implements these hardening options:</p> <ol> <li>Block clients for 10 minutes after 3 failed login attempts.</li> <li>Disallow root from logging in.</li> <li>Disable connection multiplexing, which can be used to bypass authentication.</li> <li>Disable user environment forwarding.</li> </ol>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#snmpd","title":"SNMPD","text":"<p>To monitor the Linux operating system, install the snmpd daemon:</p> <pre><code>sudo apt install -y snmpd\n</code></pre> <p>As we use the default community string <code>public</code> and only require the snmpd daemon to listen on <code>localhost</code>, no further configuration is required.</p> <pre><code># Read-only access to everyone to the systemonly view\nrocommunity  public default\nrocommunity6 public default -V systemonly\n\n# SNMPv3 doesn't use communities, but users with (optionally) an\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#tmate","title":"tmate","text":"<p>tmate is installed to offer remote support on request.</p> <pre><code>sudo apt install -y tmate\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#sudo-configuration","title":"sudo configuration","text":"<p>We opt to allow command to be executed using sudo without asking for a password.</p> <p>Edit the sudo config by starting the editor </p> <pre><code>sudo visudo\n</code></pre> <p>Make the following modification:</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) NOPASSWD:ALL\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#infrasonar","title":"InfraSonar","text":"<p>InfraSonar is deployed on the appliance using Docker.</p> <p>We opt to use <code>/etc/infrasonar</code> as the main directory.</p> <pre><code>sudo mkdir /etc/infrasonar\n</code></pre> <p>Next step is to setup the Docker compose file in <code>/etc/infrasonar/docker-compose.yml</code>. This file is outlined here.</p> <p>On the downloadable appliance we provide the <code>docker-compose.yml</code> file at the following location <code>/etc/infrasonar/docker-compose.yml.example</code>.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#appliance-init","title":"Appliance init","text":"<p>Prior to creating a template the following steps need to be performed:</p> <ol> <li>Run the first boot script.</li> <li>Avoid duplicate SSH host keys.</li> <li>Avoid duplicate machine ID's.</li> </ol>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#first-boot-script","title":"First boot script","text":"<p>The following script is used to run at first boot and sets a random schedule for a daily InfraSonor update.</p> /home/sysadmin/init<pre><code>#!/usr/bin/env bash\n\n# InfraSonar appliance init script.\n# This script is only run once on the first boot of the appliance.\n\n# Remove the init crontab.\ncrontab -l | grep -v '/home/sysadmin/init'  | crontab -\n\n# Scheduling docker crontab for: $hour:$minute\".\nhour=$[ $RANDOM % 10 + 7 ] # Random hour between 7 and 16\nminute=$[ $RANDOM % 59 + 1 ] # Random minute between 1 and 59\n(crontab -l ; echo \"$minute $hour * * * docker compose -f /etc/infrasonar/docker-compose.yml pull &amp;&amp; docker compose -f /etc/infrasonar/docker-compose.yml up -d\") | crontab -\n\n# Fix removed SSH host keys\n# Note: this requires the use of sudo without password\nsudo dpkg-reconfigure openssh-server\nsudo service ssh restart\n\n# Remove this init script.\nrm /home/sysadmin/init\n</code></pre> <p>Add the script to the crontab to run as first boot:</p> <pre><code>chmod +x /home/sysadmin/init\n(crontab -l ; echo \"@reboot /home/sysadmin/init\") | crontab -\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#avoid-duplicate-ssh-host-keys","title":"Avoid duplicate SSH host keys","text":"<p>To avoid lingering duplicate SSH host keys, we remove them before converting the appliance into a template.</p> <pre><code>sudo rm /etc/ssh/ssh_host_* \n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#avoid-duplicate-machine-ids","title":"Avoid duplicate machine ID's","text":"<p>See also this VMware knowledge base article.</p> <p>Before cloning, run these commands inside the Linux Guest OS:</p>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#first-login","title":"First login","text":""},{"location":"documentation/collectors/probes/appliance/appliance_installation/#first-boot","title":"first boot","text":""},{"location":"documentation/collectors/probes/appliance/appliance_installation/#change-hostname","title":"Change hostname","text":"<pre><code>#!/bin/bash\nhostnamectl set-hostname \"blue\"\necho $?\nhostnamectl set-hostname \"\"\necho $?\n</code></pre> <p>sudo hostnamectl set-hostname \"blue\" sudo sed -i 's/infrasonar/blue/g' /etc/hosts</p> <p>https://www.cyberciti.biz/faq/ubuntu-20-04-lts-change-hostname-permanently/</p> <pre><code>sudo hostnamectl set-hostname ubuntu-2004-nixcraft\n</code></pre> <p>TODOR</p> <pre><code># Expire the sysadmin password enforcing the user to change the password at logon\npasswd -e sysadmin\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#cleanup","title":"Cleanup","text":"<p>Remove the history</p> <pre><code>history -c\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#shutdown","title":"Shutdown","text":"<pre><code>sudo shutdown -h now\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#export-the-appliance","title":"Export the appliance:","text":"<pre><code>cd C:\\Program Files\\VMware\\VMware OVF Tool\novftool \"vi://administrator@vsphere.local@vcenter.lab.test-technology.nl:443 \\\n   /Datacenter/vm/infrasonar-appliance\" \\\n   \"c:\\Documents and Settings\\sysadmin\\infrasonar-appliance.ova\"\nEnter login information for source vi://vcenter.lab.test-technology.nl/\nUsername: administrator%40vsphere.local\nPassword: ********\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_installation/#create-a-template","title":"Create a template","text":"<p>Note</p> <p>The step below describe our lab configuration, adapt to your own needs.</p> <ol> <li>Open virtual center (https://vcenter.lab.test-technology.nl)</li> <li>Browse to the vm: <code>infrasonar-appliance</code></li> <li>Right click the host and select Clone -&gt; Clone to Template</li> <li>Name the template: <code>infrasonar-appliance-template</code></li> <li>Select a location: <code>vcenter.lab.test-technology</code> \\ <code>Datacenter</code></li> <li>Select a compute resource: <code>Datacenter</code> \\ <code>esxi01.test-technology.nl</code></li> <li>Select storage: <code>truenas</code></li> </ol>"},{"location":"documentation/collectors/probes/appliance/appliance_operational/","title":"Appliance maintenance","text":"<p>As the InfraSonar appliance updates itself it requires almost no maintenance.</p>"},{"location":"documentation/collectors/probes/appliance/appliance_operational/#manual-update","title":"Manual update","text":"<p>If you want to update your InfraSonar components manually you can do so using the following commands:</p> <pre><code># Look for newer images and pull these\ndocker compose -f /etc/infrasonar/docker-compose.yml pull\n# Reload any changed images\ndocker compose -f /etc/infrasonar/docker-compose.yml up -d\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_operational/#restarting-infrasonar","title":"Restarting InfraSonar","text":"<p>If you want ro restart all InfraSonan containers you can do so using the following command:</p> <pre><code>docker compose -f /etc/infrasonar/docker-compose.yml restart\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/appliance_operational/#logging","title":"Logging","text":"<p>For troubleshooting purposes you can change the loglevel in the <code>/etc/infrasonar/docker-compose.yml</code> </p> <p>Supported log levels:</p> <ul> <li>debug</li> <li>info</li> <li>warning</li> <li>error</li> <li>critical</li> </ul> /etc/infrasonar/docker-compose.yml<pre><code>x-infrasonar-template:\n&amp;infrasonar\nnetwork_mode: host\nrestart: always\nlogging:\noptions:\nmax-size: 5m\nvolumes:\n- ./data:/data/\n\nservices:\nagentcore:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/agentcore\nenvironment:\nTOKEN: \"&lt;your-token&gt;\"\nLOG_LEVEL: \"debug\"\nLOG_COLORIZED: \"1\"\npingprobe:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/ping-probe\nenvironment:\nLOG_LEVEL: \"debug\"\nLOG_COLORIZED: \"1\"\n</code></pre> <p>Note</p> <p>You need to restart you containers for changed log setting to become active.</p>"},{"location":"documentation/collectors/probes/appliance/credentials/","title":"Credentials","text":"<p>Some InfraSonar probes require configuration and/or credentials to execute / authenticate its queries. A good example is the WMI-probe that requires Windows domain credentials to perform WMI queries.</p> <p>Credentials are stored in a yaml formatted file on the appliance hosting the InfraSonar probes.</p>"},{"location":"documentation/collectors/probes/appliance/credentials/#infrasonaryaml-basics","title":"infrasonar.yaml basics","text":"<p>The <code>infrasonar.yaml</code> file has a straighforward structure allowing probe specific configurations and per asset deviations from a default configuration.</p> <p>The basic structure looks like this:</p> infrasonar.yaml<pre><code>exampleProbe:\nconfig:\nusername: alice\npassword: \"a secret\"\nassets:\n- id: 123\nconfig:\nusername: bob\npassword: \"my secret\"\n- id: [456, 789]\nconfig:\nusername: charlie\npassword: \"other secret\"\notherProbe:\nuse: exampleProbe\n</code></pre> <p>The <code>infrasonar.yaml</code> file where the credentials are stored can be found in the <code>data/config</code> folder, on an out of the box implementation this file is stored here: <code>/etc/infrasonar/data/config</code></p>"},{"location":"documentation/collectors/probes/appliance/credentials/#configuration-file-breakdown","title":"Configuration file breakdown","text":"<p>When applicable a probe has it's own section consisting of the probe name and a configuration for that probe.</p> <pre><code>exampleProbe:\n</code></pre> <p>The <code>config</code> section contains the default probe configuration used by all probes if no exceptions are defined. The probe specific sections in this chapter describe the individual options per probe.</p> <pre><code>  config:\nusername: alice\npassword: \"a secret\"\n</code></pre> <p>Asset specific configuration can be added per asset-id using the <code>id</code> property, this can either be one asset or a list of assets.</p> <pre><code>  assets:\n- id: 123\nconfig:\nusername: bob\npassword: \"my secret\"\n- id: [456, 789]\nconfig:\nusername: charlie\npassword: \"other secret\"\n</code></pre> <p><code>use</code> is a special property to indicate a probe should use the config from another probe. An example for this are the vendor specific SNMP probes we offer.</p> <pre><code>otherProbe:\nuse: exampleProbe\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/credentials/#security-considerations","title":"Security considerations","text":"<p>unreadable, not truly encrypted.</p> <p>WARNING: InfraSonar will make <code>password</code> and <code>secret</code> values unreadable but this must not be regarded as true encryption as the encryption key is publicly available.</p> <p>In the examples below the password is shown in plain text; InfraSonar however encrypts the password once it sees the file has been changed.</p> <p>Resulting in an encrypted section in the password section:</p> encrypted password example<pre><code>wmi:\nconfig:\nusername: administrator\npassword:\nencrypted: !!binary |\nZ0FBQUFBqmppaWFKblBwbGVIVV72ckFKZFRZRmItX0pYNlpRYnRsT2pLRG1vS2ZjV1lfSExrbi1J\nUy1LQjhZcVZCAXhCMG5jUmRDd1EteE5Za3duQ1VMbGw3U2JXX3BWSkE9PQ==\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/credentials/#probe-specifics","title":"Probe specifics","text":""},{"location":"documentation/collectors/probes/appliance/credentials/#esx","title":"ESX","text":"<p>The ESX section is straightforward and has beyond a username and a password no configuration options.</p> <pre><code>esx:\nconfig:\nusername: root\npassword: \"a secret\"\nassets:\n- id: 123\nconfig:\nusername: root\npassword: \"my secret\"\n- id: [456, 789]\nconfig:\nusername: root\npassword: \"other secret\"\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/credentials/#snmp","title":"SNMP","text":"<p>The SNNP probe supports SNMPv1, SNMPv2c, and SNMPv3</p> <pre><code>snmp:\nconfig:\ncommunity: public\nassets:\n- id: 123\nconfig:\ncommunity: other\nversion: 2c\n- id: 456\nconfig:\nversion: \"1\"\ncommunity:\nsecret: not_so_public\n- id: [789, 012]\nconfig:\nversion: \"3\"\nusername: alice\nauth:\n# auth is optional; type USM_AUTH_NONE is used when omitted.\n# supported: USM_AUTH_HMAC96_MD5, USM_AUTH_HMAC96_SHA or USM_AUTH_NONE\ntype: USM_AUTH_HMAC96_SHA\npassword: \"my secret password\"\npriv:\n# priv is optional; type USM_PRIV_NONE is used when omitted.\n# supported: USM_PRIV_CBC56_DES, USM_PRIV_CFB128_AES or USM_PRIV_NONE\ntype: USM_PRIV_CFB128_AES\npassword: \"my secret password\"\nsnmp-synology:\nuse: snmp\n</code></pre> <p><code>version</code> supports the following values:</p> <ul> <li><code>1</code> for SNMPv1</li> <li><code>\"2c\"</code> for SNMPv2c</li> <li><code>3</code> for SNMPv3</li> </ul> <p>Community strings are not encrypted when used as such:</p> <pre><code>      community: other\n</code></pre> <p>It is possible though to encrypt the community strings on the appliance by indicating the string is secret as such:</p> <pre><code>      community:\nsecret: not_so_public\n</code></pre> <p>This results upon save in community string being encrypted:</p> <pre><code>      community:\nsecret:\nencrypted: !!binary |\nZ0FBQUFBQmptMEhGZ0FhTGJZNFNTckZKdXRWaVpKT0RzMzBERlJGUW1MVGVCVHNmTE15eVlOMTVD\ndGZWU1VEYUtPN2V4cWdOeGdoYlB1M29ua2JTZzNuQVlqU09EM0Z2c2c9PQ==\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/credentials/#wmi","title":"WMI","text":"<p>The WMI probe uses a straightforward configuration as shown below.</p> <p>When Microsoft Active directory accounts are used the username can be either in domain format <code>domain\\infrasonar_service_account</code> or use the UPN format: <code>infrasonar_service_account@domain.something</code></p> <p>An asset specific configuration can be useful for non domain joined servers.</p> <pre><code>wmi:\nconfig:\nusername: alice\npassword: \"a secret\"\nassets:\n- id: 123\nconfig:\nusername: domain\\bob\npassword: \"my secret\"\n- id: [456, 789]\nconfig:\nusername: charlie@domain.org\npassword: \"other secret\"\n</code></pre>"},{"location":"documentation/collectors/probes/appliance/credentials/#faq","title":"FAQ","text":"<p>Q: is it possible to copy credentials?</p> <p>A: Yes credential files can be exchanged between appliances belonging to the some InfraSonar container.</p>"},{"location":"documentation/collectors/services/","title":"Services","text":"<p>Services are a new concept in private  beta at the moment.</p> <p>A service collector is used to monitor a global service such as, for example, the status of Microsoft 365, AWS health, Google Cloud status, etc. The collected service status is reported back to all interested containers.</p>"},{"location":"documentation/collectors/services/last_seen/","title":"Last Seen","text":""},{"location":"documentation/guides/migration/","title":"Migration scenarios","text":"<p>There are scenarios where a monitored environment needs to be moved to a container belonging to another organization.</p> <p>An example of such a scenario is when a monitored environment will be serviced by another managed services partner.</p> <p>This document outlines our preferred migration approach to ensure uninterrupted monitoring.</p>"},{"location":"documentation/guides/migration/#migration-steps","title":"Migration steps","text":"<p>Migrating a monitored environment consists of two steps, which can be performed independently.</p> <ol> <li>Monitoring infrastructure transition.</li> <li>Hierarchy transition.</li> </ol> <p>However, the actual first step is to contact InfraSonar support to assist with the transition.</p> <p>InfraSonar support ensures a hassle-free transition by aligning all parties involved.</p>"},{"location":"documentation/guides/migration/#monitoring-infrastructure-transition","title":"Monitoring infrastructure transition","text":"<p>This step involves transiting of the InfraSonar implementation inside the monitored environment; in most cases, this is the monitoring appliance.</p> <p>As this appliance is potentially used to provide other services within the monitored environment, we advise starting with setting up a new appliance (with the agentcore and probes) and transitioning the monitored host to this new agentcore. This process is similar to decommissioning an agentcore.</p> <p>We do not recommend a \"rip and replace\" scenario, as this is not beneficial for the monitored environment.</p> <p>If the leaving and receiving parties are discussing terms and conditions, we recommend the following first:</p> <ol> <li>Deploy a new agentcore infrastructure.</li> <li>Perform a hierarchy transition.</li> <li>Move the monitored hosts to the new agentcore infrastructure.</li> <li>Remove the \"old\" agentcores from InfraSonar.</li> <li>Decommission and remove leaving party appliance(s).</li> </ol> <p>These steps can be performed without any access to the appliance(s) of the leaving party.</p> <p>Suppose the leaving party demands the appliance to be removed prior to the hierarchy transition. In that case, InfraSonar monitoring will most likely be disturbed when the orphaned hosts are transitioned to the new agentcore(s).</p> <p>We strongly encourage a gradual and joint approach, as this ensures uninterrupted monitoring services of the monitored environment.</p>"},{"location":"documentation/guides/migration/#hierarchy-transition","title":"Hierarchy transition","text":"<p>A hierarchy transition is the move of a monitored environment from a container of the leaving party to a container of the receiving party. This is an administrative action performed inside the InfraSonar cloud platform.</p> <p>This step can only be performed by InfraSonar support and requires written and signed consent by the owner or its representative of the monitored environment. This consent should be sent via email to support@infrasonar.com.</p> <p>InfraSonar support will contact the parties involved to align the timeline for this transition to ensure optimal service for the monitored party.</p> <p>Warning</p> <p>Before a hierarchy transition, the leaving party should verify if the notes section does not contain references that should not be transitioned.</p> <p>During the hierarchy transition, the following irreversible actions will be performed:</p> <ol> <li>All custom conditions and labels will be removed, as they are the property of the leaving party.</li> <li>All alarms will be removed, as they might contain the usernames of the leaving party.</li> <li>Historical alerts will be removed, as they contain usernames and references to customizations owned by the leaving party.</li> <li>All Channels configuration will be removed.</li> </ol> <p>If you have questions or remarks concerning this section, don't hesitate to contact InfraSonar support.</p>"},{"location":"documentation/guides/remote_support/","title":"Remote support","text":""},{"location":"documentation/guides/remote_support/#tmate","title":"tmate","text":"<p>We opt to use tmate to provide remote support as it is easy to use, fully open source, and allows TeamViewer-like access to the terminal.</p>"},{"location":"documentation/guides/remote_support/#installation","title":"Installation","text":"<p>Tmate comes preinstalled on our appliances, but if you have set up your environment manually, you might need to install tmate first.</p> <p>On Debian / Ubuntu systems the installation is straightforward:</p> <pre><code>sudo apt-get install tmate\n</code></pre> <p>For other distributions, follow the guides provided at the tmate website</p>"},{"location":"documentation/guides/remote_support/#usage","title":"Usage","text":"<p>Just type <code>tmate</code> while connected via ssh or in the console of your virtual appliance.</p> <p>You will be greeted with a screen like this:</p> <pre><code>Tip: if you wish to use tmate only for remote access, run: tmate -F                                                                                                                                                                      [0/0]\nTo see the following messages again, run in a tmate session: tmate show-messages\nPress &lt;q&gt; or &lt;ctrl-c&gt; to continue\n---------------------------------------------------------------------\nConnecting to ssh.tmate.io...\nNote: clear your terminal before sharing readonly access\nweb session read only: https://tmate.io/t/ro-generated_ro_id\nssh session read only: ssh ro-generated_ro_id@lon1.tmate.io\nweb session: https://tmate.io/t/generated_id\nssh session: ssh generated_id@lon1.tmate.io\n</code></pre> <p>Send our support engineer this information via a secure channel and ensure access is only used by our support engineer by observing the screen. If in doubt, exit the session using the <code>exit</code> command or by pressing <code>ctrl-d</code></p>"},{"location":"documentation/introduction/getting_started/","title":"Getting started","text":""},{"location":"documentation/introduction/getting_started/#getting-started-with-infrasonar","title":"Getting started with InfraSonar","text":""},{"location":"documentation/introduction/getting_started/#familiarize","title":"Familiarize","text":"<p>We recommend setting up a small-scale testing environment and using this documentation to guide you on your journey to become acquainted with InfraSonar and its terminology.</p>"},{"location":"documentation/introduction/getting_started/#implementation-steps","title":"Implementation steps","text":"<p>Implementing a basic InfraSonar configuration is easy because InfraSonar can be deployed agent-less and thus leaves no footprint on the monitored infrastructure.</p> <ol> <li>Create a container    The first step is to create a container for your assets.</li> <li>Deploy the InfraSonar appliance    Deploy and setup the InfraSonar appliance in your infrastructure.</li> <li>Configure probes    Setting up (default) credentials is the only configuration required in most cases. </li> <li>Add assets Add assets using the web application.</li> </ol>"},{"location":"documentation/introduction/getting_started/#implementation-support","title":"Implementation support","text":"<p>Feel free to reach out to us for support when implementing/evaluating InfraSonar.</p> <p>Our implementation Consultants have years of experience and are keen to show you around and get the best out of our platform.</p>"},{"location":"documentation/introduction/platform/","title":"Platform","text":"<p>This section provides an overview of the InfraSonar monitoring platform.</p>"},{"location":"documentation/introduction/platform/#architectural-overview","title":"Architectural overview","text":"<p>An architectural overview of the InfraSonar platform</p> <p></p> <p>InfraSonar can be broken down in three area's:</p> <ol> <li>Collectors;</li> <li>InfraSonar cloud;</li> <li>InfraSonar application.</li> </ol>"},{"location":"documentation/introduction/platform/#collectors","title":"Collectors","text":"<p>Within InfraSonar, we identify three concepts for collecting data:</p> <ul> <li>Agents   Agents run autonomously on an endpoint and send data straight to the InfraSonar platform.</li> <li>Probes   Probes query an endpoint using a specific protocol.</li> <li>Services   Services monitor an endpoint and report the status to multiple containers. E.g. Microsoft 365 Service Health Status</li> </ul>"},{"location":"documentation/introduction/platform/#infrasonar-cloud","title":"InfraSonar cloud","text":"<p>The InfraSonar cloud platform is hosted on the Google Cloud Platform.</p> <p>Data from a monitored environment is received and processed in the InfraSonar cloud platform on what we call the Message-hubs. These Message-hubs evaluate the data against configured conditions and store received time series data in SiriDB. Received state data is kept in memory by the Message-hubs.</p>"},{"location":"documentation/introduction/platform/#infrasonar-application","title":"InfraSonar application","text":"<p>The InfraSonar application is a web based user interface which accessible using any modern web browser.</p> <p>The application can send messages to end-users using email or Dutycalls.</p> <p>See our application section in the documentation for more information</p>"},{"location":"documentation/introduction/support/","title":"Support","text":""},{"location":"documentation/introduction/support/#support","title":"Support","text":"<p>How can we help you?</p>"},{"location":"documentation/introduction/support/#services","title":"Services","text":"Implementation services <p>Implementing a monitoring solution can be a challenging task.</p> <p>Our implementation consultants have a lot of experience in not only implementing InfraSonar but also on helping your organization into accepting and eventually embracing a new way of working.</p>  Support <p>Support is only a phone-call, slack message or email away.</p>  Custom development <p>A InfraSonar is an open platform adding custom probes, agents and or services to our platform is easily done.</p> <p>Feel free to contact us to discuss your monitoring needs.</p>  Analysis support <p>Analyzing monitoring data and combining metrics to create custom dashboards to offer an in-depth view of your monitored infrastructure is one off InfraSonors unique features.</p> <p>If you have any specific requirements we can jointly figure out what would we the best way to setup InfraSonar dashboards.</p>"},{"location":"documentation/introduction/support/#contact-details","title":"Contact details","text":"<p> support@infrasonar.com</p> <p> +31 85 876 8733</p>"},{"location":"documentation/introduction/support/#availability","title":"Availability","text":"<p>We are a European company based in the Netherlands. Our general availability is from Monday to Friday between 08:00  and 17:00  (CET)1.</p> <ol> <li> <p>Different times are possible by appointment.\u00a0\u21a9</p> </li> </ol>"},{"location":"documentation/introduction/terminology/","title":"Terminology","text":"Term Description Agentcore Central component in a monitored infrastructure that acts as a relay between probes and the InfraSonar cloud. Agents A standalone InfraSonar component that can send monitoring data to InfraSonar via the API API The API allows users to perform automated access using a personal access token. Appliance A dedicated (virtual) Linux appliance for InfraSonar. Asset A monitored network component in an environment. Container Used to organize environments and authorization in those environments. Frontend These are the webservers hosting the UI for end users to access InfraSonar. Messagehub State is stored here in memory, and logic is performed when new monitoring data arrives. SiriDB The database used for storing timeseries data with a long term retention. Probes These perform the actual measurement and are tailored per monitored component. Environment A business or an IT infrastructure monitored using InfraSonar."},{"location":"documentation/introduction/what_is_Infra_Sonar/","title":"What is InfraSonar","text":""},{"location":"documentation/introduction/what_is_Infra_Sonar/#what-is-infrasonar","title":"What is InfraSonar","text":"<p>InfraSonar is the brainchild an IT infrastructure specialist and a great software development team with a passion for scalable software solutions who joined forces with an IT service provider to create an easy-to-maintain, uniform monitoring platform.</p> <p>InfraSonar comes out of the box with many predefined conditions based on years of experience and best practices.</p> <p>This predefined set of conditions and agent-less monitoring capabilities make for an easy and non-intrusive rollout with minimum effort.</p> <p>Single source of truth</p> <p>InfraSonar's detailed data collection allows it to serve as your organization's single \"source of truth.\"</p>"},{"location":"documentation/introduction/what_is_Infra_Sonar/#infrasonar-capabilities","title":"InfraSonar capabilities","text":"<ul> <li>State monitoring   This allows us to monitor whether the status is still in the desired state, detect state changes and even detect missing items such as volumes, services, and software.</li> <li>Performance monitoring   Monitors the current state and notifies when a threshold is reached.   Performance data is stored in our time series database SiriDB for analysis over time.</li> <li>Analysis   Performance data and hit alerts (open &amp; closed) are used for analysis over time.</li> </ul>"},{"location":"documentation/introduction/what_is_Infra_Sonar/#history","title":"History","text":"<p>InfraSonar is de successor of Oversight an IT infrastructure monitoring solution which started out in 2013 as a monitoring solution for IT service providers.</p> <p>With InfraSonar we took the lessons learned and made a more versatile and resistent platform not only suitable for IT environments but for any platform were state and performance monitoring are required.</p>"},{"location":"documentation/privacy-security/privacy/","title":"Privacy","text":"<p>Protecting the privacy of the InfraSonar Platform and its customers is a top priority. This page describes what we do and what you as a user can do to guarantee this privacy as well as possible.</p>"},{"location":"documentation/privacy-security/privacy/#data-control","title":"Data control","text":"<p>Customer data is your data, not InfraSonar\u2019s. We only process your data according to your agreement(s). It is, therefore, also possible to manage and delete all user-related information.</p>"},{"location":"documentation/privacy-security/privacy/#data-access-and-restrictions","title":"Data Access and Restrictions","text":"<p>Only a minimum number of InfraSonar employees have access to user data to ensure user privacy.</p> <p>We recommend following the same policy in your InfraSonar environments. Only give users access to the resources they need.</p>"},{"location":"documentation/privacy-security/privacy/#data-collection-and-use","title":"Data collection and use","text":"<p>We are transparent about data collection and use. We are committed to transparency, compliance with regulations like the GDPR, and privacy best practices. That is why we only collect data necessary for the platform's functioning. It is up to the user to determine which monitoring data needs to be collected.</p> <p>In addition, we never sell customer data or service data to third parties.</p>"},{"location":"documentation/privacy-security/privacy/#data-retention","title":"Data retention","text":"<p>InfraSonar has the following different retention periods for its data.</p>"},{"location":"documentation/privacy-security/privacy/#configuration-data","title":"Configuration data","text":"<p>Configuration data such as labels, conditions and authorizations are stored while configured.</p> <p>When a configuration change is made, we don't retain any history in our logging and backups.</p>"},{"location":"documentation/privacy-security/privacy/#time-series-data","title":"Time series data","text":"<p>Time series data is stored in SiriDB, part of the InfraSonar cloud platform.</p> <ul> <li>For actively monitored assets/hosts we store performance data with a retention period of 66 weeks (15 months).</li> <li>Time series that have not received any data for three weeks are purged from the database, as these are stale metrics.</li> </ul>"},{"location":"documentation/privacy-security/privacy/#closed-alerts","title":"Closed alerts","text":"<p>Closed alerts have a retention period of 8 weeks.</p>"},{"location":"documentation/privacy-security/privacy/#state-data","title":"State data","text":"<p>State data is kept in memory and is considered volatile.</p>"},{"location":"documentation/privacy-security/privacy/#backup-retention","title":"Backup retention","text":"<ul> <li>SiriDB backups have a four day retention period.</li> <li>Configuration data backups have an eight weeks retention period.</li> </ul>"},{"location":"documentation/privacy-security/privacy/#data-localization","title":"Data localization","text":"<p>All data collected by InfraSonar is stored in the European Union in accordance with the GDPR.</p>"},{"location":"documentation/privacy-security/security_considerations/","title":"Security considerations","text":"<p>InfraSonar is an infrastructure monitoring platform as a service.</p> <p>This document outlines some security considerations to take into account when deploying InfraSonar.</p> <p>Our focus and efforts are aimed at retrieving monitoring data, and sending the collected data securely to the InfraSonar cloud platform for further analysis.</p> <p>Note</p> <p>InfraSonar is not an IT automation tool and cannot make changes to a monitored environment. However, some InfraSonar implementations use the InfraSonar API to integrate with an on-premises automation solution such as Ansible, ensuring a single point of truth for configuration management.</p>"},{"location":"documentation/privacy-security/security_considerations/#context","title":"Context","text":"<p>To properly read this security considerations page, it is essential to keep the following context in mind:</p> <ul> <li>InfraSonar monitoring data is collected through:</li> <li>Probes running in a Docker container on the monitoring appliance.</li> <li>Custom collectors are sending data via the InfraSonar API.</li> <li>Collected data is sent to the InfraSonar platform for further analysis and user consumption in the InfraSonar frontend.</li> </ul> <p>The platform guide explains this architecture further.</p>"},{"location":"documentation/privacy-security/security_considerations/#infrasonar-design-principles","title":"InfraSonar design principles","text":"<p>Our development team adheres to these principles:</p> <ol> <li>Use least privilege accounts to access monitoring data when possible.</li> <li>Use vendor-documented standards such as API or management protocols to query data.</li> <li>When credentials are required, these should be stored encrypted on the monitoring appliance.</li> <li>The customer or managed service provider controls access to InfraSonar data.</li> <li>Avoid third-party libraries when possible.</li> <li>Set up security scanners in our version control system for all projects.</li> <li>Security-related issues take precedence over all other matters.</li> </ol>"},{"location":"documentation/privacy-security/security_considerations/#the-three-states-of-data","title":"The three states of data","text":"<p>InfraSonar processes massive amounts of monitoring data stored for historical analysis, such as trending. We strive to treat all collected data as if it were sensitive data.</p> <p>InfraSonar data can be in one of 3 so-called states.</p> Data at rest <p>Data currently not being accessed, which is stored on a physical or logical medium.</p> <p>InfraSonar stores data in it\u2019s cloud platform on AES256 encrypted disks. The appliance itself has no disk encryption but uses file-based encryption where possible.</p> Data in transit <p>Data that \u201ctravels\u201d between devices. The most straightforward example is emails that are in transit.</p> <p>All data sent between InfraSonar services is SSL encrypted. Data collected by probes is potentially unencrypted, as not all technologies used to collect monitoring data use encryption. SNMP v2c is an example where data is sent without any encryption.</p> Data in use <p>Data actively in use by one or more applications for analysis or for access/consumption by end-users.</p> <p>When data is in use, it needs to be in a readable format; this is especially true for data consumed by end-users. Automated data processing takes place in the datacenters, which have several certifications related to security measurements. These include, but are not limited to:</p> <ul> <li>ISO/IEC 27001</li> <li>ISO/IEC 27017</li> <li>ISO/IEC 27018</li> <li>SOC 2</li> <li>SOC 3</li> </ul> <p>The InfraSonar appliance has no special security measures other than those of the environment in which the appliance is used to protect data.</p>"},{"location":"documentation/privacy-security/security_considerations/#data-classification","title":"Data classification","text":"<p>We use the following data classification for InfraSonar and InfraSonar related data:</p>  Restricted <ul> <li>Configuration data stored on the monitoring appliance, as this contains (encrypted) credentials.</li> <li>Log data stored on the appliance, as this potentially contains user ids.</li> <li>InfraSonar accounts lists.</li> </ul>  Sensitive <ul> <li>Time series data and performance metrics collected on monitored assets / hosts.</li> <li>State data.</li> <li>InfraSonar platform source code.</li> <li>CRM data.</li> <li>Contracts.</li> </ul>  Internal <ul> <li>InfraSonar back office, such as invoices.</li> <li>InfraSonar support incidents.</li> <li>InfraSonar Slack and email communication.</li> </ul>  Public <ul> <li>InfraSonar open source code:<ul> <li>SiriDB - Time series database used in InfraSonar.</li> <li>ThingsDB - NoSQL database used in InfraSonar.</li> <li>InfraSonar probes.</li> </ul> </li> <li>InfraSonar documentation.</li> </ul>"},{"location":"documentation/privacy-security/security_considerations/#monitoring-appliance","title":"Monitoring appliance","text":"<p>The monitoring appliance on which the InfraSonar probes and InfraSonar agentcore are deployed requires extra attention, as many vendors do not support a 'least privilege' approach to collecting monitoring data. As such, the probes often require the use of highly privileged accounts and sometimes even root or administrator accounts.</p> <p>Our recommendations:</p> <ul> <li>Set up SSH Passwordless Authentication.</li> <li>Disable User SSH Passwordless Connection Requests.</li> <li>Disable SSH Root Logins.</li> <li>Use SSH Protocol 2.</li> <li>Set SSH Connection Timeout Idle Value.</li> <li>Limit SSH Access to Certain Users.</li> <li>Configure a Limit for Password Attempts.</li> <li>Update the underlying Linux operating system frequently.</li> <li>Perform a daily pull command for new InfraSonar containers.</li> <li>Use the <code>latest</code> tag for InfraSonar containers unless otherwise specified by InfraSonar support.</li> <li>If your company requires version pinning, please let us know so we can explicitly notify you when we release probe updates.</li> <li>Frequently update the password used by InfraSonar probes.</li> <li>Use disk encryption when possible.</li> </ul>"},{"location":"integrations/","title":"Overview","text":"<p>All kinds of applications are or can be integrated with InfraSonar. This way we can offer your organization as much functionality as possible without you having to stop using your favorite applications. Here's how to integrate your favorite application(s) with InfraSonar.</p> <p> DutyCalls is a notification routing tool made to make events more visible to its audience. Using DutyCalls in conjunction with InfraSonar offers a great solution to route alerts to the on-call staff.</p> <p> ConnectWise Manage is a PSA solution for MSP business. Our integration offers easy creation of ConnectWise Manage tickets from InfraSonar alerts.</p>"},{"location":"integrations/connectwise_manage/","title":"ConnectWise","text":"<p>InfraSonar has a specific API endpoint to integrate with ConnectWise Manage.</p> <p>This integration allows an InfraSonar environment to be \"mapped\" to a ConnectWise Manage company, thus allowing the automatic creation of ConnectWise Manage tickets from InfraSonar alerts.</p> <p>If you want to use this integration, please get in touch with InfraSonar support for assistance.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/","title":"DutyCalls","text":"<p>We assume you have set up the DutyCalls integration as described here</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#infrasonar-configuration","title":"InfraSonar configuration","text":"<p>Using the InfraSonar channel configuration, you can configure and finetune which alerts are passed on the DutyCalls.</p> <p>Configuration is possible on these three levels:</p> <ul> <li>Severity, allows you to specify from which severity level an alert is passed to DutyCalls.</li> <li>Conditions, allows you to configure which conditions are allowed or are rejected to pass on to DutyCalls.</li> <li>Hosts allows you to configure for which hosts you want to receive DutyCalls notifications.</li> </ul> <p>It is also possible to suppress specific conditions from sending an alert to DutyCalls.</p> <p>Best practice.</p> <ul> <li>Only send alerts with the severity level alert or higher.</li> <li>Use reject rules but sparsely.</li> <li>Use configure specific hosts only when absolutely required.</li> </ul>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#setup-your-team","title":"Setup your team","text":"<p>Lead by example</p> <p>DutyCalls is especially useful for self-organizing teams.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#add-team-members","title":"Add team members","text":"<ol> <li>Let your team members log on to DutyCalls to ensure the platform recognizes them.</li> <li>Invite your team  members to your workspace.</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#manage-exceptions","title":"Manage exceptions","text":"<p>DutyCalls uses manager alerts to manage exceptions if the regular operation does not go as expected.</p> <p>A DutyCalls manager can set up Manager alerts per workspace or per channel; the best practice is to set these up per workspace and only deviate if necessary.</p> Alert Default behavior Unacknowledged tickets Notifies if a ticket is not acknowledged in 1 hour Acknowledged tickets Notifies if an acknowledged is not modified in 1 hour Open tickets Notifies when a ticket is open for more then 2 hours. <p>Another critical alert to configure is the minimum number of active subscribers, this must be done per channel.</p> <p>In most scenarios, you would want at least one subscriber per channel, but for high-profile environments, it might be better to up the number to ensure swift follow-up.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#subscriber-notifications","title":"Subscriber notifications","text":"<p>DutyCalls can notify via email or in-app notifications.</p> <p>SMS and phone notifications are available using an optional license.</p> <p>Best practice.</p> <p>Using phone notifications ensures the best response from engineers as in-app or SMS notifications tend to get unnoticed.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/","title":"DutyCalls","text":"<p>Do you want to stay informed about the latest InfraSonar alerts directly in DutyCalls? Make use of the ready-made DutyCalls integration.</p> <p>This guide helps you to to get started with DutyCalls.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#dutycalls-configuration","title":"DutyCalls configuration","text":"<p>Implementing DutyCalls is a four step approach.</p> <pre><code>flowchart LR\n    A((Create DutyCalls &lt;br&gt; account))--&gt;B\n    B((Create DutyCalls &lt;br&gt; workspace))--&gt;C\n    C((Create DutyCalls &lt;br&gt; source))--&gt;D((Create DutyCalls &lt;br&gt; Channel))</code></pre>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-account","title":"Create a DutyCalls account","text":"<p>Creating a DutyCalls account is the first step. The DutyCalls sign-up documentation provides additional information on account creation.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-workspace","title":"Create a DutyCalls workspace","text":"<p>A DutyCalls workspace is usually a representation of a company or department.</p> <p>Steps for creating a workspace:</p> <ol> <li>Enter the workspace name</li> <li>Set the correct timezone</li> <li>Provide an optional icon for your workspace (Only icons of the PNG format are accepted and the maximum dimensions are 128 x 128 pixels. The width and height must also be equal to each other.)</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-source","title":"Create a DutyCalls source","text":"<p>For InfraSonar we use DutyCalls custom API mapping to format the data toward a compatible DutyCalls data source</p> <p>InfraSonar specific steps:</p> <ol> <li>Open the previously created workspace</li> <li>Select Services from the right hand menu</li> <li>Click the Add service button</li> <li>Provide a name for the service e.g. InfraSonar and click next</li> <li>Select yes when asked if you want to use a predefined template and select the InfraSonar template</li> <li>Click Add to continue</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-channel","title":"Create a DutyCalls channel","text":"<p>A DutyCalls channel must be linked to the source created in the previous step.</p> <ol> <li>Browse to the previously created service</li> <li>Click the Add channel button</li> <li>Provide a name for your channel, we suggest to keep the channel name and environment name the same. Setting up a channel per environment is our best practice.</li> <li>Choose the manager for this channel, the manager get's notified if something is amiss within the channel</li> <li>Select the previously created InfraSonar service</li> <li>Set the minimum number of active subscribed to your organizations needs, when this is your first setup you might want to set this to 1</li> <li>Click Add</li> <li>Observe the channel and note the No. Active Subscribers is <code>0/1</code>, click subscribe to retrieve notifications for this channel</li> </ol> <p>DutyCalls has now been setup, next step is to configure InfraSonar to integrate with DutyCalls.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#infrasonar-configuration","title":"InfraSonar configuration","text":"<p>To complete the setup and receive alerts in DutyCalls, some additional configuration has to be done in InfraSonar.</p> <p>This step requires the DutyCalls Service credentials.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#retrieve-dutycalls-service-credentials","title":"Retrieve DutyCalls Service credentials","text":"<ol> <li>Open DutyCalls</li> <li>Select Services from the left hand menu</li> <li>Click the Setup icon from the service you have setup for InfraSonar</li> <li>Click Send security code; this wil send a code to the email address you are logged on with in DutyCalls.</li> <li>Enter the received security code</li> <li>Make note od the username and password</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#source-configuration","title":"Source configuration","text":"<p>The first step is to add the source you just created to the desired InfraSonar container.</p> <ol> <li>Select the container for which you would like to configure DutyCalls.</li> <li>Click the DutyCalls icon in the left hand menu, this should open the DutyCalls configuration page</li> <li>Click on the Configure source button.</li> <li>Enter the previously retrieved username as Consumer key and the password as Consumer secret and click on the Save button.    </li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#channel-configuration","title":"Channel configuration","text":"<p>The second step is to add the channel you created to the container you selected in the previous step.</p> <ol> <li>Select the Channels option from the left-hand menu in InfraSonar</li> <li>Click the Add channel button to add a DutyCalls channel</li> <li>Provide the correct Channel name as previously created in DutyCalls</li> <li>Enter an optional description</li> <li>Select the correct DutyCalls source</li> <li> <p>Optionally set <code>condition</code> and <code>host</code> filters, to filter the alerts that will be forwarded to DutyCalls.</p> <p></p> </li> </ol> <p>The configuration has now been completed. Alerts related to the configured InfraSonar container will be posted in the configured DutyCalls channel.</p>"}]}