{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to InfraSonar","text":"<p>InfraSonar a powerful infrastructure monitoring platform as a service.</p> <p></p> <p>Features</p> <ul> <li>Agentless data collection where possible, minimizing our footprint in a monitored infrastructure;</li> <li>We excel in detailed state and performance monitoring;</li> <li>Effortless realtime anomaly detection;</li> <li>Crystal clear conditions.</li> </ul>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#0212","title":"0.2.12","text":"<p>_ Wednesday 03 Aug 2022 @ 22:00 CET</p> <ul> <li>Minor Enodo updates.</li> </ul>"},{"location":"changelog/#0211","title":"0.2.11","text":"<p>_ Monday 01 Aug 2022 @ 21:00 CET</p> <ul> <li>Added Enodo.</li> <li>No more Guest probes.</li> </ul>"},{"location":"changelog/#0210","title":"0.2.10","text":"<p>_ Friday 15 Jul 2022 @ 13:00 CET</p> <ul> <li>Improved DNS probe dialog.</li> <li>Removed Lift, SQL SSH, VmwareGuest, WinRm and XenGuest probes.</li> <li>Added feedback for failed reports.</li> <li>Fixed adding a user with same email address but different auth provider.</li> <li>Fixed a few spelling mistakes.</li> <li>Added TcpProbe.</li> <li>Added WMI Check for files option using the <code>cimDatafiles</code> class.</li> <li>Added services-name to the windows services widget.</li> </ul>"},{"location":"changelog/#029","title":"0.2.9","text":"<p>_ Tuesday 17 May 2022 @ 17:00 CET</p> <ul> <li>Fix saving the order of metrics in a grid.</li> <li>Changed caption column to description in application widget.</li> </ul>"},{"location":"changelog/#028","title":"0.2.8","text":"<p>_ Monday 16 May 2022 @ 21:00 CET</p> <ul> <li>Added <code>allowRedirects</code> option to the http probe configuration.</li> <li>Added <code>docker</code> icon.</li> <li>Removed <code>text</code> widget.</li> <li>Added Azure probe.</li> <li>Allow <code>agents</code> to be added in InfraSonar.</li> <li>Fix display <code>probe</code> address.</li> <li>Fix filter for assigned alerts.</li> <li>Fix displaying the correct metrics in a widget.</li> <li>Fix application widget by using description field instead of caption.</li> <li>Fix closing a legend when moving mouse focus out the widget.</li> <li>No longer close a widget edit dialog when clicking outside the editor.</li> </ul>"},{"location":"changelog/#027","title":"0.2.7","text":"<p>_ Tuesday 11 Apr 2022 @ 21:00 CET</p> <ul> <li>Upgraded packages.</li> <li>Fixed broken widget when switching between hosts.</li> <li>Enable search on host-name in alerts and closed-alerts page.</li> <li>Added pingProbe and removed psProbe.</li> <li>Added httpProbe.</li> <li>Added nmapProbe (v2.x.x).</li> <li>Fixed broken check interval select box.</li> <li>Fixed broken boolean probe switch.</li> <li>Added probe configuration checks on asset edit.</li> <li>Fixed broken filter component for <code>True</code> values in data table.</li> <li>Re-direct to the requested link after sign-in.</li> <li>Fixed typo in subscriptions.</li> <li>Fixed overlay bug on drop-down-arrows in \"edit widget\" dialog.</li> <li>Fixed bug with \"Add widget\" button when a asset has no label.</li> <li>Changed the no-environment page for new users and added copyright text.</li> <li>Changed the link to \"Contact support\".</li> <li>Fixed bug with resetting the check interval.</li> <li>No longer allow to change dialog tabs while providing a reason for change.</li> <li>Remove missing network probe warning message as this is no longer a best practice.</li> </ul>"},{"location":"changelog/#026","title":"0.2.6","text":"<p>_ Thursday 17 Feb 2022 @ 21:00 CET</p> <ul> <li>Fixed CSV download for InfraSonar Accounts (sysadmin).</li> <li>Add \"show more\" when more text-lines are available in logging message.</li> <li>Fixed missing email address at the no-environments page.</li> <li>Changed menu behavior at probe page (solves highlight last item).</li> <li>Added icon for Pure Storage.</li> <li>Prevent view changes of probe page on refresh.</li> </ul>"},{"location":"changelog/#025","title":"0.2.5","text":"<p>_ Tuesday 01 Feb 2022 @ 21:30 CET</p> <ul> <li>Fixed bug with incognito browsing.</li> </ul>"},{"location":"changelog/#024","title":"0.2.4","text":"<p>_ Tuesday 01 Feb 2022 @ 20:00 CET</p> <ul> <li>Fixed bug in filter host specific closed alerts.</li> <li>Changed ordering on first click in a grid.</li> <li>Fixed bug in host filter on alerts page (not showing the name of the host).</li> <li>Switched to FireBase authentication.</li> <li>Added support for Microsoft Azure (work) accounts.</li> <li>Switched to NPM 8.x for website building.</li> </ul>"},{"location":"changelog/#023","title":"0.2.3","text":"<p>_ Wednesday 12 Jan 2022 @ 22:00 CET</p> <ul> <li>Fixed bug with filter selection (not visible) in grid.</li> <li>Fixed bug with user container view when having no users.</li> <li>Fixed minor widget editor bugs.</li> <li>Changed filter and sort icon appearance to make active filter or order visible.</li> </ul>"},{"location":"changelog/#022","title":"0.2.2","text":"<p>_ Friday 24 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed column sorting on container view.</li> <li>Fixed filter outline with little space to render the filter selection.</li> <li>Fixed missing condition options in expression builder.</li> <li>Added Last seen column to host overview as alternative to the Active column.</li> </ul>"},{"location":"changelog/#021","title":"0.2.1","text":"<p>_ Wednesday 22 Dec 2021 @ 20:00 CET</p> <ul> <li>Added environment to Breadcrumbs bar when the name equals the parent container.</li> <li>Fixed access check for modifying Views and return with an appropriate message if not.</li> <li>Fixed spacing between name and body in an alert message.</li> <li>Removed incorrect icon in front of Agent-core in host overview.</li> </ul>"},{"location":"changelog/#020","title":"0.2.0","text":"<p>_ Tuesday 21 Dec 2021 @ 20:00 CET</p> <ul> <li>Updated UI using the Material design language.</li> <li>Added Light/Dark mode.</li> <li>Added a dashboard which shows useful information and shortcuts.</li> <li>Added the Tasks overview. In this overview, Admins can see all tasks related to the current environment.</li> <li>The Closed alerts and the Search closed alerts pages are merged into a single page.</li> <li>Added the option to \"star\" Views and Environments as favorite.</li> <li>Added a \"Share\" button to Views.</li> <li>Added \"click-on-tag\" for \"copy-to-clipboard\".</li> <li>Merged the container and environment logging into one page.</li> <li>Added a \"Task\" column and a \"Parent\" column to log entries.</li> <li>Replaced the counter with tags in the Conditions page.</li> <li>Authentication provider is now implied when adding a user to a container.</li> <li>Improved feedback when submitting invalid forms.</li> <li>Added specific icons to all Hosts.</li> <li>Added \"No environments found\" screen, for users without container access.</li> <li>Added time selection to the statistics page.</li> <li>Added the \"Windows Services\" widget to the Insight page.</li> </ul>"},{"location":"changelog/#01109","title":"0.1.109","text":"<p>_ Tuesday 07 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed API checks.</li> </ul>"},{"location":"changelog/#01108","title":"0.1.108","text":"<p>_ Monday 29 Nov 2021 @ 20:00 CET</p> <ul> <li>Enable <code>changed</code> option for boolean and timestamp type.</li> <li>Removed CRM from InfraSonar.</li> </ul>"},{"location":"changelog/#01107","title":"0.1.107","text":"<p>_ Saturday 13 Nov 2021 @ 14:00 CET</p> <ul> <li>Critical update: <code>aiogcd</code>.</li> </ul>"},{"location":"changelog/#01106","title":"0.1.106","text":"<p>_ Friday 12 Nov 2021 @ 20:00 CET</p> <ul> <li>Collapsible raster on double mouse click.</li> <li>Added audit logging to re-discover changes on a host.</li> <li>Fixed bug with selecting a time range within a modal.</li> <li>Fixed socket message on re-connect.</li> <li>Added search in my alerts view.</li> <li>Prevent inserting invalid metric info.</li> </ul>"},{"location":"changelog/#01105","title":"0.1.105","text":"<p>_ Tuesday 12 Oct 2021 @ 20:00 CET</p> <ul> <li>Log tasks using the user who initiated the task.</li> <li>Return the taskId when creating a task using the API.</li> <li>Send an email to the user when a schedules task has failed.</li> </ul>"},{"location":"changelog/#01104","title":"0.1.104","text":"<p>_ Monday 13 Sep 2021 @ 20:00 CET</p> <ul> <li>Added Id column to environment overview page.</li> <li>Added /api/environments API call.</li> <li>Added support for custom time zone per environment.</li> <li>Fixed bug with assigned alerts for users without key string.</li> </ul>"},{"location":"changelog/#01103","title":"0.1.103","text":"<p>_ Tuesday 27 Jul 2021 @ 11:00 CET</p> <ul> <li>Loosely name validation for check and type in data query API call.</li> </ul>"},{"location":"changelog/#01102","title":"0.1.102","text":"<p>_ Wednesday 21 Jul 2021 @ 22:00 CET</p> <ul> <li>Added <code>environment</code> and <code>lastSeen</code> columns to <code>api/hosts</code> API call.</li> <li>Added <code>api/labels</code> API call to query for labels in an environment.</li> <li>Fixed bug in widget editor when no hosts are configured.</li> <li>Fixed minor widget bugs (no panel data, handle escape key correctly).</li> </ul>"},{"location":"changelog/#01101","title":"0.1.101","text":"<p>_ Thursday 15 Jul 2021 @ 20:00 CET</p> <ul> <li>Added check for valid labels in API call <code>api/host/label/add</code>.</li> <li>Added filter for empty hosts in view.</li> <li>Added filter item option in widgets.</li> <li>Added the option to exclude host with specified labels from a view.</li> <li>Auto convert <code>int</code> to <code>float</code> for the insert API call.</li> <li>Fixed bug in auto refresh on a view.</li> <li>Fixed bug in validate API metric names.</li> <li>Fixed bug when moving a root widget on a host overview page.</li> <li>Fixed minor bug in side menu on probe pages.</li> <li>Required metrics no longer accept a <code>null</code> value.</li> </ul>"},{"location":"changelog/#01100","title":"0.1.100","text":"<p>_ Tuesday 22 Jun 2021 @ 20:00 CET</p> <ul> <li>Added link to new InfraSonar documentation.</li> <li>Added query data API call and added <code>/api/data</code> to replace <code>api/data/insert</code>.</li> <li>Added support for <code>withLabel</code> and <code>withProbe</code> keys to hosts query API.</li> <li>Replaced <code>accept</code>/<code>reject</code> lists with <code>item (not) in list</code>.</li> <li>Check for int64 when using the API to insert data.</li> <li>Improved error messages when using incorrect API calls.</li> <li>Fixed double boolean naming when choosing a display function.</li> </ul>"},{"location":"changelog/#0199","title":"0.1.99","text":"<p>_ Tuesday 18 Apr 2021 @ 9:00 CET</p> <ul> <li>Fix alerts overview.</li> </ul>"},{"location":"changelog/#0198","title":"0.1.98","text":"<p>_ Monday 17 May 2021 @ 20:00 CET</p> <ul> <li>Added tool for generating encryption keys.</li> <li>Fix ConnectWise member API call.</li> <li>Fix My-Alert view (too many alerts).</li> <li>Fix time range selection on aggregation grid.</li> <li>Sort series on environment in time-series chart.</li> <li>Update: ThingsDB client (fix re-connect Emitter bug).</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0197","title":"0.1.97","text":"<p>_ Tuesday 20 Apr 2021 @ 12:00 CET</p> <ul> <li>Fix alerts.</li> </ul>"},{"location":"changelog/#0196","title":"0.1.96","text":"<p>_ Monday 19 Apr 2021 @ 19:45 CET</p> <ul> <li>Fix charts.</li> </ul>"},{"location":"changelog/#0195","title":"0.1.95","text":"<p>_ Monday 19 Apr 2021 @ 19:00 CET</p> <ul> <li>Improved item-list in expression editor.</li> <li>Fixed number of rows in grid after using a filter (search).</li> <li>Update browser title when opening a view.</li> <li>Fixed CTRL-F when viewing a data-table with search disabled.</li> <li>Added column suppressed label count on conditions page.</li> <li>Fixed bug with auto-refresh.</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0194","title":"0.1.94","text":"<p>_ Wednesday 7 Apr 2021 @ 15:30 CET</p> <ul> <li>Fixed ConnectWise manage bug, maximum summary length.</li> </ul>"},{"location":"changelog/#0193","title":"0.1.93","text":"<p>_ Tuesday 6 Apr 2021 @ 20:00 CET</p> <ul> <li>Added API route for posting InfraSonar (host) data.</li> <li>Added API routes for controlling metadata.</li> <li>Added derived metric option.</li> </ul>"},{"location":"changelog/#0192","title":"0.1.92","text":"<p>_ Monday 15 Mar 2021 @ 20:00 CET</p> <ul> <li>Fixed check for valid hostUuids in API handler.</li> <li>Select current user as default owner for an alert.</li> </ul>"},{"location":"changelog/#0191","title":"0.1.91","text":"<p>_ Wednesday 24 Feb 2021 @ 20:00 CET</p> <ul> <li>Allow ticket in CWM without owner.</li> <li>Update API documentation.</li> </ul>"},{"location":"changelog/#0190","title":"0.1.90","text":"<p>_ Tuesday 23 Feb 2021 @ 20:00 CET</p> <ul> <li>Added ConnectWise Manage support.</li> <li>Added environment widget for installed software on Windows.</li> <li>Added option to select a time range for the aggregation grid widget.</li> <li>Fixed bug in top menu after window resize.</li> </ul>"},{"location":"changelog/#0189","title":"0.1.89","text":"<p>_ Thursday 14 Jan 2021 @ 20:00 CET</p> <ul> <li>Added channels column on labels overview page.</li> <li>Added item (not) in list expression to replace black/white list.</li> <li>Added option to accept or reject specific conditions for DutyCalls.</li> <li>Added option to show/hide self signed certificates.</li> <li>Added option to sort on environemt in a gid widget.</li> <li>Added search box to certificate widget.</li> <li>Auto-complete default probe address unless changed by the user.</li> <li>Changed export to CSV for time and age values.</li> <li>Prevent saving conditions with empty expressions.</li> </ul>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#authentication","title":"Authentication","text":"<p>The authentication scheme that the InfraSonar API makes use of is \"Bearer authentication\".</p>"},{"location":"api/authentication/#bearer-authentication","title":"Bearer Authentication","text":"<p>Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name \u201cBearer authentication\u201d can be understood as \u201cgive access to the bearer of this token.\u201d The client must send this token in the Authorization header when making requests to the InfraSonar API:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"api/authentication/#creating-a-token","title":"Creating a token","text":"<p>Infrasonar supports two types of tokens:</p> User tokens <p>User tokens are bound to an user and can be used to automated actions as the user issuing the token.</p> <p>Warning</p> <p>This token has the same privileges as the user!</p> <p>User can be valuable for scripts or integrations that require access to multiple containers.</p> Container tokens <p>Container tokens can be used to give granular access to a specific container.</p>"},{"location":"api/authentication/#user-tokens","title":"User tokens","text":"<p>Follow these steps below to create and add a token to your user account.</p> <ol> <li>Open the \"My access\" dialog by clicking on the My access button in the account menu.    </li> <li>Navigate to the tokens tab and click on the + button.    </li> <li>Enter a useful description and click on the Create button to add the token to your account.</li> </ol>"},{"location":"api/authentication/#container-tokens","title":"Container tokens","text":"<p>Tip</p> <p>We strongly suggest setting up separate tokens when possible.</p> <p>Container tokens are also required for agentcore and agent authentication.</p> <ol> <li>Navigate to the container you want to create a token for.</li> <li>Click the tokens icon  in the left hand menu.</li> <li>Click the Add token button.</li> <li>Give the token a identifiable name and provide just enough accessobserve we added some shorcuts to create access tokens for agentcores and probes</li> <li>Click Save, enter a reason and click confirm</li> <li>Reopen the just created token and copy the ID.</li> </ol> <p>Rules</p> <ul> <li>User who have the de <code>container Access</code> flag set can create container tokens.</li> <li>A user can not grant more access permissions to a token then he or she already has.</li> </ul>"},{"location":"api/ids/","title":"ID's","text":""},{"location":"api/ids/#ids","title":"ID's","text":"<p>InfraSonar uses ID's to identify:</p> <ul> <li>Assets</li> <li>Conditions</li> <li>Containers</li> <li>Labels</li> </ul>"},{"location":"api/ids/#figuring-out-ids","title":"Figuring out ID's","text":""},{"location":"api/ids/#asset-id","title":"Asset ID","text":"<ol> <li>Navigate to the container to which the asset belongs.</li> <li>Open the asset overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The asset ID is now visible in the most left hand column.</li> </ol> <p>Query asset ID using our API</p> <p>Asset ID's can be retrieved using our API</p>"},{"location":"api/ids/#condition-id","title":"Condition ID","text":"<ol> <li>Navigate to the container to which the condition belongs.</li> <li>Open the condtions overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The condition ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/ids/#container-id","title":"Container ID","text":"<ol> <li>Open the containers view.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The container ID is now visible in the most left hand column.</li> </ol> <p>Query container ID using our API</p> <p>Container ID's can be retrieved using our API</p>"},{"location":"api/ids/#label-id","title":"Label ID","text":"<ol> <li>Navigate to the container to which the label belongs.</li> <li>Open the label overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The label ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/overview/","title":"Overview","text":"<p>The InfraSonar API is used for accessing and manipulating data within InfraSonar.</p> <p>InfraSonar agents and services use the API to bring data into the platform while automation solutions such as Ansible and Salt can be used to query data but also change modes to avoid getting notified while automation tasks are performing maintenance.</p> <p>The API is also used by InfraSonar ready to run integrations</p>"},{"location":"api/alert/query/","title":"Query alert","text":"<p><code>GET</code>/alert/&lt;alertKs&gt;?fields=...&amp;actions=...</p>"},{"location":"api/alert/query/#description","title":"Description","text":"<p>Query alert details. This API call will work for both an open and closed alert.</p>"},{"location":"api/alert/query/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>actions</code> none Action fields. If at least one field is given, the result will include \"actions\" with an array of action objects (see Actions below for all available action fields)."},{"location":"api/alert/query/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner. <code>closedTimestamp</code> integer/null Unix timestamp in seconds when the alert was closed or null if not closed."},{"location":"api/alert/query/#actions","title":"Actions","text":"Action field Return type Description <code>kind</code> string One of: <code>Assign</code>, <code>Comment</code>, <code>IntegrationCall</code>, <code>Close</code>, <code>AutoClose</code>, <code>IndirectClose</code> <code>timestamp</code> integer Unix timestamp in seconds. <code>data</code> object/null Additional data object."},{"location":"api/alert/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or action. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Alert not found."},{"location":"api/alert/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/alert/xxx?actions=kind,timestamp,data' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"timestamp\": 1667511262,\n\"lastMessage\": \"Last message of the alert\",\n\"lastSeverity\": 3,\n\"listTimestamp\": 1667511523,\n\"ownerId\": 123,\n\"closedTimestamp\": null,\n\"actions\": [\n{\n\"kind\": \"Assign\",\n\"timestamp\": 1667511469,\n\"data\": {\n\"userId\": 123,\n\"ownerId\": 123,\n\"message\": \"Alert assigned to me!\"\n}\n}\n]\n}\n</code></pre></p>"},{"location":"api/asset/add-label/","title":"Add label to asset","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/add-label/#description","title":"Description","text":"<p>Add a label to an asset. Success (204) is also returned when the label was already assigned to the asset.</p>"},{"location":"api/asset/add-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/add-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/add-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/add-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/add-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/label/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/insert-check-data/","title":"Insert check data","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;</p>"},{"location":"api/asset/insert-check-data/#description","title":"Description","text":"<p>Insert check data.</p>"},{"location":"api/asset/insert-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/insert-check-data/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/insert-check-data/#body","title":"Body","text":"Param Type Required Description <code>data</code> object Yes Object with check data. <code>version</code> string Yes Version of the collector. <code>runtime</code> float No Time it took for the check to run in seconds. <code>timestamp</code> integer No Unix timestamp in seconds. If omitted, InfraSonar will set the timestamp for the check data."},{"location":"api/asset/insert-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>INSERT_CHECK_DATA</code>). <code>404</code> Asset or collector or check not found. <code>409</code> Collector is not assigned to the asset. <code>413</code> Body size too large (maximum 500 KB)."},{"location":"api/asset/insert-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/collector/docker/check/network' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"data\": {\n        \"networks\": [\n            {\n                \"name\": \"myNetwork\",\n                \"ipAddress\": \"1.2.3.4\"\n            }\n        ]\n    },\n    \"version\": \"0.1.0\"\n}'\n</code></pre> In this example, \"docker\" is the collector, \"network\" the check, \"networks\" a type, \"name\" is a required metric and \"ipAddress\" is a metric.</p>"},{"location":"api/asset/purge-notifications/","title":"Purge notifications","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/purge-notifications</p>"},{"location":"api/asset/purge-notifications/#description","title":"Description","text":"<p>Purge notifications by notification kind for a specific asset.</p>"},{"location":"api/asset/purge-notifications/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/purge-notifications/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/purge-notifications/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes One of <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code> or <code>CheckInvalidData</code>."},{"location":"api/asset/purge-notifications/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/purge-notifications/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/purge-notifications' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"kind\": \"CheckError\"\n}'\n</code></pre></p>"},{"location":"api/asset/query-alerts/","title":"Query asset alerts","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/alerts?fields=...</p>"},{"location":"api/asset/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given asset.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/asset/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/asset/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/asset/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123/alerts?fields=ks,message,severity,ownerId' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"ownerId\": null\n}\n]\n</code></pre></p>"},{"location":"api/asset/query-check-data/","title":"Query check data","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;?fmt=false</p>"},{"location":"api/asset/query-check-data/#description","title":"Description","text":"<p>Query check data. The result might be <code>null</code> when both the collector and check exist, but no data for the given asset exists. If only the framework is <code>null</code>, then the check is enabled for the asset but no data is received (yet).</p>"},{"location":"api/asset/query-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/query-check-data/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fmt</code> <code>false</code> Either <code>true</code> or <code>false</code>. When <code>true</code> the display function is used to format the values and if <code>false</code>, the raw values are returned."},{"location":"api/asset/query-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid value for fmt query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset, collector or check not found."},{"location":"api/asset/query-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123/collector/ping/check/ping?fmt=true' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"data\": {\n\"icmp\": [\n{\n\"address\": \"192.168.1.2\",\n\"maxTime\": \"1 ms\",\n\"name\": \"ping\",\n\"count\": \"5\",\n\"dropped\": \"0\",\n\"minTime\": \"165 \u03bcs\"\n}\n]\n},\n\"framework\": {\n\"duration\": \"4.015 seconds\",\n\"timestamp\": \"2023-01-12 15:29:37+01:00\",\n\"prev\": {\n\"timestamp\": \"2023-01-12 15:24:37+01:00\"\n}\n}\n}\n</code></pre></p> <p>In this example, \"ping\" is a collector, \"ping\" a check, \"icmp\" a type and \"name\", address, maxTime etc, are the metrics.</p>"},{"location":"api/asset/query-id/","title":"Query asset Id","text":"<p><code>GET</code> /asset/&lt;assetName&gt;/id</p>"},{"location":"api/asset/query-id/#description","title":"Description","text":"<p>Query an asset Id by name. This route only works with a container token.</p> <p>Removed assets (assets in trash) are ignored and will not be found using this API call.</p>"},{"location":"api/asset/query-id/#path-parameters","title":"Path parameters","text":"Param Description <code>assetName</code> Asset name."},{"location":"api/asset/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>). <code>404</code> No asset with the given name is found in the container. <code>409</code> Multiple assets with the same name are found within the container."},{"location":"api/asset/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/my-asset.local/id' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"assetId\": 123\n}\n</code></pre></p>"},{"location":"api/asset/query-time-series/","title":"Query time series","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/query-time-series</p>"},{"location":"api/asset/query-time-series/#description","title":"Description","text":"<p>Query time series.</p>"},{"location":"api/asset/query-time-series/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query-time-series/#body","title":"Body","text":"Param Type Required Description <code>collector</code> string Yes Collector key. <code>check</code> string Yes Check key. <code>type</code> string Yes Type key. <code>metric</code> string Yes Metric key. <code>items</code> array(string) No Item names. If not given, all items are returned. <code>timeSpan</code> integer No Time span in seconds. Defaults to <code>28800</code> (8 hours). The maximum time span is <code>2419200</code> (28 days). <code>start</code> integer/string No Unix timestamp or ISO time string. The start + time-span is the end of the time window. When not given, the start is calculated as now minus the time span which results in the latest data points. <code>aggregation</code> object No See aggregation section. If not given, no aggregation is used. <code>merge</code> object No See merge section. If not given, items are not merged."},{"location":"api/asset/query-time-series/#merge","title":"Merge","text":"Param Type Required Description <code>as</code> string Yes Name as the time-series will be returned in the result. Only alpha-numeric characters and underscores are allowed and the name must not be empty. <code>aggregation</code> object Yes See aggregation section. This aggregation is used for merging the time series."},{"location":"api/asset/query-time-series/#aggregation","title":"Aggregation","text":"Param Type Required Description <code>type</code> string Yes One of <code>mean</code>, <code>min</code>, <code>max</code>, <code>sum</code>, <code>median</code>, <code>median_high</code>, <code>median_low</code> or <code>count</code>. <code>timeSpan</code> integer No Time span in seconds used for aggregation blocks. For example <code>3600</code> will create per-hour blocks. If not given, the result will contain a single value with the current timestamp."},{"location":"api/asset/query-time-series/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query-time-series/#example","title":"Example","text":"<p>Curl request (Average bytes received p/s for the last 4 hours): <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/query-time-series' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\```\n--data-raw '{\n    \"collector\": \"wmi\",\n    \"check\": \"network\",\n    \"type\": \"interface\",\n    \"metric\": \"BytesReceivedPersec\",\n    \"timeSpan\": 14400,\n    \"aggregation\": {\n        \"type\": \"mean\"\n    }\n}'\n</code></pre></p> <p>Response (Each key in the response represents an item name, unless \"merge\" is used. The value is an array with with arrays containing a timestamp and value):</p> <pre><code>{\n\"Intel[R] 82574L Gigabit Network Connection\": [\n[\n1677142522,\n9488.9375\n]\n]\n}\n</code></pre>"},{"location":"api/asset/query/","title":"Query asset","text":"<p><code>GET</code>/asset/&lt;assetId&gt;?fields=...</p>"},{"location":"api/asset/query/#description","title":"Description","text":"<p>Query asset details.</p>"},{"location":"api/asset/query/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields)."},{"location":"api/asset/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id. <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids."},{"location":"api/asset/query/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/asset/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/asset/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"id\": 123,\n\"name\": \"my-host.local\",\n\"kind\": \"Asset\",\n\"description\": \"My host\",\n\"mode\": \"normal\",\n\"labels\": [456, 789]\n}\n</code></pre></p>"},{"location":"api/asset/remove-collector/","title":"Remove collector from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/remove-collector/#description","title":"Description","text":"<p>Remove a collector from an asset. Success (204) is also returned when the collector was not attached to the asset.</p>"},{"location":"api/asset/remove-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/remove-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/remove-collector/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X DELETE 'https://api.infrasonar.com/asset/123/collector/docker' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/remove-label/","title":"Remove label from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/remove-label/#description","title":"Description","text":"<p>Remove a label from an asset. Success (204) is also returned when the label was not assigned to the asset.</p>"},{"location":"api/asset/remove-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/remove-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/remove-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X DELETE 'https://api.infrasonar.com/asset/123/label/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/set-description/","title":"Set asset description","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/description</p>"},{"location":"api/asset/set-description/#description","title":"Description","text":"<p>Set the asset description. Success (204) is also returned when the asset description has not changed.</p>"},{"location":"api/asset/set-description/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-description/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-description/#body","title":"Body","text":"Param Type Required Description <code>description</code> string Yes Asset description."},{"location":"api/asset/set-description/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-description/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/description' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"description\": \"This is cool asset!\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-kind/","title":"Set asset kind","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/kind</p>"},{"location":"api/asset/set-kind/#description","title":"Description","text":"<p>Set the asset kind. Success (204) is also returned when the asset kind remains unchanged.</p>"},{"location":"api/asset/set-kind/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-kind/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-kind/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes Asset kind. See table below for all available kinds."},{"location":"api/asset/set-kind/#kind","title":"Kind","text":"Logo Name <code>Asset</code> (default) <code>APC</code> <code>Apple</code> <code>Azure</code> <code>Citrix</code> <code>Dell</code> <code>DNS</code> <code>Docker</code> <code>Eaton</code> <code>Email</code> <code>Firewall</code> <code>FreeBSD</code> <code>HP</code> <code>Linux</code> <code>NetApp</code> <code>PaloAlto</code> <code>PureStorage</code> <code>Supermicro</code> <code>Switch</code> <code>Synology</code> <code>UniFi</code> <code>VMware</code> <code>Website</code> <code>Windows</code>"},{"location":"api/asset/set-kind/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-kind/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/kind' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"kind\": \"Linux\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-mode/","title":"Set asset mode","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/mode</p>"},{"location":"api/asset/set-mode/#description","title":"Description","text":"<p>Set the asset mode. Success (204) is also returned when the asset was already in the desired mode.</p>"},{"location":"api/asset/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/asset/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-name/","title":"Set asset name","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/name</p>"},{"location":"api/asset/set-name/#description","title":"Description","text":"<p>Set the asset name. Success (204) is also returned when the asset name has not been changed.</p>"},{"location":"api/asset/set-name/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-name/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-name/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Asset name."},{"location":"api/asset/set-name/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-name/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/asset/123/name' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"name\": \"This is cool asset!\"\n}'\n</code></pre></p>"},{"location":"api/asset/upsert-collector/","title":"Upsert collector to asset","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/upsert-collector/#description","title":"Description","text":"<p>Add or configure a collector on an asset. If the collector is already attached to the asset, the configuration will be updated unless no configuration is provided in the body.</p>"},{"location":"api/asset/upsert-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/upsert-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/upsert-collector/#body","title":"Body","text":"Param Type Required Description <code>config</code> Object Depends Configuration of the collector. <p>A body might be required for some collectors. For most collectors the <code>config</code> field is optional.</p>"},{"location":"api/asset/upsert-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/upsert-collector/#example","title":"Example","text":"<p>Curl request: (no config required for docker agent) <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/asset/123/collector/docker' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/create-asset/","title":"Create asset","text":"<p><code>POST</code> /container/&lt;containerId&gt;/asset</p>"},{"location":"api/container/create-asset/#description","title":"Description","text":"<p>Create a new asset.</p> <p>Duplicated asset names are allowed although not recommended.</p>"},{"location":"api/container/create-asset/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/create-asset/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-asset/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Name of the asset."},{"location":"api/container/create-asset/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/create-asset/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/asset' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"name\": \"my-host.local\"\n}'\n</code></pre></p> <p>Response: <pre><code>{\n\"assetId\": 123\n}\n</code></pre></p>"},{"location":"api/container/purge-notifications/","title":"Purge notifications","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-notifications</p>"},{"location":"api/container/purge-notifications/#description","title":"Description","text":"<p>Purge notifications by notification kind.</p>"},{"location":"api/container/purge-notifications/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-notifications/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-notifications/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes One of <code>ConnectionStatus</code>, <code>ConnectionTimeDelta</code>, <code>ProbeVersion</code>, <code>ProbeMissing</code>, <code>ProbeTimeDelta</code>, <code>ProbeNoHeartbeat</code>, <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code>, <code>CheckInvalidData</code>, <code>ContainerMaintenance</code>, <code>AgentcoreMissing</code> or <code>ConditionError</code>."},{"location":"api/container/purge-notifications/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/purge-notifications/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/purge-notifications' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"kind\": \"ConnectionStatus\"\n}'\n</code></pre></p>"},{"location":"api/container/purge-time-series/","title":"Purge time-series","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-time-series</p>"},{"location":"api/container/purge-time-series/#description","title":"Description","text":"<p>Purge dead time-series. Time series are considered dead if they didn't got any new data for a period of time. This period must be given in weeks.</p>"},{"location":"api/container/purge-time-series/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-time-series/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-time-series/#body","title":"Body","text":"Param Type Required Description <code>weeks</code> integer Yes Integer value between 1 and 999 (recommended: 5 weeks or more)."},{"location":"api/container/purge-time-series/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>PURGE_TIME_SERIES</code>). <code>404</code> Container not found."},{"location":"api/container/purge-time-series/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/purge-time-series' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"weeks\": 5\n}'\n</code></pre></p> <p>Response: <pre><code>{\n\"purgedTimeSeries\": 12345\n}\n</code></pre></p>"},{"location":"api/container/query-alerts/","title":"Query container alerts","text":"<p><code>GET</code> /container/&lt;containerId&gt;/alerts?fields=...</p>"},{"location":"api/container/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given container.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/container/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/container/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/container/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/alerts?fields=ks,message,severity,ownerId' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"ks\": \"&lt;a-unique-key-string&gt;\",\n\"message\": \"Initial message of the alert\",\n\"severity\": 3,\n\"ownerId\": null\n}\n]\n</code></pre></p>"},{"location":"api/container/query-assets/","title":"Query container assets","text":"<p><code>GET</code> /container/&lt;containerId&gt;/assets?fields=...</p>"},{"location":"api/container/query-assets/#description","title":"Description","text":"<p>Query all assets for a given container. (removed assets are not included).</p>"},{"location":"api/container/query-assets/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-assets/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>id</code> Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields). <code>kind</code> none Only assets with the given kind (e.g kind=Windows). <code>not-kind</code> none Only assets with another kind than the given kind (e.g not-kind=Asset). <code>mode</code> none Only assets with the given mode (e.g mode=normal). <code>not-mode</code> none Only assets with another mode than the given mode (e.g not-mode=disabled). <code>collector</code> none Only assets with the given collector (e.g collector=tcp). <code>not-collector</code> none Only assets without the given collector (e.g not-collector=wmi). <code>label</code> none Only assets with the given label Id (e.g label=123). <code>not-label</code> none Only assets without the given label Id (e.g not-label=456)."},{"location":"api/container/query-assets/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id (Equal to containerId). <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids."},{"location":"api/container/query-assets/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/container/query-assets/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-assets/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/assets?fields=id,name,mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"id\": 123,\n\"name\": \"my-host.local\",\n\"mode\": \"normal\"\n}\n]\n</code></pre></p>"},{"location":"api/container/query-collectors/","title":"Query container collectors","text":"<p><code>GET</code> /container/&lt;containerId&gt;/collectors?fields=...</p>"},{"location":"api/container/query-collectors/#description","title":"Description","text":"<p>Query all collectors for a given container. (only enabled collectors are included).</p>"},{"location":"api/container/query-collectors/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-collectors/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>key</code> Fields to return (see fields below for all available fields). <code>options</code> none Option fields. If at least one field is given, the result will include \"options\" with an array of option objects (see Options below for all available option fields)."},{"location":"api/container/query-collectors/#fields","title":"Fields","text":"Field Return type Description <code>key</code> string Collector Id. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>info</code> string Collector info. <code>min-version</code> string Minimal required version for the collector."},{"location":"api/container/query-collectors/#options","title":"Options","text":"Option field Return type Description <code>key</code> string Option key. <code>name</code> string Option name. <code>info</code> string Option info. <code>type</code> string One of <code>Bool</code>, <code>Int</code>, <code>Float</code>, <code>String</code>, <code>ListBool</code>, <code>ListInt</code>, <code>ListFloat</code> or <code>ListString</code>. <code>default</code> any Default value (The default value is not guaranteed to pass the validation function)."},{"location":"api/container/query-collectors/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-collectors/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123/collectors?fields=key,kind&amp;options=key,type,default' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n{\n\"key\": \"wmi\",\n\"kind\": \"probe\",\n\"options\": [\n{\n\"key\": \"address\",\n\"type\": \"String\",\n\"default\": \"\",\n}\n]\n}\n]\n</code></pre></p>"},{"location":"api/container/query-id/","title":"Query container Id","text":"<p><code>GET</code> /container/id</p>"},{"location":"api/container/query-id/#description","title":"Description","text":"<p>Query a container Id by token. This route only works with a container token.</p>"},{"location":"api/container/query-id/#path-parameters","title":"Path parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>)."},{"location":"api/container/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/id' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"containerId\": 123\n}\n</code></pre></p>"},{"location":"api/container/query/","title":"Query container","text":"<p><code>GET</code>/container/&lt;containerId&gt;?fields=...</p>"},{"location":"api/container/query/#description","title":"Description","text":"<p>Query container details.</p>"},{"location":"api/container/query/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Container Id. <code>name</code> string Container name. <code>timezone</code> string Container time-zone. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/container/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/container/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"id\": 123,\n\"mode\": \"normal\",\n\"name\": \"My Container\",\n\"timezone\": \"Europe/Amsterdam\"\n}\n</code></pre></p>"},{"location":"api/container/set-mode/","title":"Set container mode","text":"<p><code>PATCH</code> /container/&lt;containerId&gt;/mode</p>"},{"location":"api/container/set-mode/#description","title":"Description","text":"<p>Set the container mode. Success (204) is also returned when the container was already in the desired mode.</p>"},{"location":"api/container/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>."},{"location":"api/container/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found. <code>409</code> Too many open alerts. (mode \"normal\" is only allowed with less than 500 open alerts)"},{"location":"api/container/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X PATCH 'https://api.infrasonar.com/container/123/mode' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/cwm/set-cwm/","title":"Set ConnectWise Manage","text":"<p><code>POST</code> /container/&lt;containerId&gt;/set-cwm</p>"},{"location":"api/cwm/set-cwm/#description","title":"Description","text":"<p>This API call can be used to create a mapping between a ConnectWise Manage company Id and an InfraSonar container. The ConnectWise Manage add-on is required, contact InfraSonar for more information.</p>"},{"location":"api/cwm/set-cwm/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/cwm/set-cwm/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/cwm/set-cwm/#body","title":"Body","text":"Param Type Required Description <code>companyId</code> integer/null Yes Company Id used by ConnectWise Manage to link to the container. If <code>null</code>, CWM will be disabled for the container."},{"location":"api/cwm/set-cwm/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found. <code>409</code> ConnectWise Manage add-on is not available for the container."},{"location":"api/cwm/set-cwm/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X POST 'https://api.infrasonar.com/container/123/set-cwm' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n-H 'Content-Type: application/json' \\\n--data-raw '{\n    \"companyId\": 123\n}'\n</code></pre></p>"},{"location":"api/examples/powershell/","title":"Powershell","text":"<p> Under construction </p>"},{"location":"api/label/query/","title":"Query label","text":"<p><code>GET</code>/label/&lt;labelId&gt;?fields=...</p>"},{"location":"api/label/query/#description","title":"Description","text":"<p>Query label details.</p>"},{"location":"api/label/query/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/label/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Label Id. <code>name</code> string Label name. <code>color</code> string One of <code>Steel</code>, <code>Olive</code>, <code>Mauve</code>, <code>Emerald</code>, <code>Orange</code>, <code>Magenta</code> or <code>InfraSonarBlue</code>. <code>description</code> string Label description."},{"location":"api/label/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Label not found."},{"location":"api/label/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/label/123?fields=name,color' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"name\": \"windows\",\n\"color\": \"InfraSonarBlue\"\n}\n</code></pre></p>"},{"location":"api/reporting/get-report/","title":"Download report","text":"<p><code>GET</code>/reporting/&lt;reportingId&gt;/report/"},{"location":"api/reporting/get-report/#description","title":"Description","text":"<p>Download a report.</p>"},{"location":"api/reporting/get-report/#path-parameters","title":"Path parameters","text":"Param Description <code>reportingId</code> Reporting Id. <code>reportId</code> Report Id. (can be found using the reporting API)."},{"location":"api/reporting/get-report/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>REPORTING_VIEW</code>). <code>404</code> Reporting not found. <code>XXX</code> Other errors may occur when the report is not available for download."},{"location":"api/reporting/get-report/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/reporting/123/report/123' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>The result contains either a PDF, XLSX or JSON file, depending on the report type.</p>"},{"location":"api/reporting/query/","title":"Query reporting","text":"<p><code>GET</code>/reporting/&lt;reportingId&gt;?fields=...</p>"},{"location":"api/reporting/query/#description","title":"Description","text":"<p>Query reporting details.</p>"},{"location":"api/reporting/query/#path-parameters","title":"Path parameters","text":"Param Description <code>reportingId</code> Reporting Id."},{"location":"api/reporting/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>reports</code> none Report fields. If at least one field is given, the result will include \"reports\" with an array of report objects (see Reports below for all available report fields)."},{"location":"api/reporting/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Reporting Id. <code>name</code> string Reporting name. <code>kind</code> string One of <code>AlertsNotificationsReport</code>, <code>StateDataReport</code>, <code>ChartDataReport</code>, <code>ConditionReport</code>. <code>content</code> string One of <code>PDF</code>, <code>JSON</code>, <code>XLSX</code>. <code>repeat</code> string/null One of <code>Daily</code>, <code>Weekly</code>, <code>Monthly</code> or <code>null</code> when this is a one-time reporting."},{"location":"api/reporting/query/#reports","title":"Reports","text":"Field Return type Description <code>id</code> int Report Id. <code>size</code> int Report size in bytes. <code>start</code> string Start time of the report. For example, a monthly report for March 2023 will return <code>2023-03-01T00:00:00+0100</code>. <code>success</code> bool This is <code>true</code> if the report was successful, else <code>false</code>."},{"location":"api/reporting/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>REPORTING_VIEW</code>). <code>404</code> Reporting not found."},{"location":"api/reporting/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n-X GET 'https://api.infrasonar.com/reporting/123?fields=name,kind&amp;reports=id,start' \\\n-H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n\"name\": \"My report\",\n\"kind\": \"StateDataReport\",\n\"reports\": [\n{\n\"id\": 123,\n\"start\": \"2023-03-01T00:00:00+0100\"\n}\n]\n}\n</code></pre></p>"},{"location":"application/","title":"Index","text":""},{"location":"application/#infrasonar-web-application","title":"InfraSonar web application","text":"<p>The InfraSonar web application allows user to access the monitoring data and maintain their InfraSonar platform given their account has sufficient permissions.</p> <p>The menu on the left reflects the InfraSonar application menu for easy reference.</p> <p>If you can't find the information you are looking for feel free to contact support</p> <p></p>"},{"location":"application/agentcores/","title":"Agentcores","text":""},{"location":"application/agentcores/#agentcores","title":"Agentcores","text":"<p>It this panel you can see the status of the Agentcores deployed for a container.</p>"},{"location":"application/agentcores/#removing-a-agentcore","title":"Removing a Agentcore","text":"<p>With the proper autorotation it is possible to remove an Agentcore here.</p> <p>Proceed with caution</p> <p>Removing an Agentcore without having a secondary agentcore in the same zone can seriously impact the availability of your monitoring solution.</p>"},{"location":"application/alerts/","title":"Alerts","text":""},{"location":"application/alerts/#alerts","title":"Alerts","text":"<p>Alerts are raised by conditions using the <code>return</code> statement in our condition edition.</p> <p>Using rules it is possible to route the alert to email or DutyCalls.</p>"},{"location":"application/alerts/#viewing-alerts","title":"Viewing alerts","text":"<p>When you are in a container view (1) you can view the alerts and notifications in the  Alerts &amp; Notifications page (2)</p> <p></p> <p>This view shows:</p> <ul> <li>Open alerts (3) </li> <li>Closed alerts (4)</li> <li>Notifications (5)</li> </ul>"},{"location":"application/alerts/#open-alerts","title":"Open alerts","text":"<p>The open alerts (3) pane shows a list (6) of all open alerts and its status.</p> <p></p> <p>When you click the show details button  the details pane opens.</p> <p></p> <ol> <li>Add message, allows you to add a message to the alert; this might be useful to inform coworkers.</li> <li>Assign alert, allows you to assign the alert to yourself or another member of this container.</li> <li>Close alert, closes the alert; when the issue is not resolved, the issue is reopened and automatically assigned to the user who closed the alert.</li> <li>Refresh, refreshes the alert pane.</li> </ol>"},{"location":"application/alerts/#closed-alerts","title":"Closed alerts","text":"<p>The closed alerts pane (4) shows a list of closed alerts.</p>"},{"location":"application/alerts/#notifications","title":"Notifications","text":"<p>The closed alerts pane (5) shows a list of all open notifications (6).</p> <p>Notification are used to notify InfraSonar users of issues with the monitoring platform they offer a clear distinction between actual \"Alerts\" and when monitoring is failing.</p> <p>Notifications disappear when the issue is resolved, users can't close a notification only the system can once the issue is resolved.  As such all notifications should be handled as an indication that something is wrong with monitoring.</p> <p>Good to known</p> <p>Notifications are not the result of a\u00a0condition. The only notifications which are raised by incoming data, are the check errors. These are not\u00a0conditions\u00a0but errors which directly result in a notification.</p>"},{"location":"application/alerts/#managing-alerts","title":"Managing alerts","text":""},{"location":"application/alerts/#closing-alerts","title":"Closing alerts","text":"<p>There are three ways an alert gets closed:</p> <ol> <li>User close, an end users closed the alert;</li> <li>auto close, the condition is configured to close the alert if the issue is resolved;</li> <li>indirect close, the relation between the condition and asset is removed:<ol> <li>When the asset is removed from the condition (e.g. removing the label applying the condition);</li> <li>When the check triggering the condition is disabled;</li> <li>When the asset is removed.</li> </ol> </li> </ol> <p>Auto close caveat</p> <p>it is possible that an auto close fails when the item triggering the alert no longer exists upon a new check result. This can happen for example when you create a condition on cpu usage in a list of processes, if you then kill the process InfraSonar will never see this item again. When this happens you need to close the alert manually.</p>"},{"location":"application/assets/","title":"Assets","text":""},{"location":"application/assets/#assets","title":"Assets","text":"<p>Assets are in essence the monitored objects in an InfraSonar implementation. Assets can be IT components such as routers, switches, servers etc but can easily also consists of any other device which can be monitored such as elevators , IOT devices , etc. </p>"},{"location":"application/assets/#add-asset","title":"Add asset","text":"<p>When you are in the assets view you can add a new asset using the Add asset button.</p> <p> </p> InfraSonar add asset"},{"location":"application/assets/#asset-configuration","title":"Asset configuration","text":"InfraSonar add asset details <p>Configuring an asset involves the following steps:</p> <ol> <li>Enter an asset name. We strongly suggest entering the correct hostname in FQDN format here, but do not enforce this.</li> <li>Enter an optional description.</li> <li>Select the mode. This is usually normal, see our mode documentation for more details</li> <li>Select the zone.    This is usually 0, see our zone documentation for more details</li> <li>Select the collectors you want to use.</li> <li>Enter the correct labels for this asset.</li> </ol> <p>Advanced asset configuration and credentials</p> <p>Some collectors require a more advanced configuration or credentials to be setup on the appliance running the collector. See our credentials section if this applies to your setup.</p>"},{"location":"application/assets/#adding-multiple-assets","title":"Adding multiple assets","text":"<p>When there is a need to add multiple assets at once we suggest using our api</p>"},{"location":"application/child_containers/","title":"Child containers","text":""},{"location":"application/child_containers/#child-containers","title":"Child containers","text":"<p>InfraSonar containers are a hierarchial setup of you monitored infrastructure.</p> <p>A container can contain monitored assets and/or sub-containers.</p> <p>Depending on your access level the following can be configured at container level:</p> <ul> <li>Authorization</li> <li>Labels</li> <li>Conditions.</li> <li>Collectors</li> <li>Billing</li> <li>Modes</li> <li>Timezone</li> </ul>"},{"location":"application/child_containers/#hierarchy","title":"Hierarchy","text":""},{"location":"application/child_containers/#principles","title":"Principles","text":"<p>Authorization is inherited to \"lower\" containers. Inheritance can be \"broken\" down the chain.</p>"},{"location":"application/child_containers/#infrasonar-hierarchical-setup","title":"InfraSonar hierarchical setup","text":"<pre><code>graph LR\n  A[InfraSonar] --&gt; B[container];\n  B --&gt;C((assets));\n  A --&gt;D[container];\n  D --&gt;E[container];\n  D --&gt;F[container];\n  E --&gt;G((assets));\n  F --&gt;H((assets));\n  A --&gt;I[container];\n  I --&gt;J((assets));\n  I --&gt;K[container];\n  K --&gt;L[container];\n  L --&gt;N[container];\n  L --&gt;O((assets));\n  N --&gt;S((assets));</code></pre> Hierarchy implementation for a service provider <pre><code>graph LR\n  A[InfraSonar] --&gt; B[service provider];\n  B --&gt; C[internal infrastructure]\n  B --&gt; D[monitoring only]\n  B --&gt; E[managed service]\n  C --&gt; F((assets))\n  D --&gt; customer1[customer 1]\n  D --&gt; customer2[customer 2]\n  customer1 --&gt; I((assets))\n  customer2 --&gt; J((assets))\n  E --&gt; customer3[customer 3]\n  customer3 --&gt; K((assets))\n  E --&gt; customer4[customer 4]\n  customer4 --&gt; L((assets))\n  E --&gt; customer5[customer 5]\n  customer5 --&gt; M[development]\n  customer5 --&gt; N[acceptance]\n  customer5 --&gt; O[production]\n  M --&gt; Q((assets))\n  N --&gt; R((assets))\n  O --&gt; S((assets))</code></pre>"},{"location":"application/child_containers/#setup-a-new-container","title":"Setup a new container","text":"<p>Note</p> <p>When you are new to InfraSonar and sign in for the first time, you will see the message:</p> <p>Welcome to InfraSonar! It appears that you are not yet a member of an InfraSonar container. If you are a member of an organization that uses InfraSonar, ask for permission from an authorized person to add you to the relevant container. Otherwise, request a free demo via the website!</p> <p>From the container view, you can add a new child container.</p> <p> </p> InfraSonar add container <ol> <li>When you are in asset view you can use the child containers button  to switch to child container view;</li> <li>Click the add container button;</li> <li>Enter a name for your container;</li> <li>Select the mode, this is usual normal;</li> <li>Select the timezone for this container;</li> <li>CLick save.</li> </ol>"},{"location":"application/collectors/","title":"Collectors","text":""},{"location":"application/collectors/#collectors","title":"Collectors","text":"<p>Collectors can be turned of on container level here.</p>"},{"location":"application/collectors/#propagation","title":"Propagation","text":"<ul> <li>When turning a collector on or off existing children are not affected.</li> <li>Newly created children will inherit the configuration from it's parent.</li> </ul>"},{"location":"application/collectors/#usage","title":"Usage","text":"<p>This feature can be used to control which collectors are available on a container.</p> <p>Disabling unused collectors avoids mistakes and also unclutters the UI.</p>"},{"location":"application/conditions/","title":"Conditions","text":""},{"location":"application/conditions/#conditions","title":"Conditions","text":"<p>Check results sent to the InfraSonar cloud platform are immediately evaluated using the conditions configured for the specific asset. </p> <p>InfraSonar comes with many predefined conditions based on years of experience and best practices.</p>"},{"location":"application/conditions/#managing-conditions","title":"Managing conditions","text":"<p>Conditions are assigned to an asset using labels.</p> <p>In order to manage conditions you need to have the ContainerAdmin role on the container you want to manage conditions for.</p>"},{"location":"application/conditions/#operational","title":"Operational","text":"<p>A hit condition returns a message and a severity.</p> <p>The following severity can be returned:</p> Severity 1 Description EMERGENCY System is unusable. ALERT Action must be taken immediately. CRITICAL Critical conditions. ERROR Error conditions. WARNING Warning conditions. NOTICE Normal but significant conditions. INFORMATIONAL Informational. DEBUG Messages that contain information normally of use only when debugging. OK This is an explicit OK which results in an alert auto closing when hit."},{"location":"application/conditions/#turn-off-conditions","title":"Turn off conditions","text":"<p>Conditions can be turned of per asset of on a container.</p> <ol> <li> <p>Our severity levels are derived from the Syslog levels, see this Syslog  wikipedia article for additional information.\u00a0\u21a9</p> </li> </ol>"},{"location":"application/conditions_editor/","title":"Conditions editor","text":""},{"location":"application/conditions_editor/#conditions","title":"Conditions","text":"<p> Under construction </p> <p>Check results sent to the InfraSonar cloud platform are immediately evaluated using the conditions configured for the specific asset. </p> <p>InfraSonar comes with many predefined conditions based on years of experience and best practices.</p> <p>In order to manage conditions you need to have the ContainerAdmin role on the container you want to manage conditions for.</p>"},{"location":"application/conditions_editor/#managing-conditions","title":"Managing conditions","text":"<p>While our condition editor might feel intimidating at first glance, it is potent. We urge you to look at our predefined conditions for inspiration and a deeper understanding.</p>"},{"location":"application/conditions_editor/#general-tab","title":"General tab","text":"<p>Name </p> <p>The name you want to use for your condition, we suggest a short descriptive name.</p> <p>Description</p> <p>use the description to provide a short description of the purpose and usage of the condition.</p> <p>Collector</p> <p>Select the path to the data you want this condition.</p> <p>For probes this is: <code>Collector</code>, <code>Check</code>, <code>Type</code></p> <p>Condition kind</p> <p>We identify three kind of Conditions:</p> Kind Description EXPRESSION Detailed expression used to evaluate the check result. ITEMS MUST EXIST Used to detect items which must exist. ITEMS_MISSING Used to detect items missing compared to the previous check result. <p>Ticks</p> <p>The number of times this condition must be hit in a row before an actual alert will be raised.</p> <p>Note</p> <p>Ticks can not be set for the condition kind <code>ITEMS_MISSING</code> as this compares with a previous check result.</p> <p>Single alert </p> <p>Gathers up all alerts into a single alert per asset. When disabled, each item will be tested and may raise an alert.</p>"},{"location":"application/conditions_editor/#labels-tab","title":"Labels tab","text":"<p>In this tab you configure for which labels the condition is active.</p>"},{"location":"application/conditions_editor/#items-tab","title":"Items tab","text":"<p>This tab allows you to set the severity and specify for which items this conditions is a active in case of <code>ITEMS MUST EXIST</code> or which items this condition should exclude in the case of <code>ITEMS_MISSING</code></p>"},{"location":"application/conditions_editor/#items-must-exist","title":"Items must exist","text":"<p>All items will be checked for existence by the given list or regular expression. </p> <ul> <li>Condition will be executed when added to an asset or when the condition has been changed.</li> <li>Auto-close is always enabled.</li> <li>The item list or regular expression work as \"include\" by the item.name property.</li> <li>When a list is used, all items in the list must exist otherwise the condition is hit.</li> <li>When a regular expression is used, at least one item must match with the given regular expression otherwise the condition is hit.</li> </ul>"},{"location":"application/conditions_editor/#items-missing","title":"Items missing","text":"<p>All items will be compared towards the previous items. If one (or more) items is missing which is not excluded by either the item list or regular expression, the condition is hit.</p> <ul> <li>Will re-run when added to an asset or when the condition has changed.</li> <li>Open alerts will never auto-close. Note that they can be closed indirectly, for example when the condition or check is removed from an asset.</li> <li>The item list or regular expression work as \"exclude\" by the item.name property.</li> <li>When a list is used, the items in the list will be ignored when missing.</li> <li>When a regular expression is used, an item match will ignore the item when missing.</li> </ul> <p>enodo.metric.upper lower value (+aggregation mix)</p>"},{"location":"application/conditions_editor/#expression-tab","title":"Expression tab","text":"<p>InfraSonar uses a powerful expression language that allows for precise and tailored conditions.</p> <p>Each item is processed by the given expression. If <code>new</code> is used in the expression, it is best practice not to use <code>return OK</code> in the expression as auto close does not make sense. This is because an item will only be new once. - Condition will be executed when added to an asset or when the condition has been changed, unless <code>prev</code> (previous item) is used in the expression. When <code>prev</code> is used, only when new data is received the condition will evaluate again. - <code>return OK</code>  -&gt; Success, Auto-close open alert if there is one. - <code>return</code> -&gt; Success, Do not auto-close an open alert if there was one. - <code>return ERROR, \"...\"</code> -&gt; return with severity and optional message. (ERROR might be INFO, CRITICAL etc.)</p> <p>Example expression</p> <pre><code>// alert message template\nvar.template = \"\nCertificate almost expires!\nname: @item.name\nexpires in: @item.expiresIn seconds\n\"\n\ncase item.expiresIn &lt; 604_800:  \n    // Certificate will expire in less than 7 days\n    return WARNING, var.template\n\ncase item.expiresIn &lt; 1_209_600:  \n    // Certificate will expire in less than 14 days\n    return NOTICE, var.template\n\ncase \"organisationName=Let's Encrypt\" in item.issuer:\n    // Skip less than 28 days for Let's Encrypt certificates\n    return OK \n\ncase item.expiresIn &lt; 2_419_200:  \n    // Certificate will expire in less than 28 days\n    return INFORMATIONAL, var.template\n\n// this add's autoclose\nreturn OK\n</code></pre>"},{"location":"application/conditions_editor/#case-statement","title":"case statement","text":"<p>The <code>case</code> statement is</p> <p><code>case new</code></p>"},{"location":"application/conditions_editor/#return-statement","title":"return statement","text":"<p><code>return &lt;severity&gt;, &lt;message&gt;</code></p> <p>The return statement is used to return the severity and a message.</p> <p><code>return</code> without any parameters is also possible.</p> <p><code>severity</code> </p> Severity 1 Description EMERGENCY System is unusable. ALERT Action must be taken immediately. CRITICAL Critical conditions. ERROR Error conditions. WARNING Warning conditions. NOTICE Normal but significant conditions. INFORMATIONAL Informational. DEBUG Messages that contain information normally of use only when debugging. OK This is an explicit OK which results in an alert auto closing when hit. <p>Severity usage</p> <p>InfraSonar pre-defined conditions only the severity levels  <code>CRITICAL</code>, <code>ERROR</code>, <code>WARNING</code> &amp; <code>NOTICE</code>.</p> <p>We advice to use <code>ALERT</code> &amp; <code>EMERGENCY</code> for your specific use cases; <code>EMERGENCY</code> could for example be used to send notifications to a 24x7 DutyCalls channel where <code>ALERT</code> is send to a DutyCalls channel used for non weekends and holidays.</p> <p><code>message</code></p> <p>The message can be a string message including variable substitution. E.g. <code>My @item.name</code></p> <ol> <li> <p>Our severity levels are derived from the Syslog levels, see this Syslog  wikipedia article for additional information.\u00a0\u21a9</p> </li> </ol>"},{"location":"application/containers/","title":"Containers","text":""},{"location":"application/containers/#containers","title":"Containers","text":"<p>The containers view shows the hierarchy of containers and allows you to configure the container mode and timezone.</p> <p>You also move containers within the hierarchy within this view and renew containers.</p> <p>In this view you can also add/remove columns to show you:</p> <ul> <li>Container Id</li> <li>Container name</li> <li>Number of Assets</li> <li>Number of Unassigned alerts</li> <li>Number of Assigned alerts</li> <li>Number of Notifications</li> <li>Mode</li> <li>Timezone</li> </ul>"},{"location":"application/credits/","title":"Credits","text":""},{"location":"application/credits/#credits","title":"Credits","text":"<p>On the credits page you can find the \"in use\" credits and \"available\" credits for a container and it's children.</p> <p>You can drill-down per container to retrieve detailed usage:</p> <p> </p>"},{"location":"application/dashboard/","title":"Dashboard","text":""},{"location":"application/dashboard/#dashboard","title":"Dashboard","text":"<p>The dashboard gives an overview of all unassigned alerts and notifications per configured container and can be used to display on a central display.</p> <p>When you open the dashboard for the first time or in a new browser session you are created by a setup wizard. See our Dashboard setup paragraph how to setup you dashboard but first have a look on at our dashboard concept as this helps you decide on how to setup your dashboard.</p> <p>Raspberry Pi dashboard server</p> <p>See our Raspberry Pi guide on how we have setup our autonomous dashboards using a couple of Raspberry Pi's.</p>"},{"location":"application/dashboard/#dashboard-overview","title":"Dashboard overview","text":"<p>Our dashboard consists of two main sections:</p> <ol> <li>Graphical container overview</li> <li>Unassigned alerts</li> </ol> <p></p>"},{"location":"application/dashboard/#graphical-container-section","title":"Graphical container section","text":"<ul> <li>The outer circle show all alerts</li> <li>Assigned alerts are colored in a blue tint</li> <li>The inner circle shows all notifications</li> </ul>"},{"location":"application/dashboard/#unassigned-alerts-section","title":"Unassigned alerts section","text":"<p>The section shows all unassigned alerts sorted by time of creation.</p>"},{"location":"application/dashboard/#dashboard-setup","title":"Dashboard setup","text":"<p>You can edit the dashboard using the  icon.</p> <p></p> <ol> <li>Select which section you want to show.</li> <li>Select an optional screen division if you have chosen to use multiple sections</li> <li>Select the containers you want to display on this dashboard</li> </ol> <p>Configuration</p> <p>The dashboard configuration is stored in the browsers local storage allowing you to setup multiple dashboards on multiple systems using a single read-only account.</p>"},{"location":"application/dutycalls/","title":"DutyCalls","text":""},{"location":"application/dutycalls/#duty-calls","title":"Duty Calls","text":""},{"location":"application/home/","title":"Home","text":""},{"location":"application/home/#home","title":"Home","text":"<p>The home screen gives you a personalized overview of alerts assigned to you, containers, access and favorites.</p> <p>Future improvements ahead</p> <p>In the future we will make it possible to adapt the home screen to your needs.</p> <p></p>"},{"location":"application/labels/","title":"Labels","text":""},{"location":"application/labels/#labels","title":"Labels","text":""},{"location":"application/labels/#purpose","title":"Purpose","text":"<p>Grouping, labels can be added to hosts to group and identify them quickly.</p> <p>Apply conditions, Labels are also used to control which conditions are active.</p> <p>Glue</p> <p>Labels \"glue\" conditions onto hosts.</p> <pre><code>graph LR\n  condition1[Condition] --- label; \n  condition2[Condition] --- label; \n  condition3[Condition] --- label; \n  label{{Label}} --- host1[Host];\n  label --- host2[Host];\n  label --- host3[Host];</code></pre>"},{"location":"application/labels/#how-to-use","title":"How to use","text":"<p>Labels can be assigned to hosts either by  editing a host or by selecting one or more hosts and using the action menu.</p> <p> </p> Action menu in action"},{"location":"application/labels/#custom-labels","title":"Custom labels","text":"<p>InfraSonar container admins can create custom labels for a container.</p> <p> </p> InfraSonar add label <p>Pro Tip</p> <p>As must browsers support emoji it is possible to use these in your labels. Examples:</p> <ul> <li>The round pushpin \ud83d\udccd to indicate labels used for locations. <code>\ud83d\udccd InfraSonar HQ</code></li> <li>Bust in Silhouette \ud83d\udc64 to indicate labels used for to indicate who is responsible for an asset. <code>\ud83d\udc64 C.E. Shannon</code></li> </ul> <ol> <li>Navigate to the labels page () in the left navigation drawer;</li> <li>Click the Add label button;</li> <li>Enter a name (1);</li> <li>Pick a color (2):   Steel   Olive   Mauve   Emerald   Orange   Magenta   InfraSonar-blue, (reserved for InfraSonar labels)</li> <li>Enter a description(3).</li> </ol>"},{"location":"application/labels/#predefined-labels","title":"Predefined labels","text":"<p>InfraSonar has created labels that, when applied to an asset with the appropriate collector, monitor the asset using best practices.</p>"},{"location":"application/log/","title":"Log","text":""},{"location":"application/log/#log","title":"Log","text":"<p>In It this panel you can see the logging of all user actions in the ui.</p>"},{"location":"application/modes/","title":"Modes","text":""},{"location":"application/modes/#modes","title":"Modes","text":"<p>Modes can be used to temporary change the monitoring operation on a container or an asset or group of assets.</p> <p>We identify the following modes within the InfraSonar application:</p> mode description <code>normal</code> normal operations, all conditions are evaluated. <code>maintenance</code> All asset notifications and alert messages suppressed <code>disabled</code> All data send by an agent for this asset is ignored. Any probes / checks configured for this asset are stopped. <p>Modes in day to day operations</p> <p>Modes are a powerful instrument when performing maintenance on assets as it allows on easy way to temporary stop the monitoring avoiding being flood with messages.</p>"},{"location":"application/modes/#mode-operations","title":"Mode operations","text":""},{"location":"application/modes/#container","title":"Container","text":"<p>Modes can be set on container level. Effectively changing the mode for all assets in the container.</p> <p>Changing the mode on a container can be done using our a  schedular or in the  container view.</p>"},{"location":"application/modes/#asset","title":"Asset","text":"<p>Changing the mode on an asset can be done while editing  an asset or  scheduled</p>"},{"location":"application/modes/#api","title":"API","text":"<p>It is also possible to change the mode using our API:</p> <ul> <li>Change mode on a asset</li> <li>Change mode on a container</li> </ul>"},{"location":"application/reporting/","title":"Reporting","text":""},{"location":"application/reporting/#reporting","title":"Reporting","text":""},{"location":"application/reporting/#overview","title":"Overview","text":""},{"location":"application/reporting/#kinds","title":"Kinds","text":"<p>We identify these three reporting kinds:</p> <ul> <li>Alerts and notifications</li> <li>State data</li> <li>Condition</li> </ul>"},{"location":"application/reporting/#time-schedule","title":"Time schedule","text":"<p>here you can pick the unit of time you want to use as data-window for your report:</p> <ul> <li>Day</li> <li>Week</li> <li>Month</li> </ul> <p>And pick for which period you want the report.</p> <p>Optionally you can choose to repeat the report daily, weekly or monthly.</p> <p>Tips</p> <p>Editing Editing is only possible for repeating reports. One-off reports can be cloned to be run again using other parameters.</p> <p>Planning ahead It is possible to schedule reports in the future, we advise to enable notifications when doing so.</p> <p>State data Quering state data is due to its nature not possible over a period of time.</p>"},{"location":"application/reporting/#data","title":"Data","text":"<p>here you can use three filter levels to fine grain which assets are returned in your report.</p> <ul> <li>Asset kind filterYou can opt to limit your report to a specific asset kind.</li> <li>Container filterAllows you to select for which containers you want the report </li> <li>Label filterAllows you to filter for which labels you want the report </li> </ul>"},{"location":"application/reporting/#alerts-and-notifications","title":"Alerts and notifications","text":"<p>Creates a pdf report containing an overview of the alerts and notifications for the selected assets in the selected time frame.</p>"},{"location":"application/reporting/#state-data","title":"State data","text":"<p>You can query state data by entering the \"path\" towards the data: Collector \u2192 Check \u2192 Type</p> <p>State data reports can be useful to periodically retrieve data for keeping your CMDB up to date.</p>"},{"location":"application/reporting/#example","title":"Example","text":"<p>Say you want weekly report containing all relevant certificate information from our tcp-probe</p> <ul> <li>collector: <code>tcp</code></li> <li>Check: <code>certificates</code></li> <li>Type: <code>sslCert</code></li> </ul> <p>Next you can select which metrics should be in your report, default we add all metrics.</p> <p>Last step is to specify how you want to receive the data, we support <code>json</code> and <code>xlsx</code> and allow you format the values for better readability or keep them for better processing.</p>"},{"location":"application/reporting/#condition","title":"Condition","text":"<p>A condition report can be used to report when an alerts is opened on a specific condition.</p> <p>This report shows the following information:</p> <ul> <li>Container Id</li> <li>Container Name</li> <li>Asset Id</li> <li>Asset Name</li> <li>Message</li> <li>Severity</li> <li>Created on</li> <li>Last message</li> <li>Last severity</li> <li>Last hit</li> <li>Owner</li> <li>Last action</li> <li>Last action datetime</li> <li>Last action username</li> <li>Last action message</li> <li>Closed</li> </ul> <p>Tip</p> <p>When you subtract last hit from the created on date you get the duration.</p>"},{"location":"application/rules/","title":"Rules","text":""},{"location":"application/rules/#rules","title":"Rules","text":"<p>Rules are a great way to configure notifications for end-users.</p>"},{"location":"application/rules/#features","title":"Features","text":"<p>Rules can be setup for a group of conditions and assets and route messages to either DutyCalls or email.</p> <p>Routing to DutyCalls requires this service to be setup first, see our DutyCalls documentation for more information.</p>"},{"location":"application/schedule/","title":"Schedule","text":""},{"location":"application/schedule/#schedule","title":"Schedule","text":"<p>Our schedular allows you to schedule a mode change on a specific time or at specific intervals for a container.</p> <p>The schedule option is also available for a single asset and can be found below the \"More\" menu in the asset view. </p>"},{"location":"application/timeseries/","title":"Time series","text":""},{"location":"application/timeseries/#time-series","title":"Time Series","text":"<p>In this panel it is possible to turn time-series off or on on a container level.</p> <p>Another feature in this panel is to purge dead time-series</p>"},{"location":"application/timeseries/#turning-time-series-off","title":"Turning time-series off","text":"<p>Turning time-series off can be useful in curtain use-cases to reduce costs.</p> <p>Note</p> <p>When a time-serie is turned any configured graphs will show the last measured state in a flat-line.</p> <p>Also important to note is than any Enodo conditions will no longer work as these require historical data to perform the analysis on.</p>"},{"location":"application/timeseries/#turning-time-series-on","title":"Turning time-series on","text":"<p>In some scenario's where you would like more in-depth analysis in might be beneficial to enable time-series.</p> <p>A good example where this might be of using is monitoring per process information using the wmi probe. This is turned off by default as it can quickly result in massive time-series usage.</p>"},{"location":"application/timeseries/#purge-dead-time-series","title":"Purge dead time-series","text":"<p>Dead time-series occur when an asset is removed or when an asset is modified.</p> <p>An easy example of an asset modification that leads to dead time-series is a removed volume.</p> <p>Purging dead time-series removes all time-series which not received data for the provided amount of weeks.</p>"},{"location":"application/tokens/","title":"Tokens","text":""},{"location":"application/tokens/#tokens","title":"Tokens","text":"<p>In this section container-tokens can be generated and maintained.</p> <p>Container tokens can be used to authorize external automation to manage InfraSonar data using our API.</p> <p>Container tokens are also required for agentcore and agent authentication.</p> <p>Tip</p> <p>We strongly suggest setting up separate tokens where possible.</p>"},{"location":"application/tokens/#create-container-tokens","title":"Create container tokens","text":"<ol> <li>Navigate to the container you want to create a token for.</li> <li>Click the tokens icon  in the left hand menu.</li> <li>Click the Add token button.</li> <li>Give the token a identifiable name and provide just enough accessobserve we added some shortcuts to create access tokens for Agentcores and probes</li> <li>Click Save, enter a reason and click confirm</li> <li>Reopen the just created token and copy the ID.</li> </ol>"},{"location":"application/tokens/#pre-defined-roles","title":"Pre-defined roles","text":"<p>We predefined three roles to quickly set the correct permissions:</p> <ul> <li>Agentcore</li> <li>Agent</li> <li>Agent (no auto asset creation)</li> </ul>"},{"location":"application/tokens/#container-token-rules","title":"Container token rules","text":"<ul> <li>User who have the de <code>container Access</code> flag set can create container tokens.</li> <li>A user can not grant more access permissions to a token then he or she already has.</li> </ul>"},{"location":"application/trash/","title":"Trash","text":""},{"location":"application/trash/#trash","title":"Trash","text":"<p>Asset's are soft-deleted.</p> <p>When an asset is deleted we remove the collectors from the asset and move the asset to the trash-bin.</p>"},{"location":"application/trash/#recovering-an-asset","title":"Recovering an asset","text":"<p>When you recover an asset you will need to add the collectors and labels back to this asset.</p> <p>Kind and description are recovered from the \"bin\".</p> <p>When you did not purge the time-series data this will be available again also.</p>"},{"location":"application/users/","title":"Users","text":""},{"location":"application/users/#users","title":"Users","text":""},{"location":"application/users/#authentication","title":"Authentication","text":"<p>We support user authentication using using one of these cloud identities:</p> <ul> <li> GitHub account</li> <li> Microsoft account (this can be a work or personal account)</li> <li> Google account (this can be a personal or Google workspace account)</li> </ul> <p>Tip</p> <p>Users can only be added to our platform if they are \"known\" to us. As such a user should fist authenticate once on our platform and from there on the user can be added to a container.</p>"},{"location":"application/users/#authorization","title":"Authorization","text":"<p>A user's identity can be authorized on a container using a specific role.</p>"},{"location":"application/users/#authorization-flags","title":"Authorization flags","text":"Flag Description <code>Alerts can be assigned to this user (\"Is member\")</code> Allows alerts to be assigned to this user, makes the user \"visible\" for alert assignment. <code>View</code> Required for viewing this container. <code>Billing</code> Required for viewing the credits tab on this container (only when credits are available on the container). <code>InsertCheckData</code> Required for inserting data using the API (used by agents). <code>AgentcoreConnect</code> Required for AgentCores to connect to the hub. <code>AssetManagement</code> Required for changing the container mode (and/or schedule container mode);Required for changing the asset mode (and/or schedule asset mode);Required for creating new assets;Required for removing assets (including delete from trash);Required for changing asset configuration (including labels and collector related configuration). <code>AlertAssign</code> Required for assigning alerts. <code>AlertChange</code> Required for closing alerts;Required for adding comments to alerts. <code>API</code> Required for any API request. <code>ContainerManagement</code> Required for adding child containers to this container;Required for removing this container;Required for renaming this container. <code>ContainerAdmin</code> Required for creating/changing/removing labels within this container;Required for creating/changing/removing conditions within this container;Required to create/change/remove a DutyCalls service to this container. <code>ContainerAccess</code> Required for managing user access to this container;Required for managing tokens on this container. <code>CheckManagement</code> Required for enable/disable/configure checks per collector on assets. <code>TimeSeriesManagement</code> Required for enable/disable time-series for this container. <code>RuleManagement</code> Required for managing DutyCalls rules on this container;Required for managing Email rules (including rules by other users) on this container. <code>RuleEmail</code> Required for creating a personal email rule on this container.(other email rules are only visible when having the admin role) <code>PurgeTimeSeries</code> Required for purging dead-time-series within this container. <code>ReportingView</code> Required for viewing reports. <code>ReportingAdmin</code> Required for managing reports/ <code>ViewLog</code> Required for viewing logging. <code>ConnectWiseManageAddOn</code> Required to use the ConnectWise manage addon on this container;only if the container has CWM configured."},{"location":"application/views/","title":"Views","text":""},{"location":"application/views/#views","title":"Views","text":"<p>Views can be used create an overview over multiple assets grouped by kind and/or label.</p>"},{"location":"application/zones/","title":"Zones","text":""},{"location":"application/zones/#zones","title":"zones","text":"<p>Zones can be useful when assets are located in a dmz or remote networks as it allows to direct assets to a specific Agentcore by configuring the asset to be a member of the specific zone.</p>"},{"location":"application/zones/#good-to-know","title":"Good to know","text":"<ul> <li>When one or more Agentcores are configured in the specified zone an asset is bound to one of the Agentcores in this zone.</li> <li>If no agentcores are configured in the specified zone we fall back to any other agent core.</li> <li>For assets being monitored using an agent the zone configuration is purely cosmetic.</li> </ul> <p>In the future we might add a link between zones and locations.</p>"},{"location":"collectors/","title":"Index","text":""},{"location":"collectors/#collectors","title":"Collectors","text":"<p>InfraSonar collectors collect monitoring data to be parsed by the InfraSonar cloud platform.</p> <p>All our general purpose collectors are available as open-source  on our GitHub  page.</p> <p>Using the provided libraries third parties can easily add additional collectors to our platform.</p>"},{"location":"collectors/#collection-concepts","title":"Collection concepts","text":"<p>InfraSonar identities three collection concepts to gather data from monitored assets.</p> <ul> <li>Agents run autonomously on a monitored asset and send data directly the to InfraSonar platform</li> <li>Probes are most often deployed on an appliance and are orchestrated by an agentcore.mdProbes are typically used for agentless monitoring scenario's.</li> <li>Services collect data \"as a service\".</li> </ul>"},{"location":"collectors/agents/","title":"Index","text":""},{"location":"collectors/agents/#agents","title":"Agents","text":"<p>An InfraSonar agents is an installable software component that autonomously and send the retrieved monitoring data to the InfraSonar platform using the InfraSonar API</p>"},{"location":"collectors/agents/#available-agents","title":"Available agents","text":"<p> Docker agent</p> <p> Microsoft Windows Agent</p>"},{"location":"collectors/agents/docker/","title":"Docker","text":""},{"location":"collectors/agents/docker/#docker","title":"Docker","text":"<p>The Docker-agent is a Docker container that can be used to monitor other Docker containers. The Docker-agent itself runs as a Docker container on the host, which hosts the containers and uses the Unix socket <code>docker.sock</code> to retrieve relevant monitoring data which, is send to the InfraSonar API.</p>"},{"location":"collectors/agents/docker/#prerequisites","title":"Prerequisites","text":"<ul> <li>The Docker-agent must be able to connect to the InfraSonar API</li> <li>The Docker-agent must be allowed access to the Unix socket <code>docker.sock</code>.</li> <li>The Docker-agent requires a valid token.</li> </ul>"},{"location":"collectors/agents/docker/#deployment","title":"Deployment","text":"<p>There are multiple scenario's that can be used to deploy the docker agent and it depends on your use case which one would suites best for you.</p> <p>Host network vs bridge network</p> <p>When using a bridge network it is highly recommended to set the container host name using the <code>--hostname</code> / <code>-h</code> flag as this is the name used by the agent to present itself.</p> <p>Upon first run the Docker agents registers itself as an asset in InfraSonar, to ensure reconnection to the same asset an asset-id is stored in <code>/data/.asset.json</code> hence the reason we mount the the <code>/data</code> folder.</p>"},{"location":"collectors/agents/docker/#docker-command","title":"Docker command","text":"<p>Deploys the docker agent using a bridged network and names the hostname to the system hostname:</p> <pre><code>docker run \\\n--name dockeragent \\\n-h $HOSTNAME \\\n-v infraSonarData:/data \\\n-e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\nghcr.io/infrasonar/docker-agent\n</code></pre> <p>Deploys the docker agent using the host network and thus automatically uses the system hostname:</p> <pre><code>docker run \\\n--name dockeragent \\\n--network host \\\n-v infraSonarData:/data \\\n-e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n-v /var/run/docker.sock:/var/run/docker.sock \\\nghcr.io/infrasonar/docker-agent\n</code></pre>"},{"location":"collectors/agents/docker/#docker-compose","title":"docker-compose","text":"<p>You can also add the Docker-agent to your <code>docker-compose.yml</code> file:</p> <pre><code>volumes:\ninfraSonarData:\n\nservices:\ndockeragent:\nnetwork_mode: host\ncontainer_name: dockeragent\nhostname: dockeragent\nrestart: always\nlogging:\noptions:\nmax-size: 5m\nimage: ghcr.io/infrasonar/docker-agent\nenvironment:\nTOKEN: \"&lt;&lt;agent token&gt;&gt;\"\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n- infraSonarData:/data\n</code></pre> <p>See also our InfraSonar docker compose on how we deploy the docker agent on our monitoring appliances.</p>"},{"location":"collectors/agents/microsoft_windows/","title":"Microsoft Windows","text":""},{"location":"collectors/agents/microsoft_windows/#microsoft-windows-agent","title":"Microsoft Windows agent","text":"<p>The Microsoft Windows agent is under active development.</p> <p>The expected release is Q2 - 2023.</p>"},{"location":"collectors/probes/","title":"Probes","text":""},{"location":"collectors/probes/#introduction","title":"Introduction","text":"<p>Probe mission</p> <p>We use open standards and vendor-provided technologies to query controlled systems.</p> <p>Probes are collectors that use open standards or vendor provided methods to retrieve monitoring data from a remote asset.</p> <p>All InfraSonar provided probes are available as  open source on our  GitHub repository as we believe in transparency with regards to data collection and systems access.</p> <p>When a new asset (host) is added and the InfraSonar admin enables a specific probe for this asset, a discovery routine will be started to identify the asset and determine which checks InfraSonar can perform.</p>"},{"location":"collectors/probes/#deployment","title":"Deployment","text":"<p>Probes are typically deployed using a Docker image running as a Docker container one or more InfraSonar appliances.</p> <p>Upon startup a probe registers itself to the for this probe configured agentcore</p> <p>Because probes usually run in the same Docker network as the agentcore, they can easily connect to it.</p>"},{"location":"collectors/probes/#configuration","title":"Configuration","text":"<p>As probes are typically deployed using Docker compose, probe behavior, such as setting the log level, can easily be accomplished by environment variables in the coresponding <code>docker-compose.yml</code> file. The usage of this file is outlined here</p>"},{"location":"collectors/probes/_template/","title":"&lt;&gt;","text":""},{"location":"collectors/probes/_template/#introduction","title":"Introduction","text":""},{"location":"collectors/probes/_template/#features","title":"Features","text":""},{"location":"collectors/probes/_template/#deployment","title":"Deployment","text":"<p>The HTTP probe can best be deployed as a docker container.</p> <p> ghcr.io/infrasonar/http-probe</p> <p>See our TODO</p>"},{"location":"collectors/probes/_template/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/_template/#credentials","title":"Credentials","text":""},{"location":"collectors/probes/_template/#checks","title":"Checks","text":""},{"location":"collectors/probes/_template/#best-practices","title":"Best practices","text":""},{"location":"collectors/probes/_template/#operational","title":"Operational","text":""},{"location":"collectors/probes/_template/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/_template/#additional-information","title":"Additional information","text":"<p> xxxx probe source code</p>"},{"location":"collectors/probes/agentcore/","title":"Agentcore","text":""},{"location":"collectors/probes/agentcore/#agentcore","title":"Agentcore","text":"<p>The Agentcore orchestrates our probes and is responsible for scheduling checks. During the startup sequence of a probe, it will \u201c announce\u201d itself to the Agentcore.</p> <p>The Agentcore also acts as a communication gateway. Data retrieved by the probes is sent to the InfraSonar cloud platform via the Agentcore.</p> <pre><code>graph LR\n  probe[Probe] --&gt; | TCP 8750 | Agentcore[Agentcore] --&gt; | HTTPS 8730 | infrasonarcloud[InfraSonar Cloud Platform];</code></pre> <p>Because probes usually run in the same Docker network as the Agentcore, they can easily connect to it.</p>"},{"location":"collectors/probes/agentcore/#features","title":"Features","text":""},{"location":"collectors/probes/agentcore/#resumable-operation","title":"Resumable operation","text":"<p>If an Agentcore is shutdown properly a list of assets and a check result queue are saved on disk. Given the Agentcore starts and it can't connect to the InfraSonar cloud platform the list of saved assets will be used to resume operations. Check results up to a maximum of 100.000 packages will be stored in a queue</p>"},{"location":"collectors/probes/agentcore/#multiple-agentcores","title":"Multiple Agentcores","text":"<p>InfraSonar supports multiple Agentcores within a monitored environment. Deploying multiple Agentcores can be useful in spreading the network load, accommodate for network segmentation, and supporting large-scale implementations.</p> <p>To support network segmentation, assets can be assigned to a zone. When this zone also has an Agentcore assigned its assets will automatically be monitored using the Agentcores in this zone.</p> <p>When you deploy multiple Agentcores in a zone, assets will be evenly distributed between all Agentcores in this zone..</p> <p>No automagic failover</p> <p>If an Agentcore fails it's role will not automatically be taken over by another Agentcore. To accomplish this, the failing Agentcore needs to be removed by an InfraSonar admin.</p>"},{"location":"collectors/probes/agentcore/#operational","title":"Operational","text":""},{"location":"collectors/probes/agentcore/#removing-an-agentcore","title":"Removing an Agentcore","text":"<p>When an Agentcore is decommissioned, all hosts monitored by are automatically transferred to other Agentcores in the configured zone.</p> <p>You can remove an Agentcore in our Agentcore panel.</p>"},{"location":"collectors/probes/apcups/","title":"APC UPS","text":""},{"location":"collectors/probes/apcups/#apc-ups","title":"APC UPS","text":""},{"location":"collectors/probes/apcups/#introduction","title":"Introduction","text":"<p>The APC UPS probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/apcups/#features","title":"Features","text":"<p>The APC UPS probe consist of a number of UPS specific checks:</p> <p> Battery status  Input/output frequency  Input/output voltage  UPS Load  Temperature</p>"},{"location":"collectors/probes/apcups/#deployment","title":"Deployment","text":"<p>The APC UPS probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/apcups/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the APC UPS probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>apcups:\nuse: snmp\n</code></pre> <p>The <code>apcups</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/apcups/#conditions","title":"Conditions","text":"<p>The label <code>APC UPS</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/dns/","title":"DNS","text":""},{"location":"collectors/probes/dns/#dns","title":"DNS","text":""},{"location":"collectors/probes/dns/#introduction","title":"Introduction","text":"<p>The DNS probe is a synthetic monitor and can even monitor changes to specific DNS records.</p>"},{"location":"collectors/probes/dns/#features","title":"Features","text":"<p>THe DNS probe can perform forward and reverse DNS queries for an FQDN</p>"},{"location":"collectors/probes/dns/#deployment","title":"Deployment","text":"<p>The DNS probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/dns/#probe-configuration","title":"Probe configuration","text":"Property Description DNS Servers DNS servers to query, note all configured DNS servers are queried FQDN FQDN of the DNS record you want to monitor <p>Reverse DNS lookups</p> <p>Using the special <code>.arpa.</code> domain it is possible to perform a reverse DNS lookup. See our PTR section for a detailed explanation and examples.</p>"},{"location":"collectors/probes/dns/#example-configuration","title":"Example configuration","text":"<ul> <li>DNS servers: <code>8.8.8.8, 8.8.4.4</code></li> <li>FQDN: <code>dns.google.com</code></li> </ul>"},{"location":"collectors/probes/dns/#checks","title":"Checks","text":"<p>We support the DNS record types described in the next paragraphs.</p> <p>Most of the information in this chapter is an extract from this Wikipedia article.</p>"},{"location":"collectors/probes/dns/#a","title":"A","text":"<p>Address record, List of IPv4 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>185.199.111.153, 185.199.108.153, 185.199.109.153, 185.199.110.153</code>"},{"location":"collectors/probes/dns/#aaaa","title":"AAAA","text":"<p>IPv6 address record, list of IPv6 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>2606:50c0:8003::153, 2606:50c0:8002::153, 2606:50c0:8001::153, 2606:50c0:8000::153</code>"},{"location":"collectors/probes/dns/#caa","title":"CAA","text":"<p>Certification Authority Authorization. DNS Certification Authority Authorization, constraining acceptable CAs for a host/domain.</p> <p>CAA record structure: <code>flag</code> <code>tag</code> <code>value</code></p> <code>flag</code> A flags byte which implements an extensible signaling system for future use. As of 2018, only the issuer critical flag has been defined, which instructs certificate authorities that they must understand the corresponding property tag before issuing a certificate. This flag allows the protocol to be extended in the future with mandatory extensions, similar to critical extensions in X.509 certificates. <code>tag</code> <p>One of the following property:</p> <code>issue</code> This property authorizes the holder of the domain specified in associated property value to issue certificates for the domain for which the property is published. <code>issuewild</code> This property acts like issue but only authorizes the issuance of wildcard certificates, and takes precedence over the issue property for wildcard certificate requests. <code>iodef</code> This property specifies a method for certificate authorities to report invalid certificate requests to the domain name holder using the Incident Object Description Exchange Format. As of 2018, not all certificate authorities support this tag, so there is no guarantee that all certificate issuances will be reported. <code>contactemail</code> Increasingly, contact information is not available in WHOIS due to concerns about potential GDPR violations. This property allows domain holders to publish contact information in DNS. <code>contactphone</code> As above, for phone numbers. <code>value</code> The value associated with the chosen property tag. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>0 issue \"pki.goog\"</code>"},{"location":"collectors/probes/dns/#cname","title":"CNAME","text":"<p>Canonical name record, alias of one name to another.</p> <p>A CNAME lookup returns only one canonical name.</p> <p>Example:</p> FQDN Result <code>docs.infrasonar.com</code> <code>cesbit.github.io.</code>"},{"location":"collectors/probes/dns/#ds","title":"DS","text":"<p>Delegation signer. The record used to identify the DNSSEC signing key of a delegated zone.</p> <p>DS record structure: <code>Key Tag</code> <code>Algorithm</code> <code>Digest</code> <code>Type</code> <code>Digest</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>9907 8 2 33D13AB164664236CF3EF302E8057AF46FC226AAE2B6A2759E4E80BA AF448970</code>"},{"location":"collectors/probes/dns/#mx","title":"MX","text":"<p>Mail exchange record, list of mail exchange servers that accept email for a domain.</p> <p>Example output: <code>1 aspmx.l.google.com.,10 alt3.aspmx.l.google.com.,10 alt4.aspmx.l.google.com.,5 alt1.aspmx.l.google.com.,5 alt2.aspmx.l.google.com.</code></p> <p>MX Record</p> <p>An MX record is returned as follows: <code>preference</code> <code>address</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>1 aspmx.l.google.com., 5 alt1.aspmx.l.google.com., 5 alt2.aspmx.l.google.com., 10 alt3.aspmx.l.google.com., 10 alt4.aspmx.l.google.com.</code>"},{"location":"collectors/probes/dns/#ns","title":"NS","text":"<p>Name server record, Delegates a DNS zone to use the given authoritative name servers.</p> <p>Example: </p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-a1.googledomains.com, ns-cloud-a2.googledomains.com, ns-cloud-a3.googledomains.com, ns-cloud-a4.googledomains.com</code>"},{"location":"collectors/probes/dns/#ptr","title":"PTR","text":"<p>PTR Resource Record, possible for IP addresses in the format:</p> <p><code>in-addr.arpa</code> is the namespace within <code>.arpa</code> for reverse DNS lookups in IPv4.</p> <p>IPv6</p> <p>IPv6 addresses are constructed differently from IPv4 addresses, and IPv6 PTR records exist in a different namespace within .arpa. IPv6 PTR records are stored under the IPv6 address, reversed and converted into four-bit sections (as opposed to 8-bit sections, as in IPv4), plus \".ip6.arpa\".</p> <p>So <code>2001:4860:4860::8844</code> becomes: <code>4.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code></p> <p>Example:</p> FQDN Result <code>8.8.8.8.in-addr.arpa.</code> <code>dns.google.</code> <code>.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code> <code>dns.google.</code>"},{"location":"collectors/probes/dns/#srv","title":"SRV","text":"<p>Service locator, generalized service location record, used for newer protocols instead of creating protocol-specific records such as MX.</p> <p>SRV record structure: <code>Priority</code> <code>Weight</code> <code>Port</code> <code>Target</code></p> <code>priority</code> the priority of the target host, lower value means more preferred. <code>weight</code> A relative weight for records with the same priority, higher value means higher chance of getting picked. <code>port</code> the TCP or UDP port on which the service is to be found. <code>target</code> the canonical hostname of the machine providing the service, ending in a dot. <p>Example:</p> FQDN Result <code>_srv._test.test-technology.nl.</code> <code>0 5 5060 srvrecordtest.test-technology.nl.</code>"},{"location":"collectors/probes/dns/#soa","title":"SOA","text":"<p>Start of [a zone of] authority record. Specifies authoritative information about a DNS zone, including the primary name server, the email of the domain administrator, the domain serial number, and several timers relating to refreshing the zone.</p> <p>SOA record structure: <code>Primary NS</code> <code>Responsible name</code> <code>Serial</code> <code>Refresh</code> <code>Retry</code> <code>Expire</code> <code>Miniumum</code></p> <code>Primary NS</code> Primary master name server for this zone. <code>Responsible name</code> Email address of the administrator responsible for this zone. (As usual, the email address is encoded as a name. The part of the email address before the @ becomes the first label of the name; the domain name after the @ becomes the rest of the name. In zone-file format, dots in labels are escaped with backslashes; thus the email address john.doe@example.com would be represented in a zone file as john.doe.example.com.) <code>Serial</code> Serial number for this zone. If a secondary name server slaved to this one observes an increase in this number, the slave will assume that the zone has been updated and initiate a zone transfer. <code>Refresh</code> Number of seconds after which secondary name servers should query the master for the SOA record, to detect zone changes. Recommendation for small and stable zones: 86400 seconds (24 hours). <code>Retry</code> Number of seconds after which secondary name servers should retry to request the serial number from the master if the master does not respond. It must be less than Refresh. Recommendation for small and stable zones: 7200 seconds (2 hours). <code>Expire</code> Number of seconds after which secondary name servers should stop answering request for this zone if the master does not respond. This value must be bigger than the sum of Refresh and Retry. Recommendation for small and stable zones: 3600000 seconds (1000 hours). <code>Miniumum</code> Used in calculating the time to live for purposes of negative caching. Authoritative name servers take the smaller of the SOA TTL and the SOA MINIMUM to send as the SOA TTL in negative responses. Resolvers use the resulting SOA TTL to understand for how long they are allowed to cache a negative response. Recommendation for small and stable zones: 172800 seconds (2 days). Originally this field had the meaning of a minimum TTL value for resource records in this zone; it was changed to its current meaning by RFC 2308. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-e1.googledomains.com. cloud-dns-hostmaster.google.com. 15 21600 3600 259200 300</code>"},{"location":"collectors/probes/dns/#best-practices","title":"Best practices","text":""},{"location":"collectors/probes/dns/#internal-vs-external-response","title":"Internal vs External response","text":"<p>Setup an asset to monitor your internal and external DNS response.</p> <p>This can easily be done by monitoring for example <code>google.com</code> on your internal DNS servers and Google DNS servers, for IPv4: <code>8.8.8.8</code> and/or <code>8.8.4.4</code>  and for IPv6: <code>2001:4860:4860::8888</code> and/or <code>2001:4860:4860::8844</code>.</p> <p>The average DNS lookup time should be between 20 and 120 milliseconds. Anything between that and under is generally considered very good.</p>"},{"location":"collectors/probes/dns/#microsoft-active-directory","title":"Microsoft Active Directory","text":"<p>source</p> <p>Setup a DNS probe to monitor for Microsoft Active Directory specific DNS entries for each DNS server in your forest / domain.</p> <p>Legend</p> <ul> <li>Domain_Name is the name of your domain.</li> <li>SiteName, name of your Active Directory Site</li> <li>DnsForestName, name of your DNS Forest.</li> </ul> <p>The following SRV records are registered by Net Logon:</p> <ul> <li><code>_ldap._tcp.&lt;Domain_Name&gt;.</code>Allows a client to locate servers running the LDAP service in the domain of Domain_Name.</li> <li><code>_ldap._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code>Allows a client to locate servers running the LDAP service in a domain in a site SiteName Domain_Name. SiteName relative file name, which is stored in the Configuration container in Active Directory.</li> <li><code>_ldap._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain controller in the domain Domain_Name. All DC register this SRV record.</li> <li><code>_ldap._tcp. &lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain controller in the domain in site SiteName Domain_Name.All DC register this SRV record.</li> <li><code>_ldap._tcp.pdc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain PDC Domain_Name.Only PDC server registers this SRV record.</li> <li><code>_ldap._tcp.gc._msdcs.&lt;DnsForestName&gt;.</code>Allows a client to find a DC in the forest DnsForestName.Only GC servers register this SRV record.</li> <li><code>_ldap._tcp. &lt;SiteName&gt;._sites.gc._msdcs.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in the forest.Only GC server DnsForestName owned by this forest register this SRV record</li> <li><code>_gc._tcp.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in the domain. Only GC servers owned by this forest DnsForestName register this SRV record.</li> <li><code>_gc._tcp.&lt;SiteName&gt;._sites.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in this forest site SiteName DnsForestName.Only GC servers owned by this forest DnsForestName register this SRV record.</li> <li><code>_ldap._tcp.DomainGuid.domains._msdcs.&lt;DnsForestName&gt;.</code>Allows customers to find the DC GUID.A GUID is a 128-bit unique index. Admits when Domain_Name DnsForestName and changed.</li> <li><code>_kerberos._tcp.&lt;Domain_Name&gt;.</code>Allows clients to find a Kerberos KDC in that domain: Domain_Name.All DC register this SRV record.</li> <li><code>_kerberos._udp.&lt;Domain_Name&gt;.</code>Same as _kerberos <code>._tcp.&lt;Domain_Name&gt;</code> only over UDP</li> <li><code>_kerberos._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code>Allows clients to find a Kerberos KDC in that domain: Domain_Name site SiteName.All DC register this SRV record.</li> <li><code>_kerberos._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name.All DC with the KDC log this SRV record.</li> <li><code>_kerberos.tcp.&lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name site SiteName.All DC with the KDC log this SRV record.</li> <li><code>_kpasswd._tcp.&lt;Domain_Name&gt;.</code>Kerberos Password Change allows you to search for current domain.All kerberos KDC DC (c) role of the register this SRV record</li> <li><code>_kpasswd._udp.&lt;Domain_Name&gt;.</code>Same as <code>_kpassword._tcp.&lt;Domain_Name&gt;</code> only over UDP</li> </ul>"},{"location":"collectors/probes/dns/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/dns/#resolution-lifetime-expired-after-5xxx-seconds","title":"Resolution lifetime expired after 5.xxx seconds","text":"<p>The DNS probe returns following the notification:</p> <pre><code>The resolution lifetime expired after 5.402 seconds:\n Server xx.xx.xx.xx UDP port 53 answered The DNS operation timed out after 2.000 seconds;\n Server xx.xx.xx.xx UDP port 53 answered The DNS operation timed out after 2.000 seconds;\n Server xx.xx.xx.xx UDP port 53 answered The DNS operation timed out after 0.696 seconds\n</code></pre> <p>The potential rootcause is a DNS server responding with <code>connection refused</code></p> <p>This can be validated using the <code>dig</code> command on Linux:</p> <pre><code>dig @xx.xx.xx.xx google.com\n;; communications error to xx.xx.xx.xx#53: connection refused\n</code></pre>"},{"location":"collectors/probes/dns/#additional-information","title":"Additional information","text":"<p> DNS probe source code</p>"},{"location":"collectors/probes/eaton/","title":"EATON","text":""},{"location":"collectors/probes/eaton/#eaton","title":"Eaton","text":""},{"location":"collectors/probes/eaton/#introduction","title":"Introduction","text":"<p>The Eaton probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/eaton/#features","title":"Features","text":"<p>The Eaton probe consist of a number of UPS specific checks:</p> <p> Battery status  Alarms  Input, Bypass &amp; Output measurement  Environmental monitoring, temperature and humidity</p>"},{"location":"collectors/probes/eaton/#deployment","title":"Deployment","text":"<p>The Eaton probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/eaton/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the Eaton probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>eaton:\nuse: snmp\n</code></pre> <p>The <code>eaton</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/eaton/#conditions","title":"Conditions","text":"<p>The label <code>Eaton UPS</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/eaton/#eaton-ups-input-source","title":"Eaton UPS input source","text":"<p>A noteworthy condition is the Eaton UPS input source condition as this condition is triggered when the UPS lost it's main power.</p> <p>An interesting use case for this condition is to setup a DutyCalls rule to notify on-call personal when main power is lost.</p> <p>Good to known</p> <p>As the UPS occasionally switches to battery power for a couple of seconds as part of its maintenance routine this condition potential get's triggered while all is well. To avoid sending incorrect notification we wait one cycle before sending out an alert.</p> <p>As the check interval for this check is 1 minute sending out a notification for this event can potentially take a maximum off 2 minutes.</p>"},{"location":"collectors/probes/eaton/#operational","title":"Operational","text":""},{"location":"collectors/probes/eaton/#snmp-version","title":"SNMP version","text":"<p>We noted we had te use SNMP version 1 in most scenario's we deployed this probe.</p>"},{"location":"collectors/probes/eaton/#additional-information","title":"Additional information","text":"<ul> <li>Vendor SNMP MIB information</li> <li>InfraSonar Eaton probe source code </li> </ul>"},{"location":"collectors/probes/eseries/","title":"E-Series","text":""},{"location":"collectors/probes/eseries/#how-to-configure-snmp-monitoring-on-e-series","title":"How to configure SNMP monitoring on E-Series","text":"<p>\u200b</p>"},{"location":"collectors/probes/eseries/#applies-to","title":"Applies to","text":"<ul> <li>Flash Array</li> <li>E-Series Controller Firmware 7.xx</li> <li>E-Series Controller Firmware 6.xx</li> </ul>"},{"location":"collectors/probes/eseries/#description","title":"Description","text":"<p>Simple Network Management Protocol (SNMP) is used for remote status monitoring of servers, network appliances, and software processes. SNMP is designed for an IT administrator to monitor the active technology assets, which are required to perform the business' day to day activities. SANtricity provides a portal for IT administrators to remote monitor their storage array. This article describes the procedure to configure SNMP.</p>"},{"location":"collectors/probes/eseries/#procedure","title":"Procedure","text":"<p>Perform the following steps to configure SNMP in SANtricity:  </p> <ol> <li>Open the Enterprise Management window of SANtricity and select the array that you would like to configure for SNMP.</li> <li>Right-click on the Array and select Configure Alerts.    A new window opens. Click the SNMP tab at the top:    An IT Administrator can configure SNMP for this storage array.    Since SANtricity is software based and it relays the active status' of the storage array, there is only one option for configuring SNMP and it is by sending traps.    SNMP requires two data points for sending traps, a Community Name and the Trap destination. The Community Name, also known as the community string should match the SNMP configured Community Name (string). The Trap Destination will be the IP address or host name of the SNMP server or relay.</li> <li>To obtain the MIB (Management Information Base) file for use in a third party SNMP server, perform the following steps:<ol> <li>Go to the NetApp Support Software download page.</li> <li>Locate E-Series/EF-Series SANtricity Storage Manager and click Go!</li> <li>Click View &amp; Download on the latest version of SANtricity software.</li> <li>Click Continue at the bottom of the page.</li> <li>Read the EULA and click Accept.</li> <li>Scroll down to the MIB File section.</li> <li>Click the download link for the .MIB file labeled MIB file for SNMP traps.</li> </ol> </li> </ol> <p>Note: For further info please see the Alert Notification Using Email to SNMP Traps section located in the Initial Configuration and Software Installation for SANtricity\u00ae Storage Manager document.</p> <p>If you have any issues or concerns with configuring SNMP within SANtricity, contact NetApp Support. </p>"},{"location":"collectors/probes/hpilo/","title":"HP ILO","text":""},{"location":"collectors/probes/hpilo/#hp-ilo","title":"HP ILO","text":""},{"location":"collectors/probes/hpilo/#introduction","title":"Introduction","text":"<p>The HP ILO probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/hpilo/#features","title":"Features","text":""},{"location":"collectors/probes/hpilo/#deployment","title":"Deployment","text":"<p>The HP ILO probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/hpilo/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the HP ILO probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>hpilo:\nuse: snmp\n</code></pre> <p>The <code>hpilo</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/hpilo/#operational","title":"Operational","text":""},{"location":"collectors/probes/hpilo/#snmp-version","title":"SNMP version","text":""},{"location":"collectors/probes/hpilo/#additional-information","title":"Additional information","text":"<p> HP ILO probe source code</p>"},{"location":"collectors/probes/hpprocurve/","title":"HP ProCurve","text":""},{"location":"collectors/probes/hpprocurve/#hp-procurve","title":"HP ProCurve","text":""},{"location":"collectors/probes/hpprocurve/#introduction","title":"Introduction","text":"<p>The HP ProCurvce probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/hpprocurve/#features","title":"Features","text":""},{"location":"collectors/probes/hpprocurve/#deployment","title":"Deployment","text":"<p>The HP ProCurve probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/hpprocurve/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the HP ILO probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>hpprocurve:\nuse: snmp\n</code></pre> <p>The <code>hpprocurve</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/hpprocurve/#operational","title":"Operational","text":""},{"location":"collectors/probes/hpprocurve/#snmp-version","title":"SNMP version","text":""},{"location":"collectors/probes/hpprocurve/#additional-information","title":"Additional information","text":"<p> HP ProCurve probe source code</p>"},{"location":"collectors/probes/http/","title":"HTTP","text":""},{"location":"collectors/probes/http/#http-probe","title":"HTTP Probe","text":""},{"location":"collectors/probes/http/#introduction","title":"Introduction","text":"<p>The HTTP probe allows to monitor a specific URI over the http or https protocol</p>"},{"location":"collectors/probes/http/#features","title":"Features","text":"<ul> <li>Roundtrip time, the roundtriptime for the http(s) request is measured and returned.</li> <li>HTTP status code monitoring</li> </ul>"},{"location":"collectors/probes/http/#deployment","title":"Deployment","text":"<p>The HTTP probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/http/#probe-configuration","title":"Probe configuration","text":"Property Description URI URI of the website you want to monitor Timeout Timeout in seconds should be a value between 0 and 240. The default timeout is 10.0 Verify SSL If turned off, the check ignores invalid certificates; when on, the URI must have a valid certificate. Nots, this is only applicable for HTTPS URI. The default is off. With payload Retrieves the payload, bare in mind the payload is limited to 500 Kb Allow redirects When turned on, redirects are followed. <p>Tip</p> <p>When monitoring cloud services, enable Allow redirects as these services heavily rely on http redirects.</p>"},{"location":"collectors/probes/http/#check-specifics","title":"Check specifics","text":""},{"location":"collectors/probes/http/#http-status-codes","title":"HTTP Status codes","text":"<p>See RFC9110 or the List of HTTP status codes on Wikipedia for more detailed information.</p> code class code Meaning 100 Informational Continue 101 Informational Switching protocols 102 Informational Processing 103 Informational Early Hints 200 Successful OK 201 Successful Created 202 Successful Accepted 203 Successful Non-Authoritative Information 204 Successful No Content 205 Successful Reset Content 206 Successful Partial Content 207 Successful Multi-Status 208 Successful Already Reported 226 Successful IM Used 300 Redirection Multiple Choices 301 Redirection Moved Permanently 302 Redirection Found (Previously \"Moved Temporarily\") 303 Redirection See Other 304 Redirection Not Modified 305 Redirection Use Proxy 306 Redirection Switch Proxy 307 Redirection Temporary Redirect 308 Redirection Permanent Redirect 400 Client Error Bad Request 401 Client Error Unauthorized 402 Client Error Payment Required 403 Client Error Forbidden 404 Client Error Not Found 405 Client Error Method Not Allowed 406 Client Error Not Acceptable 407 Client Error Proxy Authentication Required 408 Client Error Request Timeout 409 Client Error Conflict 410 Client Error Gone 411 Client Error Length Required 412 Client Error Precondition Failed 413 Client Error Payload Too Large 414 Client Error URI Too Long 415 Client Error Unsupported Media Type 416 Client Error Range Not Satisfiable 417 Client Error Expectation Failed 418 Client Error I'm a Teapot 421 Client Error Misdirected Request 422 Client Error Unprocessable Entity 423 Client Error Locked 424 Client Error Failed Dependency 425 Client Error Too Early 426 Client Error Upgrade Required 428 Client Error Precondition Required 429 Client Error Too Many Requests 431 Client Error Request Header Fields Too Large 451 Client Error Unavailable For Legal Reasons 500 Server Error Internal Server Error 501 Server Error Not Implemented 502 Server Error Bad Gateway 503 Server Error Service Unavailable 504 Server Error Gateway Timeout 505 Server Error HTTP Version Not Supported 506 Server Error Variant Also Negotiates 507 Server Error Insufficient Storage 508 Server Error Loop Detected 510 Server Error Not Extended 511 Server Error Network Authentication Required"},{"location":"collectors/probes/http/#additional-information","title":"Additional information","text":"<p> HTTP probe source code</p>"},{"location":"collectors/probes/microsoft_azure/","title":"Microsoft Azure","text":""},{"location":"collectors/probes/microsoft_azure/#microsoft-azure","title":"Microsoft Azure","text":""},{"location":"collectors/probes/microsoft_azure/#introduction","title":"Introduction","text":"<p>Beta</p> <p>The Azure probe is still an alpha \u03b1 release. Contact InfraSonar support if you want to get involved in the alpha testing phase.</p>"},{"location":"collectors/probes/microsoft_azure/#features","title":"Features","text":"<p>Add the moment the following Azure resources are supported:</p> <ul> <li>Virtual machine</li> <li>Private DNS zone</li> <li>DNS zone</li> <li>Regular Network Interface</li> <li>Public IP address</li> </ul>"},{"location":"collectors/probes/microsoft_azure/#configuration","title":"Configuration","text":""},{"location":"collectors/probes/microsoft_azure/#prepare-your-azure-environment","title":"Prepare your Azure environment","text":"<p>Two steps are required to prepare your Azure environment for the InfraSonar Azure probe.</p> <ol> <li>Register the InfraSonar probe as an Azure app</li> <li>Authorize the registered app to the resources you want to monitor</li> </ol> <p>Open the Azure portal (https://portal.azure.com/) to ensure your account has sufficient privileges.</p>"},{"location":"collectors/probes/microsoft_azure/#create-an-app-registration","title":"Create an app registration","text":"<ol> <li>From the main menu, open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub-menu</li> <li>Select new registration</li> <li>Enter the user-facing display name e.g., InfraSonar Azure Probe</li> <li>Who can use this application or access this API: Select Accounts in this organizational directory only</li> <li>Click register application</li> </ol>"},{"location":"collectors/probes/microsoft_azure/#app-authorization","title":"app authorization","text":"<ol> <li>Open the resource group containing the Azure resource you want to monitor</li> <li>Open Access control (IAM)</li> <li>Select the tab Role assignments</li> <li>Click Add and then Add role assignment</li> <li>Search the Reader role from the Role tab</li> <li>Open the Members tab</li> <li>Ensure Assign access to User, group, or service principal is selected</li> <li>Click Select members</li> <li>Search the name used by the app registration e.g., InfraSonar Azure Probe</li> <li>Select the app and click the select button</li> <li>Give an optional description</li> <li>Verify the role assignment and press Review + assign </li> </ol> <p>The registered app can now query the Azure portal's resources via the Azure API</p> <p>Rinse and repeat</p> <p>Repeat the above app authorization steps for each resource group containing the resource you want to monitor.</p>"},{"location":"collectors/probes/microsoft_azure/#credentials","title":"Credentials","text":"<p>The Data needed for the credentials are:</p> <ul> <li>Directory (tenant) ID</li> <li>Application (client) ID</li> <li>Client Secret </li> </ul> <p>These can be found in the registered app:</p> <ol> <li>From the main menu open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub menu</li> <li>Open the previous created application e.g. InfraSonar Azure Probe</li> <li>Note down the <code>Application (client) ID</code> and <code>Directory (tenant) ID</code> </li> <li>Open Certificates &amp; secrets from the Manage submenu</li> <li>Click New client secret</li> <li>Enter a description e.g. InfraSonar azure probe</li> <li>Provide an expiration date</li> <li>Note down the <code>Value</code>, note this can not be retrieved again once you close this window.</li> </ol> <p>Create a <code>defaultAssetConfig.ini</code> for in <code>/etc/infrasonar/azureprobe</code> as documented here</p>"},{"location":"collectors/probes/microsoft_azure/#setup-azure-resources-as-infrasonar-assets","title":"Setup Azure resources as InfraSonar assets","text":"<p>Ensure the container is running</p> <p>Ensure the Azure probe docker container has been setup</p> <p>The next step is to add the Azure resources you want to monitor to InfraSonar.</p> <ol> <li>Navigate to the InfraSonar environment you want to add Azure resources to</li> <li>Click Add host in the host overview screen</li> <li>Enter a name in the hostname field</li> <li>Add the AzureProbe</li> <li>Open the Azureprobe tab</li> <li>Fill out the required details:</li> <li>Resource Name</li> <li>Resource Group</li> <li>Subscription Id</li> <li>Click save</li> </ol> <p>Patience is a virtue</p> <p>The first time it can take up to 5 minutes for the first data to come in.</p>"},{"location":"collectors/probes/mssql/","title":"Microsoft SQL Server","text":""},{"location":"collectors/probes/mssql/#microsoft-sql-server","title":"Microsoft SQL Server","text":""},{"location":"collectors/probes/mssql/#introduction","title":"Introduction","text":"<p>The Microsoft SQL probe uses SQL statements to monitor and analyze the health of a Microsoft SQL Server database.</p> <p>Goal</p> <p>The MSSQL probe offers a unified view that provides common ground for infrastructure engineers, DBA, and application managers to analyze and troubleshoot Microsoft SQL server performance issues.</p>"},{"location":"collectors/probes/mssql/#features","title":"Features","text":"<p>The MSSQL probe allows for in-depth analyses of a SQL server.</p> <p>Some of the included measurements:</p> <ul> <li>Memory Page life Expectancy.</li> <li>Parallelism configuration.</li> <li>CPU, memory and disk IO per database.</li> </ul> <p> </p> Microsoft SQL server CPU usage <ul> <li>SQL Table information.</li> <li>Wait statistics.</li> <li>Top 25 query information (all queries would put too much strain on the SQL server).</li> <li>Top worker time; which queries consume a lot of time and thus cpu usage.</li> <li>Top logical reads; which queries cost the most IO.</li> <li>Top execution count; shows the most active queries.</li> <li>Index information.</li> <li>Frequently used indexes (top used).</li> <li>Missing indexes, where would an index make sense.</li> <li>Unused indexes, only written but never queried.</li> </ul> <p> </p> Microsoft SQL server missing indexes <ul> <li>Fragmentation.</li> </ul> <p> </p> Microsoft SQL server fragmentation <ul> <li>IO, per file and per volume.</li> <li>Backup status.</li> <li>Agent jobs.</li> <li>SQL Config.</li> <li>Session and application information.</li> <li>Plan cache.</li> <li>Blocked count.</li> </ul> <p>Tip</p> <p>Our implementation consultants can assist in creating a detailed analysis of a Microsoft SQL server.</p>"},{"location":"collectors/probes/mssql/#deployment","title":"Deployment","text":"<p>The Microsoft SQL probe is deployed as a  docker container using docker compose.</p> <p>See our TODO</p>"},{"location":"collectors/probes/mssql/#probe-configuration","title":"Probe configuration","text":"<p>The MSSQL probe requires the host's IP address running the monitored SQL server and requires access to curtain SQL tables as defined in our grant scripts.</p>"},{"location":"collectors/probes/mssql/#credentials","title":"Credentials","text":"<p>The Microsoft SQL probe supports SQL authentication and domain authentication.</p> <p>For both scenarios it is advisable to setup a separate account for this probe and grant this account access via the supplied grant scripts.</p> <p>The corresponding <code>infrasonar.yaml</code> 1 section when using for example infrasonar@windows.domainl as user id looks as follows:</p> <pre><code>mssql:\nconfig:\npassword: \"some_secure_passw0rd\"\nusername: infrasonar@windows.domain\n</code></pre>"},{"location":"collectors/probes/mssql/#authorization","title":"Authorization","text":"<p>The previously created user needs to be granted access onto various tables and resources.</p> <p>Let your DBA analyses our scripts and contact us if there are any questions.</p> <p>We created grant scripts for SQL authentication and domain authentication; pick the correct script for your use case.</p>"},{"location":"collectors/probes/mssql/#grants-for-domain-user","title":"Grants for domain user","text":"<p>Replace <code>domainnamehere\\usernamehere</code> in this script with the correct domain/username and execute it in SQL Server Management Studio to grant the user sufficient permissions.</p> <p>It is good practice to create a dedicated account for SQL monitoring.</p>"},{"location":"collectors/probes/mssql/#grants-for-sql-user","title":"Grants for SQL User","text":"<p>This script uses the default username <code>svc_infrasonar</code> and the password <code>someSuperSecurePasswordHereOfCourse</code>, which you should change before running the script.</p>"},{"location":"collectors/probes/mssql/#best-practices","title":"Best practices","text":""},{"location":"collectors/probes/mssql/#sql-server-maximum-server-memory-is-set-to-default","title":"SQL Server maximum server memory is set to default","text":"<p>Setting max server memory value too high can cause a single instance of SQL Server to compete for memory with other SQL Server instances hosted on the same host. However, setting this value too low could cause significant memory pressure and performance problems. Setting max server memory to the minimum value can even prevent SQL Server from starting. If you cannot start SQL Server after changing this option, start it using the -f startup option and reset max server memory to its previous value. For more information, see Database Engine Service Startup Options.</p> <p>A rule of thumb is to leave 4GB or 10% of total memory free, whichever is larger on your instance to start with, and adjust this as needed.</p> <p>See also:</p> <ul> <li>Microsoft.com - Server memory configuration options</li> <li>Brent Ozar - Memory Dangerously Low or Max Memory Too High</li> </ul>"},{"location":"collectors/probes/mssql/#sql-server-cost-threshold-for-parallelism","title":"SQL Server Cost threshold for parallelism","text":"<p>SQL Server Cost threshold for parallelism is a value you might want to review.</p> <p>While the default value of 5 is adequate for most systems, a different value may be appropriate. Perform application testing with higher and lower values if needed to optimize application performance.</p> <p>A Microsoft SQL DBA can change this by changing the threshold for parallelism to for example <code>50</code>, using this SQL statement:</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'cost threshold for parallelism', 50;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"collectors/probes/mssql/#max-degree-of-parallelism","title":"Max Degree of parallelism","text":"<p>A typical SQL server misconfiguration is the Max Degree of parallelism.</p> <p>Rules of thumb:</p> <ul> <li>MDOP (Max Degree of parallelism) equal the number of CPU cores.</li> <li>MDOP should not be set greater then 8, so a 16 core system should have MDOP configured as 8.</li> </ul> <p>Set <code>ChangeMe</code> to the desired MDOP and execute it using SQL Server Management Studio.</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'Max Degree of parallelism', ChangeMe;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"collectors/probes/mssql/#operational","title":"Operational","text":""},{"location":"collectors/probes/mssql/#new-databases","title":"New databases","text":"<p>The monitoring account does not automatically gain access to databases created after the initial setup.  This scenario results in the following InfraSonar alert:</p> <p>The server principal \"account\" is not able to access the database \"databasename\" under the current security context.</p> <p>Either grant script contains a marked section that a SQL Admin must run to grant access to these newly created databases.</p>"},{"location":"collectors/probes/mssql/#additional-information","title":"Additional information","text":"<p> Microsoft SQL probe source code</p> <ol> <li> <p>Passwords are encrypted on the appliance the moment the file is saved, see our credentials documentation.\u00a0\u21a9</p> </li> </ol>"},{"location":"collectors/probes/netapp/","title":"NetApp","text":""},{"location":"collectors/probes/netapp/#netapp","title":"NetApp","text":""},{"location":"collectors/probes/netapp/#introduction","title":"Introduction","text":"<p>InfraSonar monitors NetApp systems running Data ONTAP using the ONTAP rest API.</p> <p>SNMP-probe for 7mode</p> <p>It is possible to monitor 7mode NetApp systems using SNMP. The monitoring is not as elaborate as the API Probe.</p>"},{"location":"collectors/probes/netapp/#features","title":"Features","text":"<p>Some of the features of the InfraSonar NetApp probe:</p> <ul> <li>NetApp Health Status</li> <li>Aggregate and volume and utilization</li> <li>Cluster information</li> <li>Disk status</li> <li>Interface status (Ethernet and FCP)</li> <li>CIFS status</li> <li>Autosupport configuration</li> <li>IOPS</li> <li>Snapmirror</li> </ul>"},{"location":"collectors/probes/netapp/#version-specific","title":"Version specific","text":"<p>Some checks are only available from a specific ONTAP version onward: </p> <ul> <li>cluster node controller info requires ONTAP v9.9 or higher</li> <li>cluster node statistics requires ONTAP v9.8 or higher</li> <li>interface and interface ports statistics requires ONTAP v9.8 or higher</li> <li>SnapMirror transfer data requires ONTAP v9.11 or higher</li> </ul>"},{"location":"collectors/probes/netapp/#deployment","title":"Deployment","text":"<p>The NetApp probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/netapp/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/netapp/#credentials","title":"Credentials","text":"<p>Don't use admin</p> <p>We strongly advise setting up a separate user for monitoring to have a clear separation of responsibilities but also to avoid lock-out issues.</p> <p>First step is to figure out which vserver to use:</p> <pre><code>vserver show\n</code></pre> <p>Create a role for InfraSonar with limited access, ensure to use the correct vserver. <code>vserver show</code> is your friend </p> Create NetApp role<pre><code>security login rest-role create -role infrasonar -vserver netapp01 -api /api -access readonly\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security -access none\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/audit/destinations -access readonly\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/authentication/password -access all\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/certificates -access readonly\n</code></pre> <p>You can verify this role using:</p> Verify NetApp role<pre><code>security login rest-role show infrasonar\n</code></pre> <p>Next step is to create a user (<code>infrasonar</code>) and assign the previously created role (<code>infrasonar</code>) to this user:</p> Create NetApp user<pre><code>security login create infrasonar -role infrasonar -comment \"system-monitoring user, readonly\" -application ontapi -authentication-method password \nsecurity login create infrasonar -role infrasonar -application http -authentication-method password \n</code></pre> <p>Verify the user creation:</p> Verify NetApp user<pre><code>security login show infrasonar\n</code></pre> <p>See the credentials section on how to configure credentials.</p> <p>The probe retrieves monitoring data using the ONTAP REST API on TCP port 443.</p>"},{"location":"collectors/probes/netapp/#operational","title":"Operational","text":""},{"location":"collectors/probes/netapp/#danglingsnapshots","title":"danglingSnapshots","text":"<p>When the time difference between 2 snapshots is greater than 21 (also known as monthly backup), an InfraSonar alert is triggered. There is also a label (<code>dangling snapshots (vmfs) 7d</code>) which generates an alert if the snapshot contains the word <code>vmfs</code> and the time difference is greater then 7 days.</p> <p>Possible causes:</p> <ul> <li>Manual snapshots that have not been cleaned up.</li> <li>A reconfigured snapmanager.</li> <li>A server that is powered off while the mirror is still running.</li> </ul>"},{"location":"collectors/probes/netapp/#additional-information","title":"Additional information","text":"<p> netapp probe source code</p>"},{"location":"collectors/probes/paloalto/","title":"Palo Alto","text":""},{"location":"collectors/probes/paloalto/#palo-alto","title":"Palo Alto","text":""},{"location":"collectors/probes/paloalto/#introduction","title":"Introduction","text":"<p>InfraSonar monitors Palo Alto firewalls using the rest API.</p> <p>Also available as service</p> <p>We also offer a service to monitor Palo Alto firewalls, this is useful if you want to monitor firewalls without deploying your own InfraSonar appliance.</p>"},{"location":"collectors/probes/paloalto/#features","title":"Features","text":""},{"location":"collectors/probes/paloalto/#deployment","title":"Deployment","text":""},{"location":"collectors/probes/paloalto/#credentials","title":"Credentials","text":"<p>The Palo Alto rest API uses a key which can be generated for a user. </p> <p>Don't use an admin account</p> <p>We strongly recommend creating a read only account specific for monitoring.</p>"},{"location":"collectors/probes/paloalto/#get-your-api-key","title":"Get your API key","text":"<p>source</p> <p>To generate an API key, make a GET or POST request to the firewall\u2019s hostname or IP addresses using the administrative credentials and type=keygen:</p> <pre><code>curl -k -X GET 'https://&lt;firewall&gt;/api/?type=keygen&amp;user=&lt;username&gt;&amp;password=&lt;password&gt;'\n</code></pre> <p>Ensure to change</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;username&gt;</code> with the username of your readl-only monitoring user</li> <li><code>&lt;password&gt;</code> with the password of your readl-only monitoring user</li> </ul> <p>A successful API call returns status=\"success\" along with the API key within the key element:</p> <pre><code>&lt;response status=\"success\"&gt;\n&lt;result&gt;\n&lt;key&gt;Your_secret_key_is_here&lt;/key&gt;\n&lt;/result&gt;\n&lt;/response&gt;\n</code></pre> <p>You can test your API key using the following command:</p> <pre><code>curl -k 'https://&lt;firewall&gt;//api/?type=op&amp;cmd=&lt;show&gt;&lt;system&gt;&lt;info&gt;&lt;/info&gt;&lt;/system&gt;&lt;/show&gt;&amp;key=&lt;apikey&gt;'\n</code></pre> <p>Ensure to change:</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;apikey</code> with the previously generated API key</li> </ul>"},{"location":"collectors/probes/paloalto/#revoke-api-keys","title":"Revoke API keys","text":"<p>You can revoke all currently valid API keys, in the event one or more keys are compromised. To change an API key associated with an administrator account change the password associated with the administrator account. API keys that were generated before you expired all keys, or a key that was created using the previous credentials will no longer be valid.</p>"},{"location":"collectors/probes/paloalto/#configure-api-key-lifetime","title":"Configure API Key Lifetime","text":"<p>Source</p> <p>An optional step is to configure the API Key Lifetime.</p> <p>Be aware though that monitoring fails when the API key is expired!</p>"},{"location":"collectors/probes/paloalto/#_1","title":"Palo Alto","text":""},{"location":"collectors/probes/ping/","title":"Ping","text":""},{"location":"collectors/probes/ping/#ping","title":"Ping","text":""},{"location":"collectors/probes/ping/#introduction","title":"Introduction","text":"<p>The ping-probe utilizes the icmp protocol to monitor the network roundtrip between the monitoring appliance and the monitored host.</p>"},{"location":"collectors/probes/ping/#features","title":"Features","text":"<ul> <li>Ping roundtrip monitoring, min and max timing</li> <li>Number of successfully and/or dropped packages</li> </ul>"},{"location":"collectors/probes/ping/#deployment","title":"Deployment","text":"<p>The ping probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/ping/#probe-configuration","title":"Probe configuration","text":"Property Description Address The address that the probe should ping. Interval Interval should be a value between 1 and 9, The default interval is 1. Count Count should be a value between 1 and 9, the default count is 5 Timeout Timeout in seconds should be a value between 0 and 240, the default timeout is 10 seconds."},{"location":"collectors/probes/ping/#check-specifics","title":"Check specifics","text":"<p>Ping returns the <code>minimum time</code> and <code>maximum time</code> as this provides a better insight than just an average ping response.</p> <p>The number of <code>successful</code> and <code>dropped</code> ping packages are also monitored.</p>"},{"location":"collectors/probes/ping/#additional-information","title":"Additional information","text":"<p> Ping probe source code</p>"},{"location":"collectors/probes/santricity/","title":"SANtricity / NetApp E-Series","text":""},{"location":"collectors/probes/santricity/#santricity-netapp-e-series","title":"SANtricity / NetApp E-Series","text":""},{"location":"collectors/probes/santricity/#introduction","title":"Introduction","text":"<p>InfraSonar monitors SANtricity / NetApp E-Series systems running rest API.</p>"},{"location":"collectors/probes/santricity/#background-information","title":"background information","text":"<p>In SANtricity / NetApp E-Series, volumes, disks, and storage pools are related in a hierarchical manner.</p> <p>At the lowest level, disks are physical storage devices that are installed in a storage system. These disks can be combined into disk pools, which are logical groups of disks that can be used to create volumes.</p> <p>Volumes are logical storage units that are created from disk pools. Volumes can be divided into smaller units called LUNs (Logical Unit Numbers), which are presented to hosts as individual disks.</p> <p>When creating a volume, users can choose from different RAID (Redundant Array of Independent Disks) levels, which determine the level of data protection and performance of the volume. SANtricity supports RAID levels 0, 1, 3, 5, 6, and 10.</p> <p>Users can also configure different settings for their volumes, such as the size of the volume, the block size, and the access control settings.</p> <p>Overall, the relationship between volumes, disks, and storage pools in SANtricity is designed to provide users with a flexible and scalable storage infrastructure. By combining disks into storage pools and creating volumes from those pools, users can optimize storage usage and achieve better storage performance.</p>"},{"location":"collectors/probes/santricity/#features","title":"Features","text":"<p>Some of the features of the InfraSonar NetApp probe:</p> <ul> <li>System Health status</li> <li>Storage pool status</li> <li>Volume status</li> <li>Controller status</li> <li>Disk status status</li> </ul>"},{"location":"collectors/probes/santricity/#deployment","title":"Deployment","text":"<p>The SANtricity / NetApp E-Series probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/santricity/#probe-configuration","title":"Probe configuration","text":"<ul> <li>Address: IP address of FQDN of them anagement interface</li> <li>Port: The probe retrieves monitoring data using the ONTAP REST API on TCP port 8443, note we encountered deployments using TCP port 443.</li> <li>Storage system ID: Storage system id to retrieve stats from. Can also be the WWN of the storage system. When not given we collect stats from \"1\"</li> </ul>"},{"location":"collectors/probes/santricity/#credentials","title":"Credentials","text":"<p>The SANtricity / NetApp E-Series probe used the standard username/password configuration as described in ourcredentials section.</p> <p>Don't use admin</p> <p>We strongly advise using the monitor user as this is a user with read-only access to the system. This user profile includes only the Monitor role.</p>"},{"location":"collectors/probes/santricity/#additional-information","title":"Additional information","text":"<p> SANtricity / NetApp E-Series probe source code</p>"},{"location":"collectors/probes/snmp/","title":"SNMP","text":""},{"location":"collectors/probes/snmp/#snmp","title":"SNMP","text":"<p>\"Simple Network Management Protocol is an Internet Standard protocol for collecting and organizing information about managed devices on IP networks and for modifying that information to change device behavior.\" - wikipedia</p>"},{"location":"collectors/probes/snmp/#features","title":"Features","text":"<p>InfraSonar supports retrieving data from remote assets using the SNMPv1, SNMPv2c, and SNMPv3 protocol.</p> <p>The SNMP probe consists of a base probe and various vendor specific probes:</p> <ul> <li>Eaton</li> <li>HP ILO</li> <li>HP ProCurve</li> <li>Synology</li> <li>UniFi</li> </ul>"},{"location":"collectors/probes/snmp/#deployment","title":"Deployment","text":"<p>The SNMP probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/snmp/#prerequisites","title":"Prerequisites","text":"<p>To monitor an asset using SNMP there ar two things two setup on the monitored asset:</p> Access <p>Most SNMP implementation require you to add the monitoring IP as an authorized host. In our appliance based setup this is usually the IP address used by the monitoring appliance.</p> <p>When you deploy multiple appliances be aware to configure all IP addresses on the SNMP monitored assets.</p> <p>Also note Adding a host requires access to SNMP (udp/161) from the InfraSonar appliance running the SNMP probe.</p> Authentication <p>SNMPv1 and SNMPv2c versions \"plain\" community string for authentication; SNMPv3 is more secure but not supported on all devices.</p> <p>The community string or credentials should be stored on the appliance as described here.</p> <p>default configuration</p> <p>When no configuration file is specified the probe falls back SNMPv2c and used the community string <code>public</code>.</p>"},{"location":"collectors/probes/snmp/#how-to-configure-snmp","title":"How to configure SNMP","text":"<p>The SNMP probe requires SNMP to be configured on devices you wish to monitor. The next chapter describes how to configure SNMP on some standard devices.</p>"},{"location":"collectors/probes/snmp/#ubuntu","title":"Ubuntu","text":"<p>First step is to install the SNMP Daemon:</p> <pre><code>sudo apt-get update\nsudo apt-get install snmpd\n</code></pre> <p>Next is to edit the <code>snmpd.conf</code> file, this requires a few setting in this file to change:</p> /etc/snmp/snmpd.conf<pre><code>sysLocation    Sitting on the Dock of the Bay\nsysContact     Me &lt;me@example.org&gt;\n\nagentAddress udp:161,udp6:[::1]:161\n\nrocommunity  public default\nrocommunity6 public default\n</code></pre> <p>Set <code>sysLocation</code> to the correct location for this device and set <code>sysContact</code> to the system administrator contact.</p> <p><code>agentAddress</code> configures which IPv4 and IPv6 the SNMP daemon should listen on.</p> <p>Setting this to: <code>agentAddress udp:161,udp6:[::1]:161</code> will set the server to listen on all IPv4 and IPv6 addresses.</p> <p>Alternatively you can bind to a specific IP address as such: <pre><code>agentAddress udp:192.168.1.5:161\n</code></pre> This binds the SNMPD daemon to the IP address 192.168.1.5 on port 161.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>rocommunity: rocommunity public\n</code></pre></p> <p>Last step is to restart the SNMPD service: <code>sudo service snmpd restart</code></p> <p>YOu can verify the  SNMPD is started using: <code>sudo service snmpd status</code></p>"},{"location":"collectors/probes/snmp/#freebsd","title":"FreeBSD","text":"<p>Edit (as root) the file <code>/etc/snmpd.config</code>, find the following lines in the file:</p> <pre><code>location := \"Room 200\"\ncontact := \"sysmeister@example.com\"\n\nread := \"public\"\n\nwrite := \"geheim\"\ntrap := \"mytrap\"\n</code></pre> <p>Set <code>location</code> to the correct location for this device and set <code>contact</code> to the system administrator contact.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>read := \"public\"\n</code></pre></p> <p>Enable bsnmpd in <code>/etc/rc.conf</code></p> <p>Add this at the end of the file: <pre><code>bsnmpd_enable=\"YES\"\n</code></pre></p> <p>Start snmpd: <pre><code>service bsnmpd start\n</code></pre></p> <p>We recommend to unstall the bsnmp-ucd package for more complete monitoring. </p> <p>Installing this package involves the following steps:</p> <pre><code>pkg_add -r bsnmp-ucd\n</code></pre> <p>Locate and uncomment the line in <code>/etc/snmpd.config</code> <pre><code>begemotSnmpdModulePath.\"hostres\" = \"/usr/lib/snmp_hostres.so\"\n</code></pre> Add the next line below the just uncommented line: <pre><code>begemotSnmpdModulePath.\"ucd\" = \"/usr/local/lib/snmp_ucd.so\"\n</code></pre></p> <p>When done restart the bsnmp daemon: <pre><code>/etc/rc.d/bsnmpd restart\n</code></pre></p>"},{"location":"collectors/probes/snmp/#debian-based-systems","title":"Debian based systems","text":"<p>The first step is to install <code>snmpd</code> using<code>apt</code>:</p> <pre><code>sudo apt install snmpd\n</code></pre> <p>The next step is configuring <code>snmpd</code>. For this we need to edit <code>/etc/snmp/snmpd.conf</code>. Prior to editing this file we suggest making a backup of the existing configuration. This can be done by using the following command:</p> <pre><code>sudo cp /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.bak\n</code></pre> <p>Example <code>snmpd.conf</code> file:</p> <pre><code>############# InfraSonar SNMP Config ##################\ncom2sec readonly  default         infrasonar\ngroup InfraSonarGroup v2c        readonly\nview all    included  .1\naccess InfraSonarGroup \"\"      any       noauth    exact  all    none   none\nsyslocation planetearth\nsyscontact support@infrasonar.com\n</code></pre> <p>Note</p> <p>The community string in the above example is set to <code>infrasonar</code>. Also note the settings for <code>syslocation</code> and <code>syscontact</code>.</p> <p>Restart the SNMP daemon to make the configuration effective:</p> <pre><code>sudo service snmpd restart\n</code></pre> <p>Verify that the service is running correctly:</p> <pre><code>sudo service snmpd status\n</code></pre> <p>This should result in a similar output like this:</p> <pre><code>\u25cf snmpd.service - Simple Network Management Protocol (SNMP) Daemon.\n   Loaded: loaded (/lib/systemd/system/snmpd.service; enabled; vendor preset: enabled)\nActive: active (running) since Thu 2021-07-29 10:37:24 CEST; 1s ago\n  Process: 14393 ExecStartPre=/bin/mkdir -p /var/run/agentx (code=exited, status=0/SUCCESS)\nMain PID: 14394 (snmpd)\nTasks: 1 (limit: 2358)\nMemory: 5.0M\n   CGroup: /system.slice/snmpd.service\n           \u2514\u250014394 /usr/sbin/snmpd -Lsd -Lf /dev/null -u Debian-snmp -g Debian-snmp -I -smux mteTrigger mteTriggerConf -f -p /run/snmpd.pid\n\nJul 29 10:37:24 donkey-kong systemd[1]: Starting Simple Network Management Protocol (SNMP) Daemon....\nJul 29 10:37:24 donkey-kong systemd[1]: Started Simple Network Management Protocol (SNMP) Daemon..\nJul 29 10:37:24 donkey-kong snmpd[14394]: NET-SNMP version 5.7.3\n</code></pre>"},{"location":"collectors/probes/snmp/#centos","title":"CentOS","text":"<p>You can find a guide on how to install SNMP on CentOS here.</p>"},{"location":"collectors/probes/snmp/#hp-proliant-hosts","title":"HP Proliant hosts","text":"<p>The HP agents can be installed and queried on HP Proliant hosts using SNMP. This section describes the setup.</p> <p>Add the following section to the repository file: <code>/etc/yum.repos.d/hp.repo</code>:</p> <pre><code>[HP-Proliant]\nname=HP Proliant Red Hat Enterprise Linux $releasever - $basearch\n#baseurl=ftp://ftp.redhat.com/pub/redhat/linux/enterprise/$releasever/en/os/$basearch/Debuginfo/\nbaseurl=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/$releasever/$basearch/current/\n#http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/5/x86_64/current/\nenabled=1\ngpgcheck=0\ngpgkey=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/GPG-KEY-ProLiantSupportPack\n</code></pre> <p>Install the HP agents:</p> <pre><code>yum install hp-snmp-agents hp-health\n</code></pre> <p>You will get additional questions about the desired configuration. This will update the <code>snmpd.conf</code> file.</p> <p>Start the agents:</p> <pre><code>/sbin/hpsnmpconfig\n/etc/init.d/hp-snmp-agents start\n/etc/init.d/snmpd restart\n</code></pre>"},{"location":"collectors/probes/snmp/#vwware","title":"VWware","text":""},{"location":"collectors/probes/snmp/#virtual-center-appliance","title":"Virtual center appliance","text":"<p>The VMware virtual center appliance can be configured to be monitored using SNMP.</p> <ol> <li>Log in to the webinterface (https://ip:5480) using a root account.</li> <li>Enable shell access: access --&gt; shell / ssh.</li> <li>Log in using SSH and execute the following commands: <pre><code>snmp.set --port 161\nsnmp.set --communities public\nsnmp.enable\n</code></pre></li> <li>Verify if the snmpd service is started: <pre><code>shell.set --enabled.true\nshell\nservice snmpd status\n</code></pre></li> <li>Add the SNMP-probe in InfraSonar.</li> </ol>"},{"location":"collectors/probes/snmp/#esxi","title":"ESXi","text":"<p>For the monitoring appliance to query the ESXi host, the following modifications must be made to the <code>/etc/snmp/snmpd.conf</code> file. This can be achieved by logging on to the ESXi hosts using SSH.</p> <pre><code>rocommunity  &lt;RO_Community_String&gt;\ntrapcommunity &lt;TRAPS_Community_String&gt;\ntrapsink &lt;IP_ADDRESS_Monitoring_Appliance&gt;\npublic syscontact &lt;sysadmin_contact_email_address&gt;\nsyslocation &lt;system_location&gt;\n</code></pre> <p>Where:</p> Variable Description <code>&lt;RO_Community_String&gt;</code> Read only community string. This string should be added to the host config. <code>&lt;TRAPS_Community_String&gt;</code> Enter a trap community string. InfraSonar does not use this. <code>&lt;IP_ADDRESS_Monitoring_Appliance&gt;</code> IP address of the monitoring appliance. <code>&lt;sysadmin_contact_email_address&gt;</code> optional Email address of the sysadmin. <code>&lt;system_location&gt;</code> optional Note describing the physical location of the device. <p>For the modifications to take effect, the SNMPD must be restarted using the following command:</p> <pre><code>/etc/init.d/snmpd restart\n</code></pre>"},{"location":"collectors/probes/snmp/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/snmp/#unable-to-derive-address-info","title":"Unable to derive address info","text":"<p>InfraSonar derives the address info from the ifdescr oid <code>1.3.6.1.2.1.2.2.1.2</code> </p> <p>We have seen devices return data in a hexadecimal format which cannot be decoded.</p> <p>The solution for now is to disable the <code>ipAddress</code> check on the asset.</p>"},{"location":"collectors/probes/synology/","title":"Synology","text":""},{"location":"collectors/probes/synology/#synology","title":"Synology","text":""},{"location":"collectors/probes/synology/#introduction","title":"Introduction","text":"<p>The Synology probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/synology/#features","title":"Features","text":"<ul> <li>System information</li> <li>Disk status</li> <li>RAID status</li> <li>Services</li> <li>IO</li> </ul> <p>Docker supported Synology</p> <p>Some Synology models support docker! You can utilize our docker agent to monitoring the containers running in the NAS.</p> <p>You can also use the NAS to deploy our probes and utilize the NAS also a monitoring appliance. This works flawlessly as the InfraSonar resource usage is minimal.</p>"},{"location":"collectors/probes/synology/#deployment","title":"Deployment","text":"<p>The Synology probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/synology/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the Synology probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>synology:\nuse: snmp\n</code></pre> <p>The <code>synology</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/synology/#additional-information","title":"Additional information","text":"<p> Synology probe source code</p>"},{"location":"collectors/probes/tcp/","title":"TCP","text":""},{"location":"collectors/probes/tcp/#tcp","title":"TCP","text":""},{"location":"collectors/probes/tcp/#introduction","title":"Introduction","text":"<p>The TCP probe uses TCP to try and make a TCP connection.</p>"},{"location":"collectors/probes/tcp/#features","title":"Features","text":"<ul> <li>Check TCP ports</li> <li>Check certificates</li> </ul>"},{"location":"collectors/probes/tcp/#deployment","title":"Deployment","text":"<p>The TCP probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/tcp/#probe-configuration","title":"Probe configuration","text":"Property* Description Address The address that the probe should check. Certificate Ports List of ports to perform certificates check on. TCP Ports List of ports to perform a port check on.Each port must be a numeric value between 1 and 65535, where ports are separated by a comma."},{"location":"collectors/probes/tcp/#checks","title":"Checks","text":""},{"location":"collectors/probes/tcp/#tcp-ports","title":"TCP ports","text":"<p>Check TCP ports allows for monitoring specific TCP port statuses.</p> <p>As the TCP probe uses NMAP at its core it can identify the same six ports states as nmap.</p> Port state Description <code>open</code> An application is actively accepting TCP connections, UDP datagrams or SCTP associations on this port. <code>closed</code> A closed port is accessible (it receives and responds to Nmap probe packets), but there is no application listening on it. <code>filtered</code> Nmap cannot determine whether the port is open because packet filtering prevents its probes from reaching the port. The filtering could be from a dedicated firewall device, router rules, or host-based firewall software. <code>unfiltered</code> The unfiltered state means that a port is accessible, but Nmap is unable to determine whether it is open or closed. <code>open|filtered</code> Nmap places ports in this state when it is unable to determine whether a port is open or filtered. <code>closed|filtered</code> This state is used when Nmap is unable to determine whether a port is closed or filtered."},{"location":"collectors/probes/tcp/#certificates","title":"Certificates","text":"<p>Gathers certificates and ciphers present on the specified TCP port.</p>"},{"location":"collectors/probes/tcp/#additional-information","title":"Additional information","text":"<p> TCP probe source code</p>"},{"location":"collectors/probes/unifi/","title":"UniFi","text":""},{"location":"collectors/probes/unifi/#unifi","title":"UniFi","text":""},{"location":"collectors/probes/unifi/#introduction","title":"Introduction","text":"<p>The UniFi probe uses snmp to perform its queries.</p>"},{"location":"collectors/probes/unifi/#features","title":"Features","text":""},{"location":"collectors/probes/unifi/#deployment","title":"Deployment","text":"<p>The UniFi probe is deployed as a  docker container using docker compose.</p>"},{"location":"collectors/probes/unifi/#probe-configuration","title":"Probe configuration","text":"<p>The easiest way to configure the UniFi probe is in most scenarios to tell the probe to use the <code>snmp</code> configuration like so:</p> <pre><code>unifi:\nuse: snmp\n</code></pre> <p>The <code>unifi</code> section however can contain a custom configuration similar to the snmp section.</p>"},{"location":"collectors/probes/unifi/#operational","title":"Operational","text":""},{"location":"collectors/probes/unifi/#snmp-version","title":"SNMP version","text":""},{"location":"collectors/probes/unifi/#additional-information","title":"Additional information","text":"<p> UniFi probe source code</p>"},{"location":"collectors/probes/wmi-troubleshooting/","title":"WMI troubleshooting","text":""},{"location":"collectors/probes/wmi-troubleshooting/#manual-query","title":"Manual query","text":"<p>You can test WMI access from a Windows host or the Linux appliance.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#linux-appliance","title":"Linux appliance","text":"<p>WMI command line query for the Linux appliance or any host running Docker.</p> <pre><code>docker run --rm -it \\\n--network host \\\nghcr.io/infrasonar/wmi-probe \\\npywmitool \\\n-a &lt;computername or IP&gt; \\\n-u userid&gt; \\\n-d &lt;domain&gt; \\\n-q \"SELECT Name FROM Win32_OperatingSystem\"\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#windows-host","title":"Windows host","text":"<p>You can test if WMI is working correctly on a Windows host by using the <code>wbemtest</code> command:</p> <pre><code>wbemtest\nnamespace \\\\&lt;computername or IP&gt;\\root\\cimv2\nquery\nselect name from win32_computersystem\n</code></pre> <p>Note</p> <p>Make sure to replace <code>&lt;domain&gt;</code>, <code>&lt;userid&gt;</code>, and <code>&lt;computername or IP&gt;</code> with the correct values.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#wmi-probe-known-issues","title":"WMI-probe - Known issues","text":""},{"location":"collectors/probes/wmi-troubleshooting/#access-denied","title":"Access denied","text":"<p>There are various possible solutions for an access denied error.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#winrm-quickconfig","title":"winrm quickconfig","text":"<p>Run the following command to verify the configuration:</p> command<pre><code>winrm quickconfig\n</code></pre> <p>This should result in an output similar to the example output below:</p> output<pre><code>WinRM service is already running on this machine.\nWinRM is not set up to allow remote access to this machine for management.\nThe following changes must be made:\n\nConfigure LocalAccountTokenFilterPolicy to grant administrative rights remotely\nto local users.\n\nMake these changes [y/n]? y\n\nWinRM has been updated for remote management.\n\nConfigured LocalAccountTokenFilterPolicy to grant administrative rights remotely\n  to local users.\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#verify-security-policy-settings","title":"Verify Security Policy settings","text":"<p>In Security Settings --&gt; Local Policies --&gt; Security Options check these settings:</p> <ul> <li>Network access</li> <li>Do not allow storage of passwords and credentials for network authentication, must be DISABLED.</li> <li>Sharing and security model for local accounts must be set to CLASSIC.</li> </ul> <p>Typically we see these settings configured via Group Policy for standalone systems. These are part of the Local Security Policy.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#lan-manager-authentication-level","title":"LAN Manager authentication level","text":"<p>LAN Manager authentication level can cause the query error: <code>NTSTATUS: NT_STATUS_ACCESS_DENIED</code>:</p> <ol> <li>Start the group policy editor <code>gpedit.msc</code>.</li> <li>Browse to:</li> <li>Computer Configuration</li> <li>Windows Settings</li> <li>Security Settings</li> <li>Local Policies</li> <li>Security Options</li> <li>Verify if Network security: LAN Manager authentication level is set to: <code>Send LM &amp; NTLM - use NTLMv2 session security if negotiated</code>.</li> </ol>"},{"location":"collectors/probes/wmi-troubleshooting/#remote-uac","title":"Remote UAC","text":"<p>If you are monitoring a non-domain Windows asset you might see the notification <code>unable to authenticate: ACCESS_DENIED (5)</code></p> <p>This might happens if you don't use the local administrator account itself but instead created a separate account, even if this is a member of the local administrators group.</p> <p>To fix this you need to disable remote User Account Control (UAC). Disabling remote user account control does not disable local UAC functionality.</p> <p>To disable remote UAC for a workgroup computer:</p> <ol> <li>Using an administrator account, logon the computer you want to monitor.</li> <li>Go to Start \u2192 Accessories \u2192 Command Prompt. Type <code>regedit</code></li> <li>Browse to the key: <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System</code></li> <li>Locate or create a DWORD entry named <code>LocalAccountTokenFilterPolicy</code> and provide a DWORD value of <code>1</code>. To re-enable remote UAC, change this value to 0.</li> </ol>"},{"location":"collectors/probes/wmi-troubleshooting/#wmi-error-0x80041010","title":"WMI error 0x80041010","text":"<p>Performance counter based checks such as:</p> <ul> <li>base.cpu</li> <li>base.uptime</li> <li>base.volume-io</li> </ul> <p>Might give the following WMI Query error:</p> <p>WMI Query error occured, error message: NTSTATUS: NT code 0x80041010 - NT code 0x80041010</p> <p>To resolve this error, use the following command on the troubled host:</p> <pre><code>%windir%\\system32\\wbem\\wmiadap.exe /f\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#fix-broken-wmi-setup","title":"Fix broken WMI setup","text":""},{"location":"collectors/probes/wmi-troubleshooting/#rebuild-the-wmi-repository","title":"Rebuild the WMI repository","text":"<p>On Windows XP and above you can use the following command to rebuild the WMI repository:</p> <pre><code>rundll32 wbemupgd, UpgradeRepository\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#reinstall-wmi-in-the-registry","title":"Reinstall WMI in the registry","text":"<p>The following commands will reinstall WMI in the registry:</p> <pre><code>winmgmt /clearadap\nwinmgmt /kill\nwinmgmt /unregserver\nwinmgmt /regserver\nwinmgmt /resyncperf\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#broken-performance-counters","title":"Broken performance counters","text":"<p>To rebuild all Performance counters including extensible and third-party counters, enter the following commands in an Administrative command prompt. Press ENTER after each command.</p> <p>Rebuilding the counters:</p> <pre><code>cd c:\\windows\\system32\nlodctr /R\ncd c:\\windows\\sysWOW64\nlodctr /R\n</code></pre> <p>Resyncing the counters with Windows Management Instrumentation (WMI):</p> <pre><code>WINMGMT.EXE /RESYNCPERF\n</code></pre> <p>Stop and restart the Performance Logs and Alerts service. Stop and restart the Windows Management Instrumentation service.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#disk-performance-data-missing","title":"Disk performance data missing","text":"<p>Enable Disk performance counters using the following command:</p> <pre><code>DISKPERF -Y\n</code></pre> <p>You will receive the following message:</p> <p>Disk performance counters on this system are now set to start at boot. This change will take effect after the system is rebooted.</p> <p>See also: kb102020.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#access-denied-on-select-from-win32_service","title":"Access denied on SELECT * FROM Win32_Service","text":"<p>Run the following command in an administrative prompt:</p> <pre><code>sc sdset SCMANAGER D:(A;;CCLCRPRC;;;AU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)\n</code></pre>"},{"location":"collectors/probes/wmi-troubleshooting/#reverse-dns","title":"Reverse DNS","text":"<p>WMI can fail when querying on an IP address, if reverse DNS is not ok.</p>"},{"location":"collectors/probes/wmi-troubleshooting/#netlogon-service","title":"Netlogon service","text":"<p>Verify that the Netlogon service is running and set to start automatically.</p>"},{"location":"collectors/probes/wmi/","title":"Microsoft WMI","text":""},{"location":"collectors/probes/wmi/#wmi","title":"WMI","text":""},{"location":"collectors/probes/wmi/#introduction","title":"Introduction","text":"<p>InfraSonar can use the WMI protocol to monitor Microsoft Windows hosts without installing an agent on them. Monitoring in this scenario is performed by periodically querying the Windows host using WQL queries.</p> <p>InfraSonar uses the open source aiowmi library released in 2021 by Cesbit.</p>"},{"location":"collectors/probes/wmi/#features","title":"Features","text":"<ul> <li>CPU, memory and disk utilization</li> <li>Network utilization </li> <li>Windows services</li> <li>Domain information for domain joined hosts</li> <li>Time drift</li> <li>Process information</li> <li>User information</li> <li>Local sessions</li> <li>Remote sessions (RDP)</li> <li>Configured shares</li> <li>Installed software (as reported by add/remove programs)</li> <li>Installed Windows updates</li> <li>VSS usage</li> </ul>"},{"location":"collectors/probes/wmi/#deployment","title":"Deployment","text":"<p>The WMI probe is deployed as a  docker container using docker compose.</p> <p>See our TODO</p>"},{"location":"collectors/probes/wmi/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/wmi/#credentials","title":"Credentials","text":"<p>The WMI-probe requires a service account with domain admin rights or a local administrative to perform the WMI queries.</p> <p>While it is possible to configure a regular user with additional DCOM permissions we feel this provides a false sense of security as the DCOM privileges required are quite broad.</p>"},{"location":"collectors/probes/wmi/#checks","title":"Checks","text":""},{"location":"collectors/probes/wmi/#best-practices","title":"Best practices","text":""},{"location":"collectors/probes/wmi/#operational","title":"Operational","text":""},{"location":"collectors/probes/wmi/#firewall-requirements","title":"Firewall requirements","text":"<p>The WMI-probe requires no configuration on the monitored asset, other then access via the WMI protocol.</p>"},{"location":"collectors/probes/wmi/#local-firewall","title":"Local firewall","text":"<p>If the Microsoft Windows local firewall is enabled, you will need to allow \"Windows Management Instrumentation\" traffic.</p> <p>To enable or disable WMI traffic using the firewall UI</p> <ol> <li>In the Control Panel, click on Security and then click on Windows Firewall.</li> <li>Click on Change Settings and then click on the Exceptions tab.</li> <li>In the Exceptions window, select the check box for Windows Management Instrumentation (WMI) to enable WMI traffic through the firewall. To disable WMI traffic, clear the check box.</li> </ol> <p>Tip</p> <p>Windows 11 has a special firewall that only allows access from hosts inside the same local subnet.</p> <p>To enable WMI traffic at command prompt using WMI rule group</p> <p>We can easily allow remote WMI using the following set of <code>netsh</code> commands:</p> <pre><code>netsh advfirewall firewall set rule group=\"Windows Management Instrumentation (WMI-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (DCOM-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (ASync-In)\" new enable=yes\n</code></pre>"},{"location":"collectors/probes/wmi/#corporate-firewall","title":"Corporate firewall","text":"<p>When monitoring hosts which are located behind a firewall, for example hosts in a DMZ, the firewall must be configured to allow WMI.</p> <p>To comply with Internet Assigned Numbers Authority (IANA) recommendations, Microsoft has increased the dynamic client port range for outgoing connections in Windows Vista and Windows Server 2008. The new default start port is 49152, and the new default end port is 65535. This is a change from the configuration of earlier versions of Windows that used a default port range of 1025 through 5000.</p> <ul> <li>Windows server below 2008, access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 1024-5000) should be granted.</li> <li>Windows server 2008 and higher versions. access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 49152-65535) should be granted.</li> </ul> <p>You can lookup the dynamic port range actually used by the Windows host using these commands:</p> <pre><code>netsh int ipv4 show dynamicport tcp\nnetsh int ipv4 show dynamicport udp\nnetsh int ipv6 show dynamicport tcp\nnetsh int ipv6 show dynamicport udp\n</code></pre> <p>Note</p> <p>The range is set separately for each transport (TCP or UDP).</p> <p>The port range is now truly a range that has a starting point and an ending point. </p> <p>Microsoft customers who deploy servers that are running Windows Server 2008 may have problems that affect RPC communication between servers if firewalls are used on the internal network. </p> <p>In these situations, we recommend that you reconfigure the firewalls to allow traffic between servers in the dynamic port range of 49152 through 65535.</p> <p>This range is in addition to well-known ports that are used by services and applications. Or, the port range that is used by the servers can be modified on each server.</p> <p>You adjust this range by using the netsh command, as follows: netsh int  set dynamic  start= number num= range. This command sets the dynamic port range for TCP. The start port is number, and the total number of ports is range."},{"location":"collectors/probes/wmi/#none-domain-credentials","title":"None domain credentials","text":"<p>None domain members</p> <p>This is only required for hosts that are not a member of your Windows domain or when using a local account is required due to other circumstances.</p> <p>By default only the true local administrator account can be used for remote WMI queries. You can use the following steps to create a local account:</p> <ol> <li>Create a local account and ensure the account is member of the group Remote Management Users.</li> <li>Authorize CIMV2 access:<ol> <li>Open the WMI management console <code>wmimgmt.msc</code>.</li> <li>Right click WMI Control (Local) and select properties from the menu.</li> <li>Select the security tab.</li> <li>Browse to Root\\CIMV2.</li> <li>Click the button labeled security.</li> </ol> </li> <li>Authorize COM access:<ol> <li>Start the component Services console.</li> <li>Browse in the left pane to: Component Services \\ Computers.</li> <li>Right click My Computer and select **properties from the menu.</li> <li>Open the tab COM Security.</li> <li>Click Edit Limits in the Access Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure the account has Remote Access permissions.</li> <li>Close the access permission screen by clicking OK.</li> <li>Click on Edit Limits in the Launch and Activation Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure to allow: Local Launch, Remote Launch, Local Activation and Remote Activation.</li> <li>Close the windows by clicking OK twice and exit the Component Services console.</li> </ol> </li> </ol> <p>See also our WMI trouble shooting section about remote-UAC as you might need to disable this. </p>"},{"location":"collectors/probes/wmi/#microsoft-windows-server-2003","title":"Microsoft Windows server 2003","text":"<p>You should ensure Management and Monitoring Tools are installed using Add/remove windows components</p> <p>The software and updates check might not work as expected, we advise you to turn off these checks.</p>"},{"location":"collectors/probes/wmi/#microsoft-isa-server","title":"Microsoft ISA Server?","text":"<p>Monitoring a Microsoft ISA server requires the following rules on the ISA server:</p> <ul> <li>Allow traffic from the monitoring appliance to localhost for all protocols.</li> <li>Within this rule, filtering \"Enforce strict RPC compliance\" must be disabled.</li> </ul>"},{"location":"collectors/probes/wmi/#known-issues","title":"Known issues","text":"<p>See our troubleshooting section for known issues and ways to troubleshot WMI queries.</p>"},{"location":"collectors/probes/wmi/#additional-information","title":"Additional information","text":"<p> Microsoft WMI probe source code</p>"},{"location":"collectors/probes/appliance/","title":"InfraSonar probes","text":""},{"location":"collectors/probes/appliance/#getting-started","title":"Getting started","text":"<p>While it is very possible to deploy InfraSonar on a shared system we advise to use up a dedicated (virtual) Linux  appliance. We have a ready ro run appliance, which can we found here</p> <p>If you have any docker experience you might want to jump to our ease deployment script</p>"},{"location":"collectors/probes/appliance/appliance_installation/","title":"Appliance","text":"<p>You can download our ready-to-run OVA (Open Virtual Appliance) here.</p> <p>After you deployed the appliance there are thre</p> <ol> <li>Change the sysadmin password;</li> <li>Configure a static IP address if required;</li> <li>Deploy InfraSonar. </li> </ol>"},{"location":"collectors/probes/appliance/appliance_installation/#default-login","title":"Default login","text":"<p>You can logon to the appliance using:</p> <ul> <li>User: <code>sysadmin</code></li> <li>Password: <code>Infr@S0n@r</code></li> </ul>"},{"location":"collectors/probes/appliance/appliance_installation/#change-password","title":"Change password","text":"<p>Enter the <code>passwd</code> command when you are logged on as sysadmin and follow the steps when prompted.</p> <pre><code>$ passwd\nChanging password for sysadmin.\nCurrent password:\nNew password:\nRetype new password:\npasswd: password updated successfully\n</code></pre> <p>Ensure to keep this password stored somewhere safe.</p>"},{"location":"collectors/probes/appliance/appliance_installation/#network-configuration","title":"Network configuration","text":"<p>The InfraSonar appliance ova uses DHCP by default. You can change this to a static IP by editing the file <code>/etc/netplan/00-installer-config.yaml</code>.</p> <p>Indentation is meaningful in YAML</p> <p>Make sure that you use spaces, rather than tab characters, to indent sections. In the default configuration files 2 spaces per indentation level are used, We recommend you do the same.</p> DHCP configuration <p>Example DHCP configuration (default):</p> /etc/netplan/00-installer-config.yaml<pre><code>network:\nethernets:\nens160:\ndhcp4: true\nversion: 2\n</code></pre> Static IP config <p>Example static IP configuration:</p> /etc/netplan/00-installer-config.yaml<pre><code>network:\nethernets:\nens160:\naddresses: [192.168.1.3/24]\ngateway4: 192.168.1.1\nnameservers:\naddresses: [192.168.1.10, 192.168.1.11]\nversion: 2\n</code></pre> <p>After you modified your IP configuration you need to apply the new netplan configuration using the following command:</p> <pre><code>$ sudo netplan apply\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_installation/#deploy-infrasonar","title":"Deploy InfraSonar","text":"<p>Run our easy deployment script to deploy InfraSonar on the appliance.</p>"},{"location":"collectors/probes/appliance/appliance_installation/#build-your-own-appliance","title":"Build your own appliance","text":"<p>When you prefer to perform your own Linux installation or can't use the OVA file format we outlined our installation steps here.</p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/","title":"Appliance","text":"<p>This section outlines how to install the  Linux appliance from scratch.</p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#installation","title":"Installation","text":"<p> Ubuntu Server 22.04 LTS is used as the basis for the InfraSonar appliance.</p> <p>Create a new virtual machine using these specifications:</p> <ul> <li>Compatibility: Compatible with: ESXi 6.5 and later VM version 13</li> <li>Guest OS Family: Linux</li> <li>Guest OS Version: Ubuntu Linux (64-bit) </li> <li>CPU: 2 CPU</li> <li>Memory: 2 GB memory</li> <li>Disk: 30 GB HDD</li> <li>Name: infrasonar-appliance</li> </ul>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#installation-steps","title":"Installation steps","text":"<p>Boot from the Ubuntu Server 22.04.1 ISO and then follow these steps:</p> <ol> <li>Select your language: English.</li> <li>Keyboard configuration:<ol> <li>Layout: English (US).</li> <li>Variant: English (US).</li> </ol> </li> <li>Choose the type of install: Ubuntu server (minimized)</li> <li>Network configuration: DHCP. (Note it can take some time for an IP address to get assigned)</li> <li>Proxy address: enter a proxy address if your environment uses a proxy, otherwise leave empty.</li> <li>Mirror address: keep as it is, unless you know what you are doing.</li> <li>Guided storage configuration:<ol> <li>Select: Use an entire disk.</li> <li>Deselect: Set up this disk as an LVM group.</li> </ol> </li> <li>Storage configuration:</li> <li>Review the file system summary and select: Done.</li> <li>Confirm destructive action, by clicking: Continue.</li> <li>Profile setup:<ol> <li>Your name: sysadmin.</li> <li>Your server's name: infrasonar-appliance.</li> <li>Pick a username: sysdmin.</li> <li>Choose a password: Infr@S0n@r</li> <li>Confirm your password: Infr@S0n@r</li> </ol> </li> <li>SSH Setup:<ol> <li>Select: Install OpenSSH Server.</li> <li>Import SSH identity: No.</li> </ol> </li> <li>Featured Server Snaps: do not select any server snaps.</li> <li>If the installation is ready, select: Reboot now.</li> </ol> <p>Note</p> <p>Do not forget to unmount the ISO.</p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#post-installation-steps","title":"Post installation steps","text":"<p>Login to the appliance using SSH to perform the post installation steps.</p> <pre><code>ssh sysadmin@&lt;server-ip&gt;\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#upgrade","title":"Upgrade","text":"<p>```bash update and upgrade sudo apt update sudo apt upgrade sudo reboot <pre><code>### VMware tools\n\nIt is recommended to install [open-vm-tools](https://github.com/vmware/open-vm-tools), when the appliance is installed on a VMware hypervisor platform.\n\n```bash \n# Update the APT package index.\nsudo apt update\n# Install open VMware tools.\nsudo apt install -y open-vm-tools\n</code></pre></p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#miscellaneous-tools","title":"Miscellaneous tools","text":"<pre><code>sudo apt install -y vim nano cron dnsutils snmp iputils-ping\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#docker-installation","title":"Docker installation","text":"<p>All InfraSonar components run as Docker containers and are orchestrated using docker-compose.</p> <p>The official Docker engine installation instructions can be found here.</p> <pre><code>sudo apt update\nsudo apt install -y \\\nca-certificates \\\ncurl \\\ngnupg \\\nlsb-release\nsudo mkdir -p /etc/apt/keyrings\ncurl -fsSL https://download.docker.com/linux/ubuntu/gpg | sudo gpg --dearmor -o /etc/apt/keyrings/docker.gpg\necho \\\n\"deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.gpg] https://download.docker.com/linux/ubuntu \\\n$(lsb_release -cs) stable\" | sudo tee /etc/apt/sources.list.d/docker.list &gt; /dev/null\nsudo apt update\nsudo apt install -y docker-ce docker-ce-cli containerd.io docker-compose-plugin\nsudo groupadd docker\nsudo usermod -aG docker $USER\nsudo systemctl enable docker.service\nsudo systemctl enable containerd.service\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#unattended-updates","title":"Unattended updates","text":"<p>As we want the InfraSonar appliance to be zero maintenance, we configure unattended updates and allow the appliance to reboot when necessary at 2:00 CET.</p> <p>Ubuntu unattended upgrades installation</p> <pre><code># Install the unattended-upgrades package.\nsudo apt install -y unattended-upgrades\n# Verify using the following systemctl command.\nsudo systemctl status unattended-upgrades\n# To set automatic updates, we are going to install the update-notifier-common package.\nsudo apt install -y update-notifier-common\n</code></pre> <p>Ubuntu unattended upgrades configuration</p> <p>Change the file <code>/etc/apt/apt.conf.d/50unattended-upgrades</code>, so it reflects these changes:</p> <pre><code>....\nUnattended-Upgrade::Allowed-Origins {\n        \"${distro_id}:${distro_codename}\";\n        \"${distro_id}:${distro_codename}-security\";\n        // Extended Security Maintenance; doesn't necessarily exist for\n        // every release and this system may not have it installed, but if\n        // available, the policy for updates is such that unattended-upgrades\n        // should also install from here by default.\n        \"${distro_id}ESMApps:${distro_codename}-apps-security\";\n        \"${distro_id}ESM:${distro_codename}-infra-security\";\n        \"${distro_id}:${distro_codename}-updates\";\n//      \"${distro_id}:${distro_codename}-proposed\";\n//      \"${distro_id}:${distro_codename}-backports\";\n        \"Docker:${distro_codename}\";\n};\n\n....\n\n// Automatically reboot *WITHOUT CONFIRMATION* if\n// the file /var/run/reboot-required is found after the upgrade.\nUnattended-Upgrade::Automatic-Reboot \"true\";\n\n// Automatically reboot even if there are users currently logged in\n// when Unattended-Upgrade::Automatic-Reboot is set to true.\nUnattended-Upgrade::Automatic-Reboot-WithUsers \"true\";\n\n// If automatic reboot is enabled and needed, reboot at the specific\n// time instead of immediately.\n// Default: \"now\".\nUnattended-Upgrade::Automatic-Reboot-Time \"02:00\";\n....\n</code></pre> <p>Enable daily unattended upgrades</p> <pre><code>echo unattended-upgrades unattended-upgrades/enable_auto_updates boolean true | sudo tee -a debconf-set-selections\nsudo dpkg-reconfigure -f noninteractive unattended-upgrades\n</code></pre> <p>You can verify that automatic updates are turned on, with this command:</p> <pre><code>sudo debconf-get-selections | grep -i enable_auto_updates\n</code></pre> <p>Note</p> <p><code>debconf-get-selections</code> requires debconf-utils to be installed (<code>sudo apt-get install debconf-utils</code>). We opt not to install this on production appliances, as we want to keep them as clean as possible.</p> <p>Logging</p> <p>Unattended Upgrades Log.</p> <p>The <code>unattended-upgrades.log</code> is a log file where you can view all actions done by the unattended upgrade system. You can view the file with, for example, the tail command:</p> <pre><code>tail -n 100 /var/log/unattended-upgrades/unattended-upgrades.log\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#ssh-configuration","title":"SSH configuration","text":"<p>Edit the file <code>/etc/ssh/sshd_config</code> to harden SSH access:</p> /etc/ssh/sshd_config<pre><code>...\n# Logging\nSyslogFacility AUTHPRIV\n# LogLevel INFO\n\n...\n\n# Authentication:\nLoginGraceTime 10m\nPermitRootLogin no\n#StrictModes yes\nMaxAuthTries 3\nMaxSessions 1\n\n...\n\nAllowAgentForwarding no\nAllowTcpForwarding no\n#GatewayPorts no\nX11Forwarding no\n</code></pre> <p>Restart the SSH service to load the changes made.</p> <pre><code>sudo service ssh restart\n</code></pre> <p>SSH hardening options</p> <p>The above change implements these hardening options:</p> <ol> <li>Block clients for 10 minutes after 3 failed login attempts.</li> <li>Disallow root from logging in.</li> <li>Disable connection multiplexing, which can be used to bypass authentication.</li> <li>Disable user environment forwarding.</li> </ol>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#snmpd","title":"SNMPD","text":"<p>To monitor the Linux operating system, install the snmpd daemon:</p> <pre><code>sudo apt install -y snmpd\n</code></pre> <p>As we use the default community string <code>public</code> and only require the snmpd daemon to listen on <code>localhost</code>, no further configuration is required.</p> <pre><code># Read-only access to everyone to the systemonly view\nrocommunity  public default\nrocommunity6 public default -V systemonly\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#tmate","title":"tmate","text":"<p>tmate is installed to offer remote support on request.</p> <pre><code>sudo apt install -y tmate\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#sudo-configuration","title":"sudo configuration","text":"<p>We opt to allow command to be executed using sudo without asking for a password.</p> <p>Edit the sudo config by starting the editor </p> <pre><code>sudo visudo\n</code></pre> <p>Make the following modification:</p> <pre><code># Allow members of group sudo to execute any command\n%sudo   ALL=(ALL:ALL) NOPASSWD:ALL\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#infrasonar","title":"InfraSonar","text":"<p>InfraSonar is deployed on the appliance using Docker.</p> <p>We opt to use <code>/etc/infrasonar</code> as the main directory.</p> <pre><code>sudo mkdir /etc/infrasonar\n</code></pre> <p>Next step is to setup the Docker compose file in <code>/etc/infrasonar/docker-compose.yml</code>. This file is outlined here</p> <p>On the downloadable appliance we provide the <code>docker-compose.yml</code> file at the following location <code>/etc/infrasonar/docker-compose.yml.example</code>.</p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#appliance-init","title":"Appliance init","text":"<p>Prior to creating a template the following steps need to be performed:</p> <ol> <li>Run the first boot script.</li> <li>Avoid duplicate SSH host keys.</li> <li>Avoid duplicate machine ID's.</li> </ol>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#first-boot-script","title":"First boot script","text":"<p>The following script is used to run at first boot and sets a random schedule for a daily InfraSonor update.</p> /home/sysadmin/init<pre><code>#!/usr/bin/env bash\n# Fix removed SSH host keys\n# Note: this requires the use of sudo without password\nsudo dpkg-reconfigure openssh-server\nsudo service ssh restart\n\n# Remove this init script.\nrm /home/sysadmin/init\n</code></pre> <p>Add the script to the crontab to run as first boot:</p> <pre><code>chmod +x /home/sysadmin/init\n(crontab -l ; echo \"@reboot /home/sysadmin/init\") | crontab -\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#avoid-duplicate-ssh-host-keys","title":"Avoid duplicate SSH host keys","text":"<p>To avoid lingering duplicate SSH host keys, we remove them before converting the appliance into a template.</p> <pre><code>sudo rm /etc/ssh/ssh_host_* \n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#avoid-duplicate-machine-ids","title":"Avoid duplicate machine ID's","text":"<p>See also this VMware knowledge base article.</p> <p>Before cloning, run these commands inside the Linux Guest OS:</p> <pre><code>sudo -s\necho -n &gt; /etc/machine-id\nrm /var/lib/dbus/machine-id\nln -s /etc/machine-id /var/lib/dbus/machine-id\n``\n\n### First login\n\n\n### first boot\n\n\n#### Change hostname\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#binbash","title":"!/bin/bash","text":"<p>hostnamectl set-hostname \"blue\" echo $? hostnamectl set-hostname \"\" echo $? <pre><code>sudo hostnamectl set-hostname \"blue\"\nsudo sed -i 's/infrasonar/blue/g' /etc/hosts\n\n\n\nhttps://www.cyberciti.biz/faq/ubuntu-20-04-lts-change-hostname-permanently/\n</code></pre> sudo hostnamectl set-hostname ubuntu-2004-nixcraft <pre><code>TODOR\n\n```bash\n# Expire the sysadmin password enforcing the user to change the password at logon\npasswd -e sysadmin\n</code></pre></p>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#cleanup","title":"Cleanup","text":"<p>Remove the history</p> <pre><code>history -c\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#shutdown","title":"Shutdown","text":"<pre><code>sudo shutdown -h now\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#export-the-appliance","title":"Export the appliance:","text":"<p>Using the ovftool on Windows and virtual center:</p> <pre><code>cd C:\\Program Files\\VMware\\VMware OVF Tool\novftool \"vi://administrator@vsphere.local@vcenter.lab.test-technology.nl:443 \\\n   /Datacenter/vm/infrasonar-appliance\" \\\n   \"c:\\Documents and Settings\\sysadmin\\infrasonar-appliance.ova\"\nEnter login information for source vi://vcenter.lab.test-technology.nl/\nUsername: administrator%40vsphere.local\nPassword: ********\n</code></pre> <p>or when using VMware workstation on Linux:</p> <pre><code>ovftool /home/sysadmin/vmware/infrasonar-appliance/infrasonar-appliance.vmx ~/infrasonar-appliance.ova\n</code></pre>"},{"location":"collectors/probes/appliance/appliance_manual_installation/#create-a-template","title":"Create a template","text":"<p>Note</p> <p>The step below describe our lab configuration, adapt to your own needs.</p> <ol> <li>Open virtual center (https://vcenter.lab.test-technology.nl)</li> <li>Browse to the vm: <code>infrasonar-appliance</code></li> <li>Right click the host and select Clone -&gt; Clone to Template</li> <li>Name the template: <code>infrasonar-appliance-template</code></li> <li>Select a location: <code>vcenter.lab.test-technology</code> \\ <code>Datacenter</code></li> <li>Select a compute resource: <code>Datacenter</code> \\ <code>esxi01.test-technology.nl</code></li> <li>Select storage: <code>truenas</code></li> </ol>"},{"location":"collectors/probes/appliance/credentials/","title":"Credentials","text":"<p>Some InfraSonar probes require configuration and/or credentials to execute / authenticate its queries. A good example is the WMI-probe that requires Windows domain credentials to perform WMI queries.</p> <p>Credentials are stored in a yaml formatted file in the <code>data/config</code> directory in the directory from which you deployed InfraSonar. As we suggest using <code>/etc/infrasonar</code> the <code>infrasonar.yaml</code> file would be located here: <code>/etc/infrasonar/data/config</code></p> <p>Indentation is meaningful in YAML</p> <p>Make sure that you use spaces, rather than tab characters, to indent sections. In the default configuration files 2 spaces per indentation level are used, We recommend you do the same.</p>"},{"location":"collectors/probes/appliance/credentials/#infrasonaryaml-basics","title":"infrasonar.yaml basics","text":"<p>The <code>infrasonar.yaml</code> file has a straightforward structure allowing probe specific configurations and per asset deviations from a default configuration.</p> <p>The basic structure looks like this:</p> infrasonar.yaml<pre><code>exampleProbe:\nassets:\n- config:\npassword: \"my secret\"\nusername: bob\nid: 123\n- config:\npassword: \"other secret\"\nusername: charlie\nid:\n- 456\n- 789\nconfig:\npassword: \"a secret\"\nusername: alice\notherProbe:\nuse: exampleProbe\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#configuration-file-breakdown","title":"Configuration file breakdown","text":"<p>When applicable a probe has it's own section consisting of the probe name and a configuration for that probe.</p> <pre><code>exampleProbe:\n. . .\notherProbe:\n. . .\n</code></pre> <p>The <code>config</code> section contains the default probe configuration used by all probes if no exceptions are defined. The Probe specific paragraph describes probe specific configuration options.</p> <pre><code>  config:\nusername: alice\npassword: \"a secret\"\n</code></pre> <p>Asset specific configuration can be added by adding a <code>assets</code> section and assigning assets to this section by providing the asset-id using the <code>id</code> property, this can either be one asset or a list of assets.</p> <pre><code>  assets:\n- config:\npassword: \"my secret\"\nusername: bob\nid: 123\n- config:\npassword: \"other secret\"\nusername: charlie\nid:\n- 456\n- 789\n</code></pre> <p><code>use</code> is a special property to indicate a probe should use the config from another probe. An example for this are the vendor specific SNMP probes we offer.</p> <pre><code>otherProbe:\nuse: exampleProbe\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#local-configuration","title":"Local configuration","text":"<p>Another nice way to utilize the <code>yaml</code> file is to provide a configuration section and use the local configuration option in our UI to point the asset to this specific section.</p>"},{"location":"collectors/probes/appliance/credentials/#example","title":"Example","text":"<p>In this example we use a specific account in the domain <code>example.com</code> this account can then we used in any probe using the local configuration option.</p> <pre><code>example.com:\nconfig:\nusername: \"alice@example.com\"\npassword: \"a secret\"\n</code></pre> <p>Now we can use <code>example.com</code> when we configure an asset in the UI.</p> <p></p>"},{"location":"collectors/probes/appliance/credentials/#security-considerations","title":"Security considerations","text":"<p>unreadable, not truly encrypted.</p> <p>WARNING: InfraSonar will make <code>password</code> and <code>secret</code> values unreadable but this must not be regarded as true encryption as the encryption key is publicly available.</p> <p>In the examples below the password is shown in plain text; InfraSonar however encrypts the password once it sees the file has been changed.</p> <p>Resulting in an encrypted section in the password section:</p> encrypted password example<pre><code>wmi:\nconfig:\nusername: administrator\npassword:\nencrypted: !!binary |\nZ0FBQUFBqmppaWFKblawbGVIVt72ckFKZYRZRmItX1pYNlpRYnRsT2pLRG1vS2ZjV1lfSExrbi1J\nUy1LQjhZcVZCAXhCMG5jUmRDd1EteE5Za3duQ1VMbGw3U2JXX3BWSkE9PQ==\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#probe-specifics","title":"Probe specifics","text":"<p>For most probes it is sufficient to provide a <code>username</code> and <code>password</code>; we outlined probes with a more distinct configuration here:</p>"},{"location":"collectors/probes/appliance/credentials/#santricity-netapp-e-series","title":"SANtricity / NetApp E-Series","text":"<p>The SANtricity / NetApp E-Series probe is configured in the <code>santricity</code> section:</p> <pre><code>santricity:\nconfig:\npassword: \"some_secure_passw0rd\"\nusername: monitor\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#snmp","title":"SNMP","text":"<p>The SNNP probe supports SNMPv1, SNMPv2c, and SNMPv3</p> <p>We use the following defaults:</p> <ul> <li>SNMP version 2c</li> <li>Community string <code>public</code></li> </ul>"},{"location":"collectors/probes/appliance/credentials/#snmpv1","title":"SNMPv1","text":"<pre><code>snmp:\nconfig:\ncommunity: SomeCommunityString\nversion: 1\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#snmpv2c","title":"SNMPv2c","text":"<pre><code>snmp:\nconfig:\ncommunity: SomeCommunityString\nversion: \"2c\"\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#snmpv3","title":"SNMPv3","text":"<pre><code>snmp:\nconfig:\nversion: 3\nusername: alice\nauth:\n# auth is optional; type USM_AUTH_NONE is used when omitted.\n# supported: USM_AUTH_HMAC96_MD5, USM_AUTH_HMAC96_SHA or USM_AUTH_NONE\ntype: USM_AUTH_HMAC96_SHA\npassword: \"my secret password\"\npriv:\n# priv is optional; type USM_PRIV_NONE is used when omitted.\n# supported: USM_PRIV_CBC56_DES, USM_PRIV_CFB128_AES or USM_PRIV_NONE\ntype: USM_PRIV_CFB128_AES\npassword: \"my secret password\"\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#encrypted-community-string","title":"Encrypted community string","text":"<p>It is possible though to encrypt the community string on the appliance by indicating the string is secret as such:</p> <pre><code>snmp:\nconfig:\ncommunity:\nsecret: SomeCommunityString\nversion: \"2c\"\n</code></pre> <p>This results upon save in community string being encrypted:</p> <pre><code>snmp:\n\ncommunity:\nsecret:\nencrypted: !!binary |\nZ0FBQUFBQmptMEhGq0FhTGJZNFNTckZKdXzWaVpKT2RzMzBARlJGUW1MVGVCVHNmTE15eVlOMTVD\ndGZWU1VEYUtPN2V4cWdOeGdoYlB1M29ua2JTZzNuQVlqU09eM0Z2c2c9PQ==\nversion \"2c\"\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#inherited-config","title":"Inherited config","text":"<p>As we have multiple different SNMP based probes it is possible to point these to the snmp configuration section</p> <pre><code>some-snmp-based-probe:\n  use: snmp\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#advanced-example","title":"Advanced example","text":"<p>The example below uses all variances for multiple assets.</p> <pre><code>snmp:\nassets:\n- config:\ncommunity: other\nversion: '1'\nid: 12\n- config:\ncommunity:\nsecret: SomeCommunityString\nversion: 2c\nid: 34\n- config:\nauth:\npassword: \"my secret password\"\ntype: USM_AUTH_HMAC96_SHA\npriv:\npassword: \"my super secret password\"\ntype: USM_PRIV_CFB128_AES\nusername: alice\nversion: '3'\nid:\n- 56\n- 78\n</code></pre> <ul> <li>Asset '12'<ul> <li>uses SNMP version 1 and community string <code>other</code></li> </ul> </li> <li>Asset '34', uses SNMP version 2c and community string <code>SomeCommunityString</code>which is encrypted upon save</li> <li>Assets '56' &amp; '78', use SNMP version 3 using username <code>alice</code></li> </ul>"},{"location":"collectors/probes/appliance/credentials/#wmi","title":"WMI","text":"<p>The WMI probe uses a straightforward configuration as shown below.</p> <p>When Microsoft Active directory accounts are used the username can be either in domain format <code>domain\\infrasonar_service_account</code> or use the UPN format: <code>infrasonar_service_account@domain.something</code></p> <p>An asset specific configuration can be useful for non domain joined servers.</p> <pre><code>wmi:\nconfig:\nusername: alice\npassword: \"a secret\"\nassets:\n- config:\nusername: domain\\bob\npassword: \"my secret\"\nid: 123\n- config:\nusername: charlie@domain.org\npassword: \"other secret\"\nid: - 456\n- 789\n</code></pre>"},{"location":"collectors/probes/appliance/credentials/#faq","title":"FAQ","text":"<p>Is it possible to copy credentials? Yes credential files can be exchanged between appliances belonging to the same InfraSonar container.</p> <p>I note my credentials are not being encoded? Check if you did per accident configure a duplicate section, see this simplified example where we configured two wmi sections: <pre><code>wmi:\nconfig:\nusername: alice\npassword: \"a secret\"\nwmi:\nuse: something\n</code></pre></p>"},{"location":"collectors/probes/appliance/deploy_infrasonar/","title":"Deploy infraSonar","text":"<p>InfraSonar probes can easily be deployed and maintained using our easy deployment script. If you want to review/audit our script you can find the latest version in our GitHub repository</p>"},{"location":"collectors/probes/appliance/deploy_infrasonar/#prerequisites","title":"Prerequisites","text":"<ol> <li>Before deploying InfraSonar ensure you have an AgentCore and an agent token.See our token documentation on how to create tokens;</li> <li>Access to a Linux host running docker compose V2.</li> </ol>"},{"location":"collectors/probes/appliance/deploy_infrasonar/#easy-deployment","title":"Easy deployment","text":"<p>Our installer script deploys InfraSonar into the directory where you executed this script. We suggest you create a new directory for our configration, for example <code>/etc/infrasonar</code></p> <pre><code>/bin/bash -c \"$(curl -fsSL https://deploy.infrasonar.com)\"\n</code></pre> <p>When the Docker environment is up and running, you should see the Agentcore appear in the UI in the Agentcores section</p> <p>You will also note several files in your directory which we outline in the next paragraph.</p>"},{"location":"collectors/probes/appliance/deploy_infrasonar/#directory-breakdown","title":"Directory breakdown","text":"file / directory Remark .env This file contains the InfraSonar tokens and is used by the <code>docker-compose.yml</code> file docker-compose.yml Contains alle InfraSonar probes as services next to the agentcore and watchtover service /data data volume, mounted to all InfraSonar services to store their config /data/.agentcore.json Agentcore configuration /data/.asset.json Docker agent configuration /data/config Contains probe specific configuration files /data/config/infrasonar.yaml Contains probe specific configuration such as credentials."},{"location":"collectors/probes/appliance/deploy_infrasonar/#rerun","title":"Rerun","text":"<p>If you want to retrieve our latest <code>docker-compose.yml</code> file you can do so by renaming your existing <code>docker-compose.yml</code> file as backup and rerunning our deployment script.</p> <pre><code>mv docker-compose.yml docker-compose.yml.bak\n/bin/bash -c \"$(curl -fsSL https://deploy.infrasonar.com)\"\n</code></pre>"},{"location":"collectors/probes/appliance/docker_compose/","title":"Docker deployment","text":"<p>InfraSonar probes and the InfraSonar Agentcore are distributed using Docker containers via docker compose.</p>"},{"location":"collectors/probes/appliance/docker_compose/#docker-compose-file","title":"Docker compose file","text":"<p>The latest production version of our complete <code>docker-compose.yml</code> file can be downloaded here</p> <p>Some noteworthily sections of our <code>docker-compose.yml</code> file:</p> Volumes <p>We opt to store the InfraSonar related data and configuration in the same sub-directory <code>data</code> in the directory where the docker compose file lives.</p> Networking <p>We use the host network for all our containers and thus probes to avoid any networking issues.</p> x-infrasonar-template section <p>The <code>x-infrasonar-template</code> section ensures the default settings are the same for all InfraSonar containers.</p> Watchtower service <p>We use Watchtower to periodicity check for updates.</p> <p>Within the Watchtower service we mount the localtime file to ensure the container is running in the same timezone as the appliance.</p>"},{"location":"collectors/probes/appliance/klad/","title":"Klad","text":""},{"location":"collectors/probes/appliance/klad/#accessing-your-appliance","title":"Accessing your appliance","text":"<p>InfraSonar runs in Docker containers on Linux. Access is possible through the console in your virtualization solution. But a more straightforward approach is to use SSH.</p> <p>Modern desktop operating systems have the ssh command as part of their terminal. Alternatively, you can download and use PuTTY.</p> <p>SSH access is granted to the <code>sysadmin</code> user.</p>"},{"location":"collectors/probes/appliance/klad/#nano-basics","title":"Nano basics","text":"<p>The InfraSonar appliance configuration requires you to edit files using SSH access. The appliance includes the main text editors of vi and nano.</p> <p>Since Nano is easier to use, we outline its essential functions here.</p> <p>In this example, we create will add credials for the WMI-probe. See the credentials section for more in-depth information regarding credential files.</p> <p>The easiest way to use Nano, is to open the file you want to edit or create directly using Nano, like this:</p> <pre><code>nano /etc/infrasonar/data/config/infrasonar.yaml\n</code></pre> <p>Note</p> <p>We assume you are logged on to the appliance using SSH.</p> <p>This command will launch the Nano editor, where you can immediately make changes to the file:</p> <p> </p> Nano screenshot <p>When your edits are done, exit using Ctrl+X. Nano now prompts if you want to Save modified buffers.</p> <p>If you want to save your edits press Y, followed by an Enter to confirm the filename.</p> <p>Press N if you want to discard your edits or Ctrl+C if you want to continue editing.</p>"},{"location":"collectors/probes/appliance/klad/#network-mode-advanced","title":"Network mode advanced","text":"<pre><code>## InfraSonar docker-compose.yml file\n##\n## Set the correct TOKEN variables before starting.\n\nx-infrasonar-template: &amp;infrasonar\n  #network_mode: host\n  networks:\n    - infrasonar_dev\n  restart: always\n  logging:\n    options:\n      max-size: 5m\n  volumes:\n      - ./data:/data/\n  labels:\n    com.centurylinklabs.watchtower.scope: ${AGENTCORE_TOKEN}\n\nnetworks:\n  infrasonar_dev:\n\nservices:\n  agentcore:\n</code></pre>"},{"location":"collectors/probes/appliance/klad/#manual-update","title":"Manual update","text":"<p>Login using SSH and use the cd command to navigate to the directory containing the InfraSonar <code>docker-compose.yml</code> file.</p> <pre><code># Look for newer images and pull these\ndocker compose pull\n# Reload any changed images\ndocker compose up -d\n</code></pre>"},{"location":"collectors/probes/appliance/klad/#restart","title":"Restart","text":"<p>If you want to restart all InfraSonar containers you can do so using the following command:</p> <pre><code>docker compose restart\n</code></pre> <p>This implies you are executing this command in the directory containing the InfraSonar <code>docker-compose.yml</code> file.</p>"},{"location":"collectors/probes/appliance/klad/#logging","title":"Logging","text":"<p>For troubleshooting purposes you can change the log-level in the <code>docker-compose.yml</code> file</p> <p>Supported log levels:</p> <ul> <li>debug</li> <li>info</li> <li>warning</li> <li>error</li> <li>critical</li> </ul> docker-compose.yml<pre><code>## InfraSonar docker-compose.yml file\n##\n## Set the correct TOKEN variables before starting.\n\nx-infrasonar-template: &amp;infrasonar\nnetwork_mode: host\nrestart: always\nlogging:\noptions:\nmax-size: 5m\nvolumes:\n- ./data:/data/\nlabels:\ncom.centurylinklabs.watchtower.enable: TRUE\nenvironment:\nLOG_LEVEL: \"debug\"\nLOG_COLORIZED: \"1\"\nservices:\nagentcore:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/agentcore\nenvironment:\nTOKEN: \"Agentcore-token\u00bb\"\nLOG_LEVEL: \"debug\"\nLOG_COLORIZED: \"1\"\ndocker-agent:\n&lt;&lt; : *infrasonar\nimage: ghcr.io/infrasonar/docker-agent\nenvironment:\nTOKEN: \"\u00abAgent-token\u00bb\"\nLOG_LEVEL: \"debug\"\nLOG_COLORIZED: \"1\"\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n- ./data:/data/\n.....\n</code></pre> <p>Note</p> <p>You need to restart you containers for changed log setting to become active.</p>"},{"location":"collectors/probes/appliance/klad/#operational-notes","title":"Operational notes","text":"<p>TODO</p> <pre><code>docker compose -f /etc/infrasonar/docker-compose.yml pull\ndocker compose -f /etc/infrasonar/docker-compose.yml up -d\n</code></pre> <p>Contact InfraSonar support    if you require any assistance.</p>"},{"location":"collectors/probes/appliance/klad/#monitor-the-appliance","title":"Monitor the appliance","text":"<p>Since InfraSonar is a monitoring platform, the first thing to do is monitor the appliance using the SNMP-probe.</p>"},{"location":"collectors/probes/appliance/klad/#explain-when-to-use-multiple-containers","title":"Explain when to use multiple containers","text":"<p>One aspect to think about beforehand is if you are going to use one ore multiple containers for your assets. Multiple containers is a typical approach for managed service providers, if you feel you need multiple containers it is advisable to create a container for your first steps into InfraSonar as this makes it easier to move forward when wanting to add other environment into containers.</p>"},{"location":"collectors/probes/vmware/","title":"Index","text":""},{"location":"collectors/probes/vmware/#vmware","title":"VMware","text":""},{"location":"collectors/probes/vmware/#introduction","title":"Introduction","text":"<p>InfraSonar has two probe to monitor VMware hypervisors:</p> <ul> <li>ESXi</li> <li>vCenter</li> </ul> <p>Both probes use the VMware API to collect data.</p> <p>We advise to always install bot the vCenter and the ESXi probes. For standalone ESXi host we created a specific label ensuring optimal monitoring for this scenario.</p>"},{"location":"collectors/probes/vmware/#features","title":"Features","text":"<p>Two notable metrics we added to our guest monitoring:</p> <p>Our default label for standalone ESXi hosts contains specific conditions for these metrics</p>"},{"location":"collectors/probes/vmware/#disk-bus-reset","title":"disk bus reset","text":"<p>If a storage device is overwhelmed with too many read and write commands from an ESXi host, or if it encounters a hardware issue and fails to abort commands, it will clear out all commands waiting in its queue. This is called a disk bus reset. Disk bus resets are a sign of a disk storage bottleneck and can cause slower VM performance, as VMs will need to resend those requests. Disk bus resets typically do not occur in healthy vSphere environments, so you should investigate any VM with a positive value for the disk.bus.reset metric</p>"},{"location":"collectors/probes/vmware/#cpu-readiness","title":"CPU readiness","text":"<p>The CPU readiness metric tracks the percentage of time a virtual machine is ready to run a workload but has to wait on the ESXi host to schedule it due to there not being enough physical CPU available. Monitoring CPU readiness time can give you a good idea of whether or not your VMs are running efficiently or spending too much time waiting and unable to run their workloads. While some CPU readiness time can be normal, VMware recommends setting an alert to let you know if this metric surpasses 5 percent. VMs that spend a significant percentage of their time in a ready state will be unable to execute tasks, which can lead to poor application performance and possibly timeout errors and downtime.</p>"},{"location":"collectors/probes/vmware/esx/","title":"ESXi","text":""},{"location":"collectors/probes/vmware/esx/#vmware-esxi","title":"VMware ESXi","text":""},{"location":"collectors/probes/vmware/esx/#introduction","title":"Introduction","text":"<p>The VMware esx-probe uses the VMware API to monitor VMware ESXi hosts.</p>"},{"location":"collectors/probes/vmware/esx/#features","title":"Features","text":"<p>THe ESXi probe can be used to monitor standalone VMware ESXi hosts as hosts part of a VMware V-center deployment.</p> <p>We have a default label that contains specific conditions for monitoring stand alone ESXi hosts.</p> <p>See our overall VMwware documentation for additional information.</p> <ul> <li>Configuration issues</li> <li>Hypervisor status</li> <li>Datastores</li> <li>Guests</li> <li>Status</li> <li>Virtual disks</li> <li>VMware tools version</li> </ul>"},{"location":"collectors/probes/vmware/esx/#deployment","title":"Deployment","text":"<p>The Vmware ESXi probe can best be deployed as a docker container.</p> <p> ghcr.io/infrasonar/esx-probe</p>"},{"location":"collectors/probes/vmware/esx/#configuration","title":"Configuration","text":""},{"location":"collectors/probes/vmware/esx/#credentials","title":"Credentials","text":"<p>The VMware API requires a regular user account on each monitored ESXi host with read-only permissions to access monitoring data on VMware ESXi hosts.</p> <p>See the VMware documentation on how to setup a local account and grant this account access.</p> <p>The corresponding <code>infrasonar.yaml</code> 1 section when using for example infrasonar as user id looks as follows:</p> <pre><code>esx:\nconfig:\nusername: infrasonar\npassword: \"some_secure_passw0rd\"\n</code></pre> <p>Don't use root</p> <p>We strongly advise setting up a separate user for monitoring to have a clear separation of responsibilities but also to avoid lock-out issues.</p>"},{"location":"collectors/probes/vmware/esx/#operational","title":"Operational","text":""},{"location":"collectors/probes/vmware/esx/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/vmware/esx/#cached-api-response","title":"Cached API response","text":"<p>Sometimes InfraSonar reports different values than VMware consoles.</p> <p>The cause for this is that the VMware API sends cached data as a response to queries.</p> <p>The solution to mitigate this situation is to clean the VMware cache using the following commands on the affected ESXi host:</p> <pre><code>localcli hardware ipmi sel clear\netc/init.d/sfcbd-watchdog restart\netc/init.d/hostd restart\netc/init.d/vpxa restart\n</code></pre>"},{"location":"collectors/probes/vmware/esx/#additional-information","title":"Additional information","text":"<p> esx probe source code</p> <ol> <li> <p>Passwords are encrypted on the appliance the moment the file is saved, see our credentials documentation \u21a9</p> </li> </ol>"},{"location":"collectors/probes/vmware/vcenter/","title":"vCenter","text":""},{"location":"collectors/probes/vmware/vcenter/#vmware-vcenter","title":"VMware vCenter","text":""},{"location":"collectors/probes/vmware/vcenter/#introduction","title":"Introduction","text":"<p>The vcenter-probe uses the VMware API to monitor VMware Virtual center hosts.</p>"},{"location":"collectors/probes/vmware/vcenter/#features","title":"Features","text":"<ul> <li>vCenter alarms</li> <li>Cluster status</li> <li>Hypervisor hosts</li> <li>Datastores</li> <li>Guests</li> <li>Status</li> <li>Virtual disks</li> <li>VMware tools version</li> </ul>"},{"location":"collectors/probes/vmware/vcenter/#deployment","title":"Deployment","text":"<p>The vCenter probe can best be deployed as a docker container.</p> <p> ghcr.io/infrasonar/vcenter-probe</p> <p>See our TODO</p>"},{"location":"collectors/probes/vmware/vcenter/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/vmware/vcenter/#credentials","title":"Credentials","text":"<p>The VMware API requires a regular user account with read-only permissions to access monitoring data on VMware vCenter appliance.</p>"},{"location":"collectors/probes/vmware/vcenter/#vcenter-integrated-with-ad","title":"vCenter integrated with AD","text":"<p>When vCenter is integrated with Active Directory (AD), you will find a group in vCenter that has a corresponding group in AD.</p> <p>Simply create a user with read-only permissions for your vCenter environment in AD and add it to the corresponding AD group. Your credentials for vCenter will be in the format of username@windows.domain.</p> <p>The corresponding <code>infrasonar.yaml</code> 1 section when using for example infrasonar@vsphere.local as user id looks as follows:</p> <pre><code>vcenter:\nconfig:\nusername: infrasonar@windows.domain\npassword: \"some_secure_passw0rd\"\n</code></pre>"},{"location":"collectors/probes/vmware/vcenter/#vcenter-standalone","title":"vCenter standalone","text":"<p>When vCenter is not integrated with AD, you will create a new read-only user in your vSphere client and grant this account read-only access.</p> <p>See the VMware documentation on how to setup a local <code>@windows.domain</code> account and how to grant this account read-only access.</p> <p>The corresponding <code>infrasonar.yaml</code> 1 section in this scenario:</p> <pre><code>vcenter:\nconfig:\nusername: infrasonar@vsphere.local\npassword: \"some_secure_passw0rd\"\n</code></pre>"},{"location":"collectors/probes/vmware/vcenter/#additional-information","title":"Additional information","text":"<p> vcenter probe source code</p> <ol> <li> <p>Passwords are encrypted on the appliance the moment the file is saved, see our credentials documentation \u21a9\u21a9</p> </li> </ol>"},{"location":"collectors/services/","title":"Services","text":"<p>A service collector is used to monitor a global service such as, for example, the status of Microsoft 365, AWS health, Google Cloud status, etc. The collected service status is reported back to all interested containers.</p>"},{"location":"collectors/services/#ipv4-addresses","title":"IPv4 addresses","text":"<p>Our services run in our cloud platform and use the following IPv4 addresses:</p> <ul> <li>34.90.55.73</li> <li>34.90.105.247</li> </ul> <p>Ensure assets you want to monitor using a service are allowed to be accessed from these IP addresses.</p>"},{"location":"collectors/services/last_seen/","title":"Last seen","text":""},{"location":"collectors/services/last_seen/#last-seen","title":"Last Seen","text":""},{"location":"collectors/services/last_seen/#introduction","title":"Introduction","text":"<p>The last seen service is a service running in the InfraSonar backend responsible for retrieving the latest timestamp we retrieved a check result for an asset.</p>"},{"location":"collectors/services/last_seen/#deployment","title":"Deployment","text":"<p>The last seen service requires no configuration and can easily be deployed to an asset by adding the last seen collector to the asset.</p>"},{"location":"collectors/services/mailroundtrip/","title":"MailRoundTrip service","text":""},{"location":"collectors/services/mailroundtrip/#description","title":"Description","text":"<p>The InfraSonar MailRoundTrip service is a synthetic monitor verifying the complete email flow. The steps below outline the email roundtrip for <code>mailroundtrip@example.org</code>:</p> <ol> <li>The first step is to lookup all MX records for <code>example.org</code>.</li> <li>Our MailRoundTrip service sends an email to all MX records.</li> <li>The receiving email server is configured to automatically forward all mail sent to the probe address. In our case <code>mailroundtrip@example.org</code> is forwarded to <code>mailroundtrip@mrt.infrasonar.com</code>.</li> </ol> <p>This approach ensures all components such, as DNS, internet connection, email filtering, and email server components involved in receiving and sending email, are part of the measurement.</p> <p>Note</p> <p>Sending an email to all MX records ensures the email fallback scenarios work when you need to rely on them.</p>"},{"location":"collectors/services/mailroundtrip/#deployment","title":"Deployment","text":""},{"location":"collectors/services/mailroundtrip/#service-configuration","title":"Service configuration","text":"<p>The only required configuration property for the MailRoundTrip service is the mail domain. So in our case this would be: <code>mailroundtrip@example.org</code></p>"},{"location":"collectors/services/mailroundtrip/#mail-service","title":"Mail service","text":"<p>The email service you want to monitor <code>example.org</code> needs to forward messages send to <code>mailroundtrip@example.org</code> to <code>mailroundtrip@mrt.infrasonar.com</code></p> <p>Note</p> <p>Ensure you forward these emails without storing them in your email database or use a routine to automatically cleanup the messages to avoid digital waste.</p>"},{"location":"collectors/services/mailroundtrip/#microsoft-exchange-configuration","title":"Microsoft Exchange Configuration","text":"<p>The email roundtrip flow works as follows on a Microsoft Exchange infrastructure:</p> <ol> <li>The central monitoring server sends an email to a pre-configured user.</li> <li>The Exchange user auto-forwards the message to the email contact, which is the email address used by the central monitoring server.</li> <li>The central server receives and parses the message.</li> </ol>"},{"location":"collectors/services/mailroundtrip/#detailed-configuration-guides","title":"Detailed configuration guides","text":"<ul> <li>Google Workspace</li> <li>Microsoft Exchange 2003</li> <li>Microsoft Exchange 2010</li> </ul>"},{"location":"collectors/services/mailroundtrip_google_workspace/","title":"Google workspace","text":"<ol> <li>Open the Google Admin Console.</li> <li>Navigate to: Apps &gt; Google Workspace &gt; Gmail.</li> <li>Select Default routing:</li> <li>Click on ADD ANOTHER RULE:</li> <li>In the section Specify envelope recipients to match, select Single recipient and enter the email address: mailroundtrip@.       Where  is your email domain. <li>In the section If the envelope recipient matches the above, select Change envelope recipient, set Replace recipient* and enter: <code>mailroundtrip@mrt.infrasonar.com</code>.</li> <li>Under Spam, select Bypass spam filter for this message.</li> <li>Click Save.</li>"},{"location":"collectors/services/mailrountrip_exchange2003/","title":"Microsoft Exchange 2003","text":"<p>Start the \"Active Directory Users and Computers\" tool on a server, which also contains the Exchange 2003 management tools. Usually the exchange or SBS server.</p>"},{"location":"collectors/services/mailrountrip_exchange2003/#create-a-receiving-mailbox-user","title":"Create a receiving mailbox user","text":"<ol> <li>Create a new user in the for your organization correct OU:<ol> <li>Provide the Full name. We recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name. We recommend: mailroundtrip.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Password options:<ol> <li>Enter a secure password. This password is not used and can be changed anytime.</li> <li>Select \"User cannot change password\" and \"Password never expires\".</li> <li>Click on Next to continue.</li> </ol> </li> <li>Create the actual mailbox:<ol> <li>Usually you can leave this default. Adjust the Server and mailbox store if required.</li> </ol> </li> <li>Finish the creation of the user:<ol> <li>Verify the configuration.</li> <li>Click on Finish to finalize the user creation process.</li> </ol> </li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2003/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Add a mail contact. This contact is required to forward the mail back to the monitoring host.</p> <ol> <li>Right click in the organization unit where you want to create the mail contact.</li> <li>Select Cew -&gt; Contact.</li> <li>Enter the contact details:</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Click on Next to continue.</li> <li>Add the SMTP address:<ol> <li>Click on Modify:<ol> <li>Select SMTP Address.</li> <li>Click on OK.</li> </ol> </li> <li>Enter the return email address:<ol> <li>Enter the return mail address in the E-mail address field: mailroundtrip@mrt.infrasonar.com.</li> <li>Click on OK.</li> </ol> </li> <li>Finish:<ol> <li>Verify the settings.</li> <li>Click on Next to continue.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2003/#hide-the-return-mail-contact","title":"Hide the return mail contact","text":"<p>We suggest hiding the contact from the address-book, so details will not be shown to end-users.</p> <ol> <li>Right-click on the Mail Round Trip Monitoring Return Address contact you just created and select Properties.</li> <li>Open the Exchange advanced tab.</li> <li>Select Hide from Exchange address lists.</li> <li>Click on OK.</li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2003/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<ol> <li>Double click on the previously created Mail Round Trip Monitoring Receive mailbox user.</li> <li>Open the Exchange Features tab:<ol> <li>Disable all features.</li> </ol> </li> <li>Open the Exchange Advanced tab:<ol> <li>Enable Hide from Exchange address lists.</li> </ol> </li> <li>Open the \"Exchange General\" tab:<ol> <li>Click on Delivery options.</li> <li>Click on Modify.</li> <li>Enter the Mail Round Trip Monitoring Return Address.</li> </ol> </li> <li>Click on Ok three times.</li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2010/","title":"Microsoft Exchange 2010","text":"<p>Start the Microsoft \"Exchange Management Console\" on a server which also contains the Exchange 2010 management tools. This console can usually be found on the Microsoft Exchange or SBS server.</p>"},{"location":"collectors/services/mailrountrip_exchange2010/#create-a-new-mailbox","title":"Create a new mailbox","text":"<ol> <li>Right click on Mailbox under Recipient Configuration:<ol> <li>Select New Mailbox.</li> <li>Select User Mailbox.</li> <li>Click on Next.</li> <li>Select New User.</li> <li>Click on Next.</li> <li>Provide User Information:<ol> <li>Provide the Full name, we recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name, we recommend: mailroundtrip.</li> <li>Provide a password. (Note: this password is not used anywhere so any random password will suffice)</li> <li>Optionally select the OU were you want this account to be created.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Specify mailbox settings:<ol> <li>Optionally select the mailbox database, were you want the mailbox to reside.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Set archive settings:<ol> <li>Select Don't create an archive. This mailbox does not contain any email.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Review settings:<ol> <li>Click on New to create the new mailbox.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2010/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Create a mail contact containing the mail round trip return address.</p> <ol> <li>Open Recipient configuration.</li> <li>Right click on Mail contact.</li> <li>Select New Mail Contact.</li> <li>Create a new mail contact:<ol> <li>Select New Contact.</li> <li>Click on Next.</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Enter an alias, we suggest: mailroundtripreturn.</li> <li>Click on the Edit... button:<ol> <li>Enter the following return email address in the E-mail address field: mailroundtrip@mrt.infrasonar.com.</li> </ol> </li> <li>Click on Next:<ol> <li>Review settings.</li> </ol> </li> <li>Click on New to create the mail contact:</li> <li>Verify that the mail contact was created successfully:<ol> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2010/#modify-the-return-contact","title":"Modify the return contact","text":"<ol> <li>Right click on on the previously created mail contact.</li> <li>Select Properties from the dropdown menu.</li> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Click on OK to close the dialog.</li> </ol>"},{"location":"collectors/services/mailrountrip_exchange2010/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<p>Forward all mail to the \"Mail Round Trip Monitoring Mailbox\" from the previously created \"Mail Round Trip Monitoring Return Address\" contact.</p> <ol> <li>Right click on the previously created receive mailbox user.</li> <li>Select Properties from the drop down menu:<ol> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Open the Mail Flow Settings tab.</li> <li>Double click on Delivery Options:<ol> <li>Select the Forward to selection box.</li> <li>Click on Browse:<ol> <li>Select the \"Mail Round Trip Monitoring Return Address\" contact.</li> <li>Click on OK.</li> </ol> </li> <li>Click on OK to close the previous screen.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/paloalto/","title":"Palo Alto","text":""},{"location":"collectors/services/paloalto/#palo-alto","title":"Palo Alto","text":"<p> The Palo Alto service is under development and only available as part of our beta program.</p> <p>Please contact us if you want to join this beta.</p>"},{"location":"collectors/services/paloalto/#introduction","title":"Introduction","text":"<p>InfraSonar monitors Palo Alto firewalls using the rest API.</p> <p>Also available as probe</p> <p>We also offer a probe to monitor Palo Alto firewalls, this allows you to monitor firewalls using your own InfraSonar appliance.</p>"},{"location":"collectors/services/paloalto/#features","title":"Features","text":""},{"location":"collectors/services/paloalto/#configuration","title":"Configuration","text":""},{"location":"collectors/services/paloalto/#credentials","title":"Credentials","text":"<p>The Palo Alto rest API uses a key which can be generated for a user. </p> <p>Don't use an admin account</p> <p>We strongly recommend creating a read only account specific for monitoring.</p>"},{"location":"collectors/services/paloalto/#get-your-api-key","title":"Get your API key","text":"<p>source</p> <p>To generate an API key, make a GET or POST request to the firewall\u2019s hostname or IP addresses using the administrative credentials and type=keygen:</p> <pre><code>curl -k -X GET 'https://&lt;firewall&gt;/api/?type=keygen&amp;user=&lt;username&gt;&amp;password=&lt;password&gt;'\n</code></pre> <p>Ensure to change</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;username&gt;</code> with the username of your readl-only monitoring user</li> <li><code>&lt;password&gt;</code> with the password of your readl-only monitoring user</li> </ul> <p>A successful API call returns status=\"success\" along with the API key within the key element:</p> <pre><code>&lt;response status=\"success\"&gt;\n&lt;result&gt;\n&lt;key&gt;Your_secret_key_is_here&lt;/key&gt;\n&lt;/result&gt;\n&lt;/response&gt;\n</code></pre> <p>You can test your API key using the following command:</p> <pre><code>curl -k 'https://&lt;firewall&gt;//api/?type=op&amp;cmd=&lt;show&gt;&lt;system&gt;&lt;info&gt;&lt;/info&gt;&lt;/system&gt;&lt;/show&gt;&amp;key=&lt;apikey&gt;'\n</code></pre> <p>Ensure to change:</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;apikey</code> with the previously generated API key</li> </ul>"},{"location":"collectors/services/paloalto/#revoke-api-keys","title":"Revoke API keys","text":"<p>You can revoke all currently valid API keys, in the event one or more keys are compromised. To change an API key associated with an administrator account change the password associated with the administrator account. API keys that were generated before you expired all keys, or a key that was created using the previous credentials will no longer be valid.</p>"},{"location":"collectors/services/paloalto/#configure-api-key-lifetime","title":"Configure API Key Lifetime","text":"<p>Source</p> <p>An optional step is to configure the API Key Lifetime.</p> <p>Be aware though that monitoring fails when the API key is expired!</p>"},{"location":"collectors/services/paloalto/#service-configuration","title":"Service configuration","text":"<ol> <li>Add the paloaltosvc service on your asset</li> <li>Open the paloaltosvc configuration tab</li> <li>Enter the address and API key</li> <li>The API key is encrypted before it is send to the InfraSonar backend</li> <li>Click save</li> </ol>"},{"location":"collectors/services/ping/","title":"Ping","text":""},{"location":"collectors/services/ping/#ping","title":"Ping","text":""},{"location":"collectors/services/ping/#introduction","title":"Introduction","text":"<p>The ping-service is a service variant of our ping-probe.</p> <p>This service send ping requests from our InfraSonar cloud platform to the monitored asset.</p>"},{"location":"collectors/services/ping/#features","title":"Features","text":"<ul> <li>Ping roundtrip monitoring, min and max timing</li> <li>Number of successfully and/or dropped packages</li> </ul>"},{"location":"collectors/services/ping/#probe-configuration","title":"Probe configuration","text":"Property Description Address The address that the probe should ping. Interval Interval should be a value between 1 and 9, The default interval is 1. Count Count should be a value between 1 and 9, the default count is 5 Timeout Timeout in seconds should be a value between 0 and 240, the default timeout is 10 seconds."},{"location":"collectors/services/ping/#check-specifics","title":"Check specifics","text":"<p>Ping returns the <code>minimum time</code> and <code>maximum time</code> as this provides a better insight than just an average ping response.</p> <p>The number of <code>successful</code> and <code>dropped</code> ping packages are also monitored.</p>"},{"location":"guides/infrasonar_appliance_windows/","title":"Running InfraSonar containers on Windows","text":""},{"location":"guides/infrasonar_appliance_windows/#infrasonar-on-windows","title":"InfraSonar on Windows","text":"<p>As InfraSonar uses Docker containers it can be easily deployed on multiple platforms including Microsoft Windows.</p> <p>Docker is a great concept to deploy and maintain Linux applications and services even on a Microsoft Windows host.</p> <p>Checkout the Get Started with Docker guide to learn more.</p> <p>There are two options to accomplish this:</p> <ol> <li>Docker Desktop for Windows (ideal for home-lab and test-scenarios) The official Docker documentation has a great guide on this</li> <li>Use containers with Hyper-V isolation on Windows. We found the Ubuntu documentation to be most useful.</li> </ol> <p>Info</p> <p>We tested this setup on a Windows 11 host running Docker Desktop version 4.17.0</p>"},{"location":"guides/infrasonar_appliance_windows/#deploy-the-infrasonar-containers","title":"Deploy the InfraSonar containers","text":"<p>Step by step  guide: </p> <ol> <li>Open notepad </li> <li>Copy the docker-compose.yml file from our documentation page using the  button</li> <li>Paste the file into the just opened notepad</li> <li>Ensure to set the correct tokens for the agentcore and docker-probe in the <code>docker-compose.yml</code> file</li> <li>Save the file as <code>docker-compose.yml</code>, in this example we use a folder named <code>InfraSonar</code> in de <code>Documents</code> folder.    !!! Be aware notepad has a tendency of adding <code>.txt</code> at the end of the filename.</li> <li>Open a dos box <code>cmd.exe</code></li> <li><code>cd</code> to the folder containing the <code>infrasonar.yml</code> file <pre><code>cd %userprofile%\\documents\\infrasonar\n</code></pre></li> <li>Pull the InfraSonar containers using this compose pull: <pre><code>docker compose pull\n</code></pre> Downloading all layers might take some time, the total size off all layers is 5Gb</li> <li>Once the containers are downloaded you can start the environment using: <pre><code>docker compose up -d\n</code></pre></li> </ol> <p> </p> InfraSonar on Windows"},{"location":"guides/infrasonar_appliance_windows/#tune-vmmem-memory-consumption","title":"Tune Vmmem memory consumption","text":"<p>As shown by this <code>docker stats</code> output resource usage for the InfraSonar probes is very limited. WSL however claims a lot of memory by default.</p> docker stats output<pre><code>CONTAINER ID   NAME                            CPU %     MEM USAGE / LIMIT     MEM %     NET I/O   BLOCK I/O   PIDS\nbbf5f976f370   infrasonar-eaton-probe-1        0.01%     6.105MiB / 1.865GiB   0.32%     0B / 0B   0B / 0B     1\n8c9e76c02422   infrasonar-ping-probe-1         0.04%     8.492MiB / 1.865GiB   0.44%     0B / 0B   0B / 0B     1\n17e811490457   infrasonar-vcenter-probe-1      0.01%     7.301MiB / 1.865GiB   0.38%     0B / 0B   0B / 0B     1\ncd31bd13a236   infrasonar-agentcore-1          0.01%     6.812MiB / 1.865GiB   0.36%     0B / 0B   0B / 0B     2\n69f1e6ccc784   infrasonar-mssql-probe-1        0.01%     6.719MiB / 1.865GiB   0.35%     0B / 0B   0B / 0B     1\ne33dee93aaaa   infrasonar-tcp-probe-1          0.01%     5.312MiB / 1.865GiB   0.28%     0B / 0B   0B / 0B     1\n276f90782d43   infrasonar-santricity-probe-1   0.01%     8.035MiB / 1.865GiB   0.42%     0B / 0B   0B / 0B     1\n72b609c9aa8f   infrasonar-paloalto-probe-1     0.01%     7MiB / 1.865GiB       0.37%     0B / 0B   0B / 0B     1\nae075f468016   infrasonar-docker-agent-1       0.03%     59.76MiB / 1.865GiB   3.13%     0B / 0B   0B / 0B     2\n886cc62a929e   infrasonar-netapp-probe-1       0.01%     6.957MiB / 1.865GiB   0.36%     0B / 0B   0B / 0B     1\nd75b00d7f3ea   infrasonar-esx-probe-1          0.01%     6.383MiB / 1.865GiB   0.33%     0B / 0B   0B / 0B     1\nb44ff0ac2e3a   infrasonar-wmi-probe-1          0.02%     6.992MiB / 1.865GiB   0.37%     0B / 0B   0B / 0B     1\n3d1e2202050c   infrasonar-hpprocurve-probe-1   0.01%     6.938MiB / 1.865GiB   0.36%     0B / 0B   0B / 0B     1\nbe51bb8784ba   infrasonar-unifi-probe-1        0.01%     6.695MiB / 1.865GiB   0.35%     0B / 0B   0B / 0B     1\n696339a2d744   infrasonar-snmp-probe-1         0.01%     10.4MiB / 1.865GiB    0.54%     0B / 0B   0B / 0B     1\n1fa404f5d74d   infrasonar-dns-probe-1          0.01%     5.66MiB / 1.865GiB    0.30%     0B / 0B   0B / 0B     1\n525d977d3fe0   infrasonar-hpilo-probe-1        0.01%     6.898MiB / 1.865GiB   0.36%     0B / 0B   0B / 0B     1\nc33ffae3eaeb   infrasonar-synology-probe-1     0.01%     6.531MiB / 1.865GiB   0.34%     0B / 0B   0B / 0B     1\n8b6b0ceb9038   infrasonar-http-probe-1         0.01%     6.902MiB / 1.865GiB   0.36%     0B / 0B   0B / 0B     1\n</code></pre> <p>Luckily there is an easy fix.</p> <p>Shut down WSL</p> <p>Run this on your command line: <pre><code>wsl --shutdown\n</code></pre></p> <p>Edit your .wslconfig file</p> <p>As the .wslconfig file is a hidden file it is best to open it directly using notepad: <pre><code>notepad %UserProfile%/.wslconfig\n</code></pre></p> <p>If it doesn\u2019t exist yet, just create it.</p> <p>Edit your <code>.wslconfig</code> file to limit memory usage You should have something like this in the file:</p> <pre><code>[wsl2]\nmemory=2GB\n</code></pre>"},{"location":"guides/migration/","title":"Migration scenarios","text":"<p>There are scenarios where a monitored environment needs to be moved to a container belonging to another organization.</p> <p>An example of such a scenario is when a monitored environment will be serviced by another managed services partner.</p> <p>This document outlines our preferred migration approach to ensure uninterrupted monitoring.</p>"},{"location":"guides/migration/#migration-steps","title":"Migration steps","text":"<p>Migrating a monitored environment consists of two steps, which can be performed independently.</p> <ol> <li>Monitoring infrastructure transition.</li> <li>Hierarchy transition.</li> </ol> <p>However, the actual first step is to contact InfraSonar support to assist with the transition.</p> <p>InfraSonar support ensures a hassle-free transition by aligning all parties involved.</p>"},{"location":"guides/migration/#monitoring-infrastructure-transition","title":"Monitoring infrastructure transition","text":"<p>This step involves transiting of the InfraSonar implementation inside the monitored environment; in most cases, this is the monitoring appliance.</p> <p>As this appliance is potentially used to provide other services within the monitored environment, we advise starting with setting up a new appliance (with the agentcore and probes) and transitioning the monitored host to this new agentcore. This process is similar to decommissioning an agentcore.</p> <p>We do not recommend a \"rip and replace\" scenario, as this is not beneficial for the monitored environment.</p> <p>If the leaving and receiving parties are discussing terms and conditions, we recommend the following first:</p> <ol> <li>Deploy a new agentcore infrastructure.</li> <li>Perform a hierarchy transition.</li> <li>Move the monitored hosts to the new agentcore infrastructure.</li> <li>Remove the \"old\" agentcores from InfraSonar.</li> <li>Decommission and remove leaving party appliance(s).</li> </ol> <p>These steps can be performed without any access to the appliance(s) of the leaving party.</p> <p>Suppose the leaving party demands the appliance to be removed prior to the hierarchy transition. In that case, InfraSonar monitoring will most likely be disturbed when the orphaned hosts are transitioned to the new agentcore(s).</p> <p>We strongly encourage a gradual and joint approach, as this ensures uninterrupted monitoring services of the monitored environment.</p>"},{"location":"guides/migration/#hierarchy-transition","title":"Hierarchy transition","text":"<p>A hierarchy transition is the move of a monitored environment from a container of the leaving party to a container of the receiving party. This is an administrative action performed inside the InfraSonar cloud platform.</p> <p>This step can only be performed by InfraSonar support and requires written and signed consent by the owner or its representative of the monitored environment. This consent should be sent via email to support@infrasonar.com.</p> <p>InfraSonar support will contact the parties involved to align the timeline for this transition to ensure optimal service for the monitored party.</p> <p>Warning</p> <p>Before a hierarchy transition, the leaving party should verify if the notes section does not contain references that should not be transitioned.</p> <p>During the hierarchy transition, the following irreversible actions will be performed:</p> <ol> <li>All custom conditions and labels will be removed, as they are the property of the leaving party.</li> <li>All alarms will be removed, as they might contain the usernames of the leaving party.</li> <li>Historical alerts will be removed, as they contain usernames and references to customizations owned by the leaving party.</li> <li>All Channels configuration will be removed.</li> </ol> <p>If you have questions or remarks concerning this section, don't hesitate to contact InfraSonar support.</p>"},{"location":"guides/raspberrypi_dashboard/","title":"Raspberry Pi dashboard","text":""},{"location":"guides/raspberrypi_dashboard/#raspberry-pi-dashboard","title":"Raspberry PI Dashboard","text":"<p>This guide describes how we have setup some Raspberry Pi 3's at Cesbit HQ for our digital dashboards. 1</p>"},{"location":"guides/raspberrypi_dashboard/#intall-rspbian-desktop-edition","title":"Intall Rspbian desktop edition","text":"<p>Install Raspbian Download the \u201cdesktop\u201d edition, this more then sufficient for  our needs.</p> <p>Once your Raspberry Pi has started open the Raspberry Pi Configuration. (Menu \u2192 Preferences \u2192 Raspberry Pi Configuration)</p>"},{"location":"guides/raspberrypi_dashboard/#basic-configuration","title":"Basic configuration","text":"<ol> <li>Set your hostname in the system tab</li> <li>Enable VNC in the interfaces tab</li> <li>Optional: configure WLAN access</li> </ol>"},{"location":"guides/raspberrypi_dashboard/#software-installation","title":"Software installation","text":"<pre><code>sudo apt update &amp;&amp; \\\nsudo apt remove -y apt-listchanges &amp;&amp; \\\nsudo apt full-upgrade -y &amp;&amp; \\\nsudo apt install -y fonts-noto-color-emoji xdotool &amp;&amp; \\\nsudo apt autoremove -y &amp;&amp; \\\nsudo apt autoclean\n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#maintenance-scripts","title":"Maintenance scripts","text":"<p>Three script to ensure carefree maintenance are used. These scripts are stored in the user home-drive, this is default <code>/home/pi</code></p>"},{"location":"guides/raspberrypi_dashboard/#morning","title":"Morning","text":"<p>Thi script updates the Pi and performs a reboot to ensure a fresh start in the morning</p> /home/pi/morning.bash<pre><code>#!/usr/bin/env sh\n\n# A daily upgrade is good hygiene.\nsudo apt update &amp;&amp; sudo apt full-upgrade -y &amp;&amp; sudo apt autoremove -y &amp;&amp; sudo apt autoclean\n\n# A daily restart mitigates browser memory leaks, and forces the screen to turn on\nsudo reboot now\n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#boot","title":"Boot","text":"<p>This script performs some cleanup actions after a reboot en ensure the dashboard is loaded upon a fresh start.</p> /home/pi/boot.bash<pre><code>#!/usr/bin/env sh\n\n# Disable screensaver. Varies across Pi models &amp; Raspbian versions; might be outdated.\n# Google \"raspberry disable suspend screensaver\" for help\n\nxset s off\nxset -dpms\nxset s noblank\n\n# Move the mouse cursor out of the way!\nxdotool mousemove 0 0\n\n# Avoid \"Chrome didn't shutdown correctly\" notification on unclean shutdown\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/' ~/.config/chromium/'Local State'\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/; s/\"exit_type\":\"[^\"]\\+\"/\"exit_type\":\"Normal\"/' ~/.config/chromium/Default/Preferences\n\n# Start Chromium, in fullscreen \"kiosk\" mode, and disabling update notifications\nchromium-browser --kiosk --check-for-update-interval=31536000 'https://app.infrasonar.com/dashboard'\n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#evening","title":"Evening","text":"<p>This script turns off the display and kills the chrome browser to conserve valuable resources.</p> /home/pi/evening.bash<pre><code>#!/usr/bin/env sh\n\n# Shutdown screen, to save the planet\nDISPLAY=:0 xset dpms force off\n\n# Don't consume dashboard resources off office hours, to save the planet\npkill chromium\n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#schedule-the-scripts","title":"Schedule the scripts","text":"<p>Ensure all three scripts are executable:</p> <pre><code>chmod +x /home/pi/boot.bash \nchmod +x /home/pi/morning.bash \nchmod +x /home/pi/evening.bash \n</code></pre> <p>Add the following line at the end of the auto start script <code>/etc/xdg/lxsession/LXDE-pi/autostart</code> to ensure the dashboard is loaded upon boot: <pre><code>@/home/pi/boot.bash\n</code></pre></p> <p>and remove the following line from this file: <pre><code>@xscreensaver -no-splash\n</code></pre></p> <p>Use the following command to ensure executing of the morning and evening script using cron:</p> <pre><code>(crontab -l ; echo \"0 7 * * 1-5 /home/pi/morning.bash\") | crontab -\n(crontab -l ; echo \"0 18 * * 1-5 /home/pi/evening.bash\") | crontab -\n</code></pre> <p>If you want to edit the crontab you can do so using <code>crontab -e</code></p> <p>The website [crontab guru]9https://crontab.guru/) can be very helpfull to understand the crontab notation</p>"},{"location":"guides/raspberrypi_dashboard/#setup-the-dashboard","title":"Setup the dashboard","text":"<p>last step is to login to infrasonar and configure the dashboard to your liking.</p> <p>Note</p> <p>InfraSonar stores its dashboard configuration in local browser storage allowing you to setup multiple different dashboards using one account.</p>"},{"location":"guides/raspberrypi_dashboard/#enjoy","title":"Enjoy","text":"<p>That's all enjoy your new dashboard!</p> <p>Don't forget to send us a picture for our wall of dashboards fame!</p> <p>support+dashboard@infrasonar.com</p> <ol> <li> <p>Based upon the excellent work done by unito \u21a9</p> </li> </ol>"},{"location":"guides/remote_support/","title":"Remote support","text":""},{"location":"guides/remote_support/#tmate","title":"tmate","text":"<p>We opt to use tmate to provide remote support as it is easy to use, fully open source, and allows TeamViewer-like access to the terminal.</p>"},{"location":"guides/remote_support/#installation","title":"Installation","text":"<p>Tmate comes preinstalled on our appliances, but if you have set up your environment manually, you might need to install tmate first.</p> <p>On Debian / Ubuntu systems the installation is straightforward:</p> <pre><code>sudo apt-get install tmate\n</code></pre> <p>For other distributions, follow the guides provided at the tmate website</p>"},{"location":"guides/remote_support/#usage","title":"Usage","text":"<p>Just type <code>tmate</code> while connected via ssh or in the console of your virtual appliance.</p> <p>You will be greeted with a screen like this:</p> <pre><code>Tip: if you wish to use tmate only for remote access, run: tmate -F                                                                                                                                                                      [0/0]\nTo see the following messages again, run in a tmate session: tmate show-messages\nPress &lt;q&gt; or &lt;ctrl-c&gt; to continue\n---------------------------------------------------------------------\nConnecting to ssh.tmate.io...\nNote: clear your terminal before sharing readonly access\nweb session read only: https://tmate.io/t/ro-generated_ro_id\nssh session read only: ssh ro-generated_ro_id@lon1.tmate.io\nweb session: https://tmate.io/t/generated_id\nssh session: ssh generated_id@lon1.tmate.io\n</code></pre> <p>Send our support engineer this information via a secure channel and ensure access is only used by our support engineer by observing the screen. If in doubt, exit the session using the <code>exit</code> command or by pressing <code>ctrl-d</code></p>"},{"location":"integrations/","title":"Overview","text":"<p>All kinds of applications are or can be integrated with InfraSonar. This way we can offer your organization as much functionality as possible without you having to stop using your favorite applications. Here's how to integrate your favorite application(s) with InfraSonar.</p> <p> DutyCalls is a notification routing tool made to make events more visible to its audience. Using DutyCalls in conjunction with InfraSonar offers a great solution to route alerts to the on-call staff.</p> <p> ConnectWise Manage is a PSA solution for MSP business. Our integration offers easy creation of ConnectWise Manage tickets from InfraSonar alerts.</p>"},{"location":"integrations/connectwise_manage/","title":"ConnectWise","text":"<p>InfraSonar has a specific API endpoint to integrate with ConnectWise Manage.</p> <p>This integration allows an InfraSonar environment to be \"mapped\" to a ConnectWise Manage company, thus allowing the automatic creation of ConnectWise Manage tickets from InfraSonar alerts.</p> <p>If you want to use this integration, please get in touch with InfraSonar support for assistance.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/","title":"DutyCalls","text":"<p>We assume you have set up the DutyCalls integration as described here</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#infrasonar-configuration","title":"InfraSonar configuration","text":"<p>Using the InfraSonar channel configuration, you can configure and finetune which alerts are passed on the DutyCalls.</p> <p>Configuration is possible on these three levels:</p> <ul> <li>Severity, allows you to specify from which severity level an alert is passed to DutyCalls.</li> <li>Conditions, allows you to configure which conditions are allowed or are rejected to pass on to DutyCalls.</li> <li>Hosts allows you to configure for which hosts you want to receive DutyCalls notifications.</li> </ul> <p>It is also possible to suppress specific conditions from sending an alert to DutyCalls.</p> <p>Best practice.</p> <ul> <li>Only send alerts with the severity level alert or higher.</li> <li>Use reject rules but sparsely.</li> <li>Use configure specific hosts only when absolutely required.</li> </ul>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#setup-your-team","title":"Setup your team","text":"<p>Lead by example</p> <p>DutyCalls is especially useful for self-organizing teams.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#add-team-members","title":"Add team members","text":"<ol> <li>Let your team members log on to DutyCalls to ensure the platform recognizes them.</li> <li>Invite your team  members to your workspace.</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#manage-exceptions","title":"Manage exceptions","text":"<p>DutyCalls uses manager alerts to manage exceptions if the regular operation does not go as expected.</p> <p>A DutyCalls manager can set up Manager alerts per workspace or per channel; the best practice is to set these up per workspace and only deviate if necessary.</p> Alert Default behavior Unacknowledged tickets Notifies if a ticket is not acknowledged in 1 hour Acknowledged tickets Notifies if an acknowledged is not modified in 1 hour Open tickets Notifies when a ticket is open for more then 2 hours. <p>Another critical alert to configure is the minimum number of active subscribers, this must be done per channel.</p> <p>In most scenarios, you would want at least one subscriber per channel, but for high-profile environments, it might be better to up the number to ensure swift follow-up.</p>"},{"location":"integrations/dutycalls/dutycalls-best-practices/#subscriber-notifications","title":"Subscriber notifications","text":"<p>DutyCalls can notify via email or in-app notifications.</p> <p>SMS and phone notifications are available using an optional license.</p> <p>Best practice.</p> <p>Using phone notifications ensures the best response from engineers as in-app or SMS notifications tend to get unnoticed.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/","title":"DutyCalls","text":"<p>Do you want to stay informed about the latest InfraSonar alerts directly in DutyCalls? Make use of the ready-made DutyCalls integration.</p> <p>This guide helps you to to get started with DutyCalls.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#dutycalls-configuration","title":"DutyCalls configuration","text":"<p>Implementing DutyCalls is a four step approach.</p> <pre><code>flowchart LR\n    A((Create DutyCalls &lt;br&gt; account))--&gt;B\n    B((Create DutyCalls &lt;br&gt; workspace))--&gt;C\n    C((Create DutyCalls &lt;br&gt; source))--&gt;D((Create DutyCalls &lt;br&gt; Channel))</code></pre>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-account","title":"Create a DutyCalls account","text":"<p>Creating a DutyCalls account is the first step. The DutyCalls sign-up documentation provides additional information on account creation.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-workspace","title":"Create a DutyCalls workspace","text":"<p>A DutyCalls workspace is usually a representation of a company or department.</p> <p>Steps for creating a workspace:</p> <ol> <li>Enter the workspace name</li> <li>Set the correct timezone</li> <li>Provide an optional icon for your workspace (Only icons of the PNG format are accepted and the maximum dimensions are 128 x 128 pixels. The width and height must also be equal to each other.)</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-source","title":"Create a DutyCalls source","text":"<p>For InfraSonar we use DutyCalls custom API mapping to format the data toward a compatible DutyCalls data source</p> <p>InfraSonar specific steps:</p> <ol> <li>Open the previously created workspace</li> <li>Select Services from the right hand menu</li> <li>Click the Add service button</li> <li>Provide a name for the service e.g. InfraSonar and click next</li> <li>Select yes when asked if you want to use a predefined template and select the InfraSonar template</li> <li>Click Add to continue</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#create-a-dutycalls-channel","title":"Create a DutyCalls channel","text":"<p>A DutyCalls channel must be linked to the source created in the previous step.</p> <ol> <li>Browse to the previously created service</li> <li>Click the Add channel button</li> <li>Provide a name for your channel, we suggest to keep the channel name and environment name the same. Setting up a channel per environment is our best practice.</li> <li>Choose the manager for this channel, the manager get's notified if something is amiss within the channel</li> <li>Select the previously created InfraSonar service</li> <li>Set the minimum number of active subscribed to your organizations needs, when this is your first setup you might want to set this to 1</li> <li>Click Add</li> <li>Observe the channel and note the No. Active Subscribers is <code>0/1</code>, click subscribe to retrieve notifications for this channel</li> </ol> <p>DutyCalls has now been setup, next step is to configure InfraSonar to integrate with DutyCalls.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#infrasonar-configuration","title":"InfraSonar configuration","text":"<p>To complete the setup and receive alerts in DutyCalls, some additional configuration has to be done in InfraSonar.</p> <p>This step requires the DutyCalls Service credentials.</p>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#retrieve-dutycalls-service-credentials","title":"Retrieve DutyCalls Service credentials","text":"<ol> <li>Open DutyCalls</li> <li>Select Services from the left hand menu</li> <li>Click the Setup icon from the service you have setup for InfraSonar</li> <li>Click Send security code; this wil send a code to the email address you are logged on with in DutyCalls.</li> <li>Enter the received security code</li> <li>Make note od the username and password</li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#source-configuration","title":"Source configuration","text":"<p>The first step is to add the source you just created to the desired InfraSonar container.</p> <ol> <li>Select the container for which you would like to configure DutyCalls.</li> <li>Click the DutyCalls icon in the left hand menu, this should open the DutyCalls configuration page</li> <li>Click on the Configure source button.</li> <li>Enter the previously retrieved username as Consumer key and the password as Consumer secret and click on the Save button.    </li> </ol>"},{"location":"integrations/dutycalls/dutycalls-getting-started/#rules-configuration","title":"Rules configuration","text":"<p>The second step is to add a rule .....</p> <p>you created to the container you selected in the previous step.</p> <ol> <li>Select the Channels option from the left-hand menu in InfraSonar</li> <li>Click the Add channel button to add a DutyCalls channel</li> <li>Provide the correct Channel name as previously created in DutyCalls</li> <li>Enter an optional description</li> <li>Select the correct DutyCalls source</li> <li> <p>Optionally set <code>condition</code> and <code>host</code> filters, to filter the alerts that will be forwarded to DutyCalls.</p> <p></p> </li> </ol> <p>The configuration has now been completed. Alerts related to the configured InfraSonar container will be posted in the configured DutyCalls channel.</p>"},{"location":"introduction/getting_started/","title":"Getting started","text":""},{"location":"introduction/getting_started/#getting-started-with-infrasonar","title":"Getting started with InfraSonar","text":""},{"location":"introduction/getting_started/#familiarize","title":"Familiarize","text":"<p>We recommend setting up a small-scale testing environment and using this documentation to guide you on your journey to become acquainted with InfraSonar and its terminology.</p>"},{"location":"introduction/getting_started/#implementation-steps","title":"Implementation steps","text":"<p>We outline the implementation steps for an agent-less implementation as this is a non-intrusive way to get to know InfraSonar.</p>"},{"location":"introduction/getting_started/#agent-less-implementation","title":"Agent-less implementation","text":"<p>Implementing a basic InfraSonar configuration is easy because InfraSonar can be deployed agent-less and thus leaves no footprint on the monitored infrastructure.</p> <p>The first step is to deploy an InfraSonar appliance</p> <ol> <li>Deploy the InfraSonar appliance    Deploy an InfraSonar appliance in your infrastructure.</li> <li>Add assets    Use our webapp to add assets and collectors per asset to your container.</li> <li>Add labels Label your assets to apply our pre-defined conditions.</li> </ol> <p>Probe configuration and credentials</p> <p>Some probes require you to configure credentials, see our probe and credentials specific documentation for more information.</p>"},{"location":"introduction/getting_started/#implementation-support","title":"Implementation support","text":"<p>Feel free to reach out to us for support when implementing/evaluating InfraSonar.</p> <p>Our implementation Consultants have years of experience and are keen to show you around and get the best out of our platform.</p>"},{"location":"introduction/platform/","title":"Platform","text":"<p>This section provides an overview of the InfraSonar monitoring platform.</p>"},{"location":"introduction/platform/#architectural-overview","title":"Architectural overview","text":"<p>An architectural overview of the InfraSonar platform</p> <p></p> <p>InfraSonar can be broken down in three area's:</p> <ol> <li>Collectors;</li> <li>InfraSonar cloud;</li> <li>InfraSonar application.</li> </ol>"},{"location":"introduction/platform/#collectors","title":"Collectors","text":"<p>Within InfraSonar, we identify three concepts for collecting data:</p> <ul> <li>Agents   Agents run autonomously on an endpoint and send data straight to the InfraSonar platform.</li> <li>Probes   Probes query an endpoint using a specific protocol.</li> <li>Services   Services monitor an endpoint and report the status to multiple containers. E.g. Microsoft 365 Service Health Status</li> </ul>"},{"location":"introduction/platform/#infrasonar-cloud","title":"InfraSonar cloud","text":"<p>The InfraSonar cloud platform is hosted on the Google Cloud Platform.</p> <p>Data from a monitored environment is received and processed in the InfraSonar cloud platform on what we call the Hubs. These Hubs evaluate the data against configured conditions and store received time series data in SiriDB. Received state data is kept in memory by the Hubs.</p>"},{"location":"introduction/platform/#infrasonar-application","title":"InfraSonar application","text":"<p>The InfraSonar application is a web based user interface which accessible using any modern web browser.</p> <p>The application can send messages to end-users using email or Dutycalls.</p> <p>See our application section in the documentation for more information</p>"},{"location":"introduction/support/","title":"Support","text":""},{"location":"introduction/support/#support","title":"Support","text":"<p>How can we help you?</p>"},{"location":"introduction/support/#services","title":"Services","text":""},{"location":"introduction/support/#implementation-services","title":"Implementation services","text":"<p>Implementing a monitoring solution can be a challenging task.</p> <p>Our implementation consultants have a lot of experience in not only implementing InfraSonar but also on helping your organization into accepting and eventually embracing a new way of working.</p>"},{"location":"introduction/support/#support_1","title":"Support","text":"<p>Support is only a phone-call, slack message or email away.</p>"},{"location":"introduction/support/#custom-development","title":"Custom development","text":"<p>A InfraSonar is an open platform adding custom probes, agents and or services to our platform is easily done.</p> <p>Feel free to contact us to discuss your monitoring needs.</p>"},{"location":"introduction/support/#analysis-support","title":"Analysis support","text":"<p>Analyzing monitoring data and combining metrics to create custom dashboards to offer an in-depth view of your monitored infrastructure is one off InfraSonors unique features.</p> <p>If you have any specific requirements we can jointly figure out what would we the best way to setup InfraSonar dashboards.</p>"},{"location":"introduction/support/#contact-details","title":"Contact details","text":"<p> support@infrasonar.com</p> <p> +31 85 876 8733</p>"},{"location":"introduction/support/#availability","title":"Availability","text":"<p>We are a European company based in the Netherlands. Our general availability is from Monday to Friday between 08:00  and 17:00  (CET)1.</p> <ol> <li> <p>Different times are possible by appointment.\u00a0\u21a9</p> </li> </ol>"},{"location":"introduction/terminology/","title":"Terminology","text":""},{"location":"introduction/terminology/#terminology","title":"Terminology","text":"<p>Terminology in IT is always a bit of a challenge   we try to make it easier by outlining what we mean with curtain terms.</p>"},{"location":"introduction/terminology/#terminology-overview","title":"Terminology overview","text":"Term Description Agentcore Central component in a monitored infrastructure that acts as a relay between probes and the InfraSonar cloud. Agents A standalone InfraSonar component that can send monitoring data to InfraSonar via the API API The API allows users to perform automated access using a personal access token. Appliance A dedicated (virtual) Linux appliance for InfraSonar. Asset A monitored network component in an environment. Collectors These perform the actual measurement and are tailored per monitored component. InfraSonar knows three types of collectors: probes for agentless monitoring, agents for standalone or event driven monitoring and services for remote monitoring from the cloud. Container Used to organize environments and authorization in those environments. Frontend These are the webservers hosting the UI for end users to access InfraSonar. Hub State is stored here in memory, and logic is performed when new monitoring data arrives. SiriDB The database used for storing timeseries data with a long term retention."},{"location":"introduction/what_is_Infra_Sonar/","title":"What is InfraSonar","text":""},{"location":"introduction/what_is_Infra_Sonar/#what-is-infrasonar","title":"What is InfraSonar","text":"<p>InfraSonar is the brainchild an IT infrastructure specialist and a great software development team with a passion for scalable software solutions who joined forces with an IT service provider to create an easy-to-maintain, uniform monitoring platform.</p> <p>InfraSonar comes out of the box with many predefined conditions based on years of experience and best practices.</p> <p>This predefined set of conditions and agent-less monitoring capabilities make for an easy and non-intrusive rollout with minimum effort.</p> <p>Single source of truth</p> <p>InfraSonar's detailed data collection allows it to serve as your organization's single \"source of truth.\"</p>"},{"location":"introduction/what_is_Infra_Sonar/#infrasonar-capabilities","title":"InfraSonar capabilities","text":"<ul> <li>State monitoring   This allows us to monitor whether the status is still in the desired state, detect state changes and even detect missing items such as volumes, services, and software.</li> <li>Performance monitoring   Monitors the current state and notifies when a threshold is reached.   Performance data is stored in our time series database SiriDB for analysis over time.</li> <li>Analysis   Performance data and hit alerts (open &amp; closed) are used for analysis over time.</li> </ul>"},{"location":"introduction/what_is_Infra_Sonar/#history","title":"History","text":"<p>InfraSonar is de successor of Oversight an IT infrastructure monitoring solution which started out in 2013 as a monitoring solution for IT service providers.</p> <p>With InfraSonar we took the lessons learned and made a more versatile and resistent platform not only suitable for IT environments but for any platform were state and performance monitoring are required.</p>"},{"location":"privacy-security/privacy/","title":"Privacy","text":"<p>Protecting the privacy of the InfraSonar Platform and its customers is a top priority. This page describes what we do and what you as a user can do to guarantee this privacy as well as possible.</p>"},{"location":"privacy-security/privacy/#data-control","title":"Data control","text":"<p>Customer data is your data, not InfraSonar\u2019s. We only process your data according to your agreement(s). It is, therefore, also possible to manage and delete all user-related information.</p>"},{"location":"privacy-security/privacy/#data-access-and-restrictions","title":"Data Access and Restrictions","text":"<p>Only a minimum number of InfraSonar employees have access to user data to ensure user privacy.</p> <p>We recommend following the same policy in your InfraSonar environments. Only give users access to the resources they need.</p>"},{"location":"privacy-security/privacy/#data-collection-and-use","title":"Data collection and use","text":"<p>We are transparent about data collection and use. We are committed to transparency, compliance with regulations like the GDPR, and privacy best practices. That is why we only collect data necessary for the platform's functioning. It is up to the user to determine which monitoring data needs to be collected.</p> <p>In addition, we never sell customer data or service data to third parties.</p>"},{"location":"privacy-security/privacy/#data-retention","title":"Data retention","text":"<p>InfraSonar has the following different retention periods for its data.</p>"},{"location":"privacy-security/privacy/#configuration-data","title":"Configuration data","text":"<p>Configuration data such as labels, conditions and authorizations are stored while configured.</p> <p>When a configuration change is made, we don't retain any history in our logging and backups.</p>"},{"location":"privacy-security/privacy/#time-series-data","title":"Time series data","text":"<p>Time series data is stored in SiriDB, part of the InfraSonar cloud platform.</p> <ul> <li>For actively monitored assets/hosts we store performance data with a retention period of 66 weeks (15 months).</li> <li>Time series that have not received any data for three weeks are purged from the database, as these are stale metrics.</li> </ul>"},{"location":"privacy-security/privacy/#closed-alerts","title":"Closed alerts","text":"<p>Closed alerts have a retention period of 8 weeks.</p>"},{"location":"privacy-security/privacy/#state-data","title":"State data","text":"<p>State data is kept in memory and is considered volatile.</p>"},{"location":"privacy-security/privacy/#backup-retention","title":"Backup retention","text":"<ul> <li>SiriDB backups have a four day retention period.</li> <li>Configuration data backups have an eight weeks retention period.</li> </ul>"},{"location":"privacy-security/privacy/#data-localization","title":"Data localization","text":"<p>All data collected by InfraSonar is stored in the European Union in accordance with the GDPR.</p>"},{"location":"privacy-security/security_considerations/","title":"Security considerations","text":"<p>InfraSonar is an infrastructure monitoring platform as a service.</p> <p>This document outlines some security considerations to take into account when deploying InfraSonar.</p> <p>Our focus and efforts are aimed at retrieving monitoring data, and sending the collected data securely to the InfraSonar cloud platform for further analysis.</p> <p>Note</p> <p>InfraSonar is not an IT automation tool and cannot make changes to a monitored environment. However, some InfraSonar implementations use the InfraSonar API to integrate with an on-premises automation solution such as Ansible, ensuring a single point of truth for configuration management.</p>"},{"location":"privacy-security/security_considerations/#context","title":"Context","text":"<p>To properly read this security considerations page, it is essential to keep the following context in mind:</p> <ul> <li>InfraSonar monitoring data is collected through:</li> <li>Probes running in a Docker container on the monitoring appliance.</li> <li>Custom collectors are sending data via the InfraSonar API.</li> <li>Collected data is sent to the InfraSonar platform for further analysis and user consumption in the InfraSonar frontend.</li> </ul> <p>The platform guide explains this architecture further.</p>"},{"location":"privacy-security/security_considerations/#infrasonar-design-principles","title":"InfraSonar design principles","text":"<p>Our development team adheres to these principles:</p> <ol> <li>Use least privilege accounts to access monitoring data when possible.</li> <li>Use vendor-documented standards such as API or management protocols to query data.</li> <li>When credentials are required, these should be stored encrypted on the monitoring appliance.</li> <li>The customer or managed service provider controls access to InfraSonar data.</li> <li>Avoid third-party libraries when possible.</li> <li>Set up security scanners in our version control system for all projects.</li> <li>Security-related issues take precedence over all other matters.</li> </ol>"},{"location":"privacy-security/security_considerations/#the-three-states-of-data","title":"The three states of data","text":"<p>InfraSonar processes massive amounts of monitoring data stored for historical analysis, such as trending. We strive to treat all collected data as if it were sensitive data.</p> <p>InfraSonar data can be in one of 3 so-called states.</p> Data at rest <p>Data currently not being accessed, which is stored on a physical or logical medium.</p> <p>InfraSonar stores data in it\u2019s cloud platform on AES256 encrypted disks. The appliance itself has no disk encryption but uses file-based encryption where possible.</p> Data in transit <p>Data that \u201ctravels\u201d between devices. The most straightforward example is emails that are in transit.</p> <p>All data sent between InfraSonar services is SSL encrypted. Data collected by probes is potentially unencrypted, as not all technologies used to collect monitoring data use encryption. SNMP v2c is an example where data is sent without any encryption.</p> Data in use <p>Data actively in use by one or more applications for analysis or for access/consumption by end-users.</p> <p>When data is in use, it needs to be in a readable format; this is especially true for data consumed by end-users. Automated data processing takes place in the datacenters, which have several certifications related to security measurements. These include, but are not limited to:</p> <ul> <li>ISO/IEC 27001</li> <li>ISO/IEC 27017</li> <li>ISO/IEC 27018</li> <li>SOC 2</li> <li>SOC 3</li> </ul> <p>The InfraSonar appliance has no special security measures other than those of the environment in which the appliance is used to protect data.</p>"},{"location":"privacy-security/security_considerations/#data-classification","title":"Data classification","text":"<p>We use the following data classification for InfraSonar and InfraSonar related data:</p>  Restricted <ul> <li>Configuration data stored on the monitoring appliance, as this contains (encrypted) credentials.</li> <li>Log data stored on the appliance, as this potentially contains user ids.</li> <li>InfraSonar accounts lists.</li> </ul>  Sensitive <ul> <li>Time series data and performance metrics collected on monitored assets / hosts.</li> <li>State data.</li> <li>InfraSonar platform source code.</li> <li>CRM data.</li> <li>Contracts.</li> </ul>  Internal <ul> <li>InfraSonar back office, such as invoices.</li> <li>InfraSonar support incidents.</li> <li>InfraSonar Slack and email communication.</li> </ul>  Public <ul> <li>InfraSonar open source code:<ul> <li>SiriDB - Time series database used in InfraSonar.</li> <li>ThingsDB - NoSQL database used in InfraSonar.</li> <li>InfraSonar probes.</li> </ul> </li> <li>InfraSonar documentation.</li> </ul>"},{"location":"privacy-security/security_considerations/#monitoring-appliance","title":"Monitoring appliance","text":"<p>The monitoring appliance on which the InfraSonar probes and InfraSonar agentcore are deployed requires extra attention, as many vendors do not support a 'least privilege' approach to collecting monitoring data. As such, the probes often require the use of highly privileged accounts and sometimes even root or administrator accounts.</p> <p>Our recommendations:</p> <ul> <li>Set up SSH Passwordless Authentication.</li> <li>Disable User SSH Passwordless Connection Requests.</li> <li>Disable SSH Root Logins.</li> <li>Use SSH Protocol 2.</li> <li>Set SSH Connection Timeout Idle Value.</li> <li>Limit SSH Access to Certain Users.</li> <li>Configure a Limit for Password Attempts.</li> <li>Update the underlying Linux operating system frequently.</li> <li>Perform a daily pull command for new InfraSonar containers.</li> <li>Use the <code>latest</code> tag for InfraSonar containers unless otherwise specified by InfraSonar support.</li> <li>If your company requires version pinning, please let us know so we can explicitly notify you when we release probe updates.</li> <li>Frequently update the password used by InfraSonar probes.</li> <li>Use disk encryption when possible.</li> </ul>"}]}