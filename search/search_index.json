{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Welcome to InfraSonar","text":"<p>A powerful infrastructure monitoring platform as a service.</p> <p></p>"},{"location":"#deep-it-ot-infrastructure-monitoring","title":"Deep IT &amp; OT Infrastructure Monitoring","text":"<p>InfraSonar, developed and maintained by Cesbit, a seasoned Dutch software development company, provides comprehensive IT and OT infrastructure monitoring. Leveraging years of expertise in handling large data volumes and delivering robust IT solutions, InfraSonar offers unparalleled insight into your infrastructure's health and performance.</p>"},{"location":"#key-features","title":"Key Features","text":"<ul> <li>Effortless Data Collection: Minimize your monitoring footprint with our agentless approach, gain direct insight using our agents or collect data as a service leveraging our cloud collection capabilities.</li> <li>Granular State &amp; Performance Monitoring: Gain detailed visibility into every aspect of your infrastructure's state and performance.</li> <li>Real-Time Anomaly Detection: Instantly identify deviations and potential issues with our effortless real-time anomaly detection.</li> <li>Clear and Powerful Conditions: Define precise monitoring parameters with our intuitive and powerful condition system.</li> <li>True Multi-Tenancy: Perfect for Managed Service Providers (MSPs), our solution offers robust multi-tenant capabilities.</li> </ul> <p>InfraSonar's pre-configured conditions, built on industry best practices and extensive experience, combined with its agentless capabilities, enable a swift, non-intrusive, and efficient deployment.</p>"},{"location":"#our-journey-from-oversight-to-infrasonar","title":"Our Journey: From Oversight to InfraSonar","text":"<p>InfraSonar's story began in 2013 as \"Oversight,\" the vision of a senior software developer (Jeroen) and an IT architect (Rik), driven by a shared passion for high-quality software solutions.</p> <p>In April 2023, we launched a completely redesigned platform, InfraSonar, building upon the lessons learned from our earlier iteration. This evolution resulted in a more versatile and resilient platform, capable of monitoring not only traditional IT environments but also any system requiring detailed state and performance insights.</p>"},{"location":"changelog/","title":"Changelog","text":""},{"location":"changelog/#0212","title":"0.2.12","text":"<p>_ Wednesday 03 Aug 2022 @ 22:00 CET</p> <ul> <li>Minor Enodo updates.</li> </ul>"},{"location":"changelog/#0211","title":"0.2.11","text":"<p>_ Monday 01 Aug 2022 @ 21:00 CET</p> <ul> <li>Added Enodo.</li> <li>No more Guest probes.</li> </ul>"},{"location":"changelog/#0210","title":"0.2.10","text":"<p>_ Friday 15 Jul 2022 @ 13:00 CET</p> <ul> <li>Improved DNS probe dialog.</li> <li>Removed Lift, SQL SSH, VmwareGuest, WinRm and XenGuest probes.</li> <li>Added feedback for failed reports.</li> <li>Fixed adding a user with same email address but different auth provider.</li> <li>Fixed a few spelling mistakes.</li> <li>Added TcpProbe.</li> <li>Added WMI Check for files option using the <code>cimDatafiles</code> class.</li> <li>Added services-name to the windows services widget.</li> </ul>"},{"location":"changelog/#029","title":"0.2.9","text":"<p>_ Tuesday 17 May 2022 @ 17:00 CET</p> <ul> <li>Fix saving the order of metrics in a grid.</li> <li>Changed caption column to description in application widget.</li> </ul>"},{"location":"changelog/#028","title":"0.2.8","text":"<p>_ Monday 16 May 2022 @ 21:00 CET</p> <ul> <li>Added <code>allowRedirects</code> option to the http probe configuration.</li> <li>Added <code>docker</code> icon.</li> <li>Removed <code>text</code> widget.</li> <li>Added Azure probe.</li> <li>Allow <code>agents</code> to be added in InfraSonar.</li> <li>Fix display <code>probe</code> address.</li> <li>Fix filter for assigned alerts.</li> <li>Fix displaying the correct metrics in a widget.</li> <li>Fix application widget by using description field instead of caption.</li> <li>Fix closing a legend when moving mouse focus out the widget.</li> <li>No longer close a widget edit dialog when clicking outside the editor.</li> </ul>"},{"location":"changelog/#027","title":"0.2.7","text":"<p>_ Tuesday 11 Apr 2022 @ 21:00 CET</p> <ul> <li>Upgraded packages.</li> <li>Fixed broken widget when switching between hosts.</li> <li>Enable search on host-name in alerts and closed-alerts page.</li> <li>Added pingProbe and removed psProbe.</li> <li>Added httpProbe.</li> <li>Added nmapProbe (v2.x.x).</li> <li>Fixed broken check interval select box.</li> <li>Fixed broken boolean probe switch.</li> <li>Added probe configuration checks on asset edit.</li> <li>Fixed broken filter component for <code>True</code> values in data table.</li> <li>Re-direct to the requested link after sign-in.</li> <li>Fixed typo in subscriptions.</li> <li>Fixed overlay bug on drop-down-arrows in \"edit widget\" dialog.</li> <li>Fixed bug with \"Add widget\" button when a asset has no label.</li> <li>Changed the no-environment page for new users and added copyright text.</li> <li>Changed the link to \"Contact support\".</li> <li>Fixed bug with resetting the check interval.</li> <li>No longer allow to change dialog tabs while providing a reason for change.</li> <li>Remove missing network probe warning message as this is no longer a best practice.</li> </ul>"},{"location":"changelog/#026","title":"0.2.6","text":"<p>_ Thursday 17 Feb 2022 @ 21:00 CET</p> <ul> <li>Fixed CSV download for InfraSonar Accounts (sysadmin).</li> <li>Add \"show more\" when more text-lines are available in logging message.</li> <li>Fixed missing email address at the no-environments page.</li> <li>Changed menu behavior at probe page (solves highlight last item).</li> <li>Added icon for Pure Storage.</li> <li>Prevent view changes of probe page on refresh.</li> </ul>"},{"location":"changelog/#025","title":"0.2.5","text":"<p>_ Tuesday 01 Feb 2022 @ 21:30 CET</p> <ul> <li>Fixed bug with incognito browsing.</li> </ul>"},{"location":"changelog/#024","title":"0.2.4","text":"<p>_ Tuesday 01 Feb 2022 @ 20:00 CET</p> <ul> <li>Fixed bug in filter host specific closed alerts.</li> <li>Changed ordering on first click in a grid.</li> <li>Fixed bug in host filter on alerts page (not showing the name of the host).</li> <li>Switched to FireBase authentication.</li> <li>Added support for Microsoft Azure (work) accounts.</li> <li>Switched to NPM 8.x for website building.</li> </ul>"},{"location":"changelog/#023","title":"0.2.3","text":"<p>_ Wednesday 12 Jan 2022 @ 22:00 CET</p> <ul> <li>Fixed bug with filter selection (not visible) in grid.</li> <li>Fixed bug with user container view when having no users.</li> <li>Fixed minor widget editor bugs.</li> <li>Changed filter and sort icon appearance to make active filter or order visible.</li> </ul>"},{"location":"changelog/#022","title":"0.2.2","text":"<p>_ Friday 24 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed column sorting on container view.</li> <li>Fixed filter outline with little space to render the filter selection.</li> <li>Fixed missing condition options in expression builder.</li> <li>Added Last seen column to host overview as alternative to the Active column.</li> </ul>"},{"location":"changelog/#021","title":"0.2.1","text":"<p>_ Wednesday 22 Dec 2021 @ 20:00 CET</p> <ul> <li>Added environment to Breadcrumbs bar when the name equals the parent container.</li> <li>Fixed access check for modifying Views and return with an appropriate message if not.</li> <li>Fixed spacing between name and body in an alert message.</li> <li>Removed incorrect icon in front of Agent-core in host overview.</li> </ul>"},{"location":"changelog/#020","title":"0.2.0","text":"<p>_ Tuesday 21 Dec 2021 @ 20:00 CET</p> <ul> <li>Updated UI using the Material design language.</li> <li>Added Light/Dark mode.</li> <li>Added a dashboard which shows useful information and shortcuts.</li> <li>Added the Tasks overview. In this overview, Admins can see all tasks related to the current environment.</li> <li>The Closed alerts and the Search closed alerts pages are merged into a single page.</li> <li>Added the option to \"star\" Views and Environments as favorite.</li> <li>Added a \"Share\" button to Views.</li> <li>Added \"click-on-tag\" for \"copy-to-clipboard\".</li> <li>Merged the container and environment logging into one page.</li> <li>Added a \"Task\" column and a \"Parent\" column to log entries.</li> <li>Replaced the counter with tags in the Conditions page.</li> <li>Authentication provider is now implied when adding a user to a container.</li> <li>Improved feedback when submitting invalid forms.</li> <li>Added specific icons to all Hosts.</li> <li>Added \"No environments found\" screen, for users without container access.</li> <li>Added time selection to the statistics page.</li> <li>Added the \"Windows Services\" widget to the Insight page.</li> </ul>"},{"location":"changelog/#01109","title":"0.1.109","text":"<p>_ Tuesday 07 Dec 2021 @ 20:00 CET</p> <ul> <li>Fixed API checks.</li> </ul>"},{"location":"changelog/#01108","title":"0.1.108","text":"<p>_ Monday 29 Nov 2021 @ 20:00 CET</p> <ul> <li>Enable <code>changed</code> option for boolean and timestamp type.</li> <li>Removed CRM from InfraSonar.</li> </ul>"},{"location":"changelog/#01107","title":"0.1.107","text":"<p>_ Saturday 13 Nov 2021 @ 14:00 CET</p> <ul> <li>Critical update: <code>aiogcd</code>.</li> </ul>"},{"location":"changelog/#01106","title":"0.1.106","text":"<p>_ Friday 12 Nov 2021 @ 20:00 CET</p> <ul> <li>Collapsible raster on double mouse click.</li> <li>Added audit logging to re-discover changes on a host.</li> <li>Fixed bug with selecting a time range within a modal.</li> <li>Fixed socket message on re-connect.</li> <li>Added search in my alerts view.</li> <li>Prevent inserting invalid metric info.</li> </ul>"},{"location":"changelog/#01105","title":"0.1.105","text":"<p>_ Tuesday 12 Oct 2021 @ 20:00 CET</p> <ul> <li>Log tasks using the user who initiated the task.</li> <li>Return the taskId when creating a task using the API.</li> <li>Send an email to the user when a schedules task has failed.</li> </ul>"},{"location":"changelog/#01104","title":"0.1.104","text":"<p>_ Monday 13 Sep 2021 @ 20:00 CET</p> <ul> <li>Added Id column to environment overview page.</li> <li>Added /api/environments API call.</li> <li>Added support for custom time zone per environment.</li> <li>Fixed bug with assigned alerts for users without key string.</li> </ul>"},{"location":"changelog/#01103","title":"0.1.103","text":"<p>_ Tuesday 27 Jul 2021 @ 11:00 CET</p> <ul> <li>Loosely name validation for check and type in data query API call.</li> </ul>"},{"location":"changelog/#01102","title":"0.1.102","text":"<p>_ Wednesday 21 Jul 2021 @ 22:00 CET</p> <ul> <li>Added <code>environment</code> and <code>lastSeen</code> columns to <code>api/hosts</code> API call.</li> <li>Added <code>api/labels</code> API call to query for labels in an environment.</li> <li>Fixed bug in widget editor when no hosts are configured.</li> <li>Fixed minor widget bugs (no panel data, handle escape key correctly).</li> </ul>"},{"location":"changelog/#01101","title":"0.1.101","text":"<p>_ Thursday 15 Jul 2021 @ 20:00 CET</p> <ul> <li>Added check for valid labels in API call <code>api/host/label/add</code>.</li> <li>Added filter for empty hosts in view.</li> <li>Added filter item option in widgets.</li> <li>Added the option to exclude host with specified labels from a view.</li> <li>Auto convert <code>int</code> to <code>float</code> for the insert API call.</li> <li>Fixed bug in auto refresh on a view.</li> <li>Fixed bug in validate API metric names.</li> <li>Fixed bug when moving a root widget on a host overview page.</li> <li>Fixed minor bug in side menu on probe pages.</li> <li>Required metrics no longer accept a <code>null</code> value.</li> </ul>"},{"location":"changelog/#01100","title":"0.1.100","text":"<p>_ Tuesday 22 Jun 2021 @ 20:00 CET</p> <ul> <li>Added link to new InfraSonar documentation.</li> <li>Added query data API call and added <code>/api/data</code> to replace <code>api/data/insert</code>.</li> <li>Added support for <code>withLabel</code> and <code>withProbe</code> keys to hosts query API.</li> <li>Replaced <code>accept</code>/<code>reject</code> lists with <code>item (not) in list</code>.</li> <li>Check for int64 when using the API to insert data.</li> <li>Improved error messages when using incorrect API calls.</li> <li>Fixed double boolean naming when choosing a display function.</li> </ul>"},{"location":"changelog/#0199","title":"0.1.99","text":"<p>_ Tuesday 18 Apr 2021 @ 9:00 CET</p> <ul> <li>Fix alerts overview.</li> </ul>"},{"location":"changelog/#0198","title":"0.1.98","text":"<p>_ Monday 17 May 2021 @ 20:00 CET</p> <ul> <li>Added tool for generating encryption keys.</li> <li>Fix ConnectWise member API call.</li> <li>Fix My-Alert view (too many alerts).</li> <li>Fix time range selection on aggregation grid.</li> <li>Sort series on environment in time-series chart.</li> <li>Update: ThingsDB client (fix re-connect Emitter bug).</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0197","title":"0.1.97","text":"<p>_ Tuesday 20 Apr 2021 @ 12:00 CET</p> <ul> <li>Fix alerts.</li> </ul>"},{"location":"changelog/#0196","title":"0.1.96","text":"<p>_ Monday 19 Apr 2021 @ 19:45 CET</p> <ul> <li>Fix charts.</li> </ul>"},{"location":"changelog/#0195","title":"0.1.95","text":"<p>_ Monday 19 Apr 2021 @ 19:00 CET</p> <ul> <li>Improved item-list in expression editor.</li> <li>Fixed number of rows in grid after using a filter (search).</li> <li>Update browser title when opening a view.</li> <li>Fixed CTRL-F when viewing a data-table with search disabled.</li> <li>Added column suppressed label count on conditions page.</li> <li>Fixed bug with auto-refresh.</li> <li>Update: Python packages.</li> <li>Update: Npm packages.</li> </ul>"},{"location":"changelog/#0194","title":"0.1.94","text":"<p>_ Wednesday 7 Apr 2021 @ 15:30 CET</p> <ul> <li>Fixed ConnectWise manage bug, maximum summary length.</li> </ul>"},{"location":"changelog/#0193","title":"0.1.93","text":"<p>_ Tuesday 6 Apr 2021 @ 20:00 CET</p> <ul> <li>Added API route for posting InfraSonar (host) data.</li> <li>Added API routes for controlling metadata.</li> <li>Added derived metric option.</li> </ul>"},{"location":"changelog/#0192","title":"0.1.92","text":"<p>_ Monday 15 Mar 2021 @ 20:00 CET</p> <ul> <li>Fixed check for valid hostUuids in API handler.</li> <li>Select current user as default owner for an alert.</li> </ul>"},{"location":"changelog/#0191","title":"0.1.91","text":"<p>_ Wednesday 24 Feb 2021 @ 20:00 CET</p> <ul> <li>Allow ticket in CWM without owner.</li> <li>Update API documentation.</li> </ul>"},{"location":"changelog/#0190","title":"0.1.90","text":"<p>_ Tuesday 23 Feb 2021 @ 20:00 CET</p> <ul> <li>Added ConnectWise Manage support.</li> <li>Added environment widget for installed software on Windows.</li> <li>Added option to select a time range for the aggregation grid widget.</li> <li>Fixed bug in top menu after window resize.</li> </ul>"},{"location":"changelog/#0189","title":"0.1.89","text":"<p>_ Thursday 14 Jan 2021 @ 20:00 CET</p> <ul> <li>Added channels column on labels overview page.</li> <li>Added item (not) in list expression to replace black/white list.</li> <li>Added option to accept or reject specific conditions for DutyCalls.</li> <li>Added option to show/hide self signed certificates.</li> <li>Added option to sort on environemt in a gid widget.</li> <li>Added search box to certificate widget.</li> <li>Auto-complete default probe address unless changed by the user.</li> <li>Changed export to CSV for time and age values.</li> <li>Prevent saving conditions with empty expressions.</li> </ul>"},{"location":"api/authentication/","title":"Authentication","text":""},{"location":"api/authentication/#authentication","title":"Authentication","text":"<p>The authentication scheme that the InfraSonar API makes use of is \"Bearer authentication\".</p>"},{"location":"api/authentication/#bearer-authentication","title":"Bearer Authentication","text":"<p>Bearer authentication (also called token authentication) is an HTTP authentication scheme that involves security tokens called bearer tokens. The name \u201cBearer authentication\u201d can be understood as \u201cgive access to the bearer of this token.\u201d The client must send this token in the Authorization header when making requests to the InfraSonar API:</p> <pre><code>Authorization: Bearer &lt;token&gt;\n</code></pre>"},{"location":"api/authentication/#creating-a-token","title":"Creating a token","text":"<p>Infrasonar supports two types of tokens:</p> User tokens <p>User tokens are bound to an user and can be used to automated actions as the user issuing the token.</p> <p>Warning</p> <p>This token has the same privileges as the user!</p> <p>User can be valuable for scripts or integrations that require access to multiple containers.</p> Container tokens <p>Container tokens can be used to give granular access to a specific container.</p>"},{"location":"api/authentication/#user-tokens","title":"User tokens","text":"<p>Follow these steps below to create and add a token to your user account.</p> <ol> <li>Open the \"My access\" dialog by clicking on the My access button in the account menu.    </li> <li>Navigate to the tokens tab and click on the + button.    </li> <li>Enter a useful description and click on the Create button to add the token to your account.</li> </ol>"},{"location":"api/authentication/#container-tokens","title":"Container tokens","text":"<p>Tip</p> <p>We strongly suggest setting up separate tokens when possible.</p> <p>Container tokens are also required for agentcore and agent authentication.</p> <ol> <li>Navigate to the container you want to create a token for.</li> <li>Click the tokens icon  in the left hand menu.</li> <li>Click the Add token button.</li> <li>Give the token a identifiable name and provide just enough accessobserve we added some shorcuts to create access tokens for agentcores and probes</li> <li>Click Save, enter a reason and click confirm</li> <li>Reopen the just created token and copy the ID.</li> </ol> <p>Rules</p> <ul> <li>User who have the de <code>container Access</code> flag set can create container tokens.</li> <li>A user can not grant more access permissions to a token then he or she already has.</li> </ul>"},{"location":"api/ids/","title":"ID's","text":""},{"location":"api/ids/#ids","title":"ID's","text":"<p>InfraSonar uses ID's to identify:</p> <ul> <li>Assets</li> <li>Conditions</li> <li>Containers</li> <li>Labels</li> </ul>"},{"location":"api/ids/#figuring-out-ids","title":"Figuring out ID's","text":""},{"location":"api/ids/#asset-id","title":"Asset ID","text":"<ol> <li>Navigate to the container to which the asset belongs.</li> <li>Open the asset overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The asset ID is now visible in the most left hand column.</li> </ol> <p>Query asset ID using our API</p> <p>Asset ID's can be retrieved using our API</p>"},{"location":"api/ids/#condition-id","title":"Condition ID","text":"<ol> <li>Navigate to the container to which the condition belongs.</li> <li>Open the condtions overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The condition ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/ids/#container-id","title":"Container ID","text":"<ol> <li>Open the containers view.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The container ID is now visible in the most left hand column.</li> </ol> <p>Query container ID using our API</p> <p>Container ID's can be retrieved using our API</p>"},{"location":"api/ids/#label-id","title":"Label ID","text":"<ol> <li>Navigate to the container to which the label belongs.</li> <li>Open the label overview page.</li> <li>Use the column  picker in the top right corner and ensure ID is selected.</li> <li>The label ID is now visible in the most left hand column.</li> </ol>"},{"location":"api/overview/","title":"Overview","text":"<p>The InfraSonar API is used for accessing and manipulating data within InfraSonar.</p> <p>InfraSonar agents use the API to bring data into the platform while automation solutions such as Ansible and Salt can be used to query data but also change modes to avoid getting notified while automation tasks are performing maintenance.</p> <p>The API is also used by InfraSonar ready to run integrations</p>"},{"location":"api/agentcore/pull-and-update/","title":"Set asset zone","text":"<p><code>POST</code> /agentcore/&lt;agentcoreId&gt;/pull-and-update</p>"},{"location":"api/agentcore/pull-and-update/#description","title":"Description","text":"<p>Pull and update Docker images on the appliance.</p> <p>This requires the Remote Appliance (RAPP) to be installed and connected. Use query-agentcores to find if RAPP is connected.</p>"},{"location":"api/agentcore/pull-and-update/#path-parameters","title":"Path parameters","text":"Param Description <code>agentcoreId</code> Agentcore Id."},{"location":"api/agentcore/pull-and-update/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/agentcore/pull-and-update/#body","title":"Body","text":"<p>none</p>"},{"location":"api/agentcore/pull-and-update/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CORE_CONNECT</code>). <code>404</code> Agentcore not found. <code>500</code> RAPP Error. <code>503</code> Remote appliance (RAPP) can be in state: <code>busy</code>, <code>agentcore not connected</code> or <code>rapp not connected</code>. All states may be temporary and can be tried again."},{"location":"api/agentcore/pull-and-update/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/agentcore/123/pull-and-update' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/agentcore/remove-agentcore/","title":"Remove agentcore","text":"<p><code>DELETE</code> /agentcore/&lt;agentcoreId&gt;</p>"},{"location":"api/agentcore/remove-agentcore/#description","title":"Description","text":"<p>Delete an agentcore.</p>"},{"location":"api/agentcore/remove-agentcore/#path-parameters","title":"Path parameters","text":"Param Description <code>agentcoreId</code> Agentcore Id."},{"location":"api/agentcore/remove-agentcore/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/agentcore/remove-agentcore/#body","title":"Body","text":"<p>none</p>"},{"location":"api/agentcore/remove-agentcore/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CORE_CONNECT</code>). <code>404</code> Agentcore not found."},{"location":"api/agentcore/remove-agentcore/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/agentcore/123' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/agentcore/set-zone/","title":"Set agentcore zone","text":"<p><code>PATCH</code> /agentcore/&lt;agentcoreId&gt;/zone</p>"},{"location":"api/agentcore/set-zone/#description","title":"Description","text":"<p>Set the agentcore zone. Success (204) is also returned when the agentcore was already in the desired zone.</p> <p>This requires the Remote Appliance (RAPP) to be installed and connected. Use query-agentcores to find if RAPP is connected.</p>"},{"location":"api/agentcore/set-zone/#path-parameters","title":"Path parameters","text":"Param Description <code>agentcoreId</code> Agentcore Id."},{"location":"api/agentcore/set-zone/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/agentcore/set-zone/#body","title":"Body","text":"Param Type Required Description <code>zone</code> integer Yes Zone Id (between 0 and 9)."},{"location":"api/agentcore/set-zone/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CORE_CONNECT</code>). <code>404</code> Agentcore not found. <code>500</code> RAPP Error. <code>503</code> Remote appliance (RAPP) can be in state: <code>busy</code>, <code>agentcore not connected</code> or <code>rapp not connected</code>. All states may be temporary and can be tried again."},{"location":"api/agentcore/set-zone/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/agentcore/123/zone' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"zone\": 1\n}'\n</code></pre></p>"},{"location":"api/alert/assign/","title":"Assign alert","text":"<p><code>PUT</code> /alert/&lt;alertKs&gt;/assign</p>"},{"location":"api/alert/assign/#description","title":"Description","text":"<p>Assign an open alert to a user. The user (userId) must be marked as a member of the container. Success (204) is also returned when the alert does not exist.</p>"},{"location":"api/alert/assign/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/assign/#body","title":"Body","text":"Param Type Required Description <code>userId</code> int Yes User Id of a user <code>message</code> string No Optional message (max 240 characters, default empty)."},{"location":"api/alert/assign/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body or alert key string. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ALERT_ASSIGN</code>). <code>404</code> User (userId) not found or the user is not a member."},{"location":"api/alert/assign/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/alert/xxx/assign' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"userId\": 123\n}'\n</code></pre></p>"},{"location":"api/alert/close/","title":"Close alert","text":"<p><code>PUT</code> /alert/&lt;alertKs&gt;/close</p>"},{"location":"api/alert/close/#description","title":"Description","text":"<p>Close an alert. An optional message can be provided. Success (204) is also returned when the alert is already closed .</p>"},{"location":"api/alert/close/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/close/#body","title":"Body","text":"Param Type Required Description <code>message</code> string No Optional message (max 2000 characters, default empty). <code>isSolution</code> boolean No Mark as a solution to the problem (requires a message of at least 60 characters, default false)."},{"location":"api/alert/close/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body or alert key string. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ALERT_CHANGE</code>)."},{"location":"api/alert/close/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/alert/xxx/close' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"message\": \"Closed using the API\"\n}'\n</code></pre></p>"},{"location":"api/alert/message/","title":"Add message to alert","text":"<p><code>PUT</code> /alert/&lt;alertKs&gt;/message</p>"},{"location":"api/alert/message/#description","title":"Description","text":"<p>Add a message to an open alert. Success (204) is also returned when the alert does not exist.</p>"},{"location":"api/alert/message/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/message/#body","title":"Body","text":"Param Type Required Description <code>message</code> string Yes Message to add (max 240 characters, default empty)."},{"location":"api/alert/message/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body or alert key string. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ALERT_CHANGE</code>)."},{"location":"api/alert/message/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/alert/xxx/message' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"message\": \"This is an example message.\"\n}'\n</code></pre></p>"},{"location":"api/alert/query/","title":"Query alert","text":"<p><code>GET</code> /alert/&lt;alertKs&gt;?fields=...&amp;actions=...</p>"},{"location":"api/alert/query/#description","title":"Description","text":"<p>Query alert details. This API call will work for both an open and closed alert.</p>"},{"location":"api/alert/query/#path-parameters","title":"Path parameters","text":"Param Description <code>alertKs</code> Alert key string (ks)."},{"location":"api/alert/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>actions</code> none Action fields. If at least one field is given, the result will include \"actions\" with an array of action objects (see Actions below for all available action fields)."},{"location":"api/alert/query/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner. <code>closedTimestamp</code> integer/null Unix timestamp in seconds when the alert was closed or null if not closed."},{"location":"api/alert/query/#actions","title":"Actions","text":"Action field Return type Description <code>kind</code> string One of: <code>Assign</code>, <code>Comment</code>, <code>IntegrationCall</code>, <code>Close</code>, <code>AutoClose</code>, <code>IndirectClose</code> <code>timestamp</code> integer Unix timestamp in seconds. <code>data</code> object/null Additional data object."},{"location":"api/alert/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or action or invalid alert key string. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Alert not found."},{"location":"api/alert/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/alert/xxx?actions=kind,timestamp,data' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"ks\": \"&lt;a-unique-key-string&gt;\",\n    \"message\": \"Initial message of the alert\",\n    \"severity\": 3,\n    \"timestamp\": 1667511262,\n    \"lastMessage\": \"Last message of the alert\",\n    \"lastSeverity\": 3,\n    \"lastTimestamp\": 1667511523,\n    \"ownerId\": 123,\n    \"closedTimestamp\": null,\n    \"actions\": [\n        {\n            \"kind\": \"Assign\",\n            \"timestamp\": 1667511469,\n            \"data\": {\n                \"userId\": 123,\n                \"ownerId\": 123,\n                \"message\": \"Alert assigned to me!\"\n            }\n        }\n    ]\n}\n</code></pre></p>"},{"location":"api/asset/add-label/","title":"Add label to asset","text":"<p><code>PUT</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/add-label/#description","title":"Description","text":"<p>Add a label to an asset. Success (204) is also returned when the label was already assigned to the asset.</p> <p>Note: method <code>POST</code> is obsolete but still supported.</p>"},{"location":"api/asset/add-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/add-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/add-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/add-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/add-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/asset/123/label/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/disable-check/","title":"Disable check on asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;</p>"},{"location":"api/asset/disable-check/#description","title":"Description","text":"<p>Disable a check on an asset. Success (204) is also returned when the check was already disabled on the asset.</p>"},{"location":"api/asset/disable-check/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/disable-check/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/disable-check/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/disable-check/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CHECK_MANAGEMENT</code>). <code>404</code> Asset, collector or check not found. <code>409</code> Both the asset and check exist, but the check does not exist on the asset."},{"location":"api/asset/disable-check/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/asset/123/collector/wmi/check/updates' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/enable-check/","title":"Enable check on asset","text":"<p><code>PUT</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;</p>"},{"location":"api/asset/enable-check/#description","title":"Description","text":"<p>Enable a check on an asset. Success (204) is also returned when the check was already enabled on the asset.</p>"},{"location":"api/asset/enable-check/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/enable-check/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/enable-check/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/enable-check/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CHECK_MANAGEMENT</code>). <code>404</code> Asset, collector or check not found. <code>409</code> Both the asset and check exist, but the check does not exist on the asset."},{"location":"api/asset/enable-check/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/asset/123/collector/wmi/check/updates' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/insert-check-data/","title":"Insert check data","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;</p>"},{"location":"api/asset/insert-check-data/#description","title":"Description","text":"<p>Insert check data.</p>"},{"location":"api/asset/insert-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/insert-check-data/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/insert-check-data/#body","title":"Body","text":"Param Type Required Description <code>data</code> object No Object with check data (if not given, <code>error</code> must be provided). <code>version</code> string Yes Version of the collector using the format <code>MAJOR.MINOR.PATCH</code>, for example <code>\"1.0.0\"</code>. <code>runtime</code> float No Time it took for the check to run in seconds. <code>no_count</code> boolean No If <code>true</code>, the check result will not be \"counted\" by InfraSonar and therefore not affect \"last-seen\". <code>timestamp</code> integer No Unix timestamp in seconds. If omitted, InfraSonar will set the timestamp for the check data. <code>error</code> object Depends Object with error (see error) (<code>error</code> is required in case no <code>data</code> is provided). <p>At least one of <code>data</code> or <code>error</code> must be provided, and both can be included.</p>"},{"location":"api/asset/insert-check-data/#error","title":"Error","text":"<p>An optional error might be provided which raises a check notification in InfraSonar. It is possible send both data and an error.</p> Param Type Required Description <code>severity</code> string No Severity of the error (<code>LOW</code>, <code>MEDIUM</code> or <code>HIGH</code>). <code>message</code> string Yes Error message <p>Example error object:</p> <pre><code>{\n    \"severity\": \"MEDIUM\",\n    \"message\": \"this is an example error message\"\n}\n</code></pre>"},{"location":"api/asset/insert-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>INSERT_CHECK_DATA</code>). <code>404</code> Asset, collector or check not found. <code>409</code> Collector is not assigned to the asset. <code>413</code> Body size too large (maximum 500 KB)."},{"location":"api/asset/insert-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/asset/123/collector/docker/check/network' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"data\": {\n        \"networks\": [\n            {\n                \"name\": \"myNetwork\",\n                \"ipAddress\": \"1.2.3.4\"\n            }\n        ]\n    },\n    \"version\": \"0.1.0\"\n}'\n</code></pre> In this example, \"docker\" is the collector, \"network\" the check, \"networks\" a type, \"name\" is a required metric and \"ipAddress\" is a metric.</p>"},{"location":"api/asset/purge-notifications/","title":"Purge notifications","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/purge-notifications</p>"},{"location":"api/asset/purge-notifications/#description","title":"Description","text":"<p>Purge notifications by notification kind for a specific asset.</p>"},{"location":"api/asset/purge-notifications/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/purge-notifications/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/purge-notifications/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes One of <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code> or <code>CheckInvalidData</code>."},{"location":"api/asset/purge-notifications/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/purge-notifications/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/asset/123/purge-notifications' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"kind\": \"CheckError\"\n}'\n</code></pre></p>"},{"location":"api/asset/query-alerts/","title":"Query asset alerts","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/alerts?fields=...</p>"},{"location":"api/asset/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given asset.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/asset/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/asset/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/asset/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/asset/123/alerts?fields=ks,message,severity,ownerId' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"ks\": \"&lt;a-unique-key-string&gt;\",\n        \"message\": \"Initial message of the alert\",\n        \"severity\": 3,\n        \"ownerId\": null\n    }\n]\n</code></pre></p>"},{"location":"api/asset/query-check-data/","title":"Query check data","text":"<p><code>GET</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;?fmt=false</p>"},{"location":"api/asset/query-check-data/#description","title":"Description","text":"<p>Query check data. The result might be <code>null</code> when both the collector and check exist, but no data for the given asset exists. If only the framework is <code>null</code>, then the check is enabled for the asset but no data is received (yet).</p>"},{"location":"api/asset/query-check-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key."},{"location":"api/asset/query-check-data/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fmt</code> <code>false</code> Either <code>true</code> or <code>false</code>. When <code>true</code> the display function is used to format the values and if <code>false</code>, the raw values are returned."},{"location":"api/asset/query-check-data/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid value for fmt query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset, collector or check not found."},{"location":"api/asset/query-check-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/asset/123/collector/ping/check/ping?fmt=true' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"data\": {\n        \"icmp\": [\n            {\n                \"address\": \"192.168.1.2\",\n                \"maxTime\": \"1 ms\",\n                \"name\": \"ping\",\n                \"count\": \"5\",\n                \"dropped\": \"0\",\n                \"minTime\": \"165 \u03bcs\"\n            }\n        ]\n    },\n    \"framework\": {\n        \"duration\": \"4.015 seconds\",\n        \"timestamp\": \"2023-01-12 15:29:37+01:00\",\n        \"prev\": {\n            \"timestamp\": \"2023-01-12 15:24:37+01:00\"\n        }\n    }\n}\n</code></pre></p> <p>In this example, \"ping\" is a collector, \"ping\" a check, \"icmp\" a type and \"name\", address, maxTime etc, are the metrics.</p>"},{"location":"api/asset/query-forecast-data/","title":"Query forecast data","text":"<p><code>GET /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;/check/&lt;checkKey&gt;/type/&lt;typeKey&gt;/metric/&lt;metricKey&gt;/forecasts?aggregation=none</code></p>"},{"location":"api/asset/query-forecast-data/#description","title":"Description","text":"<p>Query forecast data. A list will be returned containing all items with forecasts. The forecast for each item is an array with arrays containing a UNIX-timestamp, the upper and lower prediction values. The forecast for an item might also be <code>null</code> when the forecast could not be created (for example when the metric hasn't enough data points). In the latter case, the item has a <code>retryAfter</code> property with a UNIX-timestamp which tells when a new attempt will be made to create a forecast for that item.</p>"},{"location":"api/asset/query-forecast-data/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key. <code>checkKey</code> Check key. <code>typeKey</code> Type key. <code>metricKey</code> Metric key."},{"location":"api/asset/query-forecast-data/#query-parameters","title":"Query parameters","text":"Param Default Description <code>aggregation</code> <code>none</code> One of <code>none</code>, <code>diff</code>, <code>diffps</code>, <code>first</code>, <code>last</code>, <code>count</code>, <code>mode</code>, <code>min</code>, <code>max</code>, <code>sum</code>, <code>mean</code>, <code>median</code>, <code>medianlow</code>, <code>medianhigh</code>. If you are not sure, just use the default <code>none</code>."},{"location":"api/asset/query-forecast-data/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid value for aggregation query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset, collector, check, type or metric not found."},{"location":"api/asset/query-forecast-data/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/asset/123/collector/wmi/check/system/type/processorTotal/metric/PercentProcessorTime/forecasts' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"name\": \"foo.local\",\n        \"forecast\": null,\n        \"retryAfter\": 1684891252.3467717\n    },\n    {\n        \"name\": \"bar.local\",\n        \"forecast\": [\n            [\n                1684823400,\n                5.443413461856282,\n                0.3348468724474909\n            ],\n            [\n                1684825200,\n                5.339250050203838,\n                0.46790794525554347\n            ]\n        ]\n    }\n]\n</code></pre></p>"},{"location":"api/asset/query-id/","title":"Query asset Id","text":"<p><code>GET</code> /asset/&lt;assetName&gt;/id</p>"},{"location":"api/asset/query-id/#description","title":"Description","text":"<p>Query an asset Id by name. This route only works with a container token.</p> <p>Removed assets (assets in trash) are ignored and will not be found using this API call.</p>"},{"location":"api/asset/query-id/#path-parameters","title":"Path parameters","text":"Param Description <code>assetName</code> Asset name."},{"location":"api/asset/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>). <code>404</code> No asset with the given name is found in the container. <code>409</code> Multiple assets with the same name are found within the container."},{"location":"api/asset/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/asset/my-asset.local/id' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"assetId\": 123\n}\n</code></pre></p>"},{"location":"api/asset/query-time-series/","title":"Query time series","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/query-time-series</p>"},{"location":"api/asset/query-time-series/#description","title":"Description","text":"<p>Query time series.</p>"},{"location":"api/asset/query-time-series/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query-time-series/#body","title":"Body","text":"Param Type Required Description <code>collector</code> string Yes Collector key. <code>check</code> string Yes Check key. <code>type</code> string Yes Type key. <code>metric</code> string Yes Metric key. <code>items</code> array(string) No Item names. If not given, all items are returned. <code>timeSpan</code> integer No Time span in seconds. Defaults to <code>28800</code> (8 hours). The maximum time span is <code>2419200</code> (28 days). <code>start</code> integer/string No Unix timestamp or ISO time string. The start + time-span is the end of the time window. When not given, the start is calculated as now minus the time span which results in the latest data points. <code>aggregation</code> object No See aggregation section. If not given, no aggregation is used. <code>merge</code> object No See merge section. If not given, items are not merged."},{"location":"api/asset/query-time-series/#merge","title":"Merge","text":"Param Type Required Description <code>as</code> string Yes Name as the time-series will be returned in the result. Only alpha-numeric characters and underscores are allowed and the name must not be empty. <code>aggregation</code> object Yes See aggregation section. This aggregation is used for merging the time series."},{"location":"api/asset/query-time-series/#aggregation","title":"Aggregation","text":"Param Type Required Description <code>type</code> string Yes One of <code>mean</code>, <code>min</code>, <code>max</code>, <code>sum</code>, <code>median</code>, <code>median_high</code>, <code>median_low</code> or <code>count</code>. <code>timeSpan</code> integer No Time span in seconds used for aggregation blocks. For example <code>3600</code> will create per-hour blocks. If not given, the result will contain a single value with the current timestamp."},{"location":"api/asset/query-time-series/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query-time-series/#example","title":"Example","text":"<p>Curl request (Average bytes received p/s for the last 4 hours): <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/asset/123/query-time-series' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\```\n    --data-raw '{\n    \"collector\": \"wmi\",\n    \"check\": \"network\",\n    \"type\": \"interface\",\n    \"metric\": \"BytesReceivedPersec\",\n    \"timeSpan\": 14400,\n    \"aggregation\": {\n        \"type\": \"mean\"\n    }\n}'\n</code></pre></p> <p>Response (Each key in the response represents an item name, unless \"merge\" is used. The value is an array with with arrays containing a timestamp and value):</p> <pre><code>{\n    \"Intel[R] 82574L Gigabit Network Connection\": [\n        [\n            1677142522,\n            9488.9375\n        ]\n    ]\n}\n</code></pre>"},{"location":"api/asset/query/","title":"Query asset","text":"<p><code>GET</code> /asset/&lt;assetId&gt;?fields=...</p>"},{"location":"api/asset/query/#description","title":"Description","text":"<p>Query asset details.</p>"},{"location":"api/asset/query/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields)."},{"location":"api/asset/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id. <code>zone</code> integer Asset zone Id. <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids. <code>disabledChecks</code> array(object) List with check objects. Each check object contains a <code>collector</code> and <code>check</code> property, both with the key as value. <code>properties</code> array(object) List with property object. Each property container a <code>key</code> and <code>value</code> property."},{"location":"api/asset/query/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/asset/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Asset not found."},{"location":"api/asset/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/asset/123' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"id\": 123,\n    \"name\": \"my-host.local\",\n    \"kind\": \"Asset\",\n    \"description\": \"My host\",\n    \"mode\": \"normal\",\n    \"labels\": [456, 789],\n    \"disabledChecks\": [],\n    \"properties\": [{\n        \"key\": \"myProp\",\n        \"value\": \"some value\"\n    }]\n\n}\n</code></pre></p>"},{"location":"api/asset/remove-collector/","title":"Remove collector from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/remove-collector/#description","title":"Description","text":"<p>Remove a collector from an asset. Success (204) is also returned when the collector was not attached to the asset.</p>"},{"location":"api/asset/remove-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/remove-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/remove-collector/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/asset/123/collector/docker' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/remove-label/","title":"Remove label from asset","text":"<p><code>DELETE</code> /asset/&lt;assetId&gt;/label/&lt;labelId&gt;</p>"},{"location":"api/asset/remove-label/#description","title":"Description","text":"<p>Remove a label from an asset. Success (204) is also returned when the label was not assigned to the asset.</p>"},{"location":"api/asset/remove-label/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>labelId</code> Label Id."},{"location":"api/asset/remove-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/remove-label/#body","title":"Body","text":"<p>none</p>"},{"location":"api/asset/remove-label/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or label not found."},{"location":"api/asset/remove-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/asset/123/label/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/asset/set-description/","title":"Set asset description","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/description</p>"},{"location":"api/asset/set-description/#description","title":"Description","text":"<p>Set the asset description. Success (204) is also returned when the asset description has not changed.</p>"},{"location":"api/asset/set-description/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-description/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-description/#body","title":"Body","text":"Param Type Required Description <code>description</code> string Yes Asset description."},{"location":"api/asset/set-description/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-description/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/asset/123/description' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"description\": \"This is a cool asset!\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-kind/","title":"Set asset kind","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/kind</p>"},{"location":"api/asset/set-kind/#description","title":"Description","text":"<p>Set the asset kind. Success (204) is also returned when the asset kind remains unchanged.</p>"},{"location":"api/asset/set-kind/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-kind/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-kind/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes Asset kind. See table below for all available kinds."},{"location":"api/asset/set-kind/#kind","title":"Kind","text":"Logo Name <code>Asset</code> (default) <code>APC</code> <code>Apple</code> <code>Azure</code> <code>Camera</code> <code>Cisco</code> <code>Citrix</code> <code>Database</code> <code>Dell</code> <code>Discovery</code> <code>DNS</code> <code>Docker</code> <code>Eaton</code> <code>Email</code> <code>Firewall</code> <code>FreeBSD</code> <code>HaloPSA</code> <code>HP</code> <code>Kubernetes</code> <code>Linux</code> <code>LiveOP</code> <code>NetApp</code> <code>PaloAlto</code> <code>Printer</code> <code>Proxmox</code> <code>PureStorage</code> <code>Speed</code> <code>Storage</code> <code>Supermicro</code> <code>Switch</code> <code>Synology</code> <code>Tablet</code> <code>UniFi</code> <code>Vehicle</code> <code>VMware</code> <code>Website</code> <code>Windows</code>"},{"location":"api/asset/set-kind/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-kind/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/asset/123/kind' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"kind\": \"Linux\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-mode/","title":"Set asset mode","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/mode</p>"},{"location":"api/asset/set-mode/#description","title":"Description","text":"<p>Set the asset mode. Success (204) is also returned when the asset was already in the desired mode.</p>"},{"location":"api/asset/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>duration</code> integer No Duration for the mode in minutes. Accepts a value between <code>1</code> and <code>480</code> and only works when the mode is set to either <code>maintenance</code> or <code>disabled</code>. If <code>duration</code> is not given, the mode is changed indefinitely."},{"location":"api/asset/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/asset/123/mode' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-name/","title":"Set asset name","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/name</p>"},{"location":"api/asset/set-name/#description","title":"Description","text":"<p>Set the asset name. Success (204) is also returned when the asset name has not been changed.</p>"},{"location":"api/asset/set-name/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-name/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-name/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Asset name."},{"location":"api/asset/set-name/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-name/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/asset/123/name' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"my.asset.local\"\n}'\n</code></pre></p>"},{"location":"api/asset/set-zone/","title":"Set asset zone","text":"<p><code>PATCH</code> /asset/&lt;assetId&gt;/zone</p>"},{"location":"api/asset/set-zone/#description","title":"Description","text":"<p>Set the asset zone. Success (204) is also returned when the asset was already in the desired zone.</p>"},{"location":"api/asset/set-zone/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id."},{"location":"api/asset/set-zone/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/set-zone/#body","title":"Body","text":"Param Type Required Description <code>zone</code> integer Yes Zone Id (between 0 and 9)."},{"location":"api/asset/set-zone/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset not found."},{"location":"api/asset/set-zone/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/asset/123/zone' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"zone\": 1\n}'\n</code></pre></p>"},{"location":"api/asset/upsert-collector/","title":"Upsert collector to asset","text":"<p><code>POST</code> /asset/&lt;assetId&gt;/collector/&lt;collectorKey&gt;</p>"},{"location":"api/asset/upsert-collector/#description","title":"Description","text":"<p>Add or configure a collector on an asset. If the collector is already attached to the asset, the configuration will be updated unless no configuration is provided in the body.</p>"},{"location":"api/asset/upsert-collector/#path-parameters","title":"Path parameters","text":"Param Description <code>assetId</code> Asset Id. <code>collectorKey</code> Collector key."},{"location":"api/asset/upsert-collector/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/asset/upsert-collector/#body","title":"Body","text":"Param Type Required Description <code>config</code> Object Depends Configuration of the collector. <p>A body might be required for some collectors. For most collectors the <code>config</code> field is optional.</p>"},{"location":"api/asset/upsert-collector/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Asset or collector not found."},{"location":"api/asset/upsert-collector/#example","title":"Example","text":"<p>Curl request: (no config required for docker agent) <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/asset/123/collector/docker' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/add-user/","title":"Add user to container","text":"<p><code>POST</code> /container/&lt;containerId&gt;/user</p>"},{"location":"api/container/add-user/#description","title":"Description","text":"<p>Add a user to the container. This only works for existing InfraSonar users. If you want to add a new user, use the create invite API. An error will be returned if the user already is added to the container. Use update user to update user permissions.</p>"},{"location":"api/container/add-user/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/add-user/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/add-user/#body","title":"Body","text":"Param Type Required Description <code>email</code> string Yes Email for the user. <code>authProvider</code> string Yes(*) Authentication provider for the user. One of <code>Google</code>, <code>Microsoft</code> or <code>Password</code> (only required when a duplicated email address exists). <code>member</code> boolean No When <code>true</code>, the user will be marked as a member. Alerts can only be assigned to members of the container. Defaults to <code>false</code>. <code>permissions</code> array(string) No Optional list with user permissions (see: authentication flags for a complete list)."},{"location":"api/container/add-user/#authentication-flags","title":"Authentication flags","text":"Auth Flag Description <code>READ</code> Required to view the container. <code>ALERT_ASSIGN</code> Required for assigning alerts. <code>ALERT_CHANGE</code> Required for adding comment to alerts and for closing alerts. <code>API</code> Required making API calls to this container. <code>ASSET_MANAGEMENT</code> Required for asset management tasks such as creating new assets, label assignments, changing the asset mode etc. <code>BILLING</code> Required for viewing the <code>credits</code> tab on a container. <code>CHECK_MANAGEMENT</code> Required to enable or disable checks and change a check interval. <code>CONTAINER_ACCESS</code> Required for adding users to a container and managing their access rights. <code>CONTAINER_ADMIN</code> Required to make, change, or delete labels and conditions, and to enable or disable collectors. <code>CONTAINER_MANAGEMENT</code> Required for renaming or moving the container and also for creating child containers. <code>CONTAINER_TOKENS</code> Required for adding container tokens and managing their access rights. <code>CORE_CONNECT</code> Required for Agentcores to connect to the InfraSonar hub. <code>INSERT_CHECK_DATA</code> Required to insert check-data with the API. This is required for agents to write data. <code>PURGE_TIME_SERIES</code> Required to purge dead time-series. <code>REPORTING_ADMIN</code> Required for making, changing or deleting report configurations. <code>REPORTING_VIEW</code> Required to open reporting and download reports. <code>RULE_EMAIL</code> Required for adding your own alert or notification rule using email. This flag is also required for App rules. <code>RULE_MANAGEMENT</code> Required for managing any kind of rule. This also allows to view and edit rules from other users. <code>RULE_PHONE</code> Required for adding your own alert or notification rule using SMS, VoiceCall or WhatsApp. <code>TIME_SERIES_MANAGEMENT</code> Required to enable or disable SiriDB time-series. <code>VIEW_LOG</code> Required to view the logs. <code>WEBHOOKS</code> Required for making, changing or deleting webhooks."},{"location":"api/container/add-user/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body or the user already exists on the container. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container not found."},{"location":"api/container/add-user/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/user' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"email\": \"alice@wonderland.net\",\n    \"authProvider\": \"Password\",\n    \"member\": true,\n    \"permissions\": [\"READ\"]\n}'\n</code></pre></p>"},{"location":"api/container/create-asset/","title":"Create asset","text":"<p><code>POST</code> /container/&lt;containerId&gt;/asset</p>"},{"location":"api/container/create-asset/#description","title":"Description","text":"<p>Create a new asset.</p> <p>Duplicated asset names are allowed although not recommended.</p>"},{"location":"api/container/create-asset/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/create-asset/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-asset/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Name of the asset."},{"location":"api/container/create-asset/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/create-asset/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/asset' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"my-host.local\"\n}'\n</code></pre></p> <p>Response: <pre><code>{\n    \"assetId\": 456\n}\n</code></pre></p>"},{"location":"api/container/create-container/","title":"Create container","text":"<p><code>POST</code> /container/&lt;containerId&gt;/container</p>"},{"location":"api/container/create-container/#description","title":"Description","text":"<p>Create a new child container.</p> <p>Duplicated container names are not allowed.</p>"},{"location":"api/container/create-container/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id (from the parent container)."},{"location":"api/container/create-container/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-container/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Name of the container. <code>timezone</code> string No Timezone for the new container. Example: <code>Europe/Amsterdam</code> (By default the zone is inherited from the parent container)."},{"location":"api/container/create-container/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/create-container/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/container' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"my-child-container\"\n}'\n</code></pre></p> <p>Response: <pre><code>{\n    \"containerId\": 456\n}\n</code></pre></p>"},{"location":"api/container/create-invite/","title":"Invite a user to the container","text":"<p><code>PUT</code> /container/&lt;containerId&gt;/invite</p>"},{"location":"api/container/create-invite/#description","title":"Description","text":"<p>Create an invite for a user. Invites can only be created for users which do not yet exist in InfraSonar. For existing users, use the add user and update-user API handlers.</p>"},{"location":"api/container/create-invite/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/create-invite/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-invite/#body","title":"Body","text":"Param Type Required Description <code>email</code> string Yes Email for the user. <code>member</code> boolean No When <code>true</code>, the user will be marked as a member. Alerts can only be assigned to members of the container. Defaults to <code>false</code>. <code>permissions</code> array(string) No Optional list with user permissions (see: authentication flags for a complete list). <code>sendInvitationEmail</code> boolean No When <code>true</code>, an invitation will be send to the user's email address. Defaults to <code>true</code>."},{"location":"api/container/create-invite/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body or a user with this mail address already exists in InfraSonar. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container not found."},{"location":"api/container/create-invite/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/invite' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"email\": \"alice@wonderland.net\",\n    \"member\": true,\n    \"permissions\": [\"READ\"],\n    \"sendInvitationEmail\": true\n}'\n</code></pre></p>"},{"location":"api/container/create-label/","title":"Create label","text":"<p><code>POST</code> /container/&lt;containerId&gt;/label</p>"},{"location":"api/container/create-label/#description","title":"Description","text":"<p>Create a new label.</p>"},{"location":"api/container/create-label/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/create-label/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/create-label/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Name of the label."},{"location":"api/container/create-label/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ADMIN</code>). <code>404</code> Container not found."},{"location":"api/container/create-label/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/label' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"my-host.local\"\n}'\n</code></pre></p> <p>Response: <pre><code>{\n    \"labelId\": 456\n}\n</code></pre></p>"},{"location":"api/container/purge-notifications/","title":"Purge notifications","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-notifications</p>"},{"location":"api/container/purge-notifications/#description","title":"Description","text":"<p>Purge notifications by notification kind.</p>"},{"location":"api/container/purge-notifications/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-notifications/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-notifications/#body","title":"Body","text":"Param Type Required Description <code>kind</code> string Yes One of <code>ConnectionStatus</code>, <code>ConnectionTimeDelta</code>, <code>ProbeVersion</code>, <code>ProbeMissing</code>, <code>ProbeTimeDelta</code>, <code>ProbeNoHeartbeat</code>, <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code>, <code>CheckInvalidData</code>, <code>ContainerMaintenance</code>, <code>AgentcoreMissing</code> or <code>ConditionError</code>."},{"location":"api/container/purge-notifications/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/purge-notifications/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/purge-notifications' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"kind\": \"ConnectionStatus\"\n}'\n</code></pre></p>"},{"location":"api/container/purge-time-series/","title":"Purge time-series","text":"<p><code>POST</code> /container/&lt;containerId&gt;/purge-time-series</p>"},{"location":"api/container/purge-time-series/#description","title":"Description","text":"<p>Purge dead time-series. Time series are considered dead if they didn't got any new data for a period of time. This period must be given in weeks.</p>"},{"location":"api/container/purge-time-series/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/purge-time-series/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/purge-time-series/#body","title":"Body","text":"Param Type Required Description <code>weeks</code> integer Yes Integer value between 1 and 999 (recommended: 5 weeks or more)."},{"location":"api/container/purge-time-series/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>PURGE_TIME_SERIES</code>). <code>404</code> Container not found."},{"location":"api/container/purge-time-series/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/purge-time-series' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"weeks\": 5\n}'\n</code></pre></p> <p>Response: <pre><code>{\n    \"purgedTimeSeries\": 12345\n}\n</code></pre></p>"},{"location":"api/container/query-agentcores/","title":"Query container agentcores","text":"<p><code>GET</code> /container/&lt;containerId&gt;/agentcores?fields=...</p>"},{"location":"api/container/query-agentcores/#description","title":"Description","text":"<p>Query all agentcores for a given container.</p>"},{"location":"api/container/query-agentcores/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-agentcores/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>id</code> Fields to return (see fields below for all available fields). <code>probes</code> none Probes fields. If at least one field is given and the agentcore is connected, the result will include \"probes\" with an array of probe objects (see Probes below for all available probe fields)."},{"location":"api/container/query-agentcores/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Agentcore Id. <code>name</code> string Agentcore name. <code>zone</code> integer Agentcore zone Id. <code>version</code> string/null Agentcore version. (null if not connected) <code>connected</code> boolean True if the agentcore is connected. <code>rappConnected</code> boolean True if RAPP (remote appliance) is connected."},{"location":"api/container/query-agentcores/#probes","title":"Probes","text":"Probe field Return type Description <code>key</code> string Probe collector key. <code>version</code> string Probe collector version."},{"location":"api/container/query-agentcores/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-agentcores/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/agentcores?fields=id,connected,rappConnected?probes=key,version' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 123,\n        \"connected\": true,\n        \"rappConnected\": true,\n        \"probes\": [\n            {\n                \"key\": \"wmi\",\n                \"version\": \"v3.0.17\"\n            }\n        ]\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-alerts/","title":"Query container alerts","text":"<p><code>GET</code> /container/&lt;containerId&gt;/alerts?fields=...</p>"},{"location":"api/container/query-alerts/#description","title":"Description","text":"<p>Query all open alerts for a given container.</p> <p>With the current API it is not possible to query for closed alerts, except when you have an explicit alert key string.</p>"},{"location":"api/container/query-alerts/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-alerts/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>ks</code> Fields to return (see fields below for all available fields)."},{"location":"api/container/query-alerts/#fields","title":"Fields","text":"Field Return type Description <code>ks</code> string Key string of the alert. <code>message</code> string Initial message when the alert was opened. <code>severity</code> integer Initial severity when the alert was opened (value between 0=highest and 7=lowest severity). <code>timestamp</code> integer Unix timestamp in seconds when the alert was opened. <code>lastMessage</code> string Message of the last hit (equal to \"message\" with only a single hit). <code>lastSeverity</code> integer Severity of the last hit (equal to \"severity\" with only a single hit). <code>lastTimestamp</code> integer Unix timestamp in seconds of the last hit (equal to \"timestamp\" with only a single hit). <code>ownerId</code> integer/null User Id of the owner or null when the alert is not assigned to an owner."},{"location":"api/container/query-alerts/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-alerts/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/alerts?fields=ks,message,severity,ownerId' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"ks\": \"&lt;a-unique-key-string&gt;\",\n        \"message\": \"Initial message of the alert\",\n        \"severity\": 3,\n        \"ownerId\": null\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-assets/","title":"Query container assets","text":"<p><code>GET</code> /container/&lt;containerId&gt;/assets?fields=...</p>"},{"location":"api/container/query-assets/#description","title":"Description","text":"<p>Query all assets for a given container. (removed assets are not included).</p>"},{"location":"api/container/query-assets/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-assets/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>id</code> Fields to return (see fields below for all available fields). <code>collectors</code> none Collector fields. If at least one field is given, the result will include \"collectors\" with an array of collector objects (see Collectors below for all available collector fields). <code>kind</code> none Only assets with the given kind (e.g kind=Windows). <code>not-kind</code> none Only assets with another kind than the given kind (e.g not-kind=Asset). <code>zone</code> none Only assets with the given zone Id_(e.g zone=0)_. <code>not-zone</code> none Only assets with another zone than the given zone Id (e.g not-zone=1). <code>mode</code> none Only assets with the given mode (e.g mode=normal). <code>not-mode</code> none Only assets with another mode than the given mode (e.g not-mode=disabled). <code>collector</code> none Only assets with the given collector (e.g collector=tcp). <code>not-collector</code> none Only assets without the given collector (e.g not-collector=wmi). <code>label</code> none Only assets with the given label Id (e.g label=123). <code>not-label</code> none Only assets without the given label Id (e.g not-label=456)."},{"location":"api/container/query-assets/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Asset Id. <code>container</code> integer Asset container Id (Equal to containerId). <code>zone</code> integer Asset zone Id. <code>name</code> string Asset name. <code>kind</code> string One of the kinds (see set-kind api) <code>description</code> string Asset description. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>labels</code> array(integer) List with label Ids. <code>disabledChecks</code> array(object) List with check objects. Each check object contains a <code>collector</code> and <code>check</code> property, both with the key as value. <code>properties</code> array(object) List with property object. Each property container a <code>key</code> and <code>value</code> property."},{"location":"api/container/query-assets/#collectors","title":"Collectors","text":"Collector field Return type Description <code>key</code> string Collector key. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>config</code> object/null Configuration for the collector if config exists."},{"location":"api/container/query-assets/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-assets/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/assets?fields=id,name,mode' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 123,\n        \"name\": \"my-host.local\",\n        \"mode\": \"normal\"\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-collectors/","title":"Query container collectors","text":"<p><code>GET</code> /container/&lt;containerId&gt;/collectors?fields=...</p>"},{"location":"api/container/query-collectors/#description","title":"Description","text":"<p>Query all collectors for a given container. (only enabled collectors are included).</p>"},{"location":"api/container/query-collectors/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-collectors/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>key</code> Fields to return (see fields below for all available fields). <code>options</code> none Option fields. If at least one field is given, the result will include \"options\" with an array of option objects (see Options below for all available option fields)."},{"location":"api/container/query-collectors/#fields","title":"Fields","text":"Field Return type Description <code>key</code> string Collector Id. <code>name</code> string Collector name. <code>kind</code> string One of <code>agent</code>, <code>probe</code> or <code>service</code>. <code>info</code> string Collector info. <code>minVersion</code> string Minimal required version for the collector. <code>checks</code> array(string) Array with check keys."},{"location":"api/container/query-collectors/#options","title":"Options","text":"Option field Return type Description <code>key</code> string Option key. <code>name</code> string Option name. <code>info</code> string Option info. <code>type</code> string One of <code>Bool</code>, <code>Int</code>, <code>Float</code>, <code>String</code>, <code>ListBool</code>, <code>ListInt</code>, <code>ListFloat</code> or <code>ListString</code>. <code>default</code> any Default value (The default value is not guaranteed to pass the validation function)."},{"location":"api/container/query-collectors/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-collectors/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/collectors?fields=key,kind&amp;options=key,type,default' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"key\": \"wmi\",\n        \"kind\": \"probe\",\n        \"options\": [\n            {\n                \"key\": \"address\",\n                \"type\": \"String\",\n                \"default\": \"\",\n            }\n        ]\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-id/","title":"Query container Id","text":"<p><code>GET</code> /container/id</p>"},{"location":"api/container/query-id/#description","title":"Description","text":"<p>Query a container Id by token. This route only works with a container token.</p>"},{"location":"api/container/query-id/#path-parameters","title":"Path parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/query-id/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>)."},{"location":"api/container/query-id/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/id' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"containerId\": 123\n}\n</code></pre></p>"},{"location":"api/container/query-invites/","title":"Query container invites","text":"<p><code>GET</code> /container/&lt;containerId&gt;/invites?fields=...</p>"},{"location":"api/container/query-invites/#description","title":"Description","text":"<p>Query all pending invitations for a given container.</p>"},{"location":"api/container/query-invites/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-invites/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query-invites/#fields","title":"Fields","text":"Field Return type Description <code>email</code> string Email for the user. <code>member</code> boolean <code>True</code> when the user is markered as a member. Alerts can only be assigned to members of the container. <code>permissions</code> array(string) List with the user permissions (see: authentication flags for a complete list)."},{"location":"api/container/query-invites/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container not found."},{"location":"api/container/query-invites/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/users' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 123,\n        \"name\": \"Alice in Wonderland\",\n        \"email\": \"alice@wonderland.net\",\n        \"authProvider\": \"Password\",\n        \"inherit\": false,\n        \"member\": true,\n        \"mute\": false,\n        \"permissions\": [\n            \"READ\"\n        ]\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-labels/","title":"Query container labels","text":"<p><code>GET</code> /container/&lt;containerId&gt;/labels?fields=...</p>"},{"location":"api/container/query-labels/#description","title":"Description","text":"<p>Query all labels for a given container. Containers inherit parent labels, so those are included too.</p>"},{"location":"api/container/query-labels/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-labels/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query-labels/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Label Id. <code>name</code> string Label name. <code>color</code> string One of <code>Steel</code>, <code>Olive</code>, <code>Mauve</code>, <code>Emerald</code>, <code>Orange</code>, <code>Magenta</code> or <code>InfraSonarBlue</code>. <code>description</code> string Label description. <code>ownerId</code> int Container Id where the label is created."},{"location":"api/container/query-labels/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-labels/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/labels' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 456,\n        \"name\": \"Windows\",\n        \"color\": \"InfraSonarBlue\",\n        \"description\": \"Windows label\",\n        \"ownerId\": 123\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-permissions/","title":"Query container permissions","text":"<p><code>GET</code> /container/&lt;containerId&gt;/permissions</p>"},{"location":"api/container/query-permissions/#description","title":"Description","text":"<p>Query the token permissions for the given container ID. Returns with authentication flags and the type token which is used.</p>"},{"location":"api/container/query-permissions/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-permissions/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/query-permissions/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container not found."},{"location":"api/container/query-permissions/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/permissions' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"permissions\": [\n        \"API\",\n        \"ASSET_MANAGEMENT\",\n        \"CHECK_MANAGEMENT\",\n        \"CONTAINER_ADMIN\",\n        \"CONTAINER_MANAGEMENT\",\n        \"READ\"\n    ],\n    \"tokenType\": \"user\"\n}\n</code></pre></p>"},{"location":"api/container/query-properties/","title":"Query properties","text":"<p><code>GET</code> /container/&lt;containerId&gt;/properties?kind=...&amp;id=...&amp;fields=...</p>"},{"location":"api/container/query-properties/#description","title":"Description","text":"<p>Query all properties for a given container. Each property is assigned to an object, which we call the \"target\" object.</p>"},{"location":"api/container/query-properties/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-properties/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>kind</code> none Only properties for a specific kind. One of <code>Asset</code>, <code>Container</code>, <code>Condition</code> or <code>User</code>. <code>id</code> none Only properties for a given Id."},{"location":"api/container/query-properties/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Target Id for the property. <code>kind</code> string/null Target Kind of the property. One of <code>Asset</code>, <code>Container</code>, <code>Condition</code>, <code>User</code> or <code>null</code> if no target is found. <code>name</code> string/null Readable name for the target. This value can be <code>null</code> if no target is found for the Id. <code>key</code> string Property key. <code>value</code> any Property value."},{"location":"api/container/query-properties/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-properties/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/properties?id=123' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 123,\n        \"kind\": \"Asset\",\n        \"name\": \"my-host\",\n        \"key\": \"alt_client_id\",\n        \"value\": 456\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-users/","title":"Query container users","text":"<p><code>GET</code> /container/&lt;containerId&gt;/users?fields=...</p>"},{"location":"api/container/query-users/#description","title":"Description","text":"<p>Query all users for a given container.</p> <p>Info</p> <p>Only users from accessible containers or those with the <code>member</code> property set to <code>true</code> are returned.</p>"},{"location":"api/container/query-users/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-users/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query-users/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Id for the user. <code>name</code> string Name for the user. <code>email</code> string/null Email for the user or <code>null</code> when not visible for the user. <code>authProvider</code> string Authentication provider for the user. One of <code>Google</code>, <code>Microsoft</code> or <code>Password</code>. <code>inherit</code> boolean <code>True</code> when the user is inherited from another container, <code>False</code> if the user is added to the container. <code>member</code> boolean <code>True</code> when the user is markered as a member. Alerts can only be assigned to members of the container. <code>mute</code> boolean <code>True</code> when the user is muted, <code>False</code> if the user is active. <code>permissions</code> array(string) List with the user permissions (see: authentication flags for a complete list)."},{"location":"api/container/query-users/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-users/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/users' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 123,\n        \"name\": \"Alice in Wonderland\",\n        \"email\": \"alice@wonderland.net\",\n        \"authProvider\": \"Password\",\n        \"inherit\": false,\n        \"member\": true,\n        \"mute\": false,\n        \"permissions\": [\n            \"READ\"\n        ]\n    }\n]\n</code></pre></p>"},{"location":"api/container/query-zones/","title":"Query container properties","text":"<p><code>GET</code> /container/&lt;containerId&gt;/zones</p>"},{"location":"api/container/query-zones/#description","title":"Description","text":"<p>Query all zones for a given container.</p>"},{"location":"api/container/query-zones/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query-zones/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/query-zones/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query-zones/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/zones' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"zone\": 0,\n        \"name\": \"default\"\n    }\n]\n</code></pre></p>"},{"location":"api/container/query/","title":"Query container","text":"<p><code>GET</code> /container/&lt;containerId&gt;?fields=...</p>"},{"location":"api/container/query/#description","title":"Description","text":"<p>Query container details.</p>"},{"location":"api/container/query/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/container/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Container Id. <code>name</code> string Container name. <code>timezone</code> string Container time-zone. <code>mode</code> string One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>properties</code> array(object) List with property object. Each property container a <code>key</code> and <code>value</code> property."},{"location":"api/container/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/container/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"id\": 123,\n    \"mode\": \"normal\",\n    \"name\": \"My Container\",\n    \"timezone\": \"Europe/Amsterdam\",\n    \"properties\": [{\n        \"key\": \"myProp\",\n        \"value\": null\n    }]\n}\n</code></pre></p>"},{"location":"api/container/remove-container/","title":"Remove container","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;</p>"},{"location":"api/container/remove-container/#description","title":"Description","text":"<p>Remove a container. Only \"empty\" (no assets or child containers etc.) containers  can be removed. If not empty, a <code>HTTP 400</code> error will be returned with the reason.</p> <p>Please be advised that <code>CONTAINER_MANAGEMENT</code> and <code>API</code> access privileges are requisite for the parent container. When using a container token, it is essential that the token has been generated for the parent container.</p>"},{"location":"api/container/remove-container/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/remove-container/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/remove-container/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Failed to remove the container. Most likely the container is not empty. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_MANAGEMENT</code> on the parent container). <code>404</code> Container not found."},{"location":"api/container/remove-container/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/remove-invite/","title":"Remove invite from container","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;/invite</p>"},{"location":"api/container/remove-invite/#description","title":"Description","text":"<p>Remove an invite from a container. Returns <code>204</code> even if the invite does not exist.</p>"},{"location":"api/container/remove-invite/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/remove-invite/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/remove-invite/#body","title":"Body","text":"Param Type Required Description <code>email</code> string Yes Email for the invite to remove."},{"location":"api/container/remove-invite/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container not found."},{"location":"api/container/remove-invite/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/123/invite' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"email\": \"alice@wonderland.net\"\n}'\n</code></pre></p>"},{"location":"api/container/remove-property/","title":"Remove property","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;/properties/&lt;targetId&gt;/&lt;key&gt;</p>"},{"location":"api/container/remove-property/#description","title":"Description","text":"<p>Remove a property. Returns <code>204</code> even if the property did not exist.</p>"},{"location":"api/container/remove-property/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>targetId</code> Target Id. <code>key</code> Property to remove."},{"location":"api/container/remove-property/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/remove-property/#body","title":"Body","text":"<p>none</p>"},{"location":"api/container/remove-property/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/remove-property/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/123/properties/456/my_prop' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/remove-user/","title":"Remove user from container","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;/user/&lt;userId&gt;</p>"},{"location":"api/container/remove-user/#description","title":"Description","text":"<p>Remove a user from the container.</p>"},{"location":"api/container/remove-user/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>userId</code> Zone Id."},{"location":"api/container/remove-user/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/remove-user/#body","title":"Body","text":"<p>none</p>"},{"location":"api/container/remove-user/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container or user not found."},{"location":"api/container/remove-user/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/123/user/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/remove-zone/","title":"Remove zone from container","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;/zone/&lt;zoneId&gt;</p>"},{"location":"api/container/remove-zone/#description","title":"Description","text":"<p>Remove a zone from the container.</p>"},{"location":"api/container/remove-zone/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>zoneId</code> Zone Id."},{"location":"api/container/remove-zone/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/remove-zone/#body","title":"Body","text":"<p>none</p>"},{"location":"api/container/remove-zone/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container or zone not found."},{"location":"api/container/remove-zone/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/123/zone/0' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/container/set-mode/","title":"Set container mode","text":"<p><code>PATCH</code> /container/&lt;containerId&gt;/mode</p>"},{"location":"api/container/set-mode/#description","title":"Description","text":"<p>Set the container mode. Success (204) is also returned when the container was already in the desired mode.</p>"},{"location":"api/container/set-mode/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/set-mode/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/set-mode/#body","title":"Body","text":"Param Type Required Description <code>mode</code> string Yes One of <code>normal</code>, <code>maintenance</code> or <code>disabled</code>. <code>duration</code> integer No Duration for the mode in minutes. Accepts a value between <code>1</code> and <code>480</code> and only works when the mode is set to either <code>maintenance</code> or <code>disabled</code>. If <code>duration</code> is not given, the mode is changed indefinitely."},{"location":"api/container/set-mode/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found. <code>409</code> Too many open alerts. (mode \"normal\" is only allowed with less than 500 open alerts)"},{"location":"api/container/set-mode/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/container/123/mode' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"mode\": \"maintenance\"\n}'\n</code></pre></p>"},{"location":"api/container/set-property/","title":"Set property","text":"<p><code>POST</code> /container/&lt;containerId&gt;/properties</p>"},{"location":"api/container/set-property/#description","title":"Description","text":"<p>Create a property. Existing properties will be overwritten.</p>"},{"location":"api/container/set-property/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/set-property/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/set-property/#body","title":"Body","text":"Param Type Required Description <code>id</code> int Yes Target Id wherefore the property will be created. <code>kind</code> string Yes Must be one of <code>Asset</code>, <code>Container</code>, <code>Condition</code> or <code>User</code>. <code>key</code> string Yes Property key. <code>value</code> any Yes Property value which can be a string, number, boolean or null."},{"location":"api/container/set-property/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/set-property/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/properties' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"id\": 123,\n    \"kind\": \"Asset\",\n    \"key\": \"my_prop\",\n    \"value\": \"some value\"\n}'\n</code></pre></p>"},{"location":"api/container/update-user/","title":"Update user member and/or permissions","text":"<p><code>PUT</code> /container/&lt;containerId&gt;/user/&lt;userId&gt;</p>"},{"location":"api/container/update-user/#description","title":"Description","text":"<p>Update user member status and/or user permissions for the container.</p>"},{"location":"api/container/update-user/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>userId</code> User Id."},{"location":"api/container/update-user/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/update-user/#body","title":"Body","text":"Param Type Required Description <code>member</code> boolean No When <code>true</code>, the user will be marked as a member. Alerts can only be assigned to members of the container. If <code>member</code> is omitted, no change to the member status will be made. <code>permissions</code> array(string) No Optional list with user permissions (see: authentication flags for a complete list). If omitted, no permissions changes will be made. An empty list will remove all permissions."},{"location":"api/container/update-user/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ACCESS</code>). <code>404</code> Container or user not found."},{"location":"api/container/update-user/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/container/123/user/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"member\": false,\n    \"permissions\": [\"READ\", \"API\"]\n}'\n</code></pre></p>"},{"location":"api/container/upsert-zone/","title":"Create or update zone","text":"<p><code>POST</code> /container/&lt;containerId&gt;/zone</p>"},{"location":"api/container/upsert-zone/#description","title":"Description","text":"<p>Create or update a zone. Existing properties will be overwritten.</p>"},{"location":"api/container/upsert-zone/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/container/upsert-zone/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/container/upsert-zone/#body","title":"Body","text":"Param Type Required Description <code>zone</code> int Yes Zone Id. <code>name</code> string Yes Zone Name."},{"location":"api/container/upsert-zone/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Unknown field or invalid query param. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container not found."},{"location":"api/container/upsert-zone/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/zone' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"zone\": 1,\n    \"name\": \"other zone\"\n}'\n</code></pre></p>"},{"location":"api/files/delete-file/","title":"Delete a file","text":"<p><code>DELETE</code> /container/&lt;containerId&gt;/file/&lt;fileId&gt;</p>"},{"location":"api/files/delete-file/#description","title":"Description","text":"<p>Delete a file.</p>"},{"location":"api/files/delete-file/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>fileId</code> File Id."},{"location":"api/files/delete-file/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/files/delete-file/#body","title":"Body","text":"<p>none</p>"},{"location":"api/files/delete-file/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container or file not found."},{"location":"api/files/delete-file/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X DELETE 'https://api.infrasonar.com/container/123/file/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p>"},{"location":"api/files/download-file/","title":"Upload file","text":"<p><code>GET</code> /container/&lt;containerId&gt;/file/&lt;fileId&gt;</p>"},{"location":"api/files/download-file/#description","title":"Description","text":"<p>Download a file. For file info, see the Query file section.</p>"},{"location":"api/files/download-file/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>fileId</code> File Id."},{"location":"api/files/download-file/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/files/download-file/#body","title":"Body","text":"<p>none</p>"},{"location":"api/files/download-file/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container or file not found."},{"location":"api/files/download-file/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/file' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Returns with the raw file</p>"},{"location":"api/files/modify-file/","title":"Modify file","text":"<p><code>PUT</code> /container/&lt;containerId&gt;/file/&lt;fileId&gt;</p>"},{"location":"api/files/modify-file/#description","title":"Description","text":"<p>Rename the file or change the attached labels for a file.</p> <p>Note that if labels are provided, they will overwrite existing labels.</p>"},{"location":"api/files/modify-file/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>fileId</code> File Id."},{"location":"api/files/modify-file/#body","title":"Body","text":"Param Type Required Description <code>name</code> string No New file name. <code>labels</code> array(integer) No Overwrite labels. Be careful with an empty list as this will remove all labels from the file."},{"location":"api/files/modify-file/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>ASSET_MANAGEMENT</code>). <code>404</code> Container, file or one of the labels not found."},{"location":"api/files/modify-file/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PUT 'https://api.infrasonar.com/container/123/file/456' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"My file.docx\",\n    \"labels\": [456, 789]\n}'\n</code></pre></p>"},{"location":"api/files/query-file/","title":"Query file","text":"<p><code>GET</code> /container/&lt;containerId&gt;/file/&lt;fileId&gt;/info?fields=...</p>"},{"location":"api/files/query-file/#description","title":"Description","text":"<p>Query file info. For downloading the file, see the Download file section.</p>"},{"location":"api/files/query-file/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id. <code>fileId</code> File Id."},{"location":"api/files/query-file/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/files/query-file/#body","title":"Body","text":"<p>none</p>"},{"location":"api/files/query-file/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Key string of the alert. <code>size</code> integer Initial message when the alert was opened. <code>created</code> integer Unix timestamp in seconds when the file was created in InfraSonar. <code>type</code> string One of <code>xml</code>, <code>json</code>, <code>docx</code>, <code>xlsx</code>, <code>csv</code>, <code>pdf</code>, <code>image</code>, <code>text</code>, <code>markdown</code>, <code>compressed</code> or <code>unknown</code>. <code>name</code> string File name. <code>labels</code> array(integer) List with label Ids."},{"location":"api/files/query-file/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container or file not found."},{"location":"api/files/query-file/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/file/456/info?fields=id,name,labels' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"id\": 456,\n    \"name\": \"network-diagram.png\",\n    \"labels\": [789]\n}\n</code></pre></p>"},{"location":"api/files/query-files/","title":"Query container files","text":"<p><code>GET</code> /container/&lt;containerId&gt;/files?fields=...</p>"},{"location":"api/files/query-files/#description","title":"Description","text":"<p>Query all files for a given container.</p>"},{"location":"api/files/query-files/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/files/query-files/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> <code>id</code> Fields to return (see fields below for all available fields)."},{"location":"api/files/query-files/#fields","title":"Fields","text":"Field Return type Description <code>id</code> integer Key string of the alert. <code>size</code> integer Initial message when the alert was opened. <code>created</code> integer Unix timestamp in seconds when the file was created in InfraSonar. <code>type</code> string One of <code>xml</code>, <code>json</code>, <code>docx</code>, <code>xlsx</code>, <code>csv</code>, <code>pdf</code>, <code>image</code>, <code>text</code>, <code>markdown</code>, <code>compressed</code> or <code>unknown</code>. <code>name</code> string File name. <code>labels</code> array(integer) List with label Ids."},{"location":"api/files/query-files/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Container not found."},{"location":"api/files/query-files/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/container/123/files?fields=id,name,type' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>[\n    {\n        \"id\": 456,\n        \"name\": \"network-diagram.png\",\n        \"type\": \"image\"\n    }\n]\n</code></pre></p>"},{"location":"api/files/upload-file/","title":"Upload file","text":"<p><code>POST</code> /container/&lt;containerId&gt;/file</p>"},{"location":"api/files/upload-file/#description","title":"Description","text":"<p>Upload a new file. Only files with a size less than 250KB are allowed.</p>"},{"location":"api/files/upload-file/#path-parameters","title":"Path parameters","text":"Param Description <code>containerId</code> Container Id."},{"location":"api/files/upload-file/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/files/upload-file/#body","title":"Body","text":"<p>Files must be uploaded using multipart/form-data. See the examples below.</p>"},{"location":"api/files/upload-file/#return-codes","title":"Return codes","text":"Error code Reason <code>201</code> Success. <code>400</code> Invalid file (for example too large). <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>INSERT_CHECK_DATA</code>). <code>404</code> Container not found."},{"location":"api/files/upload-file/#examples","title":"Examples","text":"<p>Curl request: <pre><code>curl \\\n    -X POST 'https://api.infrasonar.com/container/123/file' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --form '=@\"/path-to-file/network-drawing.png\"'\n</code></pre></p> <p>Response: <pre><code>{\n    \"id\": 456\n}\n</code></pre></p> <p>Python: <pre><code>import requests\n\nurl = \"https://api.infrasonar.com/container/123/file\"\n\nfiles = [('', (\n    'network-drawing.png',\n    open('/path-to-file/network-drawing.png','rb'),\n    'image/jpeg'\n))]\n\nheaders = {\n    'Content-Type': 'multipart/form-data',\n    'Authorization': 'Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n}\n\nresponse = requests.request(\"POST\", url, headers=headers, files=files)\n\nprint(response.json())  # {\"id\":456}\n</code></pre></p> <p>C# (Http Client) <pre><code>var client = new HttpClient();\nvar request = new HttpRequestMessage(\n    HttpMethod.Post,\n    \"https://api.infrasonar.com/container/123/file\");\n\n// Set Authentication header\nrequest.Headers.Add(\n    \"Authorization\",\n    \"Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX\");\n\n// Create multipart content\nvar content = new MultipartFormDataContent();\ncontent.Add(\n    new StreamContent(File.OpenRead(\"/path-to-file/network-drawing.png\")),\n    \"\",\n    \"/path-to-file/network-drawing.png\");\n\n// Add contend to request\nrequest.Content = content;\n\nvar response = await client.SendAsync(request);\nresponse.EnsureSuccessStatusCode();\n\nConsole.WriteLine(await response.Content.ReadAsStringAsync());\n// \"{\\\"id\\\":456}\"\n</code></pre></p>"},{"location":"api/label/query/","title":"Query label","text":"<p><code>GET</code> /label/&lt;labelId&gt;?fields=...</p>"},{"location":"api/label/query/#description","title":"Description","text":"<p>Query label details.</p>"},{"location":"api/label/query/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields)."},{"location":"api/label/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Label Id. <code>name</code> string Label name. <code>color</code> string One of <code>Steel</code>, <code>Olive</code>, <code>Mauve</code>, <code>Emerald</code>, <code>Orange</code>, <code>Magenta</code> or <code>InfraSonarBlue</code>. <code>description</code> string Label description. <code>ownerId</code> int Container Id where the label is created."},{"location":"api/label/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>READ</code>). <code>404</code> Label not found."},{"location":"api/label/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/label/123?fields=name,color' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"name\": \"windows\",\n    \"color\": \"InfraSonarBlue\"\n}\n</code></pre></p>"},{"location":"api/label/set-color/","title":"Set label color","text":"<p><code>PATCH</code> /label/&lt;labelId&gt;/color</p>"},{"location":"api/label/set-color/#description","title":"Description","text":"<p>Set the label color. Success (204) is also returned when the label color remains unchanged.</p>"},{"location":"api/label/set-color/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/set-color/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/label/set-color/#body","title":"Body","text":"Param Type Required Description <code>color</code> string Yes Label color. See table below for all available colors."},{"location":"api/label/set-color/#kind","title":"Kind","text":"Color Name \u2b24 <code>Steel</code> (default) \u2b24 <code>Olive</code> \u2b24 <code>Mauve</code> \u2b24 <code>Emerald</code> \u2b24 <code>Orange</code> \u2b24 <code>Magenta</code> \u2b24 <code>Cherry</code> \u2b24 <code>Gold</code> \u2b24 <code>InfraSonarBlue</code> (reserved for global labels)"},{"location":"api/label/set-color/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ADMIN</code>). <code>404</code> Label not found."},{"location":"api/label/set-color/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/label/123/color' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"color\": \"Orange\"\n}'\n</code></pre></p>"},{"location":"api/label/set-description/","title":"Set label description","text":"<p><code>PATCH</code> /label/&lt;labelId&gt;/description</p>"},{"location":"api/label/set-description/#description","title":"Description","text":"<p>Set the label description. Success (204) is also returned when the label description has not changed.</p>"},{"location":"api/label/set-description/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/set-description/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/label/set-description/#body","title":"Body","text":"Param Type Required Description <code>description</code> string Yes Label description."},{"location":"api/label/set-description/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ADMIN</code>). <code>404</code> Label not found."},{"location":"api/label/set-description/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/label/123/description' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"description\": \"This is a nice label!\"\n}'\n</code></pre></p>"},{"location":"api/label/set-name/","title":"Set label name","text":"<p><code>PATCH</code> /label/&lt;labelId&gt;/name</p>"},{"location":"api/label/set-name/#description","title":"Description","text":"<p>Set the label name. Success (204) is also returned when the label name has not been changed.</p>"},{"location":"api/label/set-name/#path-parameters","title":"Path parameters","text":"Param Description <code>labelId</code> Label Id."},{"location":"api/label/set-name/#query-parameters","title":"Query parameters","text":"<p>none</p>"},{"location":"api/label/set-name/#body","title":"Body","text":"Param Type Required Description <code>name</code> string Yes Label name."},{"location":"api/label/set-name/#return-codes","title":"Return codes","text":"Error code Reason <code>204</code> Success. <code>400</code> Invalid body. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>CONTAINER_ADMIN</code>). <code>404</code> Label not found."},{"location":"api/label/set-name/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X PATCH 'https://api.infrasonar.com/label/123/name' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX' \\\n    -H 'Content-Type: application/json' \\\n    --data-raw '{\n    \"name\": \"My Label\"\n}'\n</code></pre></p>"},{"location":"api/reporting/get-report/","title":"Download report","text":"<p><code>GET</code> /reporting/&lt;reportingId&gt;/report/&lt;reportId&gt;</p>"},{"location":"api/reporting/get-report/#description","title":"Description","text":"<p>Download a report.</p>"},{"location":"api/reporting/get-report/#path-parameters","title":"Path parameters","text":"Param Description <code>reportingId</code> Reporting Id. <code>reportId</code> Report Id. (can be found using the reporting API)."},{"location":"api/reporting/get-report/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>REPORTING_VIEW</code>). <code>404</code> Report not found. <code>XXX</code> Other errors may occur when the report is not available for download."},{"location":"api/reporting/get-report/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/reporting/123/report/123' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>The result contains either a PDF, XLSX or JSON file, depending on the report type.</p>"},{"location":"api/reporting/query/","title":"Query reporting","text":"<p><code>GET</code> /reporting/&lt;reportingId&gt;?fields=...</p>"},{"location":"api/reporting/query/#description","title":"Description","text":"<p>Query reporting details.</p>"},{"location":"api/reporting/query/#path-parameters","title":"Path parameters","text":"Param Description <code>reportingId</code> Reporting Id."},{"location":"api/reporting/query/#query-parameters","title":"Query parameters","text":"Param Default Description <code>fields</code> all fields Fields to return (see fields below for all available fields). <code>reports</code> none Report fields. If at least one field is given, the result will include \"reports\" with an array of report objects (see Reports below for all available report fields)."},{"location":"api/reporting/query/#fields","title":"Fields","text":"Field Return type Description <code>id</code> int Reporting Id. <code>name</code> string Reporting name. <code>kind</code> string One of <code>AlertsNotificationsReport</code>, <code>StateDataReport</code>, <code>ChartDataReport</code>, <code>ConditionReport</code>. <code>content</code> string One of <code>PDF</code>, <code>JSON</code>, <code>XLSX</code>. <code>repeat</code> string/null One of <code>Daily</code>, <code>Weekly</code>, <code>Monthly</code> or <code>null</code> when this is a one-time reporting."},{"location":"api/reporting/query/#reports","title":"Reports","text":"Field Return type Description <code>id</code> int Report Id. <code>size</code> int Report size in bytes. <code>start</code> string Start time of the report. For example, a monthly report for March 2023 will return <code>2023-03-01T00:00:00+0100</code>. <code>success</code> bool This is <code>true</code> if the report was successful, else <code>false</code>."},{"location":"api/reporting/query/#return-codes","title":"Return codes","text":"Error code Reason <code>200</code> Success. <code>400</code> Unknown field. <code>401</code> Invalid or missing token. <code>403</code> Insufficient permissions (required: <code>API</code>+<code>REPORTING_VIEW</code>). <code>404</code> Reporting not found."},{"location":"api/reporting/query/#example","title":"Example","text":"<p>Curl request: <pre><code>curl \\\n    -X GET 'https://api.infrasonar.com/reporting/123?fields=name,kind&amp;reports=id,start' \\\n    -H 'Authorization: Bearer XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX'\n</code></pre></p> <p>Response: <pre><code>{\n    \"name\": \"My report\",\n    \"kind\": \"StateDataReport\",\n    \"reports\": [\n        {\n            \"id\": 123,\n            \"start\": \"2023-03-01T00:00:00+0100\"\n        }\n    ]\n}\n</code></pre></p>"},{"location":"application/","title":"Index","text":""},{"location":"application/#infrasonar-web-application","title":"InfraSonar web application","text":"<p>The InfraSonar web application (https://app.infrasonar.com) allows users to access the monitoring data and maintain their InfraSonar implementation given their account has sufficient permissions.</p> <p>The menu on the left reflects the InfraSonar application menu for easy reference.</p> <p>The Left hand menu reflects your permissions</p> <p>The left hand menu can vary per user based upon their specific permissions or the containers capacities, billing for example is only visible on those containers were our credit based billing module is applicable.</p> <p></p> <p>If you can't find the information you are looking for feel free to contact support</p>"},{"location":"application/agentcores/","title":"Agentcores","text":""},{"location":"application/agentcores/#agentcores-zones","title":"Agentcores &amp; Zones","text":""},{"location":"application/agentcores/#agentcore","title":"Agentcore","text":"<p>It this panel you can see the status of the Agentcores deployed for a container.</p>"},{"location":"application/agentcores/#remote-appliance-manager","title":"Remote Appliance Manager","text":"<p>Our preferred installation automatically installs the Remote application manager.</p> <p>The remote appliance manager runs as a docker container on our appliance and allows remote commands to be send from the Agentcore page in our web-app.</p> <p>If the remote appliance manager is active you can access it's configuration by clicking the gear  icon.</p>"},{"location":"application/agentcores/#general-section","title":"General section","text":"<p>Here you can change your tokens, select a different zone and view overall logging.</p> <p></p>"},{"location":"application/agentcores/#agents-section","title":"Agents section","text":"<p>Here you can enable agents which run inside a docker container.</p> <p></p> <p>TODO agent pages</p>"},{"location":"application/agentcores/#probes-section","title":"Probes section","text":"<p>Use the sync with container button to ensure the configured collector are deployed on the remote appliance.</p> <p>Enabled collectors which are not included in the list will be added, and collectors which are turned off will be removed. No changes will be applied until you explicitly choose to do so.</p> <p></p> <p>Note</p> <p>Some collectors require an additional configuration or credemtials. These can be set by clicking the pencil icon </p> <p></p> <p>The Environment tab allows you to set a debug level.</p> <p></p>"},{"location":"application/agentcores/#config-section","title":"Config section","text":"<p>Use the config section to create a specific probe configuration that can be applied on a collector in the Local configuration which is available for curtain probes.</p> <p></p> <p>The Name field can be used as a Local configuration</p> <p></p>"},{"location":"application/agentcores/#auto-update-section","title":"Auto update section","text":"<p>Use our auto update functionality to schedule regular updates of the collectors running on the remote appliance.</p>"},{"location":"application/agentcores/#remote-access-section","title":"Remote access section","text":"<p>When configured during the deployment of our appliance you can enable remote access here. Remote access allows authorized InfraSonar personal to access a tailored docker container for troubleshooting and debugging purposes. Access to this container is time-limited to avoid linger access. </p>"},{"location":"application/agentcores/#removing-a-agentcore","title":"Removing a Agentcore","text":"<p>With the proper authorization it is possible to remove an Agentcore here.</p> <p>Proceed with caution</p> <p>Removing an Agentcore without having a secondary agentcore in the same zone can seriously impact the availability of your monitoring solution.</p>"},{"location":"application/agentcores/#good-to-know","title":"Good to know","text":"<ul> <li>When one or more Agentcores are configured in the specified zone an asset is bound to one of the Agentcores in this zone.</li> <li>If no agentcores are configured in the specified zone we fall back to any other agent core.</li> <li>For assets being monitored using an agent the zone configuration is purely cosmetic.</li> </ul>"},{"location":"application/agentcores/#zones","title":"Zones","text":"<p>Zones can be useful when assets are located in a dmz or other remote network as it allows to direct assets to a specific Agentcore by configuring the asset to be a member of the specific zone.</p>"},{"location":"application/alerts/","title":"Alerts","text":""},{"location":"application/alerts/#alerts","title":"Alerts","text":"<p>Alerts are raised by conditions using the <code>return</code> statement in our condition edition.</p> <p>Using rules it is possible to route the alert to external notification sources such as email, SMS, WhatsApp, voice and webhooks.</p>"},{"location":"application/alerts/#viewing-alerts","title":"Viewing alerts","text":"<p>When you are in a container view (1) you can view the alerts and notifications in the  Alerts &amp; Notifications page (2)</p> <p></p> <p>This view shows:</p> <ul> <li>Open alerts (3) </li> <li>Closed alerts (4)</li> <li>Notifications (5)</li> </ul>"},{"location":"application/alerts/#open-alerts","title":"Open alerts","text":"<p>The open alerts (3) pane shows a list (6) of all open alerts and its status.</p> <p></p> <p>When you click the show details button  the details pane opens.</p> <p></p> <ol> <li>Add message, allows you to add a message to the alert; this might be useful to inform coworkers.</li> <li>Assign alert, allows you to assign the alert to yourself or another member of this container.</li> <li>Close alert, closes the alert; when the issue is not resolved, the issue is reopened and automatically assigned to the user who closed the alert.</li> <li>Refresh, refreshes the alert pane.</li> </ol>"},{"location":"application/alerts/#closed-alerts","title":"Closed alerts","text":"<p>The closed alerts pane (4) shows a list of closed alerts.</p>"},{"location":"application/alerts/#notifications","title":"Notifications","text":"<p>The closed alerts pane (5) shows a list of all open notifications (6).</p> <p>Notification are used to notify InfraSonar users of issues with the monitoring platform they offer a clear distinction between actual \"Alerts\" and when monitoring is failing.</p> <p>Notifications disappear when the issue is resolved, users can't close a notification only the system can once the issue is resolved.  As such all notifications should be handled as an indication that something is wrong with monitoring.</p> <p>Good to known</p> <p>Notifications are not the result of a\u00a0condition. The only notifications which are raised by incoming data, are the check errors. These are not\u00a0conditions\u00a0but errors which directly result in a notification.</p>"},{"location":"application/alerts/#managing-alerts","title":"Managing alerts","text":""},{"location":"application/alerts/#closing-alerts","title":"Closing alerts","text":"<p>There are three ways an alert gets closed:</p> <ol> <li>User close, an end users closed the alert;</li> <li>auto close, the condition is configured to close the alert if the issue is resolved;</li> <li>indirect close, the relation between the condition and asset is removed:<ol> <li>When the asset is removed from the condition (e.g. removing the label applying the condition);</li> <li>When the check triggering the condition is disabled;</li> <li>When the asset is removed.</li> </ol> </li> </ol> <p>Auto close caveat</p> <p>it is possible that an auto close fails when the item triggering the alert no longer exists upon a new check result. This can happen for example when you create a condition on cpu usage in a list of processes, if you then kill the process InfraSonar will never see this item again. When this happens you need to close the alert manually.</p>"},{"location":"application/assets/","title":"Assets","text":""},{"location":"application/assets/#assets","title":"Assets","text":"<p>The InfraSonar Asset concept is described here.</p>"},{"location":"application/assets/#add-asset","title":"Add asset","text":"<p>When you are in the assets view you can add a new asset using the  Add asset button.</p>"},{"location":"application/assets/#asset-configuration","title":"Asset configuration","text":"<p>Configuring an asset involves the following steps:</p> <ol> <li>Enter an asset name. We strongly suggest entering the correct hostname in FQDN format here, but do not enforce this.</li> <li>Enter an optional description.</li> <li>Select the mode. This is usually normal, see our mode documentation for more details</li> <li>Select the asset kind.    *Not only gives this a nice icon it also allows filtering in views and reports.</li> <li>Select the zone.    This is usually 0, see our zone documentation for more details</li> <li>Select the collectors you want to use.</li> <li>Enter the correct labels for this asset.</li> </ol> <p>Advanced asset configuration and credentials</p> <p>Some collectors require a more advanced configuration or credentials to be setup on the appliance running the collector. See our credentials section if this applies to your setup.</p>"},{"location":"application/assets/#adding-multiple-assets","title":"Adding multiple assets","text":"<p>When there is a need to add multiple assets at once we suggest using our api</p>"},{"location":"application/assets/#asset-usage","title":"Asset usage","text":""},{"location":"application/assets/#overview","title":"Overview","text":"<p>Provides an overview of the asset.</p> <p>Using the pencil  icon you can edit this asset.</p>"},{"location":"application/assets/#effective","title":"Effective","text":"<p>Shows the effective conditions for this asset.</p> <p></p> <p>This overview shows all conditions configured for this asset. A condtion can have three states: </p> <ol> <li>Active, this condition is actively being evaluated.</li> <li>Disabled, the condition is disabled on this asset.     You can disable a condition by clicking the condition name and toggle the condition in the lower left corner of the modal:  </li> <li>Dormant, there is no data for which this condition is applicable.</li> </ol>"},{"location":"application/assets/#open","title":"Open","text":"<p>All open alerts for this asset.</p>"},{"location":"application/assets/#closed","title":"Closed","text":"<p>All closed alerts for this asset.</p>"},{"location":"application/assets/#notifications","title":"Notifications","text":"<p>All notifications for this asset.</p>"},{"location":"application/assets/#collectors","title":"Collectors","text":"<p>A detailed view off all collected data per collector.</p>"},{"location":"application/assets/#more","title":"More","text":"<p>Here you can jump to:</p> <ul> <li>Forecasts, manage forecasts for this asset.   You van view the generated forecasts here and drop  forecasts when it is needed to regenerate a forecast.</li> <li>History, show all logged actions for this asset.</li> <li>Schedule, manage the mode schedule for this asset.</li> <li>Statistics, alert statistics for this asset</li> <li>Time series, manage time series for this asset.</li> </ul>"},{"location":"application/child_containers/","title":"Child containers","text":""},{"location":"application/child_containers/#child-containers","title":"Child containers","text":"<p>From the container view, you can add child containers.</p> <p> </p> InfraSonar add container <ol> <li>When you are in asset view you can use the child containers button  to switch to child container view;</li> <li>Click the add container button;</li> <li>Enter a name for your container;</li> <li>Select the mode, this is usual normal;</li> <li>Select the timezone for this container;</li> <li>CLick save.</li> </ol>"},{"location":"application/collectors/","title":"Collectors","text":""},{"location":"application/collectors/#collectors","title":"Collectors","text":"<p>Collectors can be turned of on container level here.</p>"},{"location":"application/collectors/#propagation","title":"Propagation","text":"<ul> <li>When turning a collector on or off existing children are not affected.</li> <li>Newly created children will inherit the configuration from it's parent.</li> </ul>"},{"location":"application/collectors/#usage","title":"Usage","text":"<p>This feature can be used to control which collectors are available on a container.</p> <p>Disabling unused collectors avoids mistakes and also unclutters the UI.</p>"},{"location":"application/conditions/","title":"Conditions","text":""},{"location":"application/conditions/#conditions","title":"Conditions","text":"<p>Check results sent to the InfraSonar cloud platform are immediately evaluated using the conditions configured for the specific asset.</p> <p>InfraSonar comes with many predefined conditions based on years of experience and best practices.</p> <p>In order to manage conditions you need to have the ContainerAdmin role on the container you want to manage conditions for.</p>"},{"location":"application/conditions/#general-tab","title":"General tab","text":"<p>Name</p> <p>The name you want to use for your condition, we suggest a short descriptive name.</p> <p>Description</p> <p>use the description to provide a short description of the purpose and usage of the condition.</p> <p>Collector</p> <p>Select the path to the data you want this condition.</p> <p>For collectors this is: <code>Collector</code>, <code>Check</code>, <code>Type</code></p> <p>Condition kind</p> <p>We identify three kind of Conditions:</p> Kind Description EXPRESSION Enter an expression to run against each existing item of the selected type in the result. The <code>item</code> variable represents the item and <code>prev</code> refers to the previously known item. ITEMS MUST EXIST Enter an expression to run against each existing item of the selected type in the result. The <code>item</code> variable represents the item and <code>prev</code> refers to the previously known item. ITEMS_MISSING Enter an expression to run against each item of the selected type that is missing from the result compared to the previous result. The <code>item</code> variable in the expression represents the previously known item. <p>Ticks</p> <p>The number of times this condition must be hit in a row before an actual alert will be raised.</p> <p>Note</p> <p>Ticks can not be set for the condition kind <code>ITEMS_MISSING</code> as this compares with a previous check result.</p> <p>Single alert</p> <p>Gathers up all alerts into a single alert per asset. When disabled, each item will be tested and may raise an alert.</p> <p>Close on return</p> <p>Close the alert when a missing item returns. This option is only available for an <code>ITEM_MISSING</code> condition and cannot be enabled in combination with \"Single alert\".</p>"},{"location":"application/conditions/#labels-tab","title":"Labels tab","text":"<p>In this tab you configure for which labels the condition is active.</p>"},{"location":"application/conditions/#items-tab","title":"Items tab","text":"<p>This tab allows you to set the severity and specify for which items this conditions is a active in case of <code>ITEMS MUST EXIST</code> or which items this condition should exclude in the case of <code>ITEMS_MISSING</code></p>"},{"location":"application/conditions/#items-must-exist","title":"Items must exist","text":"<p>All items will be checked for existence by the given list or regular expression.</p> <ul> <li>Condition will be executed when added to an asset or when the condition has been changed.</li> <li>Auto-close is always enabled.</li> <li>The item list or regular expression work as \"include\" by the item.name property.</li> <li>When a list is used, all items in the list must exist otherwise the condition is hit.</li> <li>When a regular expression is used, at least one item must match with the given regular expression otherwise the condition is hit.</li> </ul>"},{"location":"application/conditions/#items-missing","title":"Items missing","text":"<p>All items will be compared towards the previous items. If one (or more) items is missing which is not excluded by either the item list or regular expression, the condition expression will start and will return with an alert based on the expression outcome.</p> <ul> <li>Will re-run when added to an asset or when the condition has changed.</li> </ul>"},{"location":"application/conditions/#expression-tab","title":"Expression tab","text":"<p>InfraSonar uses a powerful expression language that allows for precise and tailored conditions.</p> <p>See our exxpression language documentation to learn how to write InfraSonar condition expressions.</p>"},{"location":"application/containers/","title":"Containers","text":""},{"location":"application/containers/#containers","title":"Containers","text":"<p>The containers view shows the hierarchy of containers and allows you to configure the container mode and timezone.</p> <p>You also move containers within the hierarchy within this view and renew containers.</p> <p>In this view you can also add/remove columns to show you:</p> <ul> <li>Container Id</li> <li>Container name</li> <li>Number of Assets</li> <li>Number of Unassigned alerts</li> <li>Number of Assigned alerts</li> <li>Number of Notifications</li> <li>Mode</li> <li>Timezone</li> </ul>"},{"location":"application/credits/","title":"Credits","text":""},{"location":"application/credits/#credits","title":"Credits","text":"<p>On the credits page you can find the \"in use\" credits and \"available\" credits for a container and it's children.</p> <p>You can drill-down per container to retrieve detailed usage:</p> <p> </p>"},{"location":"application/dashboard/","title":"Dashboard","text":""},{"location":"application/dashboard/#dashboard","title":"Dashboard","text":"<p>The dashboard gives an overview of all unassigned alerts and notifications per configured container and can be used to display on a central display.</p> <p>When you open the dashboard for the first time or in a new browser session you are created by a setup wizard. See our Dashboard setup paragraph how to setup you dashboard but first have a look on at our dashboard concept as this helps you decide on how to setup your dashboard.</p> <p>Raspberry Pi dashboard server</p> <p>See our Raspberry Pi guide on how we have setup our autonomous dashboards using a couple of Raspberry Pi's.</p>"},{"location":"application/dashboard/#dashboard-overview","title":"Dashboard overview","text":"<p>Our dashboard consists of two main sections:</p> <ol> <li>Graphical container overview</li> <li>Unassigned alerts</li> </ol> <p></p>"},{"location":"application/dashboard/#graphical-container-section","title":"Graphical container section","text":"<ul> <li>The outer circle show all alerts</li> <li>Assigned alerts are colored in a blue tint</li> <li>The inner circle shows all notifications</li> </ul>"},{"location":"application/dashboard/#unassigned-alerts-section","title":"Unassigned alerts section","text":"<p>The section shows all unassigned alerts sorted by time of creation.</p>"},{"location":"application/dashboard/#dashboard-setup","title":"Dashboard setup","text":"<p>You can edit the dashboard using the  icon.</p> <p></p> <ol> <li>Select which section you want to show.</li> <li>Select an optional screen division if you have chosen to use multiple sections</li> <li>Select the containers you want to display on this dashboard</li> </ol> <p>Configuration</p> <p>The dashboard configuration is stored in the users profile. This allows you to change a wall mounted dashboard easily by looging in as the user used to display the dashboard.</p>"},{"location":"application/home/","title":"Home","text":""},{"location":"application/home/#home","title":"Home","text":"<p>The home screen gives you a personalized overview of alerts assigned to you, containers, access and favorites.</p> <p>Visit our tour</p> <p>As a first time users please take our introduction tour, it is a great way to learn more about InfraSonar.</p> <p></p>"},{"location":"application/labels/","title":"Labels","text":""},{"location":"application/labels/#labels","title":"Labels","text":""},{"location":"application/labels/#purpose","title":"Purpose","text":"<p>Grouping, labels can be added to hosts to group and identify them quickly.</p> <p>Apply conditions, Labels are also used to control which conditions are active.</p> <p>Glue</p> <p>Labels \"glue\" conditions onto hosts.</p> <pre><code>graph LR\n  condition1[Condition] --- label; \n  condition2[Condition] --- label; \n  condition3[Condition] --- label; \n  label{{Label}} --- host1[Host];\n  label --- host2[Host];\n  label --- host3[Host];</code></pre>"},{"location":"application/labels/#how-to-use","title":"How to use","text":"<p>Labels can be assigned to hosts either by  editing a host or by selecting one or more hosts and using the action menu.</p> <p> </p> Action menu in action"},{"location":"application/labels/#custom-labels","title":"Custom labels","text":"<p>InfraSonar container admins can create custom labels for a container.</p> <p> </p> InfraSonar add label <p>Pro Tip</p> <p>As must browsers support emoji it is possible to use these in your labels. Examples:</p> <ul> <li>The round pushpin \ud83d\udccd to indicate labels used for locations. <code>\ud83d\udccd InfraSonar HQ</code></li> <li>Bust in Silhouette \ud83d\udc64 to indicate labels used for to indicate who is responsible for an asset. <code>\ud83d\udc64 C.E. Shannon</code></li> </ul> <ol> <li>Navigate to the labels page () in the left navigation drawer;</li> <li>Click the Add label button;</li> <li>Enter a name (1);</li> <li>Pick a color (2):   Steel   Olive   Mauve   Emerald   Orange   Magenta   InfraSonar-blue, (reserved for InfraSonar labels)</li> <li>Enter a description(3).</li> </ol>"},{"location":"application/labels/#predefined-labels","title":"Predefined labels","text":"<p>InfraSonar has created labels that, when applied to an asset with the appropriate collector, monitor the asset using best practices.</p>"},{"location":"application/log/","title":"Log","text":""},{"location":"application/log/#log","title":"Log","text":"<p>In It this panel you can see the logging of all user actions in the ui.</p>"},{"location":"application/modes/","title":"Modes","text":""},{"location":"application/modes/#modes","title":"Modes","text":"<p>Modes can be used to temporary change the monitoring operation on a container or an asset or group of assets.</p> <p>We identify the following modes within the InfraSonar application:</p> mode description <code>normal</code> normal operations, all conditions are evaluated. <code>maintenance</code> All asset notifications and alert messages suppressed <code>disabled</code> All data send by an agent for this asset is ignored. Any probes / checks configured for this asset are stopped. <p>Modes in day to day operations</p> <p>Modes are a powerful instrument when performing maintenance on assets as it allows on easy way to temporary stop the monitoring avoiding being flood with messages.</p>"},{"location":"application/modes/#mode-operations","title":"Mode operations","text":""},{"location":"application/modes/#container","title":"Container","text":"<p>Modes can be set on container level. Effectively changing the mode for all assets in the container.</p> <p>Changing the mode on a container can be done using our a  schedular or in the  container view.</p>"},{"location":"application/modes/#asset","title":"Asset","text":"<p>Changing the mode on an asset can be done while editing  an asset or  scheduled</p>"},{"location":"application/modes/#api","title":"API","text":"<p>It is also possible to change the mode using our API:</p> <ul> <li>Change mode on a asset</li> <li>Change mode on a container</li> </ul>"},{"location":"application/profile/","title":"Profile","text":""},{"location":"application/profile/#profile-menu","title":"Profile menu","text":"<p>In the top right corner you can find individual settings to configure your profile.</p>"},{"location":"application/profile/#access","title":"Access","text":"<p>The access menu option shows you which containers your account has access to. Your personal access tokens are also managed here.</p> <p> </p> InfraSonar profile - access Permissions <p>Here you can lookup your InfraSonar permissions per container :</p> <ul> <li>The Container column shows the container;</li> <li>The Permissions column shows the configured permissions for this container;</li> <li>The From column shows in the permissions were configured on the container or where inherited from a parent container.</li> </ul> Tokens <p>You will also configure your personal access tokens here.</p> <p>Keep tokes personal</p> <p>Tokens configured here are personal and represent you.</p>"},{"location":"application/profile/#alerts","title":"Alerts","text":"<p>Any alerts assigned to you can be found here.</p>"},{"location":"application/profile/#messages","title":"Messages","text":"<p>InfraSonar system-wide announcements and messages can be found here.</p> <p>These provide a valuable insight into new releases, planned maintenance windows etc.</p>"},{"location":"application/profile/#status","title":"Status","text":"<p>You can set your status to mute avoiding InfraSonar from sending any notification to you.</p> <p>Mute stops also rules</p> <p>Any rules sending you direct messages (SMS, email, WhatsApp and voice) are alo muted.</p> <p>You can create a schedule to set your status automatically.</p>"},{"location":"application/profile/#profile","title":"Profile","text":"<p>Your profile details</p> <p> </p> InfraSonar profile - profile Name Your display name as provided by your authentication provider. Email Your email address as provided by your authentication provider. Note, we will send messages and email notifications configured in rules to this address. Phone If you want to use WhatsApp, SMS and/or voice notifications in rules you need to configure your mobile phone number here. Dark theme Choice the dark side here. Display my email address to other users in my containers Makes your email address visible to other container users. Receive messages in your email When disabled InfraSonar messages will no longer be send via email"},{"location":"application/profile/#dashboard","title":"Dashboard","text":"<p>Your personal dashboard can be configured here.</p> <p>Any settings made to the dashboard are stored in you user profile and will be reflected in all logged on sessions. This can be useful for managing wall-boards.</p>"},{"location":"application/profile/#sign-out","title":"Sign out","text":"<p>Sign out of InfraSonar.</p>"},{"location":"application/reporting/","title":"Reporting","text":""},{"location":"application/reporting/#reporting","title":"Reporting","text":""},{"location":"application/reporting/#overview","title":"Overview","text":""},{"location":"application/reporting/#time-schedule","title":"Time schedule","text":"<p>Reports can be scheduled to be delivered at regular intervals:</p> <ul> <li>Daily</li> <li>Weekly</li> <li>Monthly</li> </ul> <p>Tips</p> <p>Editing Editing is only possible for repeating reports. One-off reports can be cloned to be run again using other parameters.</p> <p>Planning ahead It is possible to schedule reports in the future, we advise to enable notifications when doing so.</p> <p>State data Quering state data is due to its nature not possible over a period of time.</p>"},{"location":"application/reporting/#data-filers","title":"Data filers","text":"<p>Data filters can be used to fine grain which assets are returned in your report.</p> <p>Depending on the report you can use any of these filters:</p> <ul> <li>Asset kind filterYou can opt to limit your report to a specific asset kind.</li> <li>Container filterAllows you to select for which containers you want the report </li> <li>Label filterAllows you to filter for which labels you want the report </li> </ul>"},{"location":"application/reporting/#reports","title":"Reports","text":"<p>The following reports are available, we can add additional reports on request.</p>"},{"location":"application/reporting/#alerts-and-notifications","title":"Alerts and notifications","text":"<p>This report contains charts for alerts and notifications within a selected time period.</p>"},{"location":"application/reporting/#state-data","title":"State data","text":"<p>This report shows data for a <code>collector</code> / <code>check</code> / <code>type</code> for a selection of assets.</p> <p>State data reports can be useful to periodically retrieve data for keeping your CMDB up to date.</p>"},{"location":"application/reporting/#chart-data","title":"Chart data","text":"<p>This report generates a PDF-document with charts for a selection of assets.</p> <p>A useful use case for this report can be to report monthly storage usage.</p>"},{"location":"application/reporting/#condition-hit","title":"Condition hit","text":"<p>This reports shows when and how many time a condition is being hit within a selected time period.</p>"},{"location":"application/reporting/#condition-status","title":"Condition status","text":"<p>This reports show the status for a condition (like the effective condition page) for a selection of assets.</p>"},{"location":"application/reporting/#check-status","title":"Check status","text":"<p>This reports show the status for a collector/check for a selection of assets. </p>"},{"location":"application/reporting/#phone-usage","title":"Phone usage","text":"<p>This report contains information about phone usage within a selected time period.</p> <p>This reports gives an overview of all external notifications send to a mobile phone via either SMS, WhatsApp or voice message.</p>"},{"location":"application/reporting/#vmware-guests","title":"VMware guests","text":"<p>This report contains all VMware Guests based on vCenter or ESX guests-lists combined with assets running the vmwareguest collector.</p>"},{"location":"application/reporting/#hyper-v-guests","title":"Hyper-V guests","text":"<p>This report contains all Hyper-V Guests based on the Hyper-V guests-lists combined with assets running the hypervguest collector.</p>"},{"location":"application/reporting/#unifi-devices","title":"UniFi devices","text":"<p>This report contains all UniFi devices based on the UniFI Controller device lists combined with assets running the unifidevice collector.</p>"},{"location":"application/rules/","title":"Rules","text":""},{"location":"application/rules/#rules","title":"Rules","text":"<p>Rules are a great way to configure external notifications for end-users.</p> <p>Rules can be setup for a group of conditions and assets and route messages to either SMS, WhatsApp, Email, a webhook or even a voice call.</p> <p>Setup you phone number</p> <p>Before we can send a message using SMS or WhatsApp to your phone we need to know your phone number. Your can manage your phone number in your profile.</p>"},{"location":"application/rules/#prerequisites","title":"Prerequisites","text":"<p>If you want to use SMS, WhatsApp or voice calls it is important to note that every time the rule is triggered this will cost one credit which will count against your monthly billed credits.</p> <p>Users with the privilege RuleManagement can setup any rules, even for other users.</p> <p>The privilege RuleEmail allows users to manage there own email rules while RulePhone allows users to manage their own SMS, WhatsApp or voice calls.</p> <p>It is important though that for each user who wants to use SMS, WhatsApp or voice calls their number must be setup in their profile.</p>"},{"location":"application/rules/#configuring-alert-rules","title":"Configuring alert rules","text":"<p>Ask your users to setup their phone number</p> <p>If toBefore we can send a message using SMS or WhatsApp to your phone we need to know your phone number. Your can manage your phone number in your profile.</p> <p>The next paragraphs outline each of the tabs when configuring rules.</p>"},{"location":"application/rules/#general","title":"General","text":"<p>To start, select how you'd like this rule to notify you by selecting a rule kind :</p> <ul> <li>App (see: My InfraSonar)</li> <li>Email</li> <li>Webhook</li> <li>SMS</li> <li>VoiceCall</li> <li>WhatsApp</li> </ul> <p>For webhooks some additional options can be configures, see our webhook documentation for the specific details.</p> <p>When configuring SMS, VoiceCall or WhatsApp we urge you to test the communication using the test button to ensure your desired way of communication is working.</p> <p>Next step is to configure a user   for whom this rule is applicable.</p> <p>Set a description   for this rule, your future self and colleagues will thank you later.</p> <p>Last choose in this section is for which severity   level you want to be notified.</p> <p>Choose your severity level wisely</p> <p>Choosing a lower level notifies you also about the more urgent levels. So if you choose Critical you will also be notified when an Alert or Emergency level is hit.  To avoid unexpected costs and messages flooding you choosing the correct severity levels requires some careful consideration, if in doubt don't hesitate to contact support</p>"},{"location":"application/rules/#condition","title":"Condition","text":"<p>In this section you choose for which conditions you want this rule to be active or not.</p> <p>You can choose to exclude or include  specific conditions  this rule to applies to.</p>"},{"location":"application/rules/#asset","title":"Asset","text":"<p>Select the label  you want to use to specify for which assets this rule applies, if you don't select a label this rule will apply to all assets in the container.</p> <p>When a label a selected we will show a list of assets  for which this rule applies.</p>"},{"location":"application/rules/#schedule","title":"Schedule","text":"<p>Adding a schedule is only possible once the rule has been saved.</p> <p>Click Add schedule  to add a schedule.</p>"},{"location":"application/rules/#configuring-notification-rules","title":"Configuring notification rules","text":"<p>Configuring notification rules is similar to configuring alert rules.</p> <p></p> <p>The main difference between notification rules and alert rules is that notification rules specify on specific notifications you want the rule to be applied for, while alert rules specify which conditions and assets will trigger an alert.</p> <p>Configuring which notification are handled by this rule is done in the kind  tab. Here you can select if you want to  exclude or include  one or more notification kinds </p>"},{"location":"application/schedule/","title":"Schedule","text":""},{"location":"application/schedule/#schedule","title":"Schedule","text":"<p>Our schedular allows you to schedule a mode change on a specific time or at specific intervals for a container.</p> <p>The schedule option is also available for a single asset and can be found below the \"More\" menu in the asset view. </p>"},{"location":"application/timeseries/","title":"Time series","text":""},{"location":"application/timeseries/#time-series","title":"Time Series","text":"<p>In this panel it is possible to turn time-series off or on on a container level.</p> <p>Another feature in this panel is to purge dead time-series</p>"},{"location":"application/timeseries/#turning-time-series-off","title":"Turning time-series off","text":"<p>Turning time-series off can be useful in curtain use-cases to reduce costs.</p> <p>Note</p> <p>When a time-serie is turned any configured graphs will show the last measured state in a flat-line.</p> <p>Also important to note is than any Enodo conditions will no longer work as these require historical data to perform the analysis on.</p>"},{"location":"application/timeseries/#turning-time-series-on","title":"Turning time-series on","text":"<p>In some scenario's where you would like more in-depth analysis in might be beneficial to enable time-series.</p> <p>A good example where this might be of using is monitoring per process information using the wmi probe. This is turned off by default as it can quickly result in massive time-series usage.</p>"},{"location":"application/timeseries/#purge-dead-time-series","title":"Purge dead time-series","text":"<p>Dead time-series occur when an asset is removed or when an asset is modified.</p> <p>An easy example of an asset modification that leads to dead time-series is a removed volume.</p> <p>Purging dead time-series removes all time-series which not received data for the provided amount of weeks.</p>"},{"location":"application/tokens/","title":"Tokens","text":""},{"location":"application/tokens/#tokens","title":"Tokens","text":"<p>Container tokens can be used to authorize external automation to manage InfraSonar data within a container using our API.</p> <p>Tokens are bound to a container</p> <p>Tokens are used for authentication but also to identify the container.</p> <p>As such data sent from an agentcore or agent appears within the container the configured token belongs to.</p> <p>Container tokens are also required for agentcore and agent authentication.</p> <p>Tip</p> <p>We strongly suggest setting up separate tokens where possible.</p>"},{"location":"application/tokens/#create-container-tokens","title":"Create container tokens","text":"<ol> <li>Navigate to the container you want to create a token for.</li> <li>Click the tokens icon  in the left hand menu.</li> <li>Click the Add token button.</li> <li>Give the token a identifiable name and provide just enough accessobserve we added some shortcuts to create access tokens for Agentcores and probes</li> <li>Click Save, enter a reason and click confirm</li> <li>Reopen the just created token and copy the ID.</li> </ol>"},{"location":"application/tokens/#pre-defined-roles","title":"Pre-defined roles","text":"<p>We predefined three roles to quickly set the correct permissions:</p> <ul> <li>Agentcore</li> <li>Agent</li> <li>Agent (no auto asset creation)</li> </ul>"},{"location":"application/tokens/#container-token-rules","title":"Container token rules","text":"<ul> <li>User who have the de <code>container Access</code> flag set can create container tokens.</li> <li>A user can not grant more access permissions to a token then he or she already has.</li> </ul>"},{"location":"application/trash/","title":"Trash","text":""},{"location":"application/trash/#trash","title":"Trash","text":"<p>Asset's are soft-deleted.</p> <p>When an asset is deleted we remove the collectors from the asset and move the asset to the trash-bin.</p>"},{"location":"application/trash/#recovering-an-asset","title":"Recovering an asset","text":"<p>When you recover an asset you will need to add the collectors and labels back to this asset.</p> <p>Kind and description are recovered from the \"bin\".</p> <p>When you did not purge the time-series data this will be available again also.</p>"},{"location":"application/users/","title":"Users","text":""},{"location":"application/users/#users","title":"Users","text":"<p>A user with ContainerAccess rights can manage users.</p> <p>Tip</p> <p>As with any platform we advise to adhere to the Principle of least privilege</p>"},{"location":"application/users/#authentication","title":"Authentication","text":"<p>We support user authentication using using one of these cloud identities:</p> <ul> <li> Microsoft account (this can be a work or personal account)</li> <li> Google account (this can be a personal or Google workspace account)</li> </ul> <p>Note</p> <p>Users can only be added to our platform if they are \"known\" to us. As such a user should fist authenticate once on our platform and from there on the user can be added to a container.</p>"},{"location":"application/users/#authorization","title":"Authorization","text":"<p>A user's identity can be authorized on a container using a specific permissions.</p> <p>Note</p> <p>Also note a user with ContainerAccess rights can never assign more permissiong the assigned to this user.</p>"},{"location":"application/users/#how-to","title":"How-to","text":""},{"location":"application/users/#add-user","title":"Add user","text":"<p>You can only add a user to a container if the user is \"known\" in InfraSonar, so a new user needs to logon using a Microsoft or Google account prior granting the user access.</p> <p>Users can be added using the email address they used to authenticate with.</p>"},{"location":"application/users/#access-permissions-for-regular-users","title":"Access permissions for regular users","text":"<p>We suggest the following set of access permissions for regular users:</p> <ul> <li> Is member</li> <li> View</li> <li> AlertChange</li> </ul> <p>Optionally we suggest adding:</p> <ul> <li> AlertAssign as this allows the user to assign alerts to users.</li> <li> ReportingView, access to reports can help users to get a better understanding.</li> <li> RuleEmail, allowing users to setup email rules for themselves can be beneficial.</li> </ul>"},{"location":"application/users/#permissions","title":"Permissions","text":"<p>Dashboard only access</p> <p>When no flags are set the specified user hasdashboard access only.</p> <p>We have listed each of the specific InfraSonar permission flags below:</p>"},{"location":"application/users/#is-member","title":"Is member","text":"<p>Allows alerts to be assigned to this user, makes the user \"visible\" for alert assignment.</p>"},{"location":"application/users/#view","title":"View","text":"<p>Required for viewing this container.</p>"},{"location":"application/users/#billing","title":"Billing","text":"<p>Required for viewing the credits tab on this container (only when credits are available on the on the container).</p>"},{"location":"application/users/#insertcheckdata","title":"InsertCheckData","text":"<p>Required for inserting data using the API (used by agents).</p>"},{"location":"application/users/#agentcoreconnect","title":"AgentcoreConnect","text":"<p>Required for AgentCores to connect to the hub.</p>"},{"location":"application/users/#assetmanagement","title":"AssetManagement","text":"<ul> <li>Required for changing the container mode (and/or schedule container mode);</li> <li>Required for changing the asset mode (and/or schedule asset mode);</li> <li>Required for creating new assets;</li> <li>Required for removing assets (including delete from trash);</li> <li>Required for changing asset configuration (including labels and collector related configuration).</li> </ul>"},{"location":"application/users/#alertassign","title":"AlertAssign","text":"Required for assigning alerts."},{"location":"application/users/#alertchange","title":"AlertChange","text":"Required for closing alerts; Required for adding comments to alerts."},{"location":"application/users/#api","title":"API","text":"<p>Required for any API request.</p>"},{"location":"application/users/#containermanagement","title":"ContainerManagement","text":"<ul> <li>Required for adding child containers to this container;</li> <li>Required for removing this container;</li> <li>Required for renaming this container.</li> </ul>"},{"location":"application/users/#containeradmin","title":"ContainerAdmin","text":"<ul> <li>Required for creating/changing/removing labels within this container;</li> <li>Required for creating/changing/removing conditions within this container;</li> </ul>"},{"location":"application/users/#containeraccess","title":"ContainerAccess","text":"<ul> <li>Required for managing user access to this container;</li> <li>Required for managing tokens on this container.</li> </ul>"},{"location":"application/users/#checkmanagement","title":"CheckManagement","text":"<p>Required for enable/disable/configure checks per collector on assets.</p>"},{"location":"application/users/#timeseriesmanagement","title":"TimeSeriesManagement","text":"<p>Required for enable/disable time-series for this container.</p>"},{"location":"application/users/#rulemanagement","title":"RuleManagement","text":"<p>Required for managing all rules on this container. (including rules for webhooks and rules for other users)</p>"},{"location":"application/users/#ruleemail","title":"RuleEmail","text":"<p>Required for creating a personal email rule on this container.</p>"},{"location":"application/users/#purgetimeseries","title":"PurgeTimeSeries","text":"<p>Required for purging dead-time-series within this container.</p>"},{"location":"application/users/#viewlog","title":"ViewLog","text":"<p>Required for viewing logging.</p>"},{"location":"application/users/#reportingview","title":"ReportingView","text":"<p>Required for viewing reports.</p>"},{"location":"application/users/#reportingadmin","title":"ReportingAdmin","text":"<p>Required for managing reports.</p>"},{"location":"application/users/#containertokens","title":"ContainerTokens","text":"<p>Required for managing container tokes.</p>"},{"location":"application/users/#rulephone","title":"RulePhone","text":"<p>Required for creating a personal phone rule like SMS, PhoneCall or WhatsApp on this container.</p>"},{"location":"application/users/#webhooks","title":"Webhooks","text":"<p>Required for managing and viewing Webhooks. Be careful with this privilege as webhooks might contain sensitive information like API keys. (This auth flag is not required for creating rules using webhooks)</p>"},{"location":"application/views/","title":"Views","text":""},{"location":"application/views/#views","title":"Views","text":"<p>Consolidate and Visualize Your Assets</p> <p>Views allow you to create comprehensive overviews of multiple assets, grouped by kind and/or label, providing a centralized dashboard for your monitoring data.</p>"},{"location":"application/views/#sharing-views","title":"Sharing views","text":"<p>Views can easily be shared even to users with only access to a container, but without any other permissions. This is a great feature to create service management dashboards for customers or partners.</p> <p>A view can be shared using a special link which is shown when clicking the link icon , this will provide a URL like this: <pre><code>https://app.infrasonar.com/view/&lt;&lt;some-key&gt;&gt;\n</code></pre></p>"},{"location":"application/views/#user-access","title":"User access","text":"<p>Users accessing a shared view IRL can easily mark this view as favorite using the  icon in the top right corner. This allows them to quickly access the view from their home-screen when the logon again.</p> <p></p>"},{"location":"application/views/#public-views","title":"Public views","text":"<p>A view can be set to public, allowing access without an InfraSonar account. This feature is useful for sharing the platform's status, such as network uptime or server performance, in a public dashboard. Be aware that sharing this URL grants access to anyone who possesses it.</p> <p>Public Views</p> <p>Exercise caution when making views public, as sensitive information may be exposed.</p>"},{"location":"application/webhooks/","title":"Webhooks","text":""},{"location":"application/webhooks/#webhooks","title":"Webhooks","text":"<p>Webhooks can be used to inform third party services about open en closed alerts and notifications. A webhook must be used by a rule before the webhook will be executed. This enables more control for when a webhook must be called.</p>"},{"location":"application/webhooks/#variable-in-a-webhook","title":"Variable in a webhook","text":"<p>It is possible to use variable using the syntax <code>{{ variable }}</code> when creating a webhook. The following variable are available:</p> Variable Scope Example value <code>alert_link</code> Alert https://app.infrasonar.com/container/123/asset/456/alert?condition=789&amp;item=myitem&amp;alert=1689146219 <code>alert_message</code> Alert A message with optional MarDown syntax. <code>alert_severity</code> Alert WARNING (One of <code>EMERGENCY</code>, <code>ALERT</code>, <code>CRITICAL</code>, <code>ERROR</code>, <code>WARNING</code>, <code>NOTICE</code>, <code>INFORMATIONAL</code> or <code>DEBUG</code>) <code>alert_timestamp</code> Alert 1689146219 <code>asset_id</code> Alert 456 <code>asset_name</code> Alert My asset <code>condition_id</code> Alert 789 <code>condition_name</code> Alert My condition <code>container_id</code> All 123 <code>container_link</code> All https://app.infrasonar.com/container/123 <code>container_name</code> All My container <code>item_name</code> Alert My item <code>ks</code> All (Unique key string to identify the alert of notification) <code>notification_identifier</code> Notification (For example an asset name but can be nil) <code>notification_index</code> Notification (For example a check name but can be nil) <code>notification_kind</code> Notification ConnectionStatus (One of <code>ConnectionStatus</code>, <code>ConnectionTimeDelta</code>, <code>RappUpdateError</code>, <code>ProbeVersion</code>, <code>ProbeMissing</code>, <code>ProbeTimeDelta</code>, <code>ProbeNoHeartbeat</code>, <code>CheckMissing</code>, <code>CheckError</code>, <code>CheckAged</code>, <code>CheckInvalidResult</code>, <code>CheckInvalidTimestamp</code>, <code>CheckInvalidData</code>, <code>ContainerMaintenance</code>, <code>AgentcoreMissing</code> or <code>ConditionError</code>) <code>notification_message</code> Notification A message with optional MarkDown syntax. <code>notification_severity</code> Notification MEDIUM (One of <code>LOW</code>, <code>MEDIUM</code> or <code>HIGH</code>) <code>notification_timestamp</code> Notification 1689146219 <code>webhook_id</code> All 0 (Webhook identifier) <code>webhook_name</code> All My webhook <code>scope</code> All AlertOpen (One of <code>AlertOpen</code>, <code>AlertClose</code>, <code>NotificationOpen</code> or <code>NotificationClose</code>)"},{"location":"collectors/","title":"Index","text":""},{"location":"collectors/#collectors","title":"Collectors","text":"<p>InfraSonar collectors collect monitoring data to be parsed by the InfraSonar cloud platform.</p> <p>Please review our collector concept documentation to gain more insight.</p> <p>All our general purpose collectors are available as open-source  on our GitHub  page.</p> <p>Using our extensive libraries we can easily develop additional collectors based upon your needs.  </p>"},{"location":"collectors/agents/","title":"Index","text":""},{"location":"collectors/agents/#agents","title":"Agents","text":"<p>An InfraSonar agents is an installable software component that autonomously and send the retrieved monitoring data to the InfraSonar platform using the InfraSonar API</p> <p>Our remote appliance manager makes it easy to deploy specific agent onto your monitoring appliance.</p>"},{"location":"collectors/agents/#connectivity","title":"Connectivity","text":"<p>Agents typically have a direct connection to our api endpoint over a HTTPS connection. (api.infrasonar.com)</p> <pre><code>flowchart LR\n    A(InfraSonar agent) --&gt;|HTTPS | B(InfraSonar platform)</code></pre> <p>It is however possible to use our InfraSonar appliance as a proxy and route agent trafic to the appliance and then to our InfraSonar platform.</p> <pre><code>flowchart LR\n    A(InfraSonar agent) --&gt;|HTTPS | B(InfraSonar appliance)\n    B --&gt;|HTTPS | C(InfraSonar platform)</code></pre>"},{"location":"collectors/agents/#api-forwarder","title":"API forwarder","text":"<p>For this to work you first need to enable the API forwarder on our appliance.</p> <ol> <li>Open the InfraSonar webapp (https://app.infraonar.com).</li> <li>Navigate to the agentcore you want to use.</li> <li>Click the gear  icon to configure the appliance.</li> <li>Open the agents tab</li> <li>Toggle API forwarder <code>on</code></li> </ol>"},{"location":"collectors/agents/#agent-configuration","title":"Agent configuration","text":"<p>Agents are by default configured to connect to <code>api.infrasonar.com</code>, there are two supported approaches to connect agents to the appliance instead of directly to our internet endpoint.</p>"},{"location":"collectors/agents/#dns","title":"DNS","text":"<p>For this method you need to create a response policy zone for <code>api.infrasonar.com</code> and add our API IP address to this zone.</p> <p>When using Windows DNS:</p> <ol> <li>Open DNS manager</li> <li>Create a new primary zone </li> <li>Select the appropriate replication scope</li> <li>Enter the zone name: <code>api.infrasonar.com</code></li> <li>Select Do not allow dynamic updates</li> <li>Add a new host <code>A</code> record</li> <li>Leave the name field empty**</li> <li>Enter the IP address of your appliance</li> <li>Verify if the name is resolved correctly <code>nslookup api.infrasonar.com</code></li> </ol>"},{"location":"collectors/agents/#agent-configuration_1","title":"Agent configuration","text":"<p>For most agents setting the environment variable <code>API_URI</code> to you appliance DNS name is sufficient.</p> <p>Our Windows agent stores it's configuration in the registry and requires <code>ApiUrl</code> as <code>REG_SZ</code> under <code>Computer\\HKEY_LOCAL_MACHINE\\SOFTWARE\\WOW6432Node\\Cesbit\\InfraSonarAgent</code></p> <p>Note</p> <p>The URI format implies you use <code>https://yourappliancename.yourinternalzone.something</code></p> <p>Check the agent GitHub page on https://github.com/infrasonar when in doubt.</p>"},{"location":"collectors/agents/discovery/","title":"Discovery","text":"<p>The Discover agent uses nmap to periodically scan and map a subnet for assets and open TCP ports.</p> <p>Assets discovered by the discovery agent can easily be added to InfraSonar.</p>"},{"location":"collectors/agents/discovery/#features","title":"Features","text":"<ul> <li>Subnet scan, scan a subnet for assets and open TCP ports.</li> <li>Add assets, easily add dicovered assets to InfraSonar directly from the detailed scan output.</li> <li>Periodically  or one off, our discovert agent can be deployed to run periodically or once as a means for initial deployment. </li> </ul>"},{"location":"collectors/agents/discovery/#prerequisites","title":"Prerequisites","text":"<p>The discovert agent uses Nmap under the hood and expects Nmap to be installed on the system were the agent is being deployed.</p> <p>Our docker-container deployment already includes Nmap </p> <p>See the Nmap download page for more information how to install Nmap.</p> <p>Nmap on Windows</p> <p>On modern Windows installation Nmap can easilty be installed via <code>winget</code> <pre><code>winget install -e --id Insecure.Nmap\n</code></pre></p>"},{"location":"collectors/agents/discovery/#installation","title":"Installation","text":""},{"location":"collectors/agents/discovery/#infrasonar-appliance","title":"InfraSonar appliance","text":"<p>You can easily deploy our discovery agent using our Remote Appliance Manager.</p>"},{"location":"collectors/agents/discovery/#windows","title":"Windows","text":"<p>Download the latest release here For Windows you want the <code>discovery-agent-widnows-amd64-x.x.x.zip</code> file were <code>x.x.x</code> represents our latest version number.</p>"},{"location":"collectors/agents/discovery/#usage","title":"Usage","text":"<p>You can run the discovery agent as a one-off scan like this:</p> <pre><code>discovery-agent --token &lt;agent-token&gt; --asset-id &lt;asset-id&gt; --network &lt;subnet&gt;\n</code></pre> <ul> <li><code>&lt;agent-token&gt;</code>, enter your agent-token here </li> <li><code>&lt;asset-id&gt;</code>, enter the asset ID tou want to use to report the discory results to.</li> <li><code>&lt;subnet&gt;</code>, the subnet in CIDR notation</li> </ul>"},{"location":"collectors/agents/discovery/#additional-information","title":"Additional information","text":"<p> Discovery agent source code</p>"},{"location":"collectors/agents/docker/","title":"Docker","text":""},{"location":"collectors/agents/docker/#docker","title":"Docker","text":"<p>The Docker-agent is a Docker container that can be used to monitor other Docker containers. The Docker-agent itself runs as a Docker container on the host, which hosts the containers and uses the Unix socket <code>docker.sock</code> to retrieve relevant monitoring data which, is send to the InfraSonar API.</p>"},{"location":"collectors/agents/docker/#prerequisites","title":"Prerequisites","text":"<ul> <li>The Docker-agent must be able to connect to the InfraSonar API</li> <li>The Docker-agent must be allowed access to the Unix socket <code>docker.sock</code>.</li> <li>The Docker-agent requires a valid token.</li> </ul>"},{"location":"collectors/agents/docker/#installation","title":"Installation","text":"<p>There are multiple scenario's that can be used to deploy the docker agent and it depends on your use case which one would suites best for you.</p> <p>Host network vs bridge network</p> <p>When using a bridge network it is highly recommended to set the container host name using the <code>--hostname</code> / <code>-h</code> flag as this is the name used by the agent to present itself.</p> <p>Upon first run the Docker agents registers itself as an asset in InfraSonar, to ensure reconnection to the same asset an asset-id is stored in <code>/data/.asset.json</code> hence the reason we mount the the <code>/data</code> folder.</p>"},{"location":"collectors/agents/docker/#docker-command","title":"Docker command","text":"<p>Deploys the docker agent using a bridged network and names the hostname to the system hostname:</p> <pre><code>docker run \\\n  --name dockeragent \\\n  -h $HOSTNAME \\\n  -v infraSonarData:/data \\\n  -e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -d \\\n  ghcr.io/infrasonar/docker-agent\n</code></pre> <p>Deploys the docker agent using the host network and thus automatically uses the system hostname:</p> <pre><code>docker run \\\n  --name dockeragent \\\n  --network host \\\n  -v infraSonarData:/data \\\n  -e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n  -v /var/run/docker.sock:/var/run/docker.sock \\\n  -d \\\n  ghcr.io/infrasonar/docker-agent\n</code></pre>"},{"location":"collectors/agents/docker/#docker-compose","title":"docker-compose","text":"<p>You can also add the Docker-agent to your <code>docker-compose.yml</code> file:</p> <pre><code>volumes:\n  infraSonarData:\n\nservices:\n  dockeragent:\n    network_mode: host\n    container_name: dockeragent\n    hostname: dockeragent\n    restart: always\n    logging:\n      options:\n        max-size: 5m\n    image: ghcr.io/infrasonar/docker-agent\n    environment:\n      TOKEN: \"&lt;&lt;agent token&gt;&gt;\"\n      ASSET_ID: \"&lt;&lt;asset_ID&gt;&gt;\" #optional\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - infraSonarData:/data\n</code></pre>"},{"location":"collectors/agents/docker/#known-issues","title":"Known issues","text":"<p>We have seen docker version 20.10.8, build 3967b7d fail with the following error:</p> <pre><code>dockeragent    | [E 250429 07:32:42 agent:133] announce failed: can't start new thread\n</code></pre> <p>Adding the <code>privileged</code> flag to the docker-compose file solved this issue:</p> <pre><code>services:\n  dockeragent:\n    .....\n    image: ghcr.io/infrasonar/docker-agent\n    privileged: true\n    .....\n</code></pre>"},{"location":"collectors/agents/docker/#additional-information","title":"Additional information","text":"<ul> <li> Docker agent</li> </ul>"},{"location":"collectors/agents/fsevents/","title":"fsevents","text":"<p>The FS-Events agent is a specialized agent used to measure how long a restore from tape takes.</p> <p>If you feel you need an agent like FS-Events please contact support to discuss your specific needs.</p>"},{"location":"collectors/agents/fsevents/#fs-events-stats-explained","title":"FS Events stats explained","text":"<ul> <li>average: average load duration all time, tape and cached</li> <li>averageTape: average load duration all time, tape only</li> <li>avgLatest: average load duration latest files, tape and cache</li> <li>avgLatestTape: average load duration latest, tape only</li> <li>bytesPerSecLatestTape: transfer speed latest files from tape</li> <li>bytesPerSecTape:transfer speed all time from tape</li> <li>counter: Total number of restores</li> <li>counterTape: Total number of tape restores</li> <li>numLatest: Latest number of restores</li> <li>numLatestTape: Latest number of tape restores</li> </ul> <p>Note: By 'latest', we refer to the files currently held in the queue. When the queue reaches its capacity, the oldest file is removed, which is why the remaining files are considered the 'latest'.</p>"},{"location":"collectors/agents/fsevents/#additional-information","title":"Additional information","text":"<p> QStar agent source code</p>"},{"location":"collectors/agents/kubernetes/","title":"Kubernetes","text":""},{"location":"collectors/agents/kubernetes/#kubernetes","title":"Kubernetes","text":""},{"location":"collectors/agents/kubernetes/#introduction","title":"Introduction","text":"<p>The Kubernetes agent monitors your Kubernetes cluster using an easy to deploy pod in your cluster.</p>"},{"location":"collectors/agents/kubernetes/#prerequisites","title":"Prerequisites","text":"<ul> <li>A valid InfraSonar token.</li> <li>An InfraSonar asset ID if you want to use a Deployment instead of a StatefulSet.</li> </ul>"},{"location":"collectors/agents/kubernetes/#installation","title":"Installation","text":"<p>Create a namespace for the agent:</p> namespace.yaml<pre><code>apiVersion: v1\nkind: Namespace\nmetadata:\n  name: monitoring\n</code></pre> <p>Create a cluster role for the agent:</p> cluster_role.yaml<pre><code>kind: ClusterRole\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: infrasonar\nrules:\n- apiGroups: [\"metrics.k8s.io\", \"apiregistration.k8s.io\", \"\"]\n  resources: [\"pods\", \"namespaces\", \"nodes\", \"nodes/proxy\", \"apiservices\", \"persistentvolumeclaims\", \"services\"]\n  verbs: [\"list\", \"get\"]\n</code></pre> <p>Create a cluster role binding for the agent:</p> cluster_role_binding.yaml<pre><code>kind: ClusterRoleBinding\napiVersion: rbac.authorization.k8s.io/v1\nmetadata:\n  name: infrasonar\nsubjects:\n- kind: ServiceAccount\n  name: default\n  namespace: monitoring\nroleRef:\n  kind: ClusterRole\n  name: infrasonar\n  apiGroup: rbac.authorization.k8s.io\n</code></pre> <p>Apply the above files:</p> <pre><code>kubectl apply -f namespace.yaml\nkubectl apply -f cluster_role.yaml\nkubectl apply -f cluster_role_binding.yaml\n</code></pre>"},{"location":"collectors/agents/kubernetes/#deployment","title":"Deployment","text":"<p>Choose your desired deployment</p> <p>If you already have an asset or want to create one manually in InfraSonar, you only need the asset ID and can use a Deployment. Otherwise, skip this part and read the StatefulSet section.</p> <p>Create a deployment for the agent:</p> deployment.yaml<pre><code>apiVersion: apps/v1\nkind: Deployment\nmetadata:\n  name: infrasonar\n  namespace: monitoring\n  labels:\n    app: infrasonar\nspec:\n  selector:\n    matchLabels:\n      app: infrasonar\n  template:\n    metadata:\n      labels:\n        app: infrasonar\n    spec:\n      containers:\n      - name: infrasonar\n        image: ghcr.io/infrasonar/kubernetes-agent:latest\n        imagePullPolicy: Always\n        env:\n        - name: ASSET_ID\n          value: \"&lt;REPLACE_WITH_YOUR_ASSET_ID&gt;\"\n        - name: TOKEN\n          value: \"&lt;REPLACE_WITH_YOUR_AGENT_TOKEN&gt;\"\n</code></pre> <p>Apply the deployment:</p> <pre><code>kubectl apply -f deployment.yaml\n</code></pre>"},{"location":"collectors/agents/kubernetes/#statefulset","title":"StatefulSet","text":"<p>Use a StatefulSet only if you want the agent to create the asset for you, otherwise use a Deployment.</p> <p>Create a StatefulSet for the agent:</p> stateful_set.yaml<pre><code>apiVersion: apps/v1\nkind: StatefulSet\nmetadata:\n  name: infrasonar\n  namespace: monitoring\n  labels:\n    app: infrasonar\nspec:\n  selector:\n    matchLabels:\n      app: infrasonar\n  serviceName: infrasonar\n  replicas: 1\n  template:\n    metadata:\n      labels:\n        app: infrasonar\n    spec:\n      containers:\n      - name: infrasonar\n        image: ghcr.io/infrasonar/kubernetes-agent:latest\n        imagePullPolicy: Always\n        env:\n        - name: ASSET_ID\n          value: \"/mnt/data/asset.json\"\n        - name: TOKEN\n          value: \"&lt;REPLACE_WITH_YOUR_AGENT_TOKEN&gt;\"\n        volumeMounts:\n        - name: data\n          mountPath: /mnt/data\n  volumeClaimTemplates:\n  - metadata:\n      name: data\n    spec:\n      accessModes: [\"ReadWriteOnce\"]\n      resources:\n        requests:\n          storage: 1Mi\n</code></pre> <p>Apply the StatefulSet:</p> <pre><code>kubectl apply -f stateful_set.yaml\n</code></pre>"},{"location":"collectors/agents/kubernetes/#cleanup","title":"Cleanup","text":"<p>When you no longer want to use the Kubernetes agent, you can remove it with the following steps:</p> <p>If a Deployment was used:</p> <pre><code>kubectl delete deployment infrasonar --namespace=monitoring\n</code></pre> <p>If a StatefulSet was used:</p> <pre><code>kubectl delete sts infrasonar --namespace=monitoring\nkubectl delete pvc -l app.kubernetes.io/name=infrasonar --namespace=monitoring\n</code></pre> <p>Cleanup the namespace, service account and associated role and binding:</p> <pre><code>kubectl delete ClusterRoleBinding infrasonar\nkubectl delete ClusterRole infrasonar\nkubectl delete ns monitoring\n</code></pre>"},{"location":"collectors/agents/kubernetes/#my-cpu-and-memory-metrics-are-missing","title":"My CPU and Memory metrics are missing","text":"<p>If the pod and node CPU and Memory metrics are missing, please check the agent logging. Most likely the metric server is not running. This can be checked using the following command:</p> <pre><code>kubectl get apiservices v1beta1.metrics.k8s.io\n</code></pre> <p>The above should return with something like: <pre><code>NAME                     SERVICE                      AVAILABLE   AGE\nv1beta1.metrics.k8s.io   kube-system/metrics-server   True        123d\n</code></pre></p> <p>Click here for information on how to install the metrics server.</p>"},{"location":"collectors/agents/kubernetes/#additional-information","title":"Additional information","text":"<p> Kubernetes agent source code</p>"},{"location":"collectors/agents/linux/","title":"Linux agent","text":"<p>Our Linux agent is a single binary which can easily be deployed on x86 Linux systems. If you need to monitor a different CPU architecture please contact support.</p>"},{"location":"collectors/agents/linux/#installation","title":"Installation","text":""},{"location":"collectors/agents/linux/#easy-deployment","title":"Easy deployment","text":"<p>You can use our easy deployment script to swiftly deploy the InfraSonar agent onto your Linux systems.</p> <p>Prerequisites: - curl, this script is downloaded using the <code>curl</code> command and also uses this command internally to download our binary agent. - elevated privileges as it installs a service. - systemd, our easy deployment scrips opt to use <code>systemd</code> to install the agent as as service.</p> <pre><code>sudo /bin/bash -c \"$(curl -fsSL https://deploylinuxagent.infrasonar.com)\"\n</code></pre> <p>The install script prompts you for the InfraSonar agent token and optional asset token as shown below:</p> <pre><code>[INFO] Creating directory '/opt/infrasonar-agent'...\n[INFO] Configuration file does not exist.\n[INFO] Creating directory '/etc/infrasonar'...\nPlease enter your token: &lt;&lt;ENTER YOUR INFRASONAR AGENT TOKEN HERE&gt;&gt;\nAdd asset token, leave empty for auto creation: \n[INFO] Created config file '/etc/infrasonar/linux-agent.env'...\n[INFO] Successfully downloaded infrasonar-linux-agent\n[INFO] Creating systemd unit file '/etc/systemd/system/infrasonar-linux-agent.service'...\n[INFO] Enabling and starting the InfraSonar Linux agent service...\nCreated symlink /etc/systemd/system/multi-user.target.wants/infrasonar-linux-agent.service \u2192 /etc/systemd/system/infrasonar-linux-agent.service.\n[INFO] Infrasonar Linux agent service started successfully.\n[INFO] InfraSonar Linux agent deployment complete.\n</code></pre> <p>By default this script installs the binary in <code>/opt/infrasonar-agent</code> and it's config file in <code>/etc/infrasonar</code> the service is installed as  <code>infrasonar-linux-agent</code></p> Linux deployment script source code <p>The source code of our easy deployment script:</p> Deplyment script source code<pre><code>#!/bin/bash\n\n# --- Variables ---\n\ninstall_dir=\"/opt/infrasonar-linux-agent\"\nconfig_dir=\"/etc/infrasonar\"\npackage_name=\"linux-agent\"\nbinary_name=\"infrasonar-linux-agent\"\ngithub_repo=\"infrasonar/linux-agent\"\nsystemd_unit_file=\"/etc/systemd/system/infrasonar-linux-agent.service\"\n\nlog_info() {\n  echo \"[INFO] $1\"\n}\n\nlog_error() {\n  echo \"[ERROR] $1\" &gt;&amp;2\n}\n\ncheck_root() {\n  if [[ \"$EUID\" -ne 0 ]]; then\n    log_error \"This script requires root privileges. Please run with sudo.\"\n    exit 1\n  fi\n}\n\ncheck_systemd() {\n  if ! command -v systemctl &amp;&gt; /dev/null; then\n    log_error \"systemd is not available on this system.  This script requires systemd.\"\n    exit 1\n  fi\n}\n\ncreate_directory() {\n  local dir_path=\"$1\"\n  if [ ! -d \"$dir_path\" ]; then\n    log_info \"Creating directory '$dir_path'...\"\n    mkdir -p \"$dir_path\"\n  else\n    log_info \"Directory '$dir_path' already exists.\"\n  fi\n}\n\ndownload_agent() {\n  # Fetch the latest release info from GitHub API\n  response=$(curl -s \"https://api.github.com/repos/\"$github_repo\"/releases/latest\")\n\n  # Extract the download URL for the Linux asset using grep and sed\n  download_url=$(echo \"$response\" | grep '\"browser_download_url\":' | sed -n \"/$package_name/p\" | sed 's/.*\"browser_download_url\": \"//' | sed 's/\".*//')\n\n  # Check if a URL was found\n  if [ -n \"$download_url\" ]; then\n    # Download the file\n    curl -sL \"$download_url\" -o $install_dir/$binary_name\n    chmod +x $install_dir/$binary_name\n    log_info \"Successfully downloaded $binary_name\"\n  else\n    log_error \"Error: Could not find a suitable download URL for Linux.\"\n    exit 1\n  fi\n}\n\ncreate_config() {\n  if [ -f \"$config_dir/linux-agent.env\" ]; then\n    log_info \"Configuration file already exists.\"\n  else\n    log_info \"Configuration file does not exist.\"\n    # Create configuration directory\n    create_directory \"$config_dir\"\n    # Ask for token\n    read -p \"Please enter your token: \" token\n    echo \"TOKEN=$token\" &gt;\"$config_dir/linux-agent.env\"\n    # Ask for optional asset ID\n    read -p \"Add asset token, leave empty for auto creation: \" assetid\n    if [[ -n \"$assetid\" ]]; then\n      echo \"ASSET_ID=$assetid\" &gt;&gt; \"$config_dir/linux-agent.env\"\n    fi\n    log_info \"Created config file '$config_dir/linux-agent.env'...\"\n  fi\n}\n\ncreate_systemd_unit() {\n    log_info \"Creating systemd unit file '$systemd_unit_file'...\"\n    cat &lt;&lt;EOF &gt; \"$systemd_unit_file\"\n[Unit]\nDescription=InfraSonar Linux Agent\nWants=network.target\n\n[Service]\nWorkingDirectory=$install_dir\nEnvironmentFile=$config_dir/linux-agent.env\nExecStart=$install_dir/$binary_name\nRestart=on-failure\n\n[Install]\nWantedBy=multi-user.target\nEOF\n}\n\nenable_and_start_service() {\n  log_info \"Enabling and starting the InfraSonar Linux agent service...\"\n  systemctl enable infrasonar-linux-agent\n  systemctl start infrasonar-linux-agent\n  if [ $? -ne 0 ]; then\n    log_error \"Failed to start the InfraSonar Linux agent service. Check systemctl status InfraSonar-linux-agent for details.\"\n  else\n    log_info \"Infrasonar agent service started successfully.\"\n  fi\n}\n\n# --- Main Script ---\n\ncheck_root\ncheck_systemd # added systemd check\ncreate_directory \"$install_dir\"\ncreate_config\ndownload_agent\ncreate_systemd_unit\nenable_and_start_service\n\nlog_info \"InfraSonar Linux agent deployment complete.\"\n</code></pre>"},{"location":"collectors/agents/linux/#verify","title":"Verify","text":"<p>You can verify if the agent is running correctly using the following command:</p> <pre><code>systemctl status infrasonar-linux-agent\n</code></pre> <p>It should output something similar as this:</p> <pre><code>\u25cf infrasonar-agent.service - InfraSonar Linux Agent\n     Loaded: loaded (/etc/systemd/system/infrasonar-linux-agent.service; enabled; preset: enabled)\n     Active: active (running) since Fri 2025-06-27 08:02:17 UTC; 7min ago\n   Main PID: 587 (infrasonar-linu)\n      Tasks: 7 (limit: 38298)\n     Memory: 5.2M (peak: 7.9M)\n        CPU: 40ms\n     CGroup: /system.slice/infrasonar-linux-agent.service\n             \u2514\u2500587 /opt/infrasonar-agent/infrasonar-linux-agent\n\nJun 27 08:02:17 linuxagent-ubuntu systemd[1]: Started infrasonar-agent.service - InfraSonar Linux Agent.\nJun 27 08:02:17 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:17 Starting InfraSonar Linux Agent Collector v0.1.1\nJun 27 08:02:18 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:18 Created asset `linuxagent-ubuntu.fritz.box` (Id: 97898)\nJun 27 08:02:18 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:18 Scheduled: CHECK_NETWORK_INTERVAL: 300 / Inital wait: 97\nJun 27 08:02:18 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:18 Scheduled: CHECK_SYSTEM_INTERVAL: 300 / Inital wait: 113\nJun 27 08:02:18 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:18 Scheduled: CHECK_DISK_INTERVAL: 300 / Inital wait: 116\nJun 27 08:02:18 linuxagent-ubuntu infrasonar-linux-agent[587]: 2025/06/27 08:02:18 Scheduled: CHECK_MEMINFO_INTERVAL: 300 / Inital wait: 74\n</code></pre>"},{"location":"collectors/agents/linux/#checks","title":"Checks","text":""},{"location":"collectors/agents/linux/#memory","title":"Memory","text":"<p>Linux memory statistics, mostly taken from <code>/proc/meminfo</code>:</p>"},{"location":"collectors/agents/linux/#overall-system-memory","title":"Overall System Memory","text":"<p>These metrics provide a high-level view of the total physical RAM and its immediate status.</p> Metric Description Total RAM<code>memTotal</code> The total amount of physical RAM available on the system. Free RAM<code>memFree</code> The amount of physically unallocated memory. This doesn't account for reclaimable memory like <code>cached</code>. Available RAM<code>memAvailable</code> An estimate of how much memory is available for new applications, without swapping. This is a more accurate indicator of available memory than <code>memFree</code>. Commit Limit<code>commitLimit</code> The total amount of memory that can be allocated on the system. This is <code>memTotal - swapTotal</code> by default, but can be configured. Committed Virtual Memory<code>committedAS</code> The total amount of memory that the system has guaranteed to applications, even if it's not yet actually allocated (overcommit)."},{"location":"collectors/agents/linux/#page-cache-and-buffers","title":"Page Cache and Buffers","text":"<p>These represent memory used by the kernel for optimizing disk I/O. This memory is typically reclaimable if applications need it.</p> Metric Description File Cache<code>cached</code> Memory used to cache files from the disk (page cache). This is memory that can be reclaimed. Disk Buffers<code>buffers</code> Memory used by kernel buffers, primarily for block device I/O (e.g., raw disk blocks). Cached Swap<code>swapCached</code> Memory that once was in swap, is now back in RAM, but is still also in the swap file (so it can be quickly swapped out again). Dirty RAM<code>dirty</code> Memory waiting to be written back to disk. This data is \"dirty\" because it has been modified in memory but not yet saved. Writeback RAM<code>writeback</code> The amount of memory that is actively being written back to disk. Temp. Writeback<code>writebackTmp</code> Temporary writeback memory. This is memory that is temporarily used for writeback operations, often during high I/O load."},{"location":"collectors/agents/linux/#active-vs-inactive-memory","title":"Active vs. Inactive Memory","text":"<p>This grouping helps understand how recently memory pages have been accessed, which dictates their reclaimability.</p> Metric Description Active RAM<code>active</code> Memory that has been used more recently and is less eligible for reclaim. It's considered to be actively in use. Active Anon. RAM<code>activeAnon</code> Memory that is active and anonymous (not backed by a file). This typically includes application data. Active File Cache<code>activeFile</code> Memory that is active and file-backed (e.g., memory mapped files, data cached from files). Inactive RAM<code>inactive</code> Memory that has not been used recently and is a candidate for reclaim. Inactive Anon. RAM<code>inactiveAnon</code> Memory that is inactive and anonymous. Inactive File Cache<code>inactiveFile</code> Memory that is inactive and file-backed. Unevictable RAM<code>unevictable</code> Memory that cannot be easily reclaimed or swapped out (e.g., <code>mlocked</code> memory). Locked RAM<code>mlocked</code> Memory that has been \"locked\" into RAM and will not be swapped out. This is often used for security-sensitive applications or real-time systems. Anonymous RAM<code>anonPages</code> Total amount of anonymous memory (not backed by a file). This includes application data and dynamically allocated memory."},{"location":"collectors/agents/linux/#kernel-internal-memory","title":"Kernel Internal Memory","text":"<p>These metrics show memory used by the Linux kernel itself for various internal structures and operations.</p> Metric Description Slab Cache<code>slab</code> Memory used by the kernel for its own internal data structures (e.g., caches for inodes, directory entries, process control blocks). It's divided into <code>sReclaimable</code> and <code>sUnreclaim</code>. Reclaimable Slab<code>sReclaimable</code> Part of the <code>slab</code> cache that can be reclaimed (e.g., caches for directory entries and inodes). Unreclaimable Slab<code>sUnreclaim</code> Part of the <code>slab</code> cache that cannot be reclaimed (e.g., critical kernel data structures). Kernel Stacks<code>kernelStack</code> Memory used by kernel stacks for each process and kernel thread. Page Tables<code>pageTables</code> The amount of memory consumed by the kernel to store page tables. Mapped Files/Devices<code>mapped</code> The amount of memory mapped by devices or files (including shared libraries). Bounce Buffers<code>bounce</code> Memory used for block device bounce buffers. This is typically for older or 32-bit hardware that cannot address high memory directly. Corrupted Hardware RAM<code>hardwareCorrupted</code> Memory that has been identified as corrupted by hardware errors."},{"location":"collectors/agents/linux/#huge-pages","title":"Huge Pages","text":"<p>Dedicated memory pages of larger sizes used for specific applications (e.g., databases) for performance reasons.</p> Metric Description Total Huge Pages<code>hugePagesTotal</code> The total number of huge pages configured on the system. Free Huge Pages<code>hugePagesFree</code> The number of huge pages that are free and available. Reserved Huge Pages<code>hugePagesRsvd</code> The number of huge pages that are reserved for future allocations. These are not yet allocated but are not available for general use. Surplus Huge Pages<code>hugePagesSurp</code> The number of huge pages that are above the <code>hugePagesTotal</code> limit. This can happen if the system dynamically allocates more huge pages than initially configured. Huge Page Size<code>hugepagesize</code> The size of a huge page (e.g., 2048 kB). Anon. Huge Pages<code>anonHugePages</code> Anonymous memory that is backed by huge pages. Direct Map 1GB<code>directMap1G</code> The amount of physical memory mapped into the kernel's virtual address space using 1GB huge pages. Direct Map 2MB<code>directMap2M</code> The amount of physical memory mapped into the kernel's virtual address space using 2MB huge pages. Direct Map 4KB<code>directMap4k</code> The amount of physical memory mapped into the kernel's virtual address space using 4KB pages."},{"location":"collectors/agents/linux/#swap-space","title":"Swap Space","text":"<p>Metrics related to the virtual memory extension on disk.</p> Metric Description Total Swap<code>swapTotal</code> The total amount of swap space available on the system. Free Swap<code>swapFree</code> The total amount of swap space that is currently free."},{"location":"collectors/agents/linux/#shared-memory","title":"Shared Memory","text":"<p>Memory regions that can be shared between multiple processes.</p> Metric Description Shared Memory<code>shmem</code> Total memory used for shared memory (e.g., SysV shared memory, POSIX shared memory, and tmpfs)."},{"location":"collectors/agents/linux/#vmalloc-kernel-virtual-memory","title":"Vmalloc (Kernel Virtual Memory)","text":"<p>Kernel's dynamically allocated virtual address space, not necessarily physical memory.</p> Metric Description Vmalloc Largest Chunk<code>vmallocChunk</code> The largest contiguous block of <code>vmalloc</code> space available. Vmalloc Total<code>vmallocTotal</code> The total size of the <code>vmalloc</code> address space. <code>vmalloc</code> is used by the kernel to allocate contiguous virtual memory, which may not be contiguous physical memory. Vmalloc Used<code>vmallocUsed</code> The amount of <code>vmalloc</code> address space that is currently in use."},{"location":"collectors/agents/linux/#network-file-system-nfs-specific","title":"Network File System (NFS) Specific","text":"<p>A specific metric for NFS clients.</p> Metric Description NFS Unstable<code>nFSUnstable</code> Memory used by NFS clients for unstable pages. These are pages that have been written to the NFS server but not yet committed to stable storage."},{"location":"collectors/agents/linux/#additional-information","title":"Additional information","text":"<p> Linux agent source code</p>"},{"location":"collectors/agents/qstar/","title":"QStar","text":"<p>The QStar agent can be used to monitor:</p> <ul> <li>QStar events</li> <li>Replication status</li> <li>Cache usage</li> </ul> <p>Please contact support to assist you deploying this specialized collector.</p>"},{"location":"collectors/agents/qstar/#additional-information","title":"Additional information","text":"<p> QStar agent source code</p>"},{"location":"collectors/agents/speedtest/","title":"Speedtest","text":""},{"location":"collectors/agents/speedtest/#speedtest","title":"Speedtest","text":"<p>The speedtest-agent measures upload and download speeds using Ookla's speedtest service.</p> <p>Third party data collection</p> <p>Ookla collects certain data through Speedtest that may be considered personally identifiable, such as your IP address, unique device identifiers or location. Ookla believes it has a legitimate interest to share this data with internet providers, hardware manufacturers and industry regulators to help them understand and create a better and faster internet. For further information including how the data may be shared, where the data may be transferred and Ookla\u2019s contact details, please see Ookla's Privacy Policy.</p>"},{"location":"collectors/agents/speedtest/#features","title":"Features","text":"<ul> <li>Speedtest Monitors upload and download speeds as observed from the agent's perspective</li> </ul>"},{"location":"collectors/agents/speedtest/#deployment","title":"Deployment","text":"<p>The speedtest agent is easiest deployed on your monitoring appliance using our Remote Appliance Deployment.</p>"},{"location":"collectors/agents/speedtest/#docker","title":"Docker","text":"<p>If desired you can deploy the speedtest agent standalone in a docker container for example:</p> <pre><code>docker run \\\n  --name speedtestagent \\\n  -e TOKEN=\"&lt;&lt;agent token&gt;&gt;\" \\\n  -e ASSET_ID=\"&lt;&lt;asset_ID&gt;&gt;\" \\\n  -d \\\n  ghcr.io/infrasonar/speedtest-agent\n</code></pre> <p>Ensure you add the agent onto the asset prior to deploying the agent.</p>"},{"location":"collectors/agents/speedtest/#additional-information","title":"Additional information","text":"<p> Speedtest agent source code</p>"},{"location":"collectors/agents/windows/","title":"Windows","text":""},{"location":"collectors/agents/windows/#microsoft-windows-agent","title":"Microsoft Windows agent","text":""},{"location":"collectors/agents/windows/#installation","title":"Installation","text":""},{"location":"collectors/agents/windows/#easy-deployment","title":"Easy deployment","text":"<p>You can use our easy deployment script, note this scripts requires elevated privileges as it runs an MSI installer.</p> <pre><code>curl -fsSL https://deploywindowsagent.infrasonar.com ^\n   -o %temp%\\infrasonar.cmd &amp;&amp; %temp%\\infrasonar.cmd\n</code></pre> <p>The install script now prompts you for the InfraSonar agent token as shown below:</p> <pre><code>Microsoft Windows [Version 10.0.22631.2861]\n(c) Microsoft Corporation. All rights reserved.\n\nC:\\Users\\sysadmin&gt;curl -fsSL https://deploywindowsagent.infrasonar.com ^\nMore?    -o %temp%\\infrasonar.cmd &amp;&amp; %temp%\\infrasonar.cmd\nInfraSonar agent version v1.0.12 (re)deployment.\nDownloading the InfraSonar Windows agent.\nConfiguring the InfraSonar Windows agent.\n\nEnter the InfraSonar agent token: &lt;&lt;ENTER YOUR INFRASONAR AGENT TOKEN HERE&gt;&gt;\nThe operation completed successfully.\nyou can set an optional asset ID, this connects the agent to an existing asset\nEnter the assetID (leave black if unsure):\n(re)installing the InfraSonar Windows agent.\n</code></pre>"},{"location":"collectors/agents/windows/#manual-installation","title":"Manual installation","text":"<p>Install the msi:</p> <p>You can download the latest msi of our latest Microsoft Windows agent from our GitHub releases page here.</p> <p>Configure the Microsoft Windows agent:</p> <p>Open the registry and add your agent Token:</p> <p></p> <p>You can also use the command below in an elevated command prompt to set your agent token:</p> <pre><code>set token=&lt;&lt;ENTER YOUR INFRASONAR AGENT TOKEN HERE&gt;&gt;\nreg add \"HKLM\\SOFTWARE\\Wow6432Node\\Cesbit\\InfraSonarAgent\" /v Token /d %token% /t REG_SZ /f\n</code></pre> <p>Configure your asset Id</p> <p>If you already have an Asset Id, you can configure set in the registry. When the <code>AssetId</code> registry key is 0, the agent will create a new asset once the service starts.</p> <p>(Re)start the Microsoft Windows agent:</p> <p>To apply any changed made in the registry the agent needs to be stopped and started.</p> <p>You can use the services console (<code>services.msc</code>) or use the following commands in an elevated command prompt:</p> <pre><code>net stop InfraSonarAgent\nnet start InfraSonarAgent\n</code></pre> <p>More debug information</p> <p>If you want more debug information in the Event Viewer, you can also add a <code>Debug</code> registry key of type <code>RED_DWORD</code> and set the value to <code>1</code>. </p>"},{"location":"collectors/agents/windows/#additional-information","title":"Additional information","text":"<p> Windows agent source code</p>"},{"location":"collectors/probes/","title":"Probes","text":""},{"location":"collectors/probes/#introduction","title":"Introduction","text":"<p>Probe mission</p> <p>We use open standards and vendor-provided technologies to query controlled systems.</p> <p>Probes are collectors that use open standards or vendor provided methods to retrieve monitoring data from a remote asset.</p> <p>All InfraSonar provided probes are available as  open source on our  GitHub repository as we believe in transparency with regards to data collection and systems access.</p> <p>When a new asset (host) is added and the InfraSonar admin enables a specific probe for this asset, a discovery routine will be started to identify the asset and determine which checks InfraSonar can perform.</p>"},{"location":"collectors/probes/#deployment","title":"Deployment","text":"<p>Probes can easily be deployed and maintained using our remote appliance manager.</p>"},{"location":"collectors/probes/#good-to-know","title":"Good to know","text":"<p>Probes run as Docker containers on or more InfraSonar appliances.</p> <p>Upon startup a probe registers itself to the for this probe configured agentcore</p> <p>Because probes usually run in the same Docker network as the agentcore, they can easily connect to it.</p>"},{"location":"collectors/probes/agentcore/","title":"Agentcore","text":""},{"location":"collectors/probes/agentcore/#agentcore","title":"Agentcore","text":"<p>The Agentcore orchestrates our probes and is responsible for scheduling checks. During the startup sequence of a probe, it will \u201c announce\u201d itself to the Agentcore.</p> <p>The Agentcore also acts as a communication gateway. Data retrieved by the probes is sent to the InfraSonar cloud platform via the Agentcore.</p> <pre><code>graph LR\n  probe[Probe] --&gt; | TCP 8750 | Agentcore[Agentcore] --&gt; | TCP 8730 TLS/SSL | infrasonarcloud[InfraSonar Cloud Platform];</code></pre> <p>As probes usually run in the same Docker network as the Agentcore, they can easily connect to it.</p> <p>it is possible to use TCP port 443 instead of 8730 we don't recommended this but some environment refuse inter traffic to ports other then 80 and 443</p>"},{"location":"collectors/probes/agentcore/#features","title":"Features","text":""},{"location":"collectors/probes/agentcore/#resumable-operation","title":"Resumable operation","text":"<p>If an Agentcore is shutdown properly a list of assets and a check result queue are saved on disk. Given the Agentcore starts and it can't connect to the InfraSonar cloud platform the list of saved assets will be used to resume operations. Check results up to a maximum of 100.000 packages will be stored in a queue.</p>"},{"location":"collectors/probes/agentcore/#multiple-agentcores","title":"Multiple Agentcores","text":"<p>InfraSonar supports multiple Agentcores within a monitored environment. Deploying multiple Agentcores can be useful in spreading the network load, accommodate for network segmentation, and supporting large-scale implementations.</p> <p>To support network segmentation, assets can be assigned to a zone. When this zone also has an Agentcore assigned its assets will automatically be monitored using the Agentcores in this zone.</p> <p>When you deploy multiple Agentcores in a zone, assets will be evenly distributed between all Agentcores in this zone..</p> <p>No automagic failover</p> <p>If an Agentcore fails it's role will not automatically be taken over by another Agentcore. To accomplish this, the failing Agentcore needs to be removed by an InfraSonar admin.</p>"},{"location":"collectors/probes/agentcore/#operational","title":"Operational","text":""},{"location":"collectors/probes/agentcore/#removing-an-agentcore","title":"Removing an Agentcore","text":"<p>When an Agentcore is decommissioned, all hosts monitored by are automatically transferred to other Agentcores in the configured zone.</p> <p>You can remove an Agentcore in our Agentcore panel.</p>"},{"location":"collectors/probes/dns/","title":"DNS","text":""},{"location":"collectors/probes/dns/#dns","title":"DNS","text":""},{"location":"collectors/probes/dns/#introduction","title":"Introduction","text":"<p>The DNS probe is a synthetic monitor and can even monitor changes to specific DNS records.</p>"},{"location":"collectors/probes/dns/#features","title":"Features","text":"<p>THe DNS probe can perform forward and reverse DNS queries for an FQDN</p>"},{"location":"collectors/probes/dns/#probe-configuration","title":"Probe configuration","text":"Property Description DNS Servers DNS servers to query, note all configured DNS servers are queried FQDN FQDN of the DNS record you want to monitor <p>Reverse DNS lookups</p> <p>Using the special <code>.arpa.</code> domain it is possible to perform a reverse DNS lookup. See our PTR section for a detailed explanation and examples.</p>"},{"location":"collectors/probes/dns/#example-configuration","title":"Example configuration","text":"<ul> <li>DNS servers: <code>8.8.8.8, 8.8.4.4</code></li> <li>FQDN: <code>dns.google.com</code></li> </ul>"},{"location":"collectors/probes/dns/#checks","title":"Checks","text":"<p>We support the DNS record types described in our DNS monitoring guide.</p>"},{"location":"collectors/probes/dns/#additional-information","title":"Additional information","text":"<p> DNS Guide DNS probe source code</p>"},{"location":"collectors/probes/http/","title":"HTTP","text":""},{"location":"collectors/probes/http/#http-probe","title":"HTTP Probe","text":""},{"location":"collectors/probes/http/#introduction","title":"Introduction","text":"<p>The HTTP probe allows to monitor a specific URI over the http or https protocol</p>"},{"location":"collectors/probes/http/#features","title":"Features","text":"<ul> <li>Roundtrip time, the roundtriptime for the http(s) request is measured and returned.</li> <li>HTTP status code monitoring</li> </ul>"},{"location":"collectors/probes/http/#probe-configuration","title":"Probe configuration","text":"Property Description URI URI of the website you want to monitor Timeout Timeout in seconds should be a value between 0 and 240. The default timeout is 10.0 Verify SSL If turned off, the check ignores invalid certificates; when on, the URI must have a valid certificate. Nots, this is only applicable for HTTPS URI. The default is off. With payload Retrieves the payload, bare in mind the payload is limited to 500 Kb Allow redirects When turned on, redirects are followed. <p>Tips</p> <p>1. Redirects When monitoring cloud services, enable Allow redirects as these services heavily rely on http redirects.  2. Make our check filterable Add parameters to your URI so you can identify and thus filter us from your regular traffic. For example like this: <pre><code>https://&lt;&lt;your uri&gt;&gt;/?utm_source=infrasonar&amp;utm_medium=infrasonar&amp;utm_campaign=infrasonar\n</code></pre></p>"},{"location":"collectors/probes/http/#check-specifics","title":"Check specifics","text":""},{"location":"collectors/probes/http/#http-status-codes","title":"HTTP Status codes","text":"<p>See RFC9110 or the List of HTTP status codes on Wikipedia for more detailed information.</p> code class code Meaning 100 Informational Continue 101 Informational Switching protocols 102 Informational Processing 103 Informational Early Hints 200 Successful OK 201 Successful Created 202 Successful Accepted 203 Successful Non-Authoritative Information 204 Successful No Content 205 Successful Reset Content 206 Successful Partial Content 207 Successful Multi-Status 208 Successful Already Reported 226 Successful IM Used 300 Redirection Multiple Choices 301 Redirection Moved Permanently 302 Redirection Found (Previously \"Moved Temporarily\") 303 Redirection See Other 304 Redirection Not Modified 305 Redirection Use Proxy 306 Redirection Switch Proxy 307 Redirection Temporary Redirect 308 Redirection Permanent Redirect 400 Client Error Bad Request 401 Client Error Unauthorized 402 Client Error Payment Required 403 Client Error Forbidden 404 Client Error Not Found 405 Client Error Method Not Allowed 406 Client Error Not Acceptable 407 Client Error Proxy Authentication Required 408 Client Error Request Timeout 409 Client Error Conflict 410 Client Error Gone 411 Client Error Length Required 412 Client Error Precondition Failed 413 Client Error Payload Too Large 414 Client Error URI Too Long 415 Client Error Unsupported Media Type 416 Client Error Range Not Satisfiable 417 Client Error Expectation Failed 418 Client Error I'm a Teapot 421 Client Error Misdirected Request 422 Client Error Unprocessable Entity 423 Client Error Locked 424 Client Error Failed Dependency 425 Client Error Too Early 426 Client Error Upgrade Required 428 Client Error Precondition Required 429 Client Error Too Many Requests 431 Client Error Request Header Fields Too Large 451 Client Error Unavailable For Legal Reasons 500 Server Error Internal Server Error 501 Server Error Not Implemented 502 Server Error Bad Gateway 503 Server Error Service Unavailable 504 Server Error Gateway Timeout 505 Server Error HTTP Version Not Supported 506 Server Error Variant Also Negotiates 507 Server Error Insufficient Storage 508 Server Error Loop Detected 510 Server Error Not Extended 511 Server Error Network Authentication Required"},{"location":"collectors/probes/http/#additional-information","title":"Additional information","text":"<p> HTTP probe source code</p>"},{"location":"collectors/probes/mssql/","title":"Microsoft SQL Server","text":""},{"location":"collectors/probes/mssql/#microsoft-sql-server","title":"Microsoft SQL Server","text":""},{"location":"collectors/probes/mssql/#introduction","title":"Introduction","text":"<p>The Microsoft SQL probe uses SQL statements to monitor and analyze the health of a Microsoft SQL Server database.</p> <p>Goal</p> <p>The MSSQL probe offers a unified view that provides common ground for infrastructure engineers, DBA, and application managers to analyze and troubleshoot Microsoft SQL server performance issues.</p>"},{"location":"collectors/probes/mssql/#features","title":"Features","text":"<p>The Microsoft SQL probe allows for in-depth analyses of a SQL server.</p> <p>Some of the included measurements:</p> <ul> <li>Memory Page life Expectancy.</li> <li>Parallelism configuration.</li> <li>CPU, memory and disk IO per database.   </li> <li>SQL Table information.</li> <li>Wait statistics.</li> <li>Top 25 query information (all queries would put too much strain on the SQL server).<ul> <li>Top worker time; which queries consume a lot of time and thus cpu usage.</li> <li>Top logical reads; which queries cost the most IO.</li> <li>Top execution count; shows the most active queries.</li> </ul> </li> <li>Index information.<ul> <li>Frequently used indexes (top used).</li> <li>Missing indexes, where would an index make sense.</li> <li>Unused indexes, only written but never queried.   </li> </ul> </li> <li>Fragmentation.   </li> <li>IO, per file and per volume.</li> <li>Backup status.</li> <li>Agent jobs.</li> <li>SQL Config.</li> <li>Session and application information.</li> <li>Plan cache.</li> <li>Blocked count.</li> </ul> <p>Tip</p> <p>Our implementation consultants can assist in creating a detailed analysis of a Microsoft SQL server.</p>"},{"location":"collectors/probes/mssql/#probe-configuration","title":"Probe configuration","text":"<p>The MSSQL probe requires the host's IP address running the monitored SQL server and requires access to curtain SQL tables as defined in our grant scripts.</p>"},{"location":"collectors/probes/mssql/#credentials","title":"Credentials","text":"<p>The Microsoft SQL probe supports SQL authentication and domain authentication.</p> <p>For both scenarios it is advisable to setup a separate account for this probe and grant this account access via the supplied grant scripts.</p> <p>Credentials can easily be set using our remote appliance manager</p>"},{"location":"collectors/probes/mssql/#authorization","title":"Authorization","text":"<p>The previously created user needs to be granted access onto various tables and resources.</p> <p>Let your DBA analyses our scripts and contact us if there are any questions.</p> <p>We created grant scripts for SQL authentication and domain authentication; pick the correct script for your use case.</p>"},{"location":"collectors/probes/mssql/#grants-for-domain-user","title":"Grants for domain user","text":"<p>Replace <code>domainnamehere\\usernamehere</code> in this script with the correct domain/username and execute it in SQL Server Management Studio to grant the user sufficient permissions.</p> <p>It is good practice to create a dedicated account for SQL monitoring.</p>"},{"location":"collectors/probes/mssql/#grants-for-sql-user","title":"Grants for SQL User","text":"<p>This script uses the default username <code>svc_infrasonar</code> and the password <code>someSuperSecurePasswordHereOfCourse</code>, which you should change before running the script.</p>"},{"location":"collectors/probes/mssql/#best-practices","title":"Best practices","text":""},{"location":"collectors/probes/mssql/#sql-server-maximum-server-memory-is-set-to-default","title":"SQL Server maximum server memory is set to default","text":"<p>Setting max server memory value too high can cause a single instance of SQL Server to compete for memory with other SQL Server instances hosted on the same host. However, setting this value too low could cause significant memory pressure and performance problems. Setting max server memory to the minimum value can even prevent SQL Server from starting. If you cannot start SQL Server after changing this option, start it using the -f startup option and reset max server memory to its previous value. For more information, see Database Engine Service Startup Options.</p> <p>A rule of thumb is to leave 4GB or 10% of total memory free, whichever is larger on your instance to start with, and adjust this as needed.</p> <p>See also:</p> <ul> <li>Microsoft.com - Server memory configuration options</li> <li>Brent Ozar - Memory Dangerously Low or Max Memory Too High</li> </ul>"},{"location":"collectors/probes/mssql/#sql-server-cost-threshold-for-parallelism","title":"SQL Server Cost threshold for parallelism","text":"<p>SQL Server Cost threshold for parallelism is a value you might want to review.</p> <p>While the default value of 5 is adequate for most systems, a different value may be appropriate. Perform application testing with higher and lower values if needed to optimize application performance.</p> <p>A Microsoft SQL DBA can change this by changing the threshold for parallelism to for example <code>50</code>, using this SQL statement:</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'cost threshold for parallelism', 50;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"collectors/probes/mssql/#max-degree-of-parallelism","title":"Max Degree of parallelism","text":"<p>A typical SQL server misconfiguration is the Max Degree of parallelism.</p> <p>Rules of thumb:</p> <ul> <li>MDOP (Max Degree of parallelism) equal the number of CPU cores.</li> <li>MDOP should not be set greater then 8, so a 16 core system should have MDOP configured as 8.</li> </ul> <p>Set <code>ChangeMe</code> to the desired MDOP and execute it using SQL Server Management Studio.</p> <pre><code>EXEC sp_configure 'show advanced options', 1;\nGO\nRECONFIGURE\nexec sp_configure 'Max Degree of parallelism', ChangeMe;\nGO\nRECONFIGURE\nGO\n</code></pre>"},{"location":"collectors/probes/mssql/#operational","title":"Operational","text":""},{"location":"collectors/probes/mssql/#new-databases","title":"New databases","text":"<p>The monitoring account does not automatically gain access to databases created after the initial setup. This scenario results in the following InfraSonar alert:</p> <p>The server principal \"account\" is not able to access the database \"databasename\" under the current security context.</p> <p>Either grant script contains a marked section that a SQL Admin must run to grant access to these newly created databases.</p>"},{"location":"collectors/probes/mssql/#additional-information","title":"Additional information","text":"<p> Microsoft SQL probe source code</p>"},{"location":"collectors/probes/mysql/","title":"MySQL Server","text":""},{"location":"collectors/probes/mysql/#mysql","title":"MySQL","text":""},{"location":"collectors/probes/mysql/#introduction","title":"Introduction","text":"<p>The MySQL probe collects information about a MySQL server.</p>"},{"location":"collectors/probes/mysql/#probe-configuration","title":"Probe configuration","text":"<p>Make sure your MySQL server is accessible</p> <p>You can edit the files in /etc/mysql/ to configure the basic settings \u2013 log file, port number, etc. For example, to configure MySQL to listen for connections from network hosts, in the file /etc/mysql/mysql.conf.d/mysqld.cnf, change the bind-address directive to the server\u2019s IP address:</p> <pre><code>bind-address            = 0.0.0.0\n</code></pre> <p>Create an <code>infrasonar</code> user and provide the required privileges:</p> <pre><code>CREATE USER 'infrasonar' IDENTIFIED BY '&lt;MY_SECRET_PASSWORD&gt;';\nGRANT SELECT, PROCESS, REFERENCES on *.* TO 'infrasonar';\n</code></pre> <p>Configure the username and password in our remote appliance manager.</p>"},{"location":"collectors/probes/mysql/#additional-information","title":"Additional information","text":"<p> MySQL probe source code</p>"},{"location":"collectors/probes/netapp/","title":"NetApp","text":""},{"location":"collectors/probes/netapp/#netapp","title":"NetApp","text":""},{"location":"collectors/probes/netapp/#introduction","title":"Introduction","text":"<p>InfraSonar monitors NetApp systems running Data ONTAP using the ONTAP rest API.</p> <p>SNMP-probe for 7mode</p> <p>It is possible to monitor 7mode NetApp systems using SNMP. The monitoring is not as elaborate as the API Probe.</p>"},{"location":"collectors/probes/netapp/#features","title":"Features","text":"<p>Some of the features of the InfraSonar NetApp probe:</p> <ul> <li>NetApp Health Status</li> <li>Aggregate and volume and utilization</li> <li>Cluster information</li> <li>Disk status</li> <li>Interface status (Ethernet and FCP)</li> <li>CIFS status</li> <li>Autosupport configuration</li> <li>IOPS</li> <li>Snapmirror</li> </ul>"},{"location":"collectors/probes/netapp/#version-specific","title":"Version specific","text":"<p>Some checks are only available from a specific ONTAP version onward: </p> <ul> <li>cluster node controller info requires ONTAP v9.9 or higher</li> <li>cluster node statistics requires ONTAP v9.8 or higher</li> <li>interface and interface ports statistics requires ONTAP v9.8 or higher</li> <li>SnapMirror transfer data requires ONTAP v9.11 or higher</li> </ul>"},{"location":"collectors/probes/netapp/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/netapp/#credentials","title":"Credentials","text":"<p>Don't use admin</p> <p>We strongly advise setting up a separate user for monitoring to have a clear separation of responsibilities but also to avoid lock-out issues.</p> <p>First step is to figure out which vserver to use:</p> <pre><code>vserver show\n</code></pre> <p>Create a role for InfraSonar with limited access, ensure to use the correct vserver. <code>vserver show</code> is your friend </p> Create NetApp role<pre><code>security login rest-role create -role infrasonar -vserver netapp01 -api /api -access readonly\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security -access none\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/audit/destinations -access readonly\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/authentication/password -access all\nsecurity login rest-role create -role infrasonar -vserver netapp01 -api /api/security/certificates -access readonly\n</code></pre> <p>You can verify this role using:</p> Verify NetApp role<pre><code>security login rest-role show infrasonar\n</code></pre> <p>Next step is to create a user (<code>infrasonar</code>) and assign the previously created role (<code>infrasonar</code>) to this user:</p> Create NetApp user<pre><code>security login create infrasonar -role infrasonar -comment \"system-monitoring user, readonly\" -application ontapi -authentication-method password \nsecurity login create infrasonar -role infrasonar -application http -authentication-method password \n</code></pre> <p>Verify the user creation:</p> Verify NetApp user<pre><code>security login show infrasonar\n</code></pre> <p>Set the credentials using our remote appliance manager</p> <p>The probe retrieves monitoring data using the ONTAP REST API on TCP port 443.</p>"},{"location":"collectors/probes/netapp/#operational","title":"Operational","text":""},{"location":"collectors/probes/netapp/#danglingsnapshots","title":"danglingSnapshots","text":"<p>When the time difference between 2 snapshots is greater than 21 (also known as monthly backup), an InfraSonar alert is triggered. There is also a label (<code>dangling snapshots (vmfs) 7d</code>) which generates an alert if the snapshot contains the word <code>vmfs</code> and the time difference is greater then 7 days.</p> <p>Possible causes:</p> <ul> <li>Manual snapshots that have not been cleaned up.</li> <li>A reconfigured snapmanager.</li> <li>A server that is powered off while the mirror is still running.</li> </ul>"},{"location":"collectors/probes/netapp/#additional-information","title":"Additional information","text":"<p> netapp probe source code</p>"},{"location":"collectors/probes/paloalto/","title":"Palo Alto","text":""},{"location":"collectors/probes/paloalto/#palo-alto","title":"Palo Alto","text":""},{"location":"collectors/probes/paloalto/#introduction","title":"Introduction","text":"<p>InfraSonar monitors Palo Alto firewalls using the rest API.</p> <p>Also available as service</p> <p>We also offer a service to monitor Palo Alto firewalls, this is useful if you want to monitor firewalls without deploying your own InfraSonar appliance.</p>"},{"location":"collectors/probes/paloalto/#features","title":"Features","text":""},{"location":"collectors/probes/paloalto/#deployment","title":"Deployment","text":"<p>When the GlobalProtect Portal or Gateway is enabled the probe needs to use a different TCP port number 4443 instead of 443. You can toggle this behavior when configuring the probe.</p>"},{"location":"collectors/probes/paloalto/#credentials","title":"Credentials","text":"<p>The Palo Alto rest API uses a key which can be generated for a user. </p> <p>Don't use an admin account</p> <p>We strongly recommend creating a read only account specific for monitoring.</p>"},{"location":"collectors/probes/paloalto/#get-your-api-key","title":"Get your API key","text":"<p>source</p> <p>To generate an API key, make a GET or POST request to the firewall\u2019s hostname or IP addresses using the administrative credentials and type=keygen:</p> <pre><code>curl -k -X GET 'https://&lt;firewall&gt;/api/?type=keygen&amp;user=&lt;username&gt;&amp;password=&lt;password&gt;'\n</code></pre> <p>Ensure to change</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;username&gt;</code> with the username of your readl-only monitoring user</li> <li><code>&lt;password&gt;</code> with the password of your readl-only monitoring user</li> </ul> <p>A successful API call returns status=\"success\" along with the API key within the key element:</p> <pre><code>&lt;response status=\"success\"&gt;\n  &lt;result&gt;\n    &lt;key&gt;Your_secret_key_is_here&lt;/key&gt;\n  &lt;/result&gt;\n&lt;/response&gt;\n</code></pre> <p>You can test your API key using the following command:</p> <pre><code>curl -k 'https://&lt;firewall&gt;//api/?type=op&amp;cmd=&lt;show&gt;&lt;system&gt;&lt;info&gt;&lt;/info&gt;&lt;/system&gt;&lt;/show&gt;&amp;key=&lt;apikey&gt;'\n</code></pre> <p>Ensure to change:</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;apikey</code> with the previously generated API key</li> </ul>"},{"location":"collectors/probes/paloalto/#revoke-api-keys","title":"Revoke API keys","text":"<p>You can revoke all currently valid API keys, in the event one or more keys are compromised. To change an API key associated with an administrator account change the password associated with the administrator account. API keys that were generated before you expired all keys, or a key that was created using the previous credentials will no longer be valid.</p>"},{"location":"collectors/probes/paloalto/#configure-api-key-lifetime","title":"Configure API Key Lifetime","text":"<p>Source</p> <p>An optional step is to configure the API Key Lifetime.</p> <p>Be aware though that monitoring fails when the API key is expired!</p>"},{"location":"collectors/probes/paloalto/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/paloalto/#xml-api-issue-with-passwords-containing-special-characters","title":"XML API Issue With Passwords Containing Special Characters","text":"<p>Passwords containing special characters can cause problems retrieving the API key.</p> <p>source</p>"},{"location":"collectors/probes/phpfpm/","title":"PHP FPM pool status page","text":""},{"location":"collectors/probes/phpfpm/#introduction","title":"Introduction","text":"<p>InfraSonar can monitoring the PHP FPM Pool using the FPM status page.</p>"},{"location":"collectors/probes/phpfpm/#deployment","title":"Deployment","text":"<p>The FPM status page can be enabled by setting the <code>pm.status_path</code> configuration parameter in the FPM pool configuration. Please review the FPM pool documentation for more information.</p>"},{"location":"collectors/probes/phpfpm/#credentials","title":"Credentials","text":"<p>No credentials are required to view this page.</p> <p>For security the FPM status page should be restricted to internal requests or known client IPs only as the page reveals request URLs and information about available resources.</p> <p>Depending on the web server configuration it might be needed to configure the web server to allow requests directly to this path, bypassing any PHP scripts. An example of a configuration for Apache with FPM listening on UDS and pm.status_path set to /fpm-status would look like:</p> <pre><code>&lt;LocationMatch \"/fpm-status\"&gt;\n Order Allow,Deny\n Allow from 127.0.0.1\n ProxyPass \"unix:/var/run/php-fpm.sock|fcgi://localhost/fpm-status\"\n&lt;/LocationMatch&gt;\n</code></pre> <p>After reloading or restarting both FPM and the web server the status page will be accessible from the appliance (as long as the request comes from an allowed IP address if the IP restriction was configured).</p>"},{"location":"collectors/probes/ping/","title":"Ping","text":""},{"location":"collectors/probes/ping/#ping","title":"Ping","text":""},{"location":"collectors/probes/ping/#introduction","title":"Introduction","text":"<p>The ping-probe utilizes the icmp protocol to monitor the network roundtrip between the monitoring appliance and the monitored host.</p>"},{"location":"collectors/probes/ping/#features","title":"Features","text":"<ul> <li>Ping roundtrip monitoring, min and max timing</li> <li>Number of successfully and/or dropped packages</li> </ul>"},{"location":"collectors/probes/ping/#probe-configuration","title":"Probe configuration","text":"Property Description Address The address that the probe should ping. Interval Interval should be a value between 1 and 9, The default interval is 1. Count Count should be a value between 1 and 9, the default count is 5 Timeout Timeout in seconds should be a value between 0 and 240, the default timeout is 10 seconds."},{"location":"collectors/probes/ping/#check-specifics","title":"Check specifics","text":"<p>Ping returns the <code>minimum time</code> and <code>maximum time</code> as this provides a better insight than just an average ping response.</p> <p>The number of <code>successful</code> and <code>dropped</code> ping packages are also monitored.</p>"},{"location":"collectors/probes/ping/#additional-information","title":"Additional information","text":"<p> Ping probe source code</p>"},{"location":"collectors/probes/proxmox/","title":"Proxmox","text":""},{"location":"collectors/probes/proxmox/#proxmox","title":"Proxmox","text":""},{"location":"collectors/probes/proxmox/#introduction","title":"Introduction","text":"<p>A Proxmox environment has a hierarchical setup, a cluster, one or more nodes and VM's or LXE containers running on the nodes. </p> <pre><code>graph TD\n  controller((\"`Proxmox Cluster`\"))\n  node-1((\"`Proxmox node`\"))\n  node-2((\"`Proxmox node`\"))\n  node-3((\"`Proxmox node`\"))\n  device-1-1((\"`Proxmox VM`\"))\n  device-1-2((\"`Proxmox CT`\"))\n  device-1-3((\"`Proxmox VM`\"))\n  device-2-1((\"`Proxmox VM`\"))\n  device-2-2((\"`Proxmox VM`\"))\n  device-2-3((\"`Proxmox CT`\"))\n  device-3-1((\"`Proxmox CT`\"))\n  device-3-2((\"`Proxmox CT`\"))\n  device-3-3((\"`Proxmox VM`\"))\n  controller --&gt; node-1\n  controller --&gt; node-2\n  controller --&gt; node-3\n  node-1 --&gt; device-1-1\n  node-1 --&gt; device-1-2\n  node-1 --&gt; device-1-3\n  node-2 --&gt; device-2-1\n  node-2 --&gt; device-2-2\n  node-2 --&gt; device-2-3\n  node-3 --&gt; device-3-1\n  node-3 --&gt; device-3-2\n  node-3 --&gt; device-3-3</code></pre> <p>To fully support this hierarchical setup we created four corresponding collectors:</p> <ul> <li>Proxmox Cluster</li> <li>Proxmox Node</li> <li>Proxmox CT</li> <li>Proxmox VM</li> </ul>"},{"location":"collectors/probes/proxmox/#credentials","title":"Credentials","text":"<p>All four collectors use the Proxmox API to collect data from the Proxmox nodes.</p> <p>You can easily configure these credentials using our remote appliance manager.</p>"},{"location":"collectors/probes/proxmox/#authorization","title":"Authorization","text":"<p>Proxmox has a pre-defined role PVEAuditor which allows read-only access to your proxmox cluster. Read  here how to create a user.</p> <p> </p> Proxmox_permissions"},{"location":"collectors/probes/proxmox/#deployment","title":"Deployment","text":"<ol> <li>Start by adding you Proxmox cluster collector to gain an overview of proxmox nodes and an easy way of adding them to InfraSonar.</li> <li>Our Proxmox node collector provides you with a deep insight into your Proxmox node and offers you an easy way to add your Proxmox containers and/or virtual machines as InfraSonar assets.</li> <li>Optionally add additional collector for your Proxmox containers and/or virtual machines.</li> </ol> <p>You can automate this step using our InfraSonar Commandline Interfase and Proxmox devices report.</p>"},{"location":"collectors/probes/proxmox/#additional-information","title":"Additional information","text":"<ul> <li> Proxmox Cluster probe</li> <li> Proxmox Node probe</li> <li> Proxmox CT probe</li> <li> Proxmox VM probe</li> </ul>"},{"location":"collectors/probes/santricity/","title":"SANtricity / NetApp E-Series","text":""},{"location":"collectors/probes/santricity/#santricity-netapp-e-series","title":"SANtricity / NetApp E-Series","text":""},{"location":"collectors/probes/santricity/#introduction","title":"Introduction","text":"<p>InfraSonar monitors SANtricity / NetApp E-Series systems running rest API.</p>"},{"location":"collectors/probes/santricity/#background-information","title":"background information","text":"<p>In SANtricity / NetApp E-Series, volumes, disks, and storage pools are related in a hierarchical manner.</p> <p>At the lowest level, disks are physical storage devices that are installed in a storage system. These disks can be combined into disk pools, which are logical groups of disks that can be used to create volumes.</p> <p>Volumes are logical storage units that are created from disk pools. Volumes can be divided into smaller units called LUNs (Logical Unit Numbers), which are presented to hosts as individual disks.</p> <p>When creating a volume, users can choose from different RAID (Redundant Array of Independent Disks) levels, which determine the level of data protection and performance of the volume. SANtricity supports RAID levels 0, 1, 3, 5, 6, and 10.</p> <p>Users can also configure different settings for their volumes, such as the size of the volume, the block size, and the access control settings.</p> <p>Overall, the relationship between volumes, disks, and storage pools in SANtricity is designed to provide users with a flexible and scalable storage infrastructure. By combining disks into storage pools and creating volumes from those pools, users can optimize storage usage and achieve better storage performance.</p>"},{"location":"collectors/probes/santricity/#features","title":"Features","text":"<p>Some of the features of the InfraSonar NetApp probe:</p> <ul> <li>System Health status</li> <li>Storage pool status</li> <li>Volume status</li> <li>Controller status</li> <li>Disk status status</li> </ul>"},{"location":"collectors/probes/santricity/#probe-configuration","title":"Probe configuration","text":"<ul> <li>Address: IP address of FQDN of them management interface</li> <li>Port: The probe retrieves monitoring data using the ONTAP REST API on TCP port 8443, note we encountered deployments using TCP port 443.</li> <li>Storage system ID: Storage system id to retrieve stats from. Can also be the WWN of the storage system. When not given we collect stats from \"1\"</li> </ul>"},{"location":"collectors/probes/santricity/#credentials","title":"Credentials","text":"<p>Don't use admin</p> <p>We strongly advise using the monitor user as this is a user with read-only access to the system. This user profile includes only the Monitor role.</p>"},{"location":"collectors/probes/santricity/#how-to-configure-snmp-monitoring-on-e-series","title":"How to configure SNMP monitoring on E-Series","text":"<p>\u200b</p>"},{"location":"collectors/probes/santricity/#applies-to","title":"Applies to","text":"<ul> <li>Flash Array</li> <li>E-Series Controller Firmware 7.xx</li> <li>E-Series Controller Firmware 6.xx</li> </ul>"},{"location":"collectors/probes/santricity/#description","title":"Description","text":"<p>Simple Network Management Protocol (SNMP) is used for remote status monitoring of servers, network appliances, and software processes. SNMP is designed for an IT administrator to monitor the active technology assets, which are required to perform the business' day to day activities. SANtricity provides a portal for IT administrators to remote monitor their storage array. This article describes the procedure to configure SNMP.</p>"},{"location":"collectors/probes/santricity/#procedure","title":"Procedure","text":"<p>Perform the following steps to configure SNMP in SANtricity:  </p> <ol> <li>Open the Enterprise Management window of SANtricity and select the array that you would like to configure for SNMP.</li> <li>Right-click on the Array and select Configure Alerts.    A new window opens. Click the SNMP tab at the top:    An IT Administrator can configure SNMP for this storage array.    Since SANtricity is software based and it relays the active status' of the storage array, there is only one option for configuring SNMP and it is by sending traps.    SNMP requires two data points for sending traps, a Community Name and the Trap destination. The Community Name, also known as the community string should match the SNMP configured Community Name (string). The Trap Destination will be the IP address or host name of the SNMP server or relay.</li> <li>To obtain the MIB (Management Information Base) file for use in a third party SNMP server, perform the following steps:<ol> <li>Go to the NetApp Support Software download page.</li> <li>Locate E-Series/EF-Series SANtricity Storage Manager and click Go!</li> <li>Click View &amp; Download on the latest version of SANtricity software.</li> <li>Click Continue at the bottom of the page.</li> <li>Read the EULA and click Accept.</li> <li>Scroll down to the MIB File section.</li> <li>Click the download link for the .MIB file labeled MIB file for SNMP traps.</li> </ol> </li> </ol> <p>Note: For further info please see the Alert Notification Using Email to SNMP Traps section located in the Initial Configuration and Software Installation for SANtricity\u00ae Storage Manager document.</p> <p>If you have any issues or concerns with configuring SNMP within SANtricity, contact NetApp Support. </p>"},{"location":"collectors/probes/santricity/#additional-information","title":"Additional information","text":"<p> SANtricity / NetApp E-Series probe source code</p>"},{"location":"collectors/probes/tcp/","title":"TCP","text":""},{"location":"collectors/probes/tcp/#tcp","title":"TCP","text":""},{"location":"collectors/probes/tcp/#introduction","title":"Introduction","text":"<p>The TCP probe uses Nmap to try and make a TCP connection to specified TCP ports.</p>"},{"location":"collectors/probes/tcp/#features","title":"Features","text":"<ul> <li>Check TCP ports</li> <li>Check certificates</li> </ul>"},{"location":"collectors/probes/tcp/#probe-configuration","title":"Probe configuration","text":"Property Description Address The address that the probe should check. Certificate Ports List of ports to perform certificates check on. TCP Ports List of ports to perform a port check on.Each port must be a numeric value between 1 and 65535, where ports are separated by a comma."},{"location":"collectors/probes/tcp/#checks","title":"Checks","text":""},{"location":"collectors/probes/tcp/#tcp-ports","title":"TCP ports","text":"<p>Check TCP ports allows for monitoring specific TCP port statuses.</p> <p>As the TCP probe uses NMAP at its core it can identify the same six ports states as Nmap.</p> Port state Description <code>open</code> An application is actively accepting TCP connections, UDP datagrams or SCTP associations on this port. <code>closed</code> A closed port is accessible (it receives and responds to Nmap probe packets), but there is no application listening on it. <code>filtered</code> Nmap cannot determine whether the port is open because packet filtering prevents its probes from reaching the port. The filtering could be from a dedicated firewall device, router rules, or host-based firewall software. <code>unfiltered</code> The unfiltered state means that a port is accessible, but Nmap is unable to determine whether it is open or closed. <code>open|filtered</code> Nmap places ports in this state when it is unable to determine whether a port is open or filtered. <code>closed|filtered</code> This state is used when Nmap is unable to determine whether a port is closed or filtered."},{"location":"collectors/probes/tcp/#certificates","title":"Certificates","text":"<ul> <li>Gathers certificates and ciphers present on the specified TCP port.</li> <li>Shows expiration date.</li> <li>Shows the least overall strength per certificate.</li> </ul>"},{"location":"collectors/probes/tcp/#additional-information","title":"Additional information","text":"<p> TCP probe source code</p>"},{"location":"collectors/probes/unifi/","title":"UniFi","text":""},{"location":"collectors/probes/unifi/#unifi","title":"UniFi","text":""},{"location":"collectors/probes/unifi/#introduction","title":"Introduction","text":"<p>A UniFi environment has a hierarchical setup, a controller can contain one or more sites and a site consists of one or more devices. </p> <pre><code>graph TD\n  controller((\"`UniFi\n  controller`\"))\n  site-1((\"`UniFi\n  site`\"))\n  site-2((\"`UniFi\n  site`\"))\n  site-3((\"`UniFi\n  site`\"))\n  device-1-1((\"`UniFi\n  device`\"))\n  device-1-2((\"`UniFi\n  device`\"))\n  device-1-3((\"`UniFi\n  device`\"))\n  device-2-1((\"`UniFi\n  device`\"))\n  device-2-2((\"`UniFi\n  device`\"))\n  device-2-3((\"`UniFi\n  device`\"))\n  device-3-1((\"`UniFi\n  device`\"))\n  device-3-2((\"`UniFi\n  device`\"))\n  device-3-3((\"`UniFi\n  device`\"))\n  controller --&gt; site-1\n  controller --&gt; site-2\n  controller --&gt; site-3\n  site-1 --&gt; device-1-1\n  site-1 --&gt; device-1-2\n  site-1 --&gt; device-1-3\n  site-2 --&gt; device-2-1\n  site-2 --&gt; device-2-2\n  site-2 --&gt; device-2-3\n  site-3 --&gt; device-3-1\n  site-3 --&gt; device-3-2\n  site-3 --&gt; device-3-3</code></pre> <p>To fully support this hierarchical setup we created three corresponding collectors:</p> <ul> <li>UniFi Controller</li> <li>UniFi Site</li> <li>UniFi Device</li> </ul> <p>See also our UniFi SNMP probe</p> <p>When you have no controller you can also use our UniFi SNMP probe to access UniFi devices directly.</p>"},{"location":"collectors/probes/unifi/#credentials","title":"Credentials","text":"<p>All three collectors use the UniFi API to collect data from the UniFi controller and this the same read-only credentials.</p> <p>You can easily configure these credentials using our remote appliance manager.</p>"},{"location":"collectors/probes/unifi/#unifi-controller","title":"UniFi controller","text":"<ol> <li>Start by adding an asset for the controller.</li> <li>Next set kind to UniFi in the General section.</li> <li>Add the unificontroller collector.</li> <li>Open the unificontroller collector configuration tab.<ol> <li>Enter the address (IP or FQDN) of the UniFi controller.</li> <li>Ensure the correct port is set.</li> </ol> </li> </ol>"},{"location":"collectors/probes/unifi/#unifi-site","title":"UniFi Site","text":"<ol> <li>Open the UniFi controller asset.</li> <li>Locate the Sites widget</li> <li>Click the  icon for the site you want to add.</li> <li>Choose wether you want to create a new asset of add the site to an existing asset, using a new asset is most often preferred.</li> <li>Verify the suggested settings and click Save.</li> <li>The site will now appear with a  icon indicating it has been setup.</li> <li>Add the correct labels to the newly created asset and add the lastseen collector if desired.</li> </ol> <p>You can automate this step using our InfraSonar Commandline Interfase and UniFi devices report.</p>"},{"location":"collectors/probes/unifi/#unifi-devices","title":"UniFi devices","text":"<ol> <li>Open the UniFi Site you want to add UniFi devices for.</li> <li>Locate the Devices widget</li> <li>Click the  icon for the device you want to add.</li> <li>Choose wether you want to create a new asset of add the site to an existing asset, using a new asset is most often preferred.</li> <li>Verify the suggested settings and click Save.</li> <li>The device will now appear with a  icon indicating it has been setup.</li> <li>Add the correct labels to the newly created asset and add the lastseen collector if desired.</li> </ol> <p>You can automate this step using our InfraSonar Commandline Interfase and UniFi devices report.</p>"},{"location":"collectors/probes/unifi/#additional-information","title":"Additional information","text":"<ul> <li> UniFi Controller probe</li> <li> UniFi Site probe</li> <li> UniFi Device probe</li> </ul>"},{"location":"collectors/probes/appliance/","title":"InfraSonar appliance","text":"<p>InfraSonar probes are deployed and maintained as Docker containers.</p> <p>We advice to setup a dedicated (virtual)  Linux appliance for your InfraSonar deployment.</p>"},{"location":"collectors/probes/appliance/#ubuntu","title":"Ubuntu","text":"<p>Our preferred and best supoorted method of deployment is using a dedicated virtual of physical Ubuntu server installation.</p> <p>We outlined the specific installation steps in our Ubuntu Installation Guide</p>"},{"location":"collectors/probes/appliance/#oracle-linux","title":"Oracle Linux","text":"<p>We successfully deployed InfraSonar for one of our customers onto Oracle Linux using podman. Please contact support to learn more about any implementation pitfalls and lessons learned.</p>"},{"location":"collectors/probes/appliance/#microsoft-windows","title":"Microsoft Windows","text":"<p>Using Docker desktop for Windows it is possible to deploy InfraSonar on a Windows server or desktop os.</p> <p>We document this setup here but would urge anyone to setup a dedicated Linux appliance as this gives for less overhead then running Docker on Windows which in essence runs on Windows Subsystem for Linux (WSL)</p>"},{"location":"collectors/probes/appliance/advanced/","title":"Advanced guide","text":"<p>Use with care!!</p> <p>Use our advanced guide with caution, it is aimed at experienced InfraSonar users and those with extensive knowledge about Linux and docker.</p>"},{"location":"collectors/probes/appliance/advanced/#docker-deployment","title":"Docker deployment","text":"<p>InfraSonar probes and the InfraSonar Agentcore are distributed using Docker containers via docker compose.</p> <p>InfraSonar requires docker compose V2 or newer.</p> <p>This section outlines our best practices.</p>"},{"location":"collectors/probes/appliance/advanced/#directory-structure","title":"Directory structure","text":"<p>We prefer to use <code>/etc/infrasonar</code> as the main directory but this is not required.</p> <p>You can determine the directory used on your appliance using the <code>docker compose ls</code> command.</p> file / directory Remark .env This file contains the InfraSonar tokens and is used by the <code>docker-compose.yml</code> file docker-compose.yml Contains alle InfraSonar probes as services next to the agentcore and watchtover service /data data volume, mounted to all InfraSonar services to store their config /data/.agentcore.json Agentcore configuration /data/.asset.json Docker agent configuration /data/config Contains probe specific configuration files /data/config/infrasonar.yaml Contains probe specific configuration such as credentials."},{"location":"collectors/probes/appliance/advanced/#env-file","title":".env file","text":"<p>The <code>.env</code> file contains the agentcore token, agent token and zone ID.</p> <pre><code>AGENTCORE_TOKEN = &lt;&lt;agentcore token&gt;&gt;\nAGENT_TOKEN = &lt;&lt;agent token&gt;&gt;\nAGENTCORE_ZONE_ID = 0\n</code></pre> <p>See our token documentation on how to create tokens.</p>"},{"location":"collectors/probes/appliance/advanced/#docker-compose-file","title":"Docker compose file","text":"<p>The latest production version of our complete <code>docker-compose.yml</code> file can be found here</p>"},{"location":"collectors/probes/appliance/advanced/#docker-maintenance","title":"Docker maintenance","text":""},{"location":"collectors/probes/appliance/advanced/#manual-update-your-docker-containers","title":"Manual update your docker containers","text":"<p>Login using SSH and navigate to the directory containing the InfraSonar configuration. (usually this is <code>/etc/infrasonar/</code>)</p> <p>The first step is to check for newer images and pull these using this command:</p> <pre><code>docker compose pull\n</code></pre> <p>If all new images are downloaded you can apply the changes using: <pre><code>docker compose up -d\n</code></pre></p>"},{"location":"collectors/probes/appliance/advanced/#restart","title":"Restart","text":"<p>If you want to restart all InfraSonar containers you can do so using the following command:</p> <pre><code>docker compose restart\n</code></pre> <p>This implies you are executing this command in the directory containing the InfraSonar <code>docker-compose.yml</code> file.</p>"},{"location":"collectors/probes/appliance/advanced/#logging","title":"Logging","text":"<p>For troubleshooting purposes you can change the log-level in the <code>docker-compose.yml</code> file</p> <p>Supported log levels:</p> <ul> <li>debug</li> <li>info</li> <li>warning</li> <li>error</li> <li>critical</li> </ul> docker-compose.yml<pre><code>## InfraSonar docker-compose.yml file\n##\n## Set the correct TOKEN variables before starting.\n\nx-infrasonar-template: &amp;infrasonar\n  network_mode: host\n  restart: always\n  logging:\n    options:\n      max-size: 5m\n  volumes:\n      - ./data:/data/\n  labels:\n    com.centurylinklabs.watchtower.enable: TRUE\n  environment:\n    LOG_LEVEL: \"debug\"\n    LOG_COLORIZED: \"1\"\n\nservices:\n  agentcore:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/agentcore\n    environment:\n      TOKEN: \"Agentcore-token\u00bb\"\n      LOG_LEVEL: \"debug\"\n      LOG_COLORIZED: \"1\"\n  docker-agent:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/docker-agent\n    environment:\n      TOKEN: \"\u00abAgent-token\u00bb\"\n      LOG_LEVEL: \"debug\"\n      LOG_COLORIZED: \"1\"\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./data:/data/\n  .....\n</code></pre> <p>Note</p> <p>You need to restart you containers for changed log setting to become active.</p>"},{"location":"collectors/probes/appliance/advanced/#credentials","title":"Credentials","text":"<p>Some InfraSonar probes require configuration and/or credentials to execute / authenticate its queries. A good example is the WMI-probe that requires Windows domain credentials to perform WMI queries.</p>"},{"location":"collectors/probes/appliance/advanced/#location","title":"Location","text":"<p>Credentials are stored in the <code>data/config</code> subdirectory. This directory is relative from the directory from which you deployed InfraSonar. As we suggest using <code>/etc/infrasonar</code> the credentials file would be located here: <code>/etc/infrasonar/data/config</code></p>"},{"location":"collectors/probes/appliance/advanced/#format","title":"Format","text":"<p>The credentials file is named: <code>infrasonar.yaml</code> As suggested by the <code>.yaml</code> file extension the file format used is the yaml format.</p> <p>It is worth noting that Indentation is meaningful in YAML. As such make sure that you use spaces, rather than tab characters, to indent sections. In the default configuration files 2 spaces per indentation level are used, We recommend you do the same.</p>"},{"location":"collectors/probes/appliance/advanced/#basic","title":"Basic","text":"<p>This is the most basic credentials <code>infrasonar.yaml</code> configuration file.</p> infrasonar.yaml<pre><code>exampleProbe:\n  config:\n    password: \"a secret\"\n    username: alice\n</code></pre> <ul> <li>The first line identifies the probe section, in this example <code>exampleProbe</code></li> <li>The second line starts the configuration section using the keyword <code>config</code></li> <li>The third and fourth line in this example set the configuration parameters <code>username</code> and <code>password</code></li> <li>Note the <code>\"  \"</code> quotes used for the password, this ensures any special characters are parsed correctly.</li> </ul> <p>When the file is saved InfraSonar removes the <code>password</code> value and adds a <code>encrypted</code> section containing the encrypted password as shown in the example below:</p> infrasonar.yaml<pre><code>exampleProbe:\n  config:\n    password: \n      encrypted: !!binary |\n        Z0FBQUFBQmptMEhGq0FhTGJZNFNTckZKdXzWaVpKT2RzMzBARlJGUW1MVGVCVHNmTE15eVlOMTVD\n        dGZWU1VEYUtPN2V4cWdOeGdoYlB1M29ua2JTZzNuQVlqU09eM0Z2c2c9PQ==\n    username: alice\n</code></pre> <p>How to add a new password</p> <p>Adding a new password is easy, remove the encrypted value (lines 4-6) and add the new password as a string.</p>"},{"location":"collectors/probes/appliance/advanced/#security-considerations","title":"Security considerations","text":"<p>InfraSonar will make <code>password</code> and <code>secret</code> values unreadable but this must not be regarded as true encryption as the encryption key is publicly available.</p>"},{"location":"collectors/probes/appliance/advanced/#assets-section","title":"assets section","text":"<p>The <code>infrasonar.yaml</code> allows for specific credentials per asset to achieve this you can add the asset ID's to the configuration.</p> infrasonar.yaml<pre><code>exampleProbe:\n  assets:\n  - config:\n      password: \"my secret\"\n      username: bob\n    id: 123\n  - config:\n      password: \"other secret\"\n      username: charlie\n    id:\n    - 456\n    - 789\n  config:\n    password: \"a secret\"\n    username: alice\n</code></pre> <p>Asset specific configuration can be added by adding a <code>assets</code> section and assigning assets to this section by providing the asset-id using the <code>id</code> property, this can either be one asset (line 6) or a list of assets (line 10-12).</p>"},{"location":"collectors/probes/appliance/advanced/#use-property","title":"use property","text":"<p><code>use</code> is a special property to indicate a probe should inhered  the config from another probe.</p> <pre><code>otherProbe:\n  use: exampleProbe\n</code></pre> <p>The <code>use</code> property can be partially useful for SNMP based probes as it is allows to point these to the snmp configuration section</p> <pre><code>some-snmp-based-probe:\n  use: snmp\n</code></pre>"},{"location":"collectors/probes/appliance/advanced/#specific-configuration","title":"Specific configuration","text":"<p>Most probes have a default section they use to lookup local configuration. For the SNMP probe this is <code>snmp</code> while the Microsoft WMI probes uses <code>wmi</code></p> <p>It is however possible to create your own section, in the example below you see how we created <code>myCustomSection</code>.</p> <pre><code>myCustomSection:\n  config:\n    password: \"esther's secret\"\n    username: esther\n</code></pre> <p>Using a custom section can be useful when credentials are used by multiple probes, for example:</p> <pre><code>myCustomSection:\n  config:\n    password: \"esther's secret\"\n    username: esther\nwmi:\n  use: myCustomSection\nvcenter: \n  use: myCustomSection\n</code></pre> <p>In this scenario the wmi probe and vcenter probe both use the credentials provided by the <code>myCustomSection</code> section.</p>"},{"location":"collectors/probes/appliance/advanced/#local-configuration","title":"Local configuration","text":"<p>You can also specific which section a probe should use using the InfraSonar user interface.</p> <p>Each probe () which supports this has a Local configuration input box () where you can enter the name of the section you want this asset / probe to use.</p> <p></p> <p>How to add a new password</p> <p>Adding a new password is easy, remove the encrypted value (lines 4-6) and add the new password as a string.</p>"},{"location":"collectors/probes/appliance/advanced/#probe-specifics","title":"Probe specifics","text":"<p>For most probes it is sufficient to provide a <code>username</code> and <code>password</code>; we outlined probes with a more distinct configuration here:</p>"},{"location":"collectors/probes/appliance/advanced/#snmp","title":"SNMP","text":"<p>The SNNP probe supports: SNMPv1, SNMPv2c, and SNMPv3 each of these are outlined in the upcoming paragraphs.</p> <p>When no credentials are provided we use the following defaults:</p> <ul> <li>SNMP version: 2c</li> <li>Community string: <code>public</code></li> </ul>"},{"location":"collectors/probes/appliance/advanced/#snmpv1","title":"SNMPv1","text":"infrasonar.yaml<pre><code>snmp:\n  config:\n    community: SomeCommunityString\n    version: 1\n</code></pre> <p>Note how we specify the version using the <code>version</code> property.</p>"},{"location":"collectors/probes/appliance/advanced/#snmpv2c","title":"SNMPv2c","text":"infrasonar.yaml<pre><code>snmp:\n  config:\n    community: SomeCommunityString\n    version: \"2c\"\n</code></pre> <p>Note how we specify the version using the <code>version</code> property using quotes</p>"},{"location":"collectors/probes/appliance/advanced/#snmpv3","title":"SNMPv3","text":"infrasonar.yaml<pre><code>snmp:\n  config:\n    version: 3\n    username: alice\n    auth:\n      type: USM_AUTH_HMAC96_SHA\n      password: \"my secret password\"\n    priv:\n      type: USM_PRIV_CFB128_AES\n      password: \"my secret password\"\n</code></pre> auth (5) <p>Supported values for type:</p> <ul> <li><code>USM_AUTH_HMAC96_MD5</code> </li> <li><code>USM_AUTH_HMAC96_SHA</code></li> <li><code>USM_AUTH_NONE</code></li> </ul> <p>When omitted <code>USM_AUTH_NONE</code> is used.</p> priv (8) <p>Supported values for type:</p> <ul> <li>USM_PRIV_CBC56_DES</li> <li>USM_PRIV_CFB128_AES</li> <li>USM_PRIV_NONE</li> </ul> <p>When  omitted <code>USM_PRIV_NONE</code> is used.</p>"},{"location":"collectors/probes/appliance/advanced/#encrypted-community-string","title":"Encrypted community string","text":"<p>It is possible to encrypt the community string on the appliance by indicating the string is secret as such:</p> infrasonar.yaml<pre><code>snmp:\n  config:\n    community:\n      secret: SomeCommunityString\n    version: \"2c\"\n</code></pre> <p>This results upon save in community string being encrypted:</p> infrasonar.yaml<pre><code>snmp:\n\n  community:\n    secret:\n      encrypted: !!binary |\n        Z0FBQUFBQmptMEhGq0FhTGJZNFNTckZKdXzWaVpKT2RzMzBARlJGUW1MVGVCVHNmTE15eVlOMTVD\n        dGZWU1VEYUtPN2V4cWdOeGdoYlB1M29ua2JTZzNuQVlqU09eM0Z2c2c9PQ==\n    version \"2c\"\n</code></pre>"},{"location":"collectors/probes/appliance/advanced/#wmi","title":"WMI","text":"<p>The WMI probe uses a straightforward configuration as shown below.</p> <p>When Microsoft Active directory accounts are used the username can be either in domain format: <code>domain\\infrasonar_service_account</code> or use the UPN format: <code>infrasonar_service_account@domain.something</code></p> <p>An asset specific configuration can be useful for non-domain joined servers.</p> infrasonar.yaml<pre><code>wmi:\n  config:\n    username: \"charlie@domain.org\"\n    password: \"a secret\"\n  assets:\n  - config:\n      username: \"bob\"\n      password: \"my secret\"\n    id: 123\n</code></pre>"},{"location":"collectors/probes/appliance/advanced/#faq","title":"FAQ","text":"<p>Is it possible to copy credentials?</p> <p>Yes credential files can be exchanged between appliances belonging to the same InfraSonar container.</p> <p>I note my credentials are not being encoded?</p> <p>Check if you per accident configured a duplicate section, see this simplified example where we configured two wmi sections: <pre><code>wmi:\n  config:\n    username: alice\n    password: \"a secret\"\nwmi:\n  use: something\n</code></pre></p> <p>Contact InfraSonar support if you require any assistance.</p>"},{"location":"collectors/probes/appliance/appliance_manager/","title":"Appliance manager","text":"<p>our appliance manager is deprecated please contact support to discuss your migration path.</p>"},{"location":"collectors/probes/appliance/docker-compose/","title":"InfraSonar docker-compose file","text":"<p>Our docker-compose file to be used when deploying InfraSonar completely manually.</p>"},{"location":"collectors/probes/appliance/docker-compose/#docker-compose-sections","title":"Docker compose sections","text":"<p>Some noteworthily sections of our <code>docker-compose.yml</code> file:</p> Services We advise to only include collectors which are actually used. Volumes <p>We opt to store the InfraSonar related data and configuration in the same sub-directory <code>data</code> in the directory where the docker compose file lives.</p> Networking <p>We use the host network for all our containers and thus probes to avoid any networking issues.</p> x-infrasonar-template section <p>The <code>x-infrasonar-template</code> section ensures the default settings are the same for all InfraSonar containers.</p> Watchtower service <p>We use Watchtower to periodicity check for updates.</p> <p>Within the Watchtower service we mount the localtime file to ensure the container is running in the same timezone as the appliance.</p> rapp service <p>Remote appliance Manager allows you to manage your InfraSonar docker containers and config from our webapp.</p> <p>Note that rapp takes control of this <code>docker-compose.yaml</code> file and uses it's own templating style to manage the file programmatically. </p>"},{"location":"collectors/probes/appliance/docker-compose/#docker-compose-file","title":"Docker compose file","text":"docker-compose.yaml<pre><code>## InfraSonar docker-compose.yml file\n##\n## Set the correct TOKEN variables in the .env file before starting.\n\nx-infrasonar-template: &amp;infrasonar\n  network_mode: host\n  restart: always\n  logging:\n    options:\n      max-size: 5m\n  volumes:\n    - ./data:/data/\n  labels:\n    ## We opt to only update our own containers using the AGENTCORE token to identify the scope\n    com.centurylinklabs.watchtower.scope: ${AGENTCORE_TOKEN}\n\nservices:\n  ## InfraSonar remote appliance manager\n  ## Our remote appliance manager takes control of this yaml file!\n  rapp:\n    environment:\n      COMPOSE_FILE: /etc/infrasonar/docker-compose.yml\n      CONFIG_FILE: /etc/infrasonar/data/config/infrasonar.yaml\n      ENV_FILE: /etc/infrasonar/.env\n      USE_DEVELOPMENT: 0\n    image: ghcr.io/infrasonar/rapp\n    network_mode: host\n    restart: always\n    volumes:\n    - /etc/infrasonar/:/etc/infrasonar/\n    - /var/run/docker.sock:/var/run/docker.sock\n  ## Auto Update service\n  watchtower:\n    &lt;&lt; : *infrasonar\n    image: containrrr/watchtower\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - /etc/localtime:/etc/localtime:ro\n    environment:\n      WATCHTOWER_CLEANUP: TRUE\n      WATCHTOWER_INCLUDE_RESTARTING: TRUE\n      ## We update every 6 hours\n      WATCHTOWER_POLL_INTERVAL: 21600\n      ## Identies the scope for updating\n      WATCHTOWER_SCOPE: ${AGENTCORE_TOKEN}\n  ## InfraSonar agents\n  docker-agent:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/docker-agent\n    environment:\n      TOKEN: ${AGENT_TOKEN}\n    volumes:\n      - /var/run/docker.sock:/var/run/docker.sock\n      - ./data:/data/\n  # If you want the Speedtest collector:\n  # (the asset will be created automatically unless a specific ASSET_ID is given)\n  #\n  #    speedtest-agent:\n  #      &lt;&lt; : *infrasonar\n  #      image: ghcr.io/infrasonar/speedtest-agent\n  #      environment:\n  #        TOKEN: ${AGENT_TOKEN}\n  #      volumes:\n  #        - ./data:/data/\n\n  ## InfraSonar agentcore\n  agentcore:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/agentcore\n    environment:\n      TOKEN: ${AGENTCORE_TOKEN}\n      AGENTCORE_ZONE: ${AGENTCORE_ZONE_ID}\n  ## InfraSonar probes (note this is a subset of our probes)\n  dns-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/dns-probe\n  eaton-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/eaton-probe\n  esx-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/esx-probe\n  eventlog-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/eventlog-probe\n  hpilo-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/hpilo-probe\n  hpprocurve-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/hpprocurve-probe\n  http-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/http-probe\n  hyperv-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/hyperv-probe\n  hypervguest-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/hypervguest-probe\n  idrac-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/idrac-probe\n  mssql-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/mssql-probe\n  mysql-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/mysql-probe\n  netapp-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/netapp-probe\n  paloalto-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/paloalto-probe\n  ping-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/ping-probe\n  snmp-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/snmp-probe\n  santricity-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/santricity-probe\n  synology-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/synology-probe\n  tcp-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/tcp-probe\n  unifi-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/unifi-probe\n  unificontroller-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/unificontroller-probe\n  unifidevice-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/unifidevice-probe\n  unifisite-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/unifisite-probe\n  vcenter-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/vcenter-probe\n  wmi-probe:\n    &lt;&lt; : *infrasonar\n    image: ghcr.io/infrasonar/wmi-probe\n</code></pre>"},{"location":"collectors/probes/appliance/ubuntu_installation/","title":"Appliance","text":"<p>This section outlines how to install our Ubuntu based  Linux appliance from scratch.</p> <p>We opt to use Ubuntu in this guide. If you prefer to use any other distribution please contact support and discuss any pitfalls to be aware off.</p>"},{"location":"collectors/probes/appliance/ubuntu_installation/#prerequisites","title":"Prerequisites","text":"<p>To ensure an up to date Ubuntu installation but also for our monitoring solution internet access is required for the appliance.</p> <p>Also note the appliance uses TCP port 8730 (TLS/SSL) to connect to our InfraSonar cloud Platform.</p> <p>it is possible to use TCP port 443 instead of 8730 we don't recommended this but some environment refuse inter traffic to ports other then 80 and 443</p> <p>If your organization does not allow direct internet access please contact support to discuss alternative options.</p>"},{"location":"collectors/probes/appliance/ubuntu_installation/#hardware-requirements","title":"Hardware requirements","text":"<p> Ubuntu Server 24.04 LTS is used as the basis for the InfraSonar appliance.</p> <p>When using a virtual machine we suggest using these specifications:</p> <ul> <li>CPU: 2 CPU</li> <li>Memory: 2 GB memory</li> <li>Disk: 30 GB HDD</li> <li>Name: infrasonar-appliance</li> </ul>"},{"location":"collectors/probes/appliance/ubuntu_installation/#vmware-specifics","title":"VMWare specifics","text":"<ul> <li>Compatibility: Compatible with: ESXi 6.5 and later VM version 13</li> <li>Guest OS Family: Linux</li> <li>Guest OS Version: Ubuntu Linux (64-bit) </li> </ul>"},{"location":"collectors/probes/appliance/ubuntu_installation/#ubuntu-installation-steps","title":"Ubuntu Installation steps","text":"<p>You can download the required  Ubuntu Server 24.04 LTS ISO here.</p> <p>Boot from the Ubuntu Server 24.04 LTS ISO and then follow these steps:</p> <ol> <li>First step is to boot from the Ubuntu ISO or from a bootable USB stick.</li> <li>Select your language: English.</li> <li>If prompted to to update to the new installer please do so.</li> <li>Keyboard configuration: (feel free to change to your situation)<ol> <li>Layout: English (US).</li> <li>Variant: English (US).</li> </ol> </li> <li>Choose the type of install: Ubuntu server (minimized)</li> <li>Network configuration: choose the appropriate network configuration for your environment</li> <li>Proxy address: enter a proxy address if your environment uses a proxy, otherwise leave empty.</li> <li>Mirror address: keep as it is, unless you know what you are doing.</li> <li>Guided storage configuration:<ol> <li>Select: Use an entire disk.</li> <li>Deselect: Set up this disk as an LVM group.</li> </ol> </li> <li>Storage configuration:</li> <li>Review the file system summary and select: Done.</li> <li>Confirm destructive action, by clicking: Continue.</li> <li>Profile setup: (feel free to pick your own username and server name)<ol> <li>Your name: sysadmin.</li> <li>Your server's name: infrasonar-appliance.</li> <li>Pick a username: sysdmin.</li> <li>Choose a password:  <li>Confirm your password:  <li>SSH Setup:<ol> <li>Select: Install OpenSSH Server.</li> <li>Import SSH identity: Usually no, but feel free to enter your own.</li> </ol> </li> <li>Featured Server Snaps: do not select any server snaps.</li> <li>If the installation is ready, select: Reboot now.</li>"},{"location":"collectors/probes/appliance/ubuntu_installation/#infrasonar-installation-steps","title":"InfraSonar installation steps","text":"<p>Login to the appliance using SSH to perform the post installation steps.</p> <pre><code>ssh sysadmin@&lt;server-ip&gt;\n</code></pre> <p>Note all steps below can be easily executed using our quick deploy script:</p> <pre><code>sudo /bin/bash -c \"$(curl -fsSL https://deploy.infrasonar.com)\"\n</code></pre> <p>Do not run this script on an existing Linux system</p> <p>Our quick deploy script is meant to be used on a clean Ubuntu server installation. Using it on an existing system can cause unexpected results!</p> <p>Curl command explanation</p> <ul> <li><code>-L</code> to automatically follow redirects.</li> <li><code>-sS</code> to suppress the progress meter but still show error messages.</li> <li><code>-f</code> to treat an HTTP error as a command error. This is to ensure that no error message gets piped to <code>sh</code>, avoiding a potentially dangerous action.</li> </ul> <p>If you don't want to use our script you can follow this guide to perform each stap manually .</p> <p>Follow the prompts from the installer, this will look something like this:</p> <pre><code>Installation Path (enter path or press Enter for default: /etc/infrasonar)\nDo you want to allow users with CoreConnect permissions to start remote access (recommended)? (yes/no)\n&lt;yes&gt;\nPlease provide a token for the Agentcore (container token with `CoreConnect` permissions):\n&lt;your token appears here&gt;\nPlease provide a token for the agents (container token with `Read`, `InsertCheckData`, `AssetManagement` and `API` permissions):\n&lt;your token appears here&gt;\n\n################################################################################\n\n  The appliance for zone 0 will be deployed in the '/etc/infrasonar' directory\n\n################################################################################\n\nDo you want to continue? (yes/no)\nyes\nPlease be patient, this may take a while...\n</code></pre> <p>After this step a new agentcore will appear in your InfraSonar UI</p>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/","title":"Manual InfraSonar installation","text":"<p>All steps outlined below our automated in our deploy script.</p>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#upgrade","title":"Upgrade","text":"<p>First step is to update and upgrade your Ubuntu installation so we are current before proceeding.</p> <pre><code>sudo apt update\nsudo apt upgrade\nsudo reboot\n</code></pre>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#vmware-tools","title":"VMware tools","text":"<p> Optional</p> <p>When running on a VMware hypervisor it is recommended to install open-vm-tools.</p> <pre><code># Update the APT package index.\nsudo apt update\n# Install open VMware tools.\nsudo apt install -y open-vm-tools\n</code></pre>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#miscellaneous-tools","title":"Miscellaneous tools","text":"<pre><code>sudo apt install -y vim nano cron dnsutils snmp iputils-ping curl snmpd jq\n</code></pre> <p>The above command installs a list of useful tools:</p> <ul> <li>vim, VI text editor.</li> <li>nano, text editor.</li> <li>cron, task schedular. </li> <li>dnsutils, handy tool for debugging dns issues.</li> <li>snmp, snmpd daemon used to monitor the Linux operating system.</li> <li>iputils-ping, tools for debugging network issues.</li> <li>curl, command-line downloader</li> <li>tmate, teamviewer like solution used to offer remote support on request.</li> </ul>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#snmpd","title":"SNMPD","text":"<p>As we use the default community string <code>public</code> and only require the snmpd daemon to listen on <code>localhost</code>, no further configuration is required.</p> <p>Edit the <code>/etc/snmp/snmpd.conf</code> file to ensure access to all facilities:</p> /etc/snmp/snmpd.conf<pre><code># Read-only access to everyone to the systemonly view\nrocommunity  public default -V systemonly\nrocommunity6 public default -V systemonly\n</code></pre> <p>Change the above section to:</p> /etc/snmp/snmpd.conf<pre><code># Read-only access to everyone to the systemonly view\nrocommunity  public default\nrocommunity6 public default\n</code></pre> <p>Restart the snmpd service to make the changes effective:</p> <pre><code>service snmpd restart\n</code></pre>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#docker-installation","title":"Docker installation","text":"<p>All InfraSonar components run as Docker containers and are orchestrated using docker-compose.</p> <p>The official Docker engine installation instructions can be found here.</p> <pre><code>sudo curl -sSL https://get.docker.com | bash\n</code></pre>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#unattended-updates","title":"Unattended updates","text":"<p>As we want the InfraSonar appliance to be zero maintenance, we configure unattended updates and allow the appliance to reboot when necessary at 2:00 CET.</p> <p>Create the following script as <code>/root/ubuntu_update.bash</code>:</p> ubuntu_update.bash<pre><code>#!/bin/bash\n\n# Log file for updates\nLOG_FILE=\"/var/log/ubuntu_automatic_updates.log\"\n\n# Function to perform the updates\nperform_updates() {\n  echo \"$(date): Starting automatic updates...\" &gt;&gt; \"$LOG_FILE\"\n\n  # Update package lists\n  apt update &gt;&gt; \"$LOG_FILE\" 2&gt;&amp;1\n\n  # Upgrade installed packages (including new packages if needed)\n  apt upgrade -y &gt;&gt; \"$LOG_FILE\" 2&gt;&amp;1\n\n  # Dist-upgrade to handle distribution upgrades if available (use cautiously)\n  # apt dist-upgrade -y &gt;&gt; \"$LOG_FILE\" 2&gt;&amp;1  # Uncomment if you want dist-upgrades\n\n  # Autoremove to remove unused packages\n  apt autoremove -y &gt;&gt; \"$LOG_FILE\" 2&gt;&amp;1\n\n  # Autoclean to remove old downloaded package files\n  apt autoclean -y &gt;&gt; \"$LOG_FILE\" 2&gt;&amp;1\n\n  # Check if a reboot is required\n  if [ -f /var/run/reboot-required ]; then\n    echo \"$(date): Reboot required. Rebooting...\" &gt;&gt; \"$LOG_FILE\"\n    # Remove the lock file\n    rm /tmp/ubuntu_automatic_updates.lock\n    reboot\n  else\n    echo \"$(date): No reboot required.\" &gt;&gt; \"$LOG_FILE\"\n  fi\n\n  echo \"$(date): Automatic updates completed.\" &gt;&gt; \"$LOG_FILE\"\n}\n\n\n# Check if the script is already running\nif [ -f /tmp/ubuntu_automatic_updates.lock ]; then\n  echo \"$(date): Automatic updates already running. Exiting.\" &gt;&gt; \"$LOG_FILE\"\n  exit 1\nfi\n\n# Create a lock file\ntouch /tmp/ubuntu_automatic_updates.lock\n\n# Perform the updates\nperform_updates\n\n# Remove the lock file\nrm /tmp/ubuntu_automatic_updates.lock\n\nexit 0\n</code></pre> <p>Add this script to crontab of user root like this:</p> <pre><code>sudo sh -c '(crontab -l ; echo \"0 2 * * * /root/ubuntu_update.bash\") | crontab -'\n</code></pre> <p>Note using <code>sudo crontab -e</code> you can edit the schedule to your liking.</p>"},{"location":"collectors/probes/appliance/ubuntu_installation_manual/#infrasonar-installer","title":"InfraSonar installer","text":"<p>Our InfraSonar installer is available on GitHub</p> <p>The following command ensure download and execution of our latest installer:</p> <pre><code>## Create and change into a temporary directory\ncd $(mktemp -d)\n## Download the latest InfraSonar appliance installer\ncurl -sL $(curl -s https://api.github.com/repos/infrasonar/appliance-installer/releases/latest | jq -r '.assets[] | select(.name | contains (\"linux\")) | .browser_download_url') -o appliance-installer-linux-amd64.tar.gz\n## Unpack the InfraSonar appliance installer\ntar -xzvf appliance-installer-linux-amd64.tar.gz\n## Run the InfraSonar appliance installer\nsudo ./appliance-installer\n</code></pre> <p>Follow the prompts from the installer.</p>"},{"location":"collectors/probes/appliance/windows_installation/","title":"Windows guide","text":""},{"location":"collectors/probes/appliance/windows_installation/#infrasonar-on-windows","title":"InfraSonar on Windows","text":"<p>As InfraSonar uses Docker containers it can deployed on multiple platforms including Microsoft Windows.</p> <p>Docker is a great concept to deploy and maintain Linux applications and services even on a Microsoft Windows host.</p> <p>Checkout the Get Started with Docker guide to learn more.</p> <p>Info</p> <p>We tested this setup on a Windows 11 (24H2) host running Docker Desktop version 4.38.0</p>"},{"location":"collectors/probes/appliance/windows_installation/#prerequisites","title":"Prerequisites","text":"<p>To ensure an up to date InfraSonar installation but also for our monitoring solution internet access is required for the appliance.</p> <p>Also note the appliance uses TCP port 8730 (TLS/SSL) to connect to our InfraSonar cloud Platform.</p> <p>it is possible to use TCP port 443 instead of 8730 we don't recommended this but some environment refuse inter traffic to ports other then 80 and 443</p> <p>If your organization does not allow direct internet access please contact support to discuss alternative options.</p>"},{"location":"collectors/probes/appliance/windows_installation/#deploy-the-infrasonar-containers","title":"Deploy the InfraSonar containers","text":"<p>Step by step  guide: </p> <ol> <li>Install Docker desktop on your Windows host.</li> <li>Ensure Start Docker Desktop when you sign in to your computer is enabled in the docker desktop configuration ().</li> <li>Download our latest appliance installer for Windows here</li> <li>Extract the zip file.</li> <li>Open a command prompt.</li> <li>Change into the directory were you extracted the appliance installer.</li> <li>Run the <code>appliance-installer.exe</code> executable and follow the steps:</li> </ol> <pre><code>appliance-installer.exe\nInstallation Path (enter path or press Enter for default: C:\\Users\\sysadmin\\infrasonar)\n\nPlease provide a token for the Agentcore (container token with `CoreConnect` permissions):\n&lt;your token appears here&gt;\nPlease provide a token for the agents (container token with `Read`, `InsertCheckData`, `AssetManagement` and `API` permissions):\n&lt;your token appears here&gt;\n\n#############################################################################################\n\n  The appliance for zone 0 will be deployed in the 'C:\\Users\\sysadmin\\infrasonar' directory\n\n#############################################################################################\n\nDo you want to continue? (yes/no)\nyes\nPlease be patient, this may take a while...\nDone\n</code></pre> <p>Open your container on https://app.infrasonar.com and manage the appliance via the Agentcores menu</p>"},{"location":"collectors/probes/snmp/","title":"Index","text":""},{"location":"collectors/probes/snmp/#snmp","title":"SNMP","text":"<p>\"Simple Network Management Protocol is an Internet Standard protocol for collecting and organizing information about managed devices on IP networks and for modifying that information to change device behavior.\" - wikipedia</p>"},{"location":"collectors/probes/snmp/#features","title":"Features","text":"<p>InfraSonar supports retrieving data from remote assets using the SNMPv1, SNMPv2c, and SNMPv3 protocol.</p>"},{"location":"collectors/probes/snmp/#prerequisites","title":"Prerequisites","text":"<p>To monitor an asset using SNMP there ar two things two setup on the monitored asset:</p> Access <p>Most SNMP implementation require you to add the monitoring IP as an authorized host. In our appliance based setup this is usually the IP address used by the monitoring appliance.</p> <p>When you deploy multiple appliances be aware to configure all IP addresses on the SNMP monitored assets.</p> <p>Also note Adding a host requires access to SNMP (udp/161) from the InfraSonar appliance running the SNMP probe.</p> Authentication <p>SNMPv1 and SNMPv2c versions \"plain\" community string for authentication; SNMPv3 is more secure but not supported on all devices.</p> <p>default configuration</p> <p>When no configuration file is specified the probe falls back SNMPv2c and used the community string <code>public</code>.</p>"},{"location":"collectors/probes/snmp/#how-to-configure-snmp","title":"How to configure SNMP","text":"<p>The SNMP probe requires SNMP to be configured on devices you wish to monitor. The next chapter describes how to configure SNMP on some standard devices.</p>"},{"location":"collectors/probes/snmp/#freebsd","title":"FreeBSD","text":"<p>Edit (as root) the file <code>/etc/snmpd.config</code>, find the following lines in the file:</p> <pre><code>location := \"Room 200\"\ncontact := \"sysmeister@example.com\"\n\nread := \"public\"\n\nwrite := \"geheim\"\ntrap := \"mytrap\"\n</code></pre> <p>Set <code>location</code> to the correct location for this device and set <code>contact</code> to the system administrator contact.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>read := \"public\"\n</code></pre></p> <p>Enable bsnmpd in <code>/etc/rc.conf</code></p> <p>Add this at the end of the file: <pre><code>bsnmpd_enable=\"YES\"\n</code></pre></p> <p>Start snmpd: <pre><code>service bsnmpd start\n</code></pre></p> <p>We recommend to unstall the bsnmp-ucd package for more complete monitoring. </p> <p>Installing this package involves the following steps:</p> <pre><code>pkg_add -r bsnmp-ucd\n</code></pre> <p>Locate and uncomment the line in <code>/etc/snmpd.config</code> <pre><code>begemotSnmpdModulePath.\"hostres\" = \"/usr/lib/snmp_hostres.so\"\n</code></pre> Add the next line below the just uncommented line: <pre><code>begemotSnmpdModulePath.\"ucd\" = \"/usr/local/lib/snmp_ucd.so\"\n</code></pre></p> <p>When done restart the bsnmp daemon: <pre><code>/etc/rc.d/bsnmpd restart\n</code></pre></p>"},{"location":"collectors/probes/snmp/#macos","title":"MacOS","text":"<p>These steps don\u2019t require a system restart and are non-service affecting.</p> <ol> <li>Open a new terminal window.</li> <li>Create a backup of the default SNMP configuration file: <code>sudo mv /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.orig</code></li> <li>Create and edit a new SNMP configuration file using for example <code>nano</code> or <code>vi</code>    Enter the following in the new configuration file: <pre><code>com2sec mynetwork &lt;NETWORK/CIDR&gt; public\nrocommunity public default .1\n</code></pre></li> <li>Replace <code>&lt;NETWORK/CIDR&gt;</code> with the network address and CIDR mask of the subnet your SNMP collector resides on, usually this is the monitoring appliance.</li> <li> <p>Replace the community string \u201cpublic\u201d with another string if that\u2019s your preference.</p> </li> <li> <p>Enable the SNMP daemon: <pre><code>sudo launchctl load -w /System/Library/LaunchDaemons/org.net-snmp.snmpd.plist\n</code></pre> Note: If you later change the SNMP settings on your Mac, you\u2019ll need to <code>unload</code> the configuration first: <pre><code>sudo launchctl unload /System/Library/LaunchDaemons/org.net-snmp.snmpd.plist\nsudo launchctl load -w /System/Library/LaunchDaemons/org.net-snmp.snmpd.plist\n</code></pre></p> </li> </ol>"},{"location":"collectors/probes/snmp/#linux","title":"Linux","text":""},{"location":"collectors/probes/snmp/#centos","title":"CentOS","text":"<p>You can find a guide on how to install SNMP on CentOS here.</p>"},{"location":"collectors/probes/snmp/#debian-based-systems","title":"Debian based systems","text":"<p>The first step is to install <code>snmpd</code> using<code>apt</code>:</p> <pre><code>sudo apt install snmpd\n</code></pre> <p>The next step is configuring <code>snmpd</code>. For this we need to edit <code>/etc/snmp/snmpd.conf</code>. Prior to editing this file we suggest making a backup of the existing configuration. This can be done by using the following command:</p> <pre><code>sudo cp /etc/snmp/snmpd.conf /etc/snmp/snmpd.conf.bak\n</code></pre> <p>Example <code>snmpd.conf</code> file:</p> <pre><code>############# InfraSonar SNMP Config ##################\ncom2sec readonly  default         infrasonar\ngroup InfraSonarGroup v2c        readonly\nview all    included  .1\naccess InfraSonarGroup \"\"      any       noauth    exact  all    none   none\nsyslocation planetearth\nsyscontact support@infrasonar.com\n</code></pre> <p>Note</p> <p>The community string in the above example is set to <code>infrasonar</code>. Also note the settings for <code>syslocation</code> and <code>syscontact</code>.</p> <p>Restart the SNMP daemon to make the configuration effective:</p> <pre><code>sudo service snmpd restart\n</code></pre> <p>Verify that the service is running correctly:</p> <pre><code>sudo service snmpd status\n</code></pre> <p>This should result in a similar output like this:</p> <pre><code>\u25cf snmpd.service - Simple Network Management Protocol (SNMP) Daemon.\n   Loaded: loaded (/lib/systemd/system/snmpd.service; enabled; vendor preset: enabled)\n   Active: active (running) since Thu 2021-07-29 10:37:24 CEST; 1s ago\n  Process: 14393 ExecStartPre=/bin/mkdir -p /var/run/agentx (code=exited, status=0/SUCCESS)\n Main PID: 14394 (snmpd)\n    Tasks: 1 (limit: 2358)\n   Memory: 5.0M\n   CGroup: /system.slice/snmpd.service\n           \u2514\u250014394 /usr/sbin/snmpd -Lsd -Lf /dev/null -u Debian-snmp -g Debian-snmp -I -smux mteTrigger mteTriggerConf -f -p /run/snmpd.pid\n\nJul 29 10:37:24 donkey-kong systemd[1]: Starting Simple Network Management Protocol (SNMP) Daemon....\nJul 29 10:37:24 donkey-kong systemd[1]: Started Simple Network Management Protocol (SNMP) Daemon..\nJul 29 10:37:24 donkey-kong snmpd[14394]: NET-SNMP version 5.7.3\n</code></pre>"},{"location":"collectors/probes/snmp/#ubuntu","title":"Ubuntu","text":"<p>First step is to install the SNMP Daemon:</p> <pre><code>sudo apt-get update\nsudo apt-get install snmpd\n</code></pre> <p>Next is to edit the <code>snmpd.conf</code> file, this requires a few setting in this file to change:</p> /etc/snmp/snmpd.conf<pre><code>sysLocation    Sitting on the Dock of the Bay\nsysContact     Me &lt;me@example.org&gt;\n\nagentAddress udp:161,udp6:[::1]:161\n\nrocommunity  public default\nrocommunity6 public default\n</code></pre> <p>Set <code>sysLocation</code> to the correct location for this device and set <code>sysContact</code> to the system administrator contact.</p> <p><code>agentAddress</code> configures which IPv4 and IPv6 the SNMP daemon should listen on.</p> <p>Setting this to: <code>agentAddress udp:161,udp6:[::1]:161</code> will set the server to listen on all IPv4 and IPv6 addresses.</p> <p>Alternatively you can bind to a specific IP address as such: <pre><code>agentAddress udp:192.168.1.5:161\n</code></pre> This binds the SNMPD daemon to the IP address 192.168.1.5 on port 161.</p> <p>Set the desired community name, in this example we use <code>public</code> <pre><code>rocommunity: rocommunity public\n</code></pre></p> <p>Last step is to restart the SNMPD service: <code>sudo service snmpd restart</code></p> <p>YOu can verify the  SNMPD is started using: <code>sudo service snmpd status</code></p>"},{"location":"collectors/probes/snmp/#hp-proliant-hosts","title":"HP Proliant hosts","text":"<p>The HP agents can be installed and queried on HP Proliant hosts using SNMP. This section describes the setup.</p> <p>Add the following section to the repository file: <code>/etc/yum.repos.d/hp.repo</code>:</p> <pre><code>[HP-Proliant]\nname=HP Proliant Red Hat Enterprise Linux $releasever - $basearch\n#baseurl=ftp://ftp.redhat.com/pub/redhat/linux/enterprise/$releasever/en/os/$basearch/Debuginfo/\nbaseurl=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/$releasever/$basearch/current/\n#http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/RedHat/5/x86_64/current/\nenabled=1\ngpgcheck=0\ngpgkey=http://downloads.linux.hp.com/SDR/downloads/ServicePackforProLiant/GPG-KEY-ProLiantSupportPack\n</code></pre> <p>Install the HP agents:</p> <pre><code>yum install hp-snmp-agents hp-health\n</code></pre> <p>You will get additional questions about the desired configuration. This will update the <code>snmpd.conf</code> file.</p> <p>Start the agents:</p> <pre><code>/sbin/hpsnmpconfig\n/etc/init.d/hp-snmp-agents start\n/etc/init.d/snmpd restart\n</code></pre>"},{"location":"collectors/probes/snmp/#vwware","title":"VWware","text":""},{"location":"collectors/probes/snmp/#virtual-center-appliance","title":"Virtual center appliance","text":"<p>The VMware virtual center appliance can be configured to be monitored using SNMP.</p> <ol> <li>Log in to the webinterface (https://ip:5480) using a root account.</li> <li>Enable shell access: access --&gt; shell / ssh.</li> <li>Log in using SSH and execute the following commands: <pre><code>snmp.set --port 161\nsnmp.set --communities public\nsnmp.enable\n</code></pre></li> <li>Verify if the snmpd service is started: <pre><code>shell.set --enabled.true\nshell\nservice snmpd status\n</code></pre></li> <li>Add the SNMP-probe in InfraSonar.</li> </ol>"},{"location":"collectors/probes/snmp/#esxi","title":"ESXi","text":"<p>For the monitoring appliance to query the ESXi host, the following modifications must be made to the <code>/etc/snmp/snmpd.conf</code> file. This can be achieved by logging on to the ESXi hosts using SSH.</p> <pre><code>rocommunity  &lt;RO_Community_String&gt;\ntrapcommunity &lt;TRAPS_Community_String&gt;\ntrapsink &lt;IP_ADDRESS_Monitoring_Appliance&gt;\npublic syscontact &lt;sysadmin_contact_email_address&gt;\nsyslocation &lt;system_location&gt;\n</code></pre> <p>Where:</p> Variable Description <code>&lt;RO_Community_String&gt;</code> Read only community string. This string should be added to the host config. <code>&lt;TRAPS_Community_String&gt;</code> Enter a trap community string. InfraSonar does not use this. <code>&lt;IP_ADDRESS_Monitoring_Appliance&gt;</code> IP address of the monitoring appliance. <code>&lt;sysadmin_contact_email_address&gt;</code> optional Email address of the sysadmin. <code>&lt;system_location&gt;</code> optional Note describing the physical location of the device. <p>For the modifications to take effect, the SNMPD must be restarted using the following command:</p> <pre><code>/etc/init.d/snmpd restart\n</code></pre>"},{"location":"collectors/probes/snmp/#solaris","title":"Solaris","text":""},{"location":"collectors/probes/snmp/#solaris-10","title":"Solaris 10","text":"<p>Edit community string, acl on config file: <code>/etc/sma/snmp/snmpd.conf</code></p> <p>By default SNMP service is installed and enabled on Solaris 10 with service name: <code>sma</code> After change config file you need to restart sma service for changes take effect.</p> <pre><code>svcadm restart sma\n</code></pre>"},{"location":"collectors/probes/snmp/#solaris-11","title":"Solaris 11","text":"<p>Edit the community string, acl on config file: <code>/etc/net-snmp/snmp/snmpd.conf</code></p> <p>By default SNMP service is installed and disabled on Solaris 11 with service name: <code>net-snmp</code> so we need to enable it:</p> <pre><code>svcadm enable net-snmp\n</code></pre> <p>You can verify if the service is running using the <code>svcs</code> command:</p> <pre><code>svcs -a | grep -i snmp\ndisabled       10:15:28 svc:/system/fm/snmp-notify:default\nonline         10:23:04 svc:/application/management/net-snmp:default\n</code></pre>"},{"location":"collectors/probes/snmp/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/snmp/#unable-to-derive-address-info","title":"Unable to derive address info","text":"<p>InfraSonar derives the address info from the ifdescr oid <code>1.3.6.1.2.1.2.2.1.2</code> </p> <p>We have seen devices return data in a hexadecimal format which cannot be decoded.</p> <p>The solution for now is to disable the <code>ipAddress</code> check on the asset.</p>"},{"location":"collectors/probes/snmp/#vendor-specific-snmp-probes","title":"Vendor specific SNMP probes","text":"<p>Next to the base SNMP probe we have various vendor specific SNMP based probes:</p> <ul> <li>APC UPS</li> <li>Dell iDRAC</li> <li>Eaton</li> <li>HP ILO</li> <li>HP ProCurve</li> <li>ReadyNAS</li> <li>Synology</li> <li>UniFi</li> </ul>"},{"location":"collectors/probes/snmp/apcups/","title":"APC UPS","text":""},{"location":"collectors/probes/snmp/apcups/#apc-ups","title":"APC UPS","text":""},{"location":"collectors/probes/snmp/apcups/#introduction","title":"Introduction","text":"<p>The APC UPS probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/apcups/#features","title":"Features","text":"<p>The APC UPS probe consist of a number of UPS specific checks:</p> <p> Battery status  Input/output frequency  Input/output voltage  UPS Load  Temperature</p>"},{"location":"collectors/probes/snmp/apcups/#conditions","title":"Conditions","text":"<p>The label <code>APC UPS</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/snmp/apcups/#additional-information","title":"Additional information","text":"<p> APC UPS probe source code</p>"},{"location":"collectors/probes/snmp/eaton/","title":"EATON","text":""},{"location":"collectors/probes/snmp/eaton/#eaton","title":"Eaton","text":""},{"location":"collectors/probes/snmp/eaton/#introduction","title":"Introduction","text":"<p>The Eaton probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/eaton/#features","title":"Features","text":"<p>The Eaton probe consist of a number of UPS specific checks:</p> <p> Battery status  Alarms  Input, Bypass &amp; Output measurement  Environmental monitoring, temperature and humidity</p>"},{"location":"collectors/probes/snmp/eaton/#conditions","title":"Conditions","text":"<p>The label <code>Eaton UPS</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/snmp/eaton/#eaton-ups-input-source","title":"Eaton UPS input source","text":"<p>A noteworthy condition is the Eaton UPS input source condition as this condition is triggered when the UPS lost it's main power.</p> <p>An interesting use case for this condition is to setup a rule to send a voice call to notify on-call personal when main power is lost.</p> <p>Good to known</p> <p>As the UPS occasionally switches to battery power for a couple of seconds as part of its maintenance routine this condition potential get's triggered while all is well. To avoid sending incorrect notification we wait one cycle before sending out an alert.</p> <p>As the check interval for this check is 1 minute sending out a notification for this event can potentially take a maximum off 2 minutes.</p>"},{"location":"collectors/probes/snmp/eaton/#operational","title":"Operational","text":""},{"location":"collectors/probes/snmp/eaton/#snmp-version","title":"SNMP version","text":"<p>We noted we had to use SNMP version 1 in most scenario's we deployed this probe.</p>"},{"location":"collectors/probes/snmp/eaton/#additional-information","title":"Additional information","text":"<ul> <li>Vendor SNMP MIB information</li> <li>InfraSonar Eaton probe source code </li> </ul>"},{"location":"collectors/probes/snmp/hpilo/","title":"HP ILO","text":""},{"location":"collectors/probes/snmp/hpilo/#hp-ilo","title":"HP ILO","text":""},{"location":"collectors/probes/snmp/hpilo/#introduction","title":"Introduction","text":"<p>The HP ILO probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/hpilo/#features","title":"Features","text":"<p>The HP ILO probe consist of a number of specific checks:</p> <p>  System status (fan, power supply, memory, teperature cpu)   HP Eventlog   Array controller   Storage (logical, phycial)</p>"},{"location":"collectors/probes/snmp/hpilo/#conditions","title":"Conditions","text":"<p>The label <code>HP ILO</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/snmp/hpilo/#additional-information","title":"Additional information","text":"<p> HP ILO probe source code</p>"},{"location":"collectors/probes/snmp/hpprocurve/","title":"HP ProCurve","text":""},{"location":"collectors/probes/snmp/hpprocurve/#hp-procurve","title":"HP ProCurve","text":""},{"location":"collectors/probes/snmp/hpprocurve/#introduction","title":"Introduction","text":"<p>The HP ProCurve probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/hpprocurve/#features","title":"Features","text":"<p>The HP ProCurve probe consist of a number of UPS specific checks:</p> <p> CPU  Memory  Sensors</p>"},{"location":"collectors/probes/snmp/hpprocurve/#conditions","title":"Conditions","text":"<p>The label <code>HP ProCurve</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/snmp/hpprocurve/#additional-information","title":"Additional information","text":"<p> HP ProCurve probe source code</p>"},{"location":"collectors/probes/snmp/idrac/","title":"Dell iDRAC","text":""},{"location":"collectors/probes/snmp/idrac/#dell-idrac","title":"Dell iDRAC","text":""},{"location":"collectors/probes/snmp/idrac/#introduction","title":"Introduction","text":"<p>The Dell iDRAC probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/idrac/#features","title":"Features","text":"<p>The Dell iDRAC consist of a number of specific checks:</p> <p>  System status (fan, power supply, memory, teperature cpu)   Eventlog   Firmware</p>"},{"location":"collectors/probes/snmp/idrac/#conditions","title":"Conditions","text":"<p>The label <code>iDrac</code> can be used to configure our default condition set.</p>"},{"location":"collectors/probes/snmp/idrac/#additional-information","title":"Additional information","text":"<p> Dell iDRAC probe source code</p>"},{"location":"collectors/probes/snmp/readynas/","title":"ReadyNAS","text":""},{"location":"collectors/probes/snmp/readynas/#netgear-readynas","title":"Netgear - ReadyNAS","text":"<p>Preview</p> <p>The ReadyNAS probe is a preview release. Contact InfraSonar support if you want to get involved in testing our preview release.</p>"},{"location":"collectors/probes/snmp/readynas/#introduction","title":"Introduction","text":"<p>InfraSonar monitors ReadyNAS storage systems using snmp.</p>"},{"location":"collectors/probes/snmp/readynas/#features","title":"Features","text":"<p> System information  Disk status  RAID status  Services  IO</p>"},{"location":"collectors/probes/snmp/readynas/#additional-information","title":"Additional information","text":"<p> ReadyNAS probe source code</p>"},{"location":"collectors/probes/snmp/storagetek/","title":"StorageTek Modular Library System","text":""},{"location":"collectors/probes/snmp/storagetek/#introduction","title":"Introduction","text":"<p>The StorageTek probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/storagetek/#features","title":"Features","text":"<ul> <li>Overall Library status</li> <li>Hardware status:<ul> <li>Controller</li> <li>Controller top-level</li> <li>Drive</li> <li>Elevator</li> <li>Power Supply</li> <li>Robot</li> </ul> </li> </ul>"},{"location":"collectors/probes/snmp/storagetek/#additional-information","title":"Additional information","text":"<p> Storagetek probe source code</p>"},{"location":"collectors/probes/snmp/synology/","title":"Synology","text":""},{"location":"collectors/probes/snmp/synology/#synology","title":"Synology","text":""},{"location":"collectors/probes/snmp/synology/#introduction","title":"Introduction","text":"<p>The Synology probe uses the snmp protocol to perform its queries.</p>"},{"location":"collectors/probes/snmp/synology/#features","title":"Features","text":"<p> System information  Disk status  RAID status  Services  IO</p> <p>Docker supported Synology</p> <p>Some Synology models support docker! You can utilize our docker agent to monitoring the containers running in the NAS.</p> <p>You can also use the NAS to deploy our probes and utilize the NAS also a monitoring appliance. This works flawlessly as the InfraSonar resource usage is minimal. Note this requires an advanced setup as our remote appliance manager is not supported on the Synology platform.</p>"},{"location":"collectors/probes/snmp/synology/#additional-information","title":"Additional information","text":"<p> Synology probe source code</p>"},{"location":"collectors/probes/snmp/unifi/","title":"UniFi","text":""},{"location":"collectors/probes/snmp/unifi/#unifi","title":"UniFi","text":""},{"location":"collectors/probes/snmp/unifi/#introduction","title":"Introduction","text":"<p>The UniFi probe uses the snmp protocol to perform its queries.</p> <p>See also our API probe</p> <p>You can also use our Unifi Controller and UniFi device collector.</p>"},{"location":"collectors/probes/snmp/unifi/#features","title":"Features","text":"<p>The UniFi probe consist of a number of UPS specific checks:</p> <p> System information  Radio status  VAP status</p>"},{"location":"collectors/probes/snmp/unifi/#additional-information","title":"Additional information","text":"<p> UniFi probe source code</p>"},{"location":"collectors/probes/vmware/","title":"Index","text":""},{"location":"collectors/probes/vmware/#vmware","title":"VMware","text":""},{"location":"collectors/probes/vmware/#introduction","title":"Introduction","text":"<p>InfraSonar has two probe to monitor VMware hypervisors:</p> <ul> <li>ESXi</li> <li>vCenter</li> </ul> <p>Both probes use the VMware API to collect data.</p> <p>We advise to always install bot the vCenter and the ESXi probes. For standalone ESXi host we created a specific label ensuring optimal monitoring for this scenario.</p>"},{"location":"collectors/probes/vmware/#features","title":"Features","text":"<p>Two notable metrics we added to our guest monitoring:</p> <p>Our default label for standalone ESXi hosts contains specific conditions for these metrics</p>"},{"location":"collectors/probes/vmware/#disk-bus-reset","title":"disk bus reset","text":"<p>If a storage device is overwhelmed with too many read and write commands from an ESXi host, or if it encounters a hardware issue and fails to abort commands, it will clear out all commands waiting in its queue. This is called a disk bus reset. Disk bus resets are a sign of a disk storage bottleneck and can cause slower VM performance, as VMs will need to resend those requests. Disk bus resets typically do not occur in healthy vSphere environments, so you should investigate any VM with a positive value for the disk.bus.reset metric</p>"},{"location":"collectors/probes/vmware/#cpu-readiness","title":"CPU readiness","text":"<p>The CPU readiness metric tracks the percentage of time a virtual machine is ready to run a workload but has to wait on the ESXi host to schedule it due to there not being enough physical CPU available. Monitoring CPU readiness time can give you a good idea of whether or not your VMs are running efficiently or spending too much time waiting and unable to run their workloads. While some CPU readiness time can be normal, VMware recommends setting an alert to let you know if this metric surpasses 5 percent. VMs that spend a significant percentage of their time in a ready state will be unable to execute tasks, which can lead to poor application performance and possibly timeout errors and downtime.</p>"},{"location":"collectors/probes/vmware/esx/","title":"ESXi","text":""},{"location":"collectors/probes/vmware/esx/#vmware-esxi","title":"VMware ESXi","text":""},{"location":"collectors/probes/vmware/esx/#introduction","title":"Introduction","text":"<p>The VMware esx-probe uses the VMware API to monitor VMware ESXi hosts.</p>"},{"location":"collectors/probes/vmware/esx/#features","title":"Features","text":"<p>THe ESXi probe can be used to monitor standalone VMware ESXi hosts as hosts part of a VMware V-center deployment.</p> <p>We have a default label that contains specific conditions for monitoring stand alone ESXi hosts.</p> <p>See our overall VMwware documentation for additional information.</p> <ul> <li>Configuration issues</li> <li>Hypervisor status</li> <li>Datastores<ul> <li>Virtual datastore provisioning <ul> <li>Actual capacity  on the datastore</li> <li>Virtual capacity  space actual virtually provisioned when using thin provisioning.</li> </ul> </li> </ul> </li> </ul> <p>VMware guest monitoring</p> <p>We offer a specific probe for VMware guest monitoring to retrieve even more in-depth metrics per virtual machine. See our VMware guest documentation for more information.</p>"},{"location":"collectors/probes/vmware/esx/#configuration","title":"Configuration","text":""},{"location":"collectors/probes/vmware/esx/#credentials","title":"Credentials","text":"<p>The VMware API requires a user account which is assigned the Read-only rol on each monitored ESXi host.</p> <p>See the VMware documentation on how to setup a local account and assign this accountto the Read-only role.</p> <p>Don't use root</p> <p>We strongly advise setting up a separate user for monitoring to have a clear separation of responsibilities but also to avoid lock-out issues.</p>"},{"location":"collectors/probes/vmware/esx/#operational","title":"Operational","text":""},{"location":"collectors/probes/vmware/esx/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/vmware/esx/#cached-api-response","title":"Cached API response","text":"<p>Sometimes InfraSonar reports different values than VMware consoles.</p> <p>The cause for this is that the VMware API sends cached data as a response to queries.</p> <p>The solution to mitigate this situation is to clean the VMware cache using the following commands on the affected ESXi host:</p> <pre><code>localcli hardware ipmi sel clear\netc/init.d/sfcbd-watchdog restart\netc/init.d/hostd restart\netc/init.d/vpxa restart\n</code></pre>"},{"location":"collectors/probes/vmware/esx/#additional-information","title":"Additional information","text":"<p> esx probe source code</p>"},{"location":"collectors/probes/vmware/vcenter/","title":"vCenter","text":""},{"location":"collectors/probes/vmware/vcenter/#vmware-vcenter","title":"VMware vCenter","text":""},{"location":"collectors/probes/vmware/vcenter/#introduction","title":"Introduction","text":"<p>The vcenter-probe uses the VMware API to monitor VMware Virtual center hosts.</p>"},{"location":"collectors/probes/vmware/vcenter/#features","title":"Features","text":"<ul> <li>vCenter alarms</li> <li>Cluster status</li> <li>Hypervisor hosts</li> <li>Datastores</li> </ul> <p>VMware guest monitoring</p> <p>We offer a specific probe for VMware guest monitoring to retrieve even more in-depth metrics per virtual machine. See our VMware guest documentation for more information.</p>"},{"location":"collectors/probes/vmware/vcenter/#probe-configuration","title":"Probe configuration","text":""},{"location":"collectors/probes/vmware/vcenter/#credentials","title":"Credentials","text":"<p>The VMware API requires a user account which is assigned the Read-only rol to access monitoring data on VMware vCenter appliance.</p>"},{"location":"collectors/probes/vmware/vcenter/#vcenter-integrated-with-ad","title":"vCenter integrated with AD","text":"<p>When vCenter is integrated with Active Directory (AD), you will find a group in vCenter that has a corresponding group in AD.</p> <p>Simply create a user with read-only permissions for your vCenter environment in AD and add it to the corresponding AD group. Your credentials for vCenter will be in the format of username@windows.domain.</p>"},{"location":"collectors/probes/vmware/vcenter/#vcenter-standalone","title":"vCenter standalone","text":"<p>When vCenter is not integrated with AD, you will create a new read-only user in your vSphere client and grant this account read-only access.</p> <p>See the VMware documentation on how to setup a local <code>@windows.domain</code> account and how to grant this account read-only access.</p> <p>The corresponding <code>infrasonar.yaml</code> [^1] section in this scenario:</p> <pre><code>vcenter:\n  config:\n    username: infrasonar@vsphere.local\n    password: \"some_secure_passw0rd\"\n</code></pre>"},{"location":"collectors/probes/vmware/vcenter/#additional-information","title":"Additional information","text":"<p> vcenter probe source code</p>"},{"location":"collectors/probes/vmware/vmwareguest/","title":"VMware guest","text":""},{"location":"collectors/probes/vmware/vmwareguest/#vmware-guest","title":"VMware guest","text":""},{"location":"collectors/probes/vmware/vmwareguest/#introduction","title":"Introduction","text":"<p>The VMware guest uses the VMware API to monitor VMware guests on either ESXi or VMware vCenter.</p> <p>Note</p> <p>The VMware guest probes requires the VMware vcenter or VMware ESXi probe to be installed first as these act as a \"proxy\" for the guest queries.</p>"},{"location":"collectors/probes/vmware/vmwareguest/#features","title":"Features","text":"<p>The VMware guest probe offers a deep inside into individual virtual machines running on VMware:</p> <ul> <li>Overview</li> <li>CPU Readiness</li> <li>Disk bus resets</li> <li>Virtual disks</li> <li>Snapshots</li> <li>VMware tools version</li> </ul>"},{"location":"collectors/probes/vmware/vmwareguest/#probe-configuration","title":"Probe configuration","text":"Hypervisor  <p>Address of the hypervisor you want to query, usually you would use the IP or FQDN of the Vcenter asset used to managed the VMware cluster. When using an ESXi without Vcenter you can also enter the IP or FQDN of the ESXi host here.</p> Instance UUID  <p>You can lookup the instance UUID on the details page of the asset you want specified as hypervisor</p> Credentials  <p>As the VMware guest connects to a VMware vCenter host or ESXi host we urge you to use the same credentials for the VMware guest queries.</p> <p>When monitoring guests running on a standalone ESXi environment you can use <code>esx</code> and when monitoring guest on Vcenter managed environment use <code>vcenter</code> </p> <p>You can automate this step using our InfraSonar Commandline Interfase and VMware guests report.</p> <p>Please reach out to support for additional information.</p>"},{"location":"collectors/probes/vmware/vmwareguest/#additional-information","title":"Additional information","text":"<p> vcenter probe source code</p>"},{"location":"collectors/probes/wmi/","title":"Index","text":""},{"location":"collectors/probes/wmi/#wmi","title":"WMI","text":""},{"location":"collectors/probes/wmi/#introduction","title":"Introduction","text":"<p>InfraSonar can use the WMI protocol to monitor Microsoft Windows hosts without installing an agent on them. Monitoring in this scenario is performed by periodically querying the Windows host using WQL queries.</p> <p>InfraSonar uses the open source aiowmi library released in 2021 by Cesbit.</p>"},{"location":"collectors/probes/wmi/#features","title":"Features","text":"<ul> <li>CPU, memory and disk utilization</li> <li>Network utilization</li> <li>Windows services</li> <li>Domain information for domain joined hosts</li> <li>Time drift</li> <li>Process information</li> <li>User information</li> <li>Local sessions</li> <li>Remote sessions (RDP)</li> <li>Configured shares</li> <li>Installed software (as reported by add/remove programs)</li> <li>Installed Windows updates</li> <li>VSS usage</li> </ul>"},{"location":"collectors/probes/wmi/#prerequisites","title":"prerequisites","text":""},{"location":"collectors/probes/wmi/#credentials","title":"Credentials","text":"<p>The WMI-probe requires a service account with domain admin rights or a local administrative to perform the WMI queries.</p> <p>While it is possible to configure a regular user with additional DCOM permissions we feel this provides a false sense of security as the DCOM privileges required are quite broad.</p>"},{"location":"collectors/probes/wmi/#none-domain-credentials","title":"None domain credentials","text":"<p>None domain members</p> <p>This is only required for hosts that are not a member of your Windows domain or when using a local account is required due to other circumstances.</p> <p>By default only the true local administrator account can be used for remote WMI queries. You can use the following steps to create a local account:</p> <ol> <li>Create a local account and ensure the account is member of the group Remote Management Users.</li> <li>Authorize CIMV2 access:<ol> <li>Open the WMI management console <code>wmimgmt.msc</code>.</li> <li>Right click WMI Control (Local) and select properties from the menu.</li> <li>Select the security tab.</li> <li>Browse to Root\\CIMV2.</li> <li>Click the button labeled security.</li> </ol> </li> <li>Authorize COM access:<ol> <li>Start the component Services console.</li> <li>Browse in the left pane to: Component Services \\ Computers.</li> <li>Right click My Computer and select **properties from the menu.</li> <li>Open the tab COM Security.</li> <li>Click Edit Limits in the Access Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure the account has Remote Access permissions.</li> <li>Close the access permission screen by clicking OK.</li> <li>Click on Edit Limits in the Launch and Activation Permissions pane.</li> <li>Add the account used for monitoring using the Add button.</li> <li>Ensure to allow: Local Launch, Remote Launch, Local Activation and Remote Activation.</li> <li>Close the windows by clicking OK twice and exit the Component Services console.</li> </ol> </li> </ol> <p>See also our WMI trouble shooting section about remote-UAC as you might need to disable this.</p>"},{"location":"collectors/probes/wmi/#firewall-requirements","title":"Firewall requirements","text":"<p>The WMI-probe requires no configuration on the monitored asset, other then access via the WMI protocol.</p>"},{"location":"collectors/probes/wmi/#local-firewall","title":"Local firewall","text":"<p>If the Microsoft Windows local firewall is enabled, you will need to allow \"Windows Management Instrumentation\" traffic.</p> <p>To enable or disable WMI traffic using the firewall UI</p> <ol> <li>In the Control Panel, click on Security and then click on Windows Firewall.</li> <li>Click on Change Settings and then click on the Exceptions tab.</li> <li>In the Exceptions window, select the check box for Windows Management Instrumentation (WMI) to enable WMI traffic through the firewall. To disable WMI traffic, clear the check box.</li> </ol> <p>Tip</p> <p>Windows 11 has a special firewall that only allows access from hosts inside the same local subnet.</p> <p>To enable WMI traffic at command prompt using WMI rule group</p> <p>We can easily allow remote WMI using the following set of <code>netsh</code> commands:</p> <pre><code>netsh advfirewall firewall set rule group=\"Windows Management Instrumentation (WMI-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (DCOM-In)\" new enable=yes\nnetsh advfirewall firewall set rule group=\"Windows Management Instrumentation (ASync-In)\" new enable=yes\n</code></pre>"},{"location":"collectors/probes/wmi/#corporate-firewall","title":"Corporate firewall","text":"<p>When monitoring hosts which are located behind a firewall, for example hosts in a DMZ, the firewall must be configured to allow WMI.</p> <p>To comply with Internet Assigned Numbers Authority (IANA) recommendations, Microsoft has increased the dynamic client port range for outgoing connections in Windows Vista and Windows Server 2008. The new default start port is 49152, and the new default end port is 65535. This is a change from the configuration of earlier versions of Windows that used a default port range of 1025 through 5000.</p> <ul> <li>Windows server below 2008, access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 1024-5000) should be granted.</li> <li>Windows server 2008 and higher versions. access for the RPC Endpoint Mapper (135) as well as WMI (variable port range, by default 49152-65535) should be granted.</li> </ul> <p>You can lookup the dynamic port range actually used by the Windows host using these commands:</p> <pre><code>netsh int ipv4 show dynamicport tcp\nnetsh int ipv4 show dynamicport udp\nnetsh int ipv6 show dynamicport tcp\nnetsh int ipv6 show dynamicport udp\n</code></pre> <p>Note</p> <p>The range is set separately for each transport (TCP or UDP).</p> <p>The port range is now truly a range that has a starting point and an ending point.</p> <p>Microsoft customers who deploy servers that are running Windows Server 2008 may have problems that affect RPC communication between servers if firewalls are used on the internal network.</p> <p>In these situations, we recommend that you reconfigure the firewalls to allow traffic between servers in the dynamic port range of 49152 through 65535.</p> <p>This range is in addition to well-known ports that are used by services and applications. Or, the port range that is used by the servers can be modified on each server.</p> <p>You adjust this range by using the netsh command, as follows: netsh int  set dynamic  start= number num= range. This command sets the dynamic port range for TCP. The start port is number, and the total number of ports is range."},{"location":"collectors/probes/wmi/#microsoft-isa-server","title":"Microsoft ISA Server","text":"<p>Monitoring a Microsoft ISA server requires the following rules on the ISA server:</p> <ul> <li>Allow traffic from the monitoring appliance to localhost for all protocols.</li> <li>Within this rule, filtering \"Enforce strict RPC compliance\" must be disabled.</li> </ul>"},{"location":"collectors/probes/wmi/#operational","title":"Operational","text":""},{"location":"collectors/probes/wmi/#known-issues","title":"Known issues","text":""},{"location":"collectors/probes/wmi/#microsoft-windows-server-2003","title":"Microsoft Windows server 2003","text":"<p>You should ensure Management and Monitoring Tools are installed using Add/remove windows components</p> <p>The software and updates check might not work as expected, we advise you to turn off these checks.</p>"},{"location":"collectors/probes/wmi/#troubleshooting-wmi","title":"Troubleshooting WMI","text":"<p>See our troubleshooting section for known issues and ways to troubleshot WMI queries.</p>"},{"location":"collectors/probes/wmi/#additional-information","title":"Additional information","text":"<p> Microsoft WMI probe source code</p>"},{"location":"collectors/probes/wmi/eventlog/","title":"EventLog","text":""},{"location":"collectors/probes/wmi/eventlog/#eventlog","title":"Eventlog","text":""},{"location":"collectors/probes/wmi/eventlog/#introduction","title":"Introduction","text":"<p>The Eventlog guest probes uses WMI to to monitor Microsoft Windows eventlog's.</p>"},{"location":"collectors/probes/wmi/eventlog/#features","title":"Features","text":"<ul> <li>Specific eventID's</li> <li>Predefined security IDS's</li> </ul>"},{"location":"collectors/probes/wmi/eventlog/#probe-configuration","title":"Probe configuration","text":"<p>Configuration of the eventlog probe is the similar to deploying the WMI probe as it is in essence an extension of the WMI probe.</p>"},{"location":"collectors/probes/wmi/eventlog/#additional-information","title":"Additional information","text":""},{"location":"collectors/probes/wmi/eventlog/#security-eventlog-ids-monitored","title":"Security eventlog ID's monitored","text":"ID Description 4624 Successful account log on 4625 Failed account log on 4634 An account logged off 4648 A logon attempt was made with explicit credentials 4719 System audit policy was changed. 4964 A special group has been assigned to a new log on 1102 Audit log was cleared. This can relate to a potential attack 4720 A user account was created 4722 A user account was enabled 4723 An attempt was made to change the password of an account 4725 A user account was disabled 4728 A user was added to a privileged global group 4732 A user was added to a privileged local group 4756 A user was added to a privileged universal group 4738 A user account was changed 4740 A user account was locked out 4767 A user account was unlocked 4735 A privileged local group was modified 4737 A privileged global group was modified 4755 A privileged universal group was modified 4772 A Kerberos authentication ticket request failed 4777 The domain controller failed to validate the credentials of an account. 4782 Password hash an account was accessed 4616 System time was changed 4657 A registry value was changed 4697 An attempt was made to install a service 4698 A scheduled task was created 4699 A scheduled task was deleted 4700 A scheduled task was enabled 4701 A scheduled task was disabled 4702 A scheduled task was updated 4946 A rule was added to the Windows Firewall exception list 4947 A rule was modified in the Windows Firewall exception list 4950 A setting was changed in Windows Firewall 4954 Group Policy settings for Windows Firewall has changed 5025 The Windows Firewall service has been stopped 5031 Windows Firewall blocked an application from accepting incoming traffic 5152 A network packet was blocked by Windows Filtering Platform 5153 A network packet was blocked by Windows Filtering Platform 5155 Windows Filtering Platform blocked an application or service from listening on a port 5157 Windows Filtering Platform blocked a connection 5447 A Windows Filtering Platform filter was changed 4663 Attempt made to access object 4688 A new process has been created 4670 Permissions on an object were changed 4672 Special privileges assigned to new logon"},{"location":"collectors/probes/wmi/eventlog/#other-interesting-eventlog-ids-to-monitor","title":"Other interesting eventlog ID's to monitor","text":""},{"location":"collectors/probes/wmi/eventlog/#troubleshoot-unexpected-reboots","title":"Troubleshoot unexpected reboots","text":"<p>This article gives a deep insight into which eventlog ID's you should monitor to reboot reasons.</p> <p>TL;DR for those who just want to know the eventlog ID's to watch for:</p> <ul> <li>Reboot history: <code>12</code>, <code>13</code>, <code>6005</code>, &amp; <code>6009</code></li> <li>Reboot types: <code>13</code>, <code>41</code>, <code>1074</code>, <code>6008</code>, &amp; <code>6009</code> </li> <li>Causes of reboot: <code>19</code>, <code>41</code>, <code>1001</code>, <code>1074</code>, &amp; <code>7045</code> </li> </ul> <p> Windows Event Log probe source code</p>"},{"location":"collectors/probes/wmi/hyperv/","title":"Hyper-V","text":""},{"location":"collectors/probes/wmi/hyperv/#hyperv","title":"HyperV","text":""},{"location":"collectors/probes/wmi/hyperv/#introduction","title":"Introduction","text":"<p>The Hyper-V guest probes uses WMI to to monitor Microsoft Windows Hyper-V hosts.</p>"},{"location":"collectors/probes/wmi/hyperv/#features","title":"Features","text":"<ul> <li>Hyper-V quest overview</li> </ul>"},{"location":"collectors/probes/wmi/hyperv/#probe-configuration","title":"Probe configuration","text":"<p>Configuration of the Hyper-V probe is the similar to deploying the WMI probe as it is in essence an extension of the WMI probe.</p>"},{"location":"collectors/probes/wmi/hyperv/#additional-information","title":"Additional information","text":"<p> Microsoft Hyper-V probe source code</p>"},{"location":"collectors/probes/wmi/hypervguest/","title":"Hyper-V guest","text":""},{"location":"collectors/probes/wmi/hypervguest/#hyper-v-guest","title":"Hyper-V guest","text":""},{"location":"collectors/probes/wmi/hypervguest/#introduction","title":"Introduction","text":"<p>The Hyper-V guest probes uses WMI to to monitor Microsoft Windows Hyper-V guests.</p> <p>Note</p> <p>The Microsoft Hyper-V guest probes requires the Hyper-V probe to be installed first as these act as a \"proxy\" for the guest queries.</p>"},{"location":"collectors/probes/wmi/hypervguest/#features","title":"Features","text":"<ul> <li>Guest status as provided by the <code>Msvm_ComputerSystem</code> class</li> </ul>"},{"location":"collectors/probes/wmi/hypervguest/#probe-configuration","title":"Probe configuration","text":"Hypervisor <p>Address of the hypervisor you want to query, usually you would use the IP or FQDN of the Hyper-V host. </p>  GUID <p>You can lookup the GUUID on the details page of the asset you want specified as Hyper-V host </p>  Local conguration <p>Here you can set an optional <code>Local configuration</code>.</p>"},{"location":"collectors/probes/wmi/hypervguest/#good-to-know","title":"Good to know","text":"<p>You can automate deployment using our InfraSonar Commandline Interfase and the Hyper-V guests report.</p>"},{"location":"collectors/probes/wmi/hypervguest/#additional-information","title":"Additional information","text":"<p> Microsoft Hyper-V guest probe source code</p>"},{"location":"collectors/probes/wmi/non-admin-user/","title":"Non admin user","text":""},{"location":"collectors/probes/wmi/non-admin-user/#wmi-as-a-non-admin-user","title":"WMI as a non admin user","text":"<p>Using read-only accounts for monitoring is a security best practice. However, Microsoft's implementation of WMI makes this difficult on Windows systems, requiring manual configuration on each asset. This poses challenges for scalability and maintainability, especially in large environments.</p> <p>We strongly recommend carefully weighing the security risks against the operational overhead of configuring individual read-only access on each monitored Windows asset and potentially missing statuses form services as these potentially are now shown to regular users.</p> <p>The steps required to accomplish using a non domain admin account are outlined below.</p>"},{"location":"collectors/probes/wmi/non-admin-user/#create-a-user","title":"Create a user","text":"<p>First step is to create a regular AD user without any additional permissions.</p>"},{"location":"collectors/probes/wmi/non-admin-user/#group-policy","title":"Group policy","text":"<p>The next step is to setup a GPO object to grant the just created user sufficient rights.</p> <ol> <li>Open the Group Policy Management console.</li> <li>create a GPO by right-clicking on Group Policy Objects.</li> <li>Name the GPO accouding to your company standards.</li> <li>Edit the just created GPO (right-cleck the GPO and select edit).</li> <li>Navigate to Computer Configuration --&gt; Policies --&gt; Windows Settings --&gt; Security Settings --&gt; Local Policies &gt; Security Options.</li> <li>Double-click on the <code>DCOM: Machine Access Restrictions in Security Descriptor Definition Language (SDDL) syntax</code> policy and make sure Define this policy setting is checked.</li> <li>Choose Edit Security. Click Add and type the username you just created, click Check Names and then click OK.</li> <li>Select the user and check Local Access and Remote Access. Click OK twice.</li> <li>Double click on <code>DCOM: Machine Launch Restrictions in Security Descriptor Definition Language (SDDL) syntax</code> policy and make sure Define this policy setting is checked.</li> <li>Choose Edit Security. Click Add and type the username you just created, click Check Names and then click OK.</li> <li>Select the user and ensure Local Launch, Remote Launch, Local Activation and Remote Activation are checked. Then click OK twice.</li> <li>As a last step link the GPO to the appropriate Computers/Servers OU to apply the selected DCOM policies.</li> </ol> <p>Note</p> <p>If the GPO is not applied, select the Enforce GPO option to yes for the created GPO in Group policy management console.</p>"},{"location":"collectors/probes/wmi/non-admin-user/#local-configuration","title":"Local configuration","text":"<p>The next steps need to be performed manually on each Windows asset.</p> <p>Set the correct rights for WMI namespace:</p> <ol> <li>Open the WMI management console (<code>wmimgmt.msc</code>).</li> <li>Right-click WMI Control (Local) and click Properties.</li> <li>Open the Security tab, then click Root, click the Security button and click add.</li> <li>Underneath Enter the object names to select, type the user created above without quotes, click Check Names, then click OK.</li> <li>Select the user and click Advanced.</li> <li>Highlight the row with user in it and click Edit.</li> <li>From the Applies to drop-down list, select This namespace and subnamespaces.</li> <li>Under the Allow column, check Execute Methods, Enable Account, Remote Enable, and then click OK.</li> <li>Click OK to close all windows.</li> </ol>"},{"location":"collectors/probes/wmi/non-admin-user/#set-permissions-to-service-control-manager-security-for-windows-service-monitoring","title":"Set permissions to Service Control Manager Security for Windows Service Monitoring","text":"<p>In order to monitor Windows services you need to grant additional permissions to the just created user as access to the Windows services is controlled by the Security Descriptor of Service Control Manager, which by default is restricted for hardened OS. The below mentioned steps will grant remote access to Service Control Manager in user level, to get the list of services on a server.</p>"},{"location":"collectors/probes/wmi/non-admin-user/#retrieve-the-user-sid-of-the-user-account","title":"Retrieve the user SID of the User Account","text":"<p>From the asset you want to monitor, open Command Prompt in Administrator mode. Run the below command to retrieve the user SID. Replace UserName with the user name for the User account.</p> <p>Ensure to use the name of your created user account </p> <pre><code>wmic useraccount where name=\"UserName\" get name,sid\n</code></pre> <p>Example:</p> <pre><code>C:\\&gt;wmic useraccount where name=\"wminoadmin\" get name,sid\nName        SID\nwminoadmin  S-1-5-21-724513037-2082936978-2164574455-1608\n</code></pre> <p>Note down the SID. (Ex. <code>S-1-5-21-724513037-2082936978-2164574455-1608</code>) Retrieve the current SDDL for the SC Manager and use it's output to update the SDDL</p> <p>Run the below command to retrieve the current SDDL:</p> <pre><code>sc sdshow scmanager\n</code></pre> <p>Example ouput <pre><code>D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)(A;;CC;;;AC)(A;;CC;;;S-1-15-3-1024-528118966-3876874398-709513571-1907873084-3598227634-3698730060-278077788-3990600205)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)\n</code></pre></p> <p>Next step is to combine this output with the prevously retrieved SID by adding <code>(A;;CCLCRPWPRC;;; &lt;SID of User&gt; )</code> before the <code>S:</code> of the just retrieved SDDL.</p> <p>This results in the following command: <pre><code>sc sdset scmanager D:(A;;CC;;;AU)(A;;CCLCRPRC;;;IU)(A;;CCLCRPRC;;;SU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)(A;;CC;;;AC)(A;;CC;;;S-1-15-3-1024-528118966-3876874398-709513571-1907873084-3598227634-3698730060-278077788-3990600205)(A;;CCLCRPWPRC;;;S-1-5-21-724513037-2082936978-2164574455-1608)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)\n</code></pre></p> <p>When execured the output should be: <pre><code>[SC] SetServiceObjectSecurity SUCCESS\n</code></pre></p> <p>If some windows services are still not listed, permissions have to be granted for individual services as below. For setting permission on Some missing service (ServiceName: <code>someMissingSvc</code>), run the following command, to get its current SDDL.</p> <pre><code>sc sdshow someMissingSvc\n</code></pre> <p>Then form the SDDL as in the above step and update it as the following <pre><code>sc sdset someMissingSvc &lt;SDDL formed in above step&gt;\n</code></pre></p> <p>Once done, check if the Windows Service is listed. </p>"},{"location":"collectors/probes/wmi/non-admin-user/#permissions-granted-to-the-user","title":"Permissions granted to the user","text":"<p>This will grant the following permissions to the user:</p> <ul> <li><code>CC</code> - To Get Service's current configuration</li> <li><code>LC</code> - To Get Service's current status</li> <li><code>RP</code> - To Read Properties/Start the Service</li> <li><code>WP</code> - To Write Properties/Stop the Service</li> <li><code>RC</code> - To Read the Security Descriptor.</li> </ul>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/","title":"WMI troubleshooting","text":""},{"location":"collectors/probes/wmi/wmi-troubleshooting/#manual-query","title":"Manual query","text":"<p>You can test WMI access from a Windows host or the Linux appliance.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#linux-appliance","title":"Linux appliance","text":"<p>WMI command line query for the Linux appliance or any host running Docker.</p> <pre><code>docker run --rm -it \\\n  --network host \\\n  ghcr.io/infrasonar/wmi-probe \\\n  pywmitool \\\n    -a &lt;computername or IP&gt; \\\n    -u userid&gt; \\\n    -d &lt;domain&gt; \\\n    -q \"SELECT Name FROM Win32_OperatingSystem\"\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#windows-host","title":"Windows host","text":"<p>You can test if WMI is working correctly on a Windows host by using the <code>wbemtest</code> command:</p> <pre><code>wbemtest\nnamespace \\\\&lt;computername or IP&gt;\\root\\cimv2\nquery\nselect name from win32_computersystem\n</code></pre> <p>Note</p> <p>Make sure to replace <code>&lt;domain&gt;</code>, <code>&lt;userid&gt;</code>, and <code>&lt;computername or IP&gt;</code> with the correct values.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#wmi-probe-known-issues","title":"WMI-probe - Known issues","text":""},{"location":"collectors/probes/wmi/wmi-troubleshooting/#access-denied","title":"Access denied","text":"<p>There are various possible solutions for an access denied error.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#winrm-quickconfig","title":"winrm quickconfig","text":"<p>Run the following command to verify the configuration:</p> command<pre><code>winrm quickconfig\n</code></pre> <p>This should result in an output similar to the example output below:</p> output<pre><code>WinRM service is already running on this machine.\nWinRM is not set up to allow remote access to this machine for management.\nThe following changes must be made:\n\nConfigure LocalAccountTokenFilterPolicy to grant administrative rights remotely\nto local users.\n\nMake these changes [y/n]? y\n\nWinRM has been updated for remote management.\n\nConfigured LocalAccountTokenFilterPolicy to grant administrative rights remotely\n  to local users.\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#verify-security-policy-settings","title":"Verify Security Policy settings","text":"<ol> <li>Start the group policy editor <code>gpedit.msc</code></li> <li>Navigate to: Computer Configuration Windows Settings Security Settings Local Policies Security Options</li> <li>check these policies:<ol> <li><code>Network access: Do not allow storage of passwords and credentials for network authentication</code>, this must be set to: DISABLED.</li> <li><code>Network access: Sharing and security model for local accounts</code>, this must be set to CLASSIC.</li> <li><code>Network security: LAN Manager authentication level</code>, should be: Not Defined or set to: Send LM &amp; NTLM - use NTLMv2 session security if negotiated.This also should fix any <code>NTSTATUS: NT_STATUS_ACCESS_DENIED</code> errors</li> </ol> </li> </ol>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#remote-uac","title":"Remote UAC","text":"<p>If you are monitoring a Windows asset using a local administrator account you might see the notification <code>unable to authenticate: ACCESS_DENIED (5)</code></p> <p>This might happens if you don't use the local administrator account itself but instead created a separate account, even if this is a member of the local administrators group.</p> <p>To fix this you need to disable remote User Account Control (UAC). Disabling remote user account control does not disable local UAC functionality.</p> <p>To disable remote UAC for a workgroup computer:</p> <ol> <li>Open the registry editor (<code>regedit</code>) on the computer you want to monitor.</li> <li>Browse to the key: <code>HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System</code></li> <li>Locate or create a DWORD entry named <code>LocalAccountTokenFilterPolicy</code> and provide a DWORD value of <code>1</code>. To re-enable remote UAC, change this value to <code>0</code>.</li> </ol> <pre><code>Windows Registry Editor Version 5.00\n\n[HKEY_LOCAL_MACHINE\\SOFTWARE\\Microsoft\\Windows\\CurrentVersion\\Policies\\System]\n\"LocalAccountTokenFilterPolicy\"=dword:00000001\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#wmi-error-0x80041010","title":"WMI error 0x80041010","text":"<p>Performance counter based checks such as:</p> <ul> <li>base.cpu</li> <li>base.uptime</li> <li>base.volume-io</li> </ul> <p>Might give the following WMI Query error:</p> <p>WMI Query error occured, error message: NTSTATUS: NT code 0x80041010 - NT code 0x80041010</p> <p>To resolve this error, use the following command on the troubled host:</p> <pre><code>%windir%\\system32\\wbem\\wmiadap.exe /f\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#fix-broken-wmi-setup","title":"Fix broken WMI setup","text":""},{"location":"collectors/probes/wmi/wmi-troubleshooting/#rebuild-the-wmi-repository","title":"Rebuild the WMI repository","text":"<p>On Windows XP and above you can use the following command to rebuild the WMI repository:</p> <pre><code>rundll32 wbemupgd, UpgradeRepository\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#reinstall-wmi-in-the-registry","title":"Reinstall WMI in the registry","text":"<p>The following commands will reinstall WMI in the registry:</p> <pre><code>winmgmt /clearadap\nwinmgmt /kill\nwinmgmt /unregserver\nwinmgmt /regserver\nwinmgmt /resyncperf\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#broken-performance-counters","title":"Broken performance counters","text":"<p>To rebuild all Performance counters including extensible and third-party counters, enter the following commands in an Administrative command prompt. Press ENTER after each command.</p> <p>Rebuilding the counters:</p> <pre><code>cd c:\\windows\\system32\nlodctr /R\ncd c:\\windows\\sysWOW64\nlodctr /R\n</code></pre> <p>Resyncing the counters with Windows Management Instrumentation (WMI):</p> <pre><code>WINMGMT.EXE /RESYNCPERF\n</code></pre> <p>Stop and restart the Performance Logs and Alerts service. Stop and restart the Windows Management Instrumentation service.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#disk-performance-data-missing","title":"Disk performance data missing","text":"<p>Enable Disk performance counters using the following command:</p> <pre><code>DISKPERF -Y\n</code></pre> <p>You will receive the following message:</p> <p>Disk performance counters on this system are now set to start at boot. This change will take effect after the system is rebooted.</p> <p>See also: kb102020.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#access-denied-on-select-from-win32_service","title":"Access denied on SELECT * FROM Win32_Service","text":"<p>Run the following command in an administrative prompt:</p> <pre><code>sc sdset SCMANAGER D:(A;;CCLCRPRC;;;AU)(A;;CCLCRPWPRC;;;SY)(A;;KA;;;BA)S:(AU;FA;KA;;;WD)(AU;OIIOFA;GA;;;WD)\n</code></pre>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#reverse-dns","title":"Reverse DNS","text":"<p>We have seen instances were WMI fails querying on an IP address, if reverse DNS is not ok.</p>"},{"location":"collectors/probes/wmi/wmi-troubleshooting/#netlogon-service","title":"Netlogon service","text":"<p>Verify that the Netlogon service is running and set to start automatically.</p>"},{"location":"collectors/services/","title":"Services","text":"<p>A service collector is used to monitor a global service such as, for example, the status of Microsoft 365, AWS health, Google Cloud status, etc. The collected service status is reported back to all interested containers.</p>"},{"location":"collectors/services/#ipv4-addresses","title":"IPv4 addresses","text":"<p>Our services run in our cloud platform and use the following IPv4 addresses:</p> <ul> <li>34.90.55.73</li> <li>34.90.105.247</li> </ul> <p>Ensure assets you want to monitor using a service are allowed to be accessed from these IP addresses.</p>"},{"location":"collectors/services/dns/","title":"DNS","text":""},{"location":"collectors/services/dns/#dns","title":"DNS","text":""},{"location":"collectors/services/dns/#introduction","title":"Introduction","text":"<p>The DNS service is a synthetic monitor and can even monitor changes to specific DNS records. The DNS service is similar to our DNS Probe with the exeception that our services run on our platform.</p> <p>Using the DNS service can be really useful to observer your DNS configuration from outside your IT infrastructure.</p>"},{"location":"collectors/services/dns/#features","title":"Features","text":"<p>THe DNS service can perform forward and reverse DNS queries for an FQDN</p>"},{"location":"collectors/services/dns/#deployment","title":"Deployment","text":"<p>The DNS service can easily be deployed by enabling the dnssvc collector</p>"},{"location":"collectors/services/dns/#service-configuration","title":"Service configuration","text":"Property Description DNS Servers DNS servers to query, note all configured DNS servers are queried FQDN FQDN of the DNS record you want to monitor <p>Reverse DNS lookups</p> <p>Using the special <code>.arpa.</code> domain it is possible to perform a reverse DNS lookup. See our PTR section for a detailed explanation and examples.</p>"},{"location":"collectors/services/dns/#example-configuration","title":"Example configuration","text":"<ul> <li>DNS servers: <code>8.8.8.8, 8.8.4.4</code></li> <li>FQDN: <code>dns.google.com</code></li> </ul>"},{"location":"collectors/services/dns/#checks","title":"Checks","text":"<p>We support the DNS record types described in our DNS monitoring guide.</p>"},{"location":"collectors/services/dns/#additional-information","title":"Additional information","text":"<p> DNS Guide DNS probe source code</p>"},{"location":"collectors/services/http/","title":"HTTP","text":""},{"location":"collectors/services/http/#http-service","title":"HTTP Service","text":""},{"location":"collectors/services/http/#introduction","title":"Introduction","text":"<p>The HTTP Service allows to monitor a specific URI over the http or https protocol</p>"},{"location":"collectors/services/http/#features","title":"Features","text":"<ul> <li>Roundtrip time, the roundtriptime for the http(s) request is measured and returned.</li> <li>HTTP status code monitoring</li> </ul>"},{"location":"collectors/services/http/#service-configuration","title":"Service configuration","text":"Property Description URI URI of the website you want to monitor Timeout Timeout in seconds should be a value between 0 and 240. The default timeout is 10.0 Verify SSL If turned off, the check ignores invalid certificates; when on, the URI must have a valid certificate. Nots, this is only applicable for HTTPS URI. The default is off. With payload Retrieves the payload, bare in mind the payload is limited to 500 Kb Allow redirects When turned on, redirects are followed. <p>Tips</p> <p>1. Redirects When monitoring cloud services, enable Allow redirects as these services heavily rely on http redirects.  2. Make our check filterable Add parameters to your URI so you can identify and thus filter us from your regular traffic. For example like this: <pre><code>https://&lt;&lt;your uri&gt;&gt;/?utm_source=infrasonar&amp;utm_medium=infrasonar&amp;utm_campaign=infrasonar\n</code></pre></p>"},{"location":"collectors/services/http/#check-specifics","title":"Check specifics","text":""},{"location":"collectors/services/http/#http-status-codes","title":"HTTP Status codes","text":"<p>See RFC9110 or the List of HTTP status codes on Wikipedia for more detailed information.</p> code class code Meaning 100 Informational Continue 101 Informational Switching protocols 102 Informational Processing 103 Informational Early Hints 200 Successful OK 201 Successful Created 202 Successful Accepted 203 Successful Non-Authoritative Information 204 Successful No Content 205 Successful Reset Content 206 Successful Partial Content 207 Successful Multi-Status 208 Successful Already Reported 226 Successful IM Used 300 Redirection Multiple Choices 301 Redirection Moved Permanently 302 Redirection Found (Previously \"Moved Temporarily\") 303 Redirection See Other 304 Redirection Not Modified 305 Redirection Use Proxy 306 Redirection Switch Proxy 307 Redirection Temporary Redirect 308 Redirection Permanent Redirect 400 Client Error Bad Request 401 Client Error Unauthorized 402 Client Error Payment Required 403 Client Error Forbidden 404 Client Error Not Found 405 Client Error Method Not Allowed 406 Client Error Not Acceptable 407 Client Error Proxy Authentication Required 408 Client Error Request Timeout 409 Client Error Conflict 410 Client Error Gone 411 Client Error Length Required 412 Client Error Precondition Failed 413 Client Error Payload Too Large 414 Client Error URI Too Long 415 Client Error Unsupported Media Type 416 Client Error Range Not Satisfiable 417 Client Error Expectation Failed 418 Client Error I'm a Teapot 421 Client Error Misdirected Request 422 Client Error Unprocessable Entity 423 Client Error Locked 424 Client Error Failed Dependency 425 Client Error Too Early 426 Client Error Upgrade Required 428 Client Error Precondition Required 429 Client Error Too Many Requests 431 Client Error Request Header Fields Too Large 451 Client Error Unavailable For Legal Reasons 500 Server Error Internal Server Error 501 Server Error Not Implemented 502 Server Error Bad Gateway 503 Server Error Service Unavailable 504 Server Error Gateway Timeout 505 Server Error HTTP Version Not Supported 506 Server Error Variant Also Negotiates 507 Server Error Insufficient Storage 508 Server Error Loop Detected 510 Server Error Not Extended 511 Server Error Network Authentication Required"},{"location":"collectors/services/http/#server-disconnected","title":"Server disconnected","text":"<p>A notification showing <code>Server disconnected</code> typically indicates a reverse proxy not allowing access from our service IP addresses</p>"},{"location":"collectors/services/last_seen/","title":"Last seen","text":""},{"location":"collectors/services/last_seen/#last-seen","title":"Last Seen","text":""},{"location":"collectors/services/last_seen/#introduction","title":"Introduction","text":"<p>The last seen service is a service running in the InfraSonar backend responsible for retrieving the latest timestamp we retrieved a check result for an asset.</p>"},{"location":"collectors/services/last_seen/#deployment","title":"Deployment","text":"<p>The last seen service requires no configuration and can easily be deployed to an asset by adding the last seen collector to the asset.</p>"},{"location":"collectors/services/manager/","title":"Manager Service","text":"<p>The Manager Service is a powerful tool designed to enable self-managed monitoring teams.</p> <p>It provides managers with a quick overview of two key metrics:</p> <ul> <li>The total number of open alerts and notifications.</li> <li>The number of active container members currently monitoring the environment.</li> </ul> <p>The core feature allows you to set a minimum required number of active monitoring members. This empowers the team to self-organize their coverage. If the number of active members drops below this threshold, or if alerts remain unassigned for too long, a new alert is automatically sent to the manager, ensuring continuous vigilance and prompting necessary action.</p>"},{"location":"collectors/services/microsoft_365/","title":"Microsoft 365","text":""},{"location":"collectors/services/microsoft_365/#microsoft-365","title":"Microsoft 365","text":"<p>Microsoft 365 is an InfraSonar service which can monitor your Microsoft 365 tenant.</p>"},{"location":"collectors/services/microsoft_365/#features","title":"Features","text":"<p>Add the moment the following Azure resources are supported:</p> <ul> <li>Subscriptions</li> <li>Health status</li> </ul>"},{"location":"collectors/services/microsoft_365/#configuration","title":"Configuration","text":"<p>Our Microsoft 365 service needs the following properties:</p> <ul> <li>Directory (tenant) Id</li> <li>Application (client) Id</li> <li>Client secret value</li> </ul> <p>In the next paragraphs we describe how to setup the Azure service and how to retrieve the required properties.</p>"},{"location":"collectors/services/microsoft_365/#prepare-your-azure-environment","title":"Prepare your Azure environment","text":"<p>Open the Azure portal (https://portal.azure.com/) using an account with sufficient privileges to register an Azure app and set permissions.</p>"},{"location":"collectors/services/microsoft_365/#create-an-app-registration","title":"Create an app registration","text":"<ol> <li>From the main menu, open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub-menu</li> <li>Select new registration</li> <li>Enter the user-facing display name e.g., InfraSonar Azure Service</li> <li>Who can use this application or access this API: Selecting Accounts in this organizational directory only in most cases</li> <li>Click Register</li> <li>A new Windows opens, note the following ID's down:<ol> <li>Application (client) ID</li> <li>Directory (tenant) ID</li> </ol> </li> <li>Click Add a certificate or secret next to client credentials</li> <li>Click New client secret in the Client secrets tab<ol> <li>Enter a description: e.g.m InfraSonar azure Service client secret</li> <li>Set an expiration date, note this value down and remember to renew before this date!</li> <li>Click Add</li> <li>Note down the Value, note this can not be retrieved again once you close this window!</li> </ol> </li> </ol> <p>Don't close this Windows, next step is setting API permissions.</p>"},{"location":"collectors/services/microsoft_365/#api-permissions","title":"API permissions","text":"<ol> <li>Select API permissions from the menu</li> <li>Click Add a permisssion</li> <li>Click Microsoft Graph</li> <li>Select Application permissions<ol> <li>Search ServiceHealth</li> <li>Expand the ServiceHealth tab</li> <li>Select ServiceHealth.Read.All</li> <li>Search Organization</li> <li>Expand the Organization tab</li> <li>Select Organization.Read.All</li> </ol> </li> <li>Click the Add permisssions button</li> <li>Note the status column shows a <code>Not granted...</code>  status    </li> <li>click <code>Grant admin consent for &lt;your domain-name&gt;</code> </li> <li>You will be asked if you are sure to grant consent for the requested permissions for all accounts in your domain, click yes to continue.</li> </ol>"},{"location":"collectors/services/microsoft_365/#deploy-the-infrasonar-service","title":"Deploy the InfraSonar service","text":"<ol> <li>Open the InfraSonar environment you want to add the resource to</li> <li>Click add asset or use an existing asset</li> <li>Add the microsoft365 collector</li> <li>Open the microsoft365 collector tab and enter the required information</li> <li>Directory (tenant) Id</li> <li>Application (client) Id</li> <li>Client value</li> <li>Optional, deselect checks you don't want to use.</li> </ol>"},{"location":"collectors/services/microsoft_azure/","title":"Microsoft Azure","text":""},{"location":"collectors/services/microsoft_azure/#microsoft-azure","title":"Microsoft Azure","text":""},{"location":"collectors/services/microsoft_azure/#introduction","title":"Introduction","text":"<p>Preview</p> <p>The Azure service is a preview release. Contact InfraSonar support if you want to get involved in testing our preview release.</p>"},{"location":"collectors/services/microsoft_azure/#features","title":"Features","text":"<p>Add the moment the following Azure resources are supported:</p> <ul> <li>Virtual machine</li> <li>Private DNS zone</li> <li>DNS zone</li> <li>Regular Network Interface</li> <li>Public IP address</li> </ul>"},{"location":"collectors/services/microsoft_azure/#configuration","title":"Configuration","text":"<p>Our Azure service needs the following properties:</p> <ul> <li>Directory (tenant) Id</li> <li>Application (client) Id</li> <li>Client secret value</li> <li>Subscription Id</li> <li>Resource group Name</li> </ul> <p>In the next paragraphs we describe how to setup the Azure service and how to retrieve the required properties.</p>"},{"location":"collectors/services/microsoft_azure/#prepare-your-azure-environment","title":"Prepare your Azure environment","text":"<p>Two steps are required to prepare your Azure environment for the InfraSonar Azure service.</p> <ol> <li>Register the InfraSonar service as an Azure app</li> <li>Authorize the registered app to the resources you want to monitor</li> </ol> <p>Open the Azure portal (https://portal.azure.com/) using an account with sufficient privileges to register an Azure app and set permissions.</p>"},{"location":"collectors/services/microsoft_azure/#create-an-app-registration","title":"Create an app registration","text":"<ol> <li>From the main menu, open Azure Active Directory</li> <li>Open App registrations from the Azure Active Directory sub-menu</li> <li>Select new registration</li> <li>Enter the user-facing display name e.g., InfraSonar Azure Service</li> <li>Who can use this application or access this API: Select Accounts in this organizational directory only</li> <li>Click Register</li> <li>A new Windows opens, note the following ID's down:<ol> <li>Application (client) ID</li> <li>Directory (tenant) ID</li> </ol> </li> <li>Click Add a certificate or secret next to client credentials</li> <li>Click New client secret in the Client secrets tab<ol> <li>Enter a description: e.g.m InfraSonar azure Service</li> <li>Set an expiration date, note this value down and remember to renew before this date!</li> <li>Click Add</li> <li>Note down the <code>Value</code>, note this can not be retrieved again once you close this window!</li> </ol> </li> </ol>"},{"location":"collectors/services/microsoft_azure/#app-authorization","title":"app authorization","text":"<p>An app authorization is required per resource group you want to monitor.</p> <ol> <li>Open the resource group containing the Azure resource you want to monitor</li> <li>Note down the Subscription ID</li> <li>Open Access control (IAM)</li> <li>Select the tab Role assignments</li> <li>Click Add and then Add role assignment</li> <li>Search the Reader role from the Role tab</li> <li>Open the Members tab</li> <li>Ensure Assign access to User, group, or service principal is selected</li> <li>Click Select members</li> <li>Search the name used by the app registration e.g., InfraSonar Azure Service</li> <li>Select the app and click the select button</li> <li>Give an optional description</li> <li>Verify the role assignment and press Review + assign</li> </ol> <p>The registered app can now query the Azure portal's resources via the Azure API</p> <p>Rinse and repeat</p> <p>Repeat the above app authorization steps for each resource group containing the resource you want to monitor.</p>"},{"location":"collectors/services/microsoft_azure/#deploy-the-infrasonar-service","title":"Deploy the InfraSonar service","text":"<ol> <li>Open the InfraSonar environment you want to add the resource to</li> <li>Click add asset or use an existing asset</li> <li>Add the azure collector</li> <li>Open the azure collector tab and enter the required information</li> <li>Directory (tenant) Id</li> <li>Application (client) Id</li> <li>Client secret value</li> <li>Subscription Id</li> <li>Resource group Name, Resource group name as used in Azure</li> <li>Optional, deselect checks you don't want to use.</li> </ol>"},{"location":"collectors/services/mx/","title":"MX","text":""},{"location":"collectors/services/mx/#mx","title":"MX","text":""},{"location":"collectors/services/mx/#introduction","title":"Introduction","text":"<p>The MX-service is a service which validates your email configuration.</p>"},{"location":"collectors/services/mx/#features","title":"Features","text":"<p>We verify the following email DNS records:</p> <ul> <li>MX: A mail exchanger record specifies the mail server responsible for accepting email messages on behalf of a domain name. It is a resource record in the Domain Name System. It is possible to configure several MX records, typically pointing to an array of mail servers for load balancing and redundancy.</li> <li>SPF: Sender Policy Framework (SPF) is an email authentication method which ensures the sending mail server is authorized to originate mail from the email sender's domain. Additional information can be found here</li> <li>DMARC: Domain-based Message Authentication, Reporting and Conformance (DMARC) is an email authentication protocol. It is designed to give email domain owners the ability to protect their domain from unauthorized use, commonly known as email spoofing. Additional information can be found here</li> <li>DKIM: DomainKeys Identified Mail (DKIM) is an email authentication method designed to detect forged sender addresses in email (email spoofing), a technique often used in phishing and email spam. </li> <li>MTA_STS: SMTP MTA Strict Transport Security (RFC 8461) aims to address the problem of active adversary by defining a protocol for mail servers to declare their ability to use secure channels in specific files on the server and specific DNS TXT records. </li> <li>BIMI: Brand Indicators for Message Identification or BIMI (pronounced: Bih-mee) is an emerging email specification that enables the use of brand-controlled logos within supporting email clients. BIMI leverages the work an organization has put into deploying DMARC protection, by bringing brand logos to the customer\u2019s inbox. For the brand\u2019s logo to be displayed, the email must pass DMARC authentication checks, ensuring that the organization\u2019s domain has not been impersonated. You can find the implementation guide here.</li> </ul>"},{"location":"collectors/services/mx/#probe-configuration","title":"Probe configuration","text":"Property Description Domain The email domain the service should verify. Selector The DKIM selector used by the organization."},{"location":"collectors/services/mx/#check-specifics","title":"Check specifics","text":"<p>The DKIM check fails with a check error if you did not configure the selector. If you have not enabled DKIM yet you should disable this check to clear the check error.</p>"},{"location":"collectors/services/paloalto/","title":"Palo Alto","text":""},{"location":"collectors/services/paloalto/#palo-alto","title":"Palo Alto","text":""},{"location":"collectors/services/paloalto/#introduction","title":"Introduction","text":"<p>InfraSonar monitors Palo Alto firewalls using the rest API.</p> <p>Also available as probe</p> <p>We also offer a probe to monitor Palo Alto firewalls, this allows you to monitor firewalls using your own InfraSonar appliance.</p>"},{"location":"collectors/services/paloalto/#features","title":"Features","text":""},{"location":"collectors/services/paloalto/#configuration","title":"Configuration","text":"<p>When the GlobalProtect Portal or Gateway is enabled the probe needs to use a different TCP port number 4443 instead of 443. You can toggle this behavior when configuring the service.</p>"},{"location":"collectors/services/paloalto/#ipv4-addresses","title":"IPv4 addresses","text":"<p>Ensure you authorize the IPv4 addresses we use for our services.</p>"},{"location":"collectors/services/paloalto/#credentials","title":"Credentials","text":"<p>The Palo Alto rest API uses a key which can be generated for a user. </p> <p>Don't use an admin account</p> <p>We strongly recommend creating a read only account specific for monitoring.</p>"},{"location":"collectors/services/paloalto/#get-your-api-key","title":"Get your API key","text":"<p>source</p> <p>To generate an API key, make a GET or POST request to the firewall\u2019s hostname or IP addresses using the administrative credentials and type=keygen:</p> <pre><code>curl -k -X GET 'https://&lt;firewall&gt;/api/?type=keygen&amp;user=&lt;username&gt;&amp;password=&lt;password&gt;'\n</code></pre> <p>Ensure to change</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;username&gt;</code> with the username of your readl-only monitoring user</li> <li><code>&lt;password&gt;</code> with the password of your readl-only monitoring user</li> </ul> <p>A successful API call returns status=\"success\" along with the API key within the key element:</p> <pre><code>&lt;response status=\"success\"&gt;\n  &lt;result&gt;\n    &lt;key&gt;Your_secret_key_is_here&lt;/key&gt;\n  &lt;/result&gt;\n&lt;/response&gt;\n</code></pre> <p>You can test your API key using the following command:</p> <pre><code>curl -k 'https://&lt;firewall&gt;//api/?type=op&amp;cmd=&lt;show&gt;&lt;system&gt;&lt;info&gt;&lt;/info&gt;&lt;/system&gt;&lt;/show&gt;&amp;key=&lt;apikey&gt;'\n</code></pre> <p>Ensure to change:</p> <ul> <li><code>&lt;firewall&gt;</code> with your firewall IP or FQDN</li> <li><code>&lt;apikey</code> with the previously generated API key</li> </ul>"},{"location":"collectors/services/paloalto/#revoke-api-keys","title":"Revoke API keys","text":"<p>You can revoke all currently valid API keys, in the event one or more keys are compromised. To change an API key associated with an administrator account change the password associated with the administrator account. API keys that were generated before you expired all keys, or a key that was created using the previous credentials will no longer be valid.</p>"},{"location":"collectors/services/paloalto/#configure-api-key-lifetime","title":"Configure API Key Lifetime","text":"<p>Source</p> <p>An optional step is to configure the API Key Lifetime.</p> <p>Be aware though that monitoring fails when the API key is expired!</p>"},{"location":"collectors/services/paloalto/#service-configuration","title":"Service configuration","text":"<ol> <li>Add the paloaltosvc service on your asset</li> <li>Open the paloaltosvc configuration tab</li> <li>Enter the address and API key</li> <li>The API key is encrypted before it is send to the InfraSonar backend</li> <li>Click save</li> </ol>"},{"location":"collectors/services/paloalto/#known-issues","title":"Known issues","text":""},{"location":"collectors/services/paloalto/#xml-api-issue-with-passwords-containing-special-characters","title":"XML API Issue With Passwords Containing Special Characters","text":"<p>Passwords containing special characters can cause problems retrieving the API key.</p> <p>source</p>"},{"location":"collectors/services/ping/","title":"Ping","text":""},{"location":"collectors/services/ping/#ping","title":"Ping","text":""},{"location":"collectors/services/ping/#introduction","title":"Introduction","text":"<p>The ping-service is the service variant of our ping-probe.</p> <p>This service send ping requests from our InfraSonar cloud platform to the monitored asset.</p>"},{"location":"collectors/services/ping/#features","title":"Features","text":"<ul> <li>Ping roundtrip monitoring, min and max timing</li> <li>Number of successfully and/or dropped packages</li> </ul>"},{"location":"collectors/services/ping/#service-configuration","title":"Service configuration","text":"Property Description Address The address that the probe should ping. Interval Interval should be a value between 1 and 9, The default interval is 1. Count Count should be a value between 1 and 9, the default count is 5 Timeout Timeout in seconds should be a value between 0 and 240, the default timeout is 10 seconds."},{"location":"collectors/services/ping/#check-specifics","title":"Check specifics","text":"<p>Ping returns the <code>minimum time</code> and <code>maximum time</code> as this provides a better insight than just an average ping response.</p> <p>The number of <code>successful</code> and <code>dropped</code> ping packages are also monitored.</p>"},{"location":"collectors/services/tcp/","title":"TCP","text":""},{"location":"collectors/services/tcp/#tcp","title":"TCP","text":""},{"location":"collectors/services/tcp/#introduction","title":"Introduction","text":"<p>The TCP-service is the service variant of our tcp-probe.</p>"},{"location":"collectors/services/tcp/#features","title":"Features","text":"<ul> <li>Check certificates</li> </ul>"},{"location":"collectors/services/tcp/#service-configuration","title":"Service configuration","text":"Property Description Address The address that the probe should check. Certificate Ports List of ports to perform certificates check on."},{"location":"collectors/services/tcp/#checks","title":"Checks","text":""},{"location":"collectors/services/tcp/#certificates","title":"Certificates","text":"<p>Gathers certificates and ciphers present on the specified TCP port.</p>"},{"location":"collectors/services/unifi/","title":"UniFi","text":""},{"location":"collectors/services/unifi/#unifi","title":"UniFi","text":""},{"location":"collectors/services/unifi/#introduction","title":"Introduction","text":"<p>A UniFi environment has a hierarchical setup, a controller can contain one or more sites and a site consists of one or more devices. </p> <pre><code>graph TD\n  controller((\"`UniFi\n  controller`\"))\n  site-1((\"`UniFi\n  site`\"))\n  site-2((\"`UniFi\n  site`\"))\n  site-3((\"`UniFi\n  site`\"))\n  device-1-1((\"`UniFi\n  device`\"))\n  device-1-2((\"`UniFi\n  device`\"))\n  device-1-3((\"`UniFi\n  device`\"))\n  device-2-1((\"`UniFi\n  device`\"))\n  device-2-2((\"`UniFi\n  device`\"))\n  device-2-3((\"`UniFi\n  device`\"))\n  device-3-1((\"`UniFi\n  device`\"))\n  device-3-2((\"`UniFi\n  device`\"))\n  device-3-3((\"`UniFi\n  device`\"))\n  controller --&gt; site-1\n  controller --&gt; site-2\n  controller --&gt; site-3\n  site-1 --&gt; device-1-1\n  site-1 --&gt; device-1-2\n  site-1 --&gt; device-1-3\n  site-2 --&gt; device-2-1\n  site-2 --&gt; device-2-2\n  site-2 --&gt; device-2-3\n  site-3 --&gt; device-3-1\n  site-3 --&gt; device-3-2\n  site-3 --&gt; device-3-3</code></pre> <p>To fully support this hierarchical setup we created three corresponding collectors:</p> <ul> <li>UniFi Controller</li> <li>UniFi Site</li> <li>UniFi Device</li> </ul>"},{"location":"collectors/services/unifi/#pre-requisites","title":"Pre-requisites","text":"<p>The UniFi controller must be accessible from our cloud platform.</p> <p>We fully support controllers hosted on the HostiFi platform.</p>"},{"location":"collectors/services/unifi/#credentials","title":"Credentials","text":"<p>All three collectors use the UniFi API to collect data from the UniFi controller and this the same read-only credentials.</p> <p>The UniFi API does not support accounts using MFA, setup a read-only account with a strong password and note to change this regularly. </p> <p>Don't use an admin account</p> <p>We strongly recommend creating a read only account specific for monitoring.</p> <p>You can set the credentials for our service on the service configuration page.</p>"},{"location":"collectors/services/unifi/#deployment","title":"Deployment","text":"<p>The UniFi service can easily be deployed.</p>"},{"location":"collectors/services/unifi/#unifi-controller","title":"UniFi controller","text":"<ol> <li>Start by adding an asset for the controller.</li> <li>Next set kind to UniFi in the General section.</li> <li>Add the unificontroller collector.</li> <li>Open the unificontroller collector configuration tab.<ol> <li>Enter the address (IP or FQDN) of the UniFi controller.</li> <li>Ensure the correct port is set.</li> </ol> </li> </ol>"},{"location":"collectors/services/unifi/#unifi-site","title":"UniFi Site","text":"<ol> <li>Open the UniFi controller asset.</li> <li>Locate the Sites widget</li> <li>Click the  icon for the site you want to add.</li> <li>Choose wether you want to create a new asset of add the site to an existing asset, using a new asset is most often preferred.</li> <li>Verify the suggested settings and click Save.</li> <li>The site will now appear with a  icon indicating it has been setup.</li> <li>Add the correct labels to the newly created asset and add the lastseen collector if desired.</li> </ol> <p>You can automate this step using our InfraSonar Commandline Interfase and UniFi devices report.</p>"},{"location":"collectors/services/unifi/#unifi-devices","title":"UniFi devices","text":"<ol> <li>Open the UniFi Site you want to add UniFi devices for.</li> <li>Locate the Devices widget</li> <li>Click the  icon for the device you want to add.</li> <li>Choose wether you want to create a new asset of add the site to an existing asset, using a new asset is most often preferred.</li> <li>Verify the suggested settings and click Save.</li> <li>The device will now appear with a  icon indicating it has been setup.</li> <li>Add the correct labels to the newly created asset and add the lastseen collector if desired.</li> </ol> <p>You can automate this step using our InfraSonar Commandline Interfase and UniFi devices report.</p>"},{"location":"collectors/services/unifi/#additional-information","title":"Additional information","text":"<ul> <li> UniFi Controller probe</li> <li> UniFi Site probe</li> <li> UniFi Device probe</li> </ul>"},{"location":"collectors/services/mailroundtrip/","title":"MailRoundTrip service","text":""},{"location":"collectors/services/mailroundtrip/#description","title":"Description","text":"<p>The InfraSonar MailRoundTrip service is a synthetic monitor verifying the complete email flow. The steps below outline the email roundtrip for <code>mailroundtrip@example.org</code>:</p> <ol> <li>The first step is to lookup all MX records for <code>example.org</code>.</li> <li>Our MailRoundTrip service sends an email to all MX records.</li> <li>The receiving email server is configured to automatically forward all mail sent to the probe address. In our case <code>mailroundtrip@example.org</code> is forwarded to <code>mail@mrt.infrasonar.com</code>.</li> </ol> <p>This approach ensures all components such, as DNS, internet connection, email filtering, and email server components involved in receiving and sending email, are part of the measurement.</p> <p>Note</p> <p>Sending an email to all MX records ensures the email fallback scenarios work when you need to rely on them.</p>"},{"location":"collectors/services/mailroundtrip/#deployment","title":"Deployment","text":""},{"location":"collectors/services/mailroundtrip/#service-configuration","title":"Service configuration","text":"<p>The only required configuration property for the MailRoundTrip service is the mail domain. So in our case this would be: <code>mailroundtrip@example.org</code></p>"},{"location":"collectors/services/mailroundtrip/#mail-service","title":"Mail service","text":"<p>The email service you want to monitor <code>example.org</code> needs to forward messages send to <code>mailroundtrip@example.org</code> to <code>mail@mrt.infrasonar.com</code></p> <p>Note</p> <p>Ensure you forward these emails without storing them in your email database or use a routine to automatically cleanup the messages to avoid digital waste.</p>"},{"location":"collectors/services/mailroundtrip/#microsoft-exchange-configuration","title":"Microsoft Exchange Configuration","text":"<p>The email roundtrip flow works as follows on a Microsoft Exchange infrastructure:</p> <ol> <li>The central monitoring server sends an email to a pre-configured user.</li> <li>The Exchange user auto-forwards the message to the email contact, which is the email address used by the central monitoring server.</li> <li>The central server receives and parses the message.</li> </ol>"},{"location":"collectors/services/mailroundtrip/#detailed-configuration-guides","title":"Detailed configuration guides","text":"<ul> <li>Google Workspace</li> <li>Microsoft 365</li> <li>Microsoft Exchange 2003</li> <li>Microsoft Exchange 2010</li> </ul>"},{"location":"collectors/services/mailroundtrip/exchange2003/","title":"Microsoft Exchange 2003","text":"<p>Start the \"Active Directory Users and Computers\" tool on a server, which also contains the Exchange 2003 management tools. Usually the exchange or SBS server.</p>"},{"location":"collectors/services/mailroundtrip/exchange2003/#create-a-receiving-mailbox-user","title":"Create a receiving mailbox user","text":"<ol> <li>Create a new user in the for your organization correct OU:<ol> <li>Provide the Full name. We recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name. We recommend: mailroundtrip.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Password options:<ol> <li>Enter a secure password. This password is not used and can be changed anytime.</li> <li>Select \"User cannot change password\" and \"Password never expires\".</li> <li>Click on Next to continue.</li> </ol> </li> <li>Create the actual mailbox:<ol> <li>Usually you can leave this default. Adjust the Server and mailbox store if required.</li> </ol> </li> <li>Finish the creation of the user:<ol> <li>Verify the configuration.</li> <li>Click on Finish to finalize the user creation process.</li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2003/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Add a mail contact. This contact is required to forward the mail back to the monitoring host.</p> <ol> <li>Right click in the organization unit where you want to create the mail contact.</li> <li>Select Cew -&gt; Contact.</li> <li>Enter the contact details:</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Click on Next to continue.</li> <li>Add the SMTP address:<ol> <li>Click on Modify:<ol> <li>Select SMTP Address.</li> <li>Click on OK.</li> </ol> </li> <li>Enter the return email address:<ol> <li>Enter the return mail address in the E-mail address field: mail@mrt.infrasonar.com.</li> <li>Click on OK.</li> </ol> </li> <li>Finish:<ol> <li>Verify the settings.</li> <li>Click on Next to continue.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2003/#hide-the-return-mail-contact","title":"Hide the return mail contact","text":"<p>We suggest hiding the contact from the address-book, so details will not be shown to end-users.</p> <ol> <li>Right-click on the Mail Round Trip Monitoring Return Address contact you just created and select Properties.</li> <li>Open the Exchange advanced tab.</li> <li>Select Hide from Exchange address lists.</li> <li>Click on OK.</li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2003/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<ol> <li>Double click on the previously created Mail Round Trip Monitoring Receive mailbox user.</li> <li>Open the Exchange Features tab:<ol> <li>Disable all features.</li> </ol> </li> <li>Open the Exchange Advanced tab:<ol> <li>Enable Hide from Exchange address lists.</li> </ol> </li> <li>Open the \"Exchange General\" tab:<ol> <li>Click on Delivery options.</li> <li>Click on Modify.</li> <li>Enter the Mail Round Trip Monitoring Return Address.</li> </ol> </li> <li>Click on Ok three times.</li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2010/","title":"Microsoft Exchange 2010","text":"<p>Start the Microsoft \"Exchange Management Console\" on a server which also contains the Exchange 2010 management tools. This console can usually be found on the Microsoft Exchange or SBS server.</p>"},{"location":"collectors/services/mailroundtrip/exchange2010/#create-a-new-mailbox","title":"Create a new mailbox","text":"<ol> <li>Right click on Mailbox under Recipient Configuration:<ol> <li>Select New Mailbox.</li> <li>Select User Mailbox.</li> <li>Click on Next.</li> <li>Select New User.</li> <li>Click on Next.</li> <li>Provide User Information:<ol> <li>Provide the Full name, we recommend using: Mail Round Trip Monitoring Receive mailbox.</li> <li>Provide the User logon name, we recommend: mailroundtrip.</li> <li>Provide a password. (Note: this password is not used anywhere so any random password will suffice)</li> <li>Optionally select the OU were you want this account to be created.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Specify mailbox settings:<ol> <li>Optionally select the mailbox database, were you want the mailbox to reside.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Set archive settings:<ol> <li>Select Don't create an archive. This mailbox does not contain any email.</li> <li>Click on Next to continue.</li> </ol> </li> <li>Review settings:<ol> <li>Click on New to create the new mailbox.</li> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2010/#create-a-return-mail-contact","title":"Create a return mail contact","text":"<p>Create a mail contact containing the mail round trip return address.</p> <ol> <li>Open Recipient configuration.</li> <li>Right click on Mail contact.</li> <li>Select New Mail Contact.</li> <li>Create a new mail contact:<ol> <li>Select New Contact.</li> <li>Click on Next.</li> <li>Provide a Full name, we suggest: Mail Round Trip Monitoring Return Address.</li> <li>Enter an alias, we suggest: mailroundtripreturn.</li> <li>Click on the Edit... button:<ol> <li>Enter the following return email address in the E-mail address field: mail@mrt.infrasonar.com.</li> </ol> </li> <li>Click on Next:<ol> <li>Review settings.</li> </ol> </li> <li>Click on New to create the mail contact:</li> <li>Verify that the mail contact was created successfully:<ol> <li>Click on Finish.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2010/#modify-the-return-contact","title":"Modify the return contact","text":"<ol> <li>Right click on on the previously created mail contact.</li> <li>Select Properties from the dropdown menu.</li> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Click on OK to close the dialog.</li> </ol>"},{"location":"collectors/services/mailroundtrip/exchange2010/#modify-the-receive-mailbox-user","title":"Modify the receive mailbox user","text":"<p>Forward all mail to the \"Mail Round Trip Monitoring Mailbox\" from the previously created \"Mail Round Trip Monitoring Return Address\" contact.</p> <ol> <li>Right click on the previously created receive mailbox user.</li> <li>Select Properties from the drop down menu:<ol> <li>Open the General tab:<ol> <li>Enable Hide from exchange address lists.</li> </ol> </li> <li>Open the Mail Flow Settings tab.</li> <li>Double click on Delivery Options:<ol> <li>Select the Forward to selection box.</li> <li>Click on Browse:<ol> <li>Select the \"Mail Round Trip Monitoring Return Address\" contact.</li> <li>Click on OK.</li> </ol> </li> <li>Click on OK to close the previous screen.</li> </ol> </li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/google_workspace/","title":"Google workspace","text":"<ol> <li>Open the Google Admin Console.</li> <li>Navigate to: Apps &gt; Google Workspace &gt; Gmail.</li> <li>Select Default routing:</li> <li>Click on ADD ANOTHER RULE:</li> <li>In the section Specify envelope recipients to match, select Single recipient and enter the email address: <code>mailroundtrip@example.org</code>  (change into an email address valid for your organisation).</li> <li>In the section If the envelope recipient matches the above, select Change envelope recipient, set Replace recipient* and enter: <code>mail@mrt.infrasonar.com</code>.</li> <li>Under Spam, select Bypass spam filter for this message.</li> <li>Click Save.</li> </ol>"},{"location":"collectors/services/mailroundtrip/microsoft365/","title":"Microsoft 365 mail roundtrip","text":""},{"location":"collectors/services/mailroundtrip/microsoft365/#setup-guide","title":"Setup guide","text":"<p>Using contacts is the easiest way to setup the mail roundtrip in Microsoft 365.</p> <p>For this you create two contacts in Microsoft 365. One contact is allowed to receive the mail send by the InfraSonar roundtrip service and the other contact is used to forward the mail back to InfraSonar to close the roundtrip. </p> <p>It is also possible to use a mailbox instated of a contact for receiving email and setup a forwarding rule on the mailbox. This requires you however to turn off allow external forwarding which is not a Microsoft best practice.</p>"},{"location":"collectors/services/mailroundtrip/microsoft365/#create-two-contacts","title":"Create two contacts","text":"<ol> <li>Open the Microsoft 365 admin center</li> <li>Open the users menu and then select contacts</li> <li>Click add contact to create a mail roundtrip contact for receiving emails<ol> <li>Set Display name to: <code>mailrountrip-receive</code> (Feel free to pick a different name)</li> <li>Set Email to: <code>mailrountrip-receive@example.org</code></li> <li>Enable: Hide from my organization's global address list</li> </ol> </li> <li>Click add contact again to create the mail roundtrip contact forward to account<ol> <li>Set Display name to: <code>mailrountrip-infrasonar</code></li> <li>Set Email to: <code>mail@mrt.infrasonar.com</code></li> <li>Enable: <code>Hide from my organization's global address list</code></li> </ol> </li> </ol>"},{"location":"collectors/services/mailroundtrip/microsoft365/#setup-rules","title":"Setup rules","text":"<ol> <li>Open the Exchange admin center</li> <li>Open the Mail flow menu and then select rules</li> <li>Click the Add rule button and select Create a new rule</li> <li>Name: <code>InfraSonar mail roundtrip</code></li> <li>Apply this rule if: Select The recipient and then is this person</li> <li>Select the mailrountrip-receive contact you created before</li> <li>Do the following: Redirect the message to these recipients</li> <li>Select the mailrountrip-infrasonar contact you created before</li> <li>Click Next</li> <li>Leave the rule settings</li> <li>Review and Finish</li> <li>Ensure the rule is enabled!</li> </ol>"},{"location":"collectors/services/mailroundtrip/microsoft365/#known-issues","title":"Known issues","text":"<p>When your mail roundtrip is failing, logs are flooding or your admin mailbox get's spammed with error messages check the following.</p> <p>Roundtrip mails are potential marked as spam</p> <p>As our mail roundtrip is send at a regular interval changes are that our outgoing roundtrip message is flagged as spam.</p> <p>Return mails are caught by outbound spam protection.</p> <p>Microsoft 365 Outbound spam protection potentially identify the outbound messages as suspicious. As Microsoft 365 protection depends on your subscription we urge you to look at the official documentation on how to configure outbound spam protection according to your needs.</p>"},{"location":"concept/alerts-notifications/","title":"Alerts & notifications","text":""},{"location":"concept/alerts-notifications/#alerts-notifications","title":"Alerts &amp; Notifications","text":"<p>Understanding InfraSonar's Issue Differentiation</p> <p>InfraSonar uniquely distinguishes between issues detected within your data and those arising from data retrieval problems. This distinction is crucial for effective monitoring and can sometimes be a source of confusion.</p>"},{"location":"concept/alerts-notifications/#alerts","title":"Alerts","text":"<p>Data-Driven Issue Detection.</p> <ul> <li>Trigger: Alerts are generated when predefined conditions, defined using the <code>return</code> statement, are met within the collected monitoring data.</li> <li>Timing: These conditions are evaluated in real-time as data arrives, ensuring immediate detection of anomalies.</li> <li>Scope: Alerts directly reflect issues within the monitored data itself.</li> <li>Management: Alerts integrate seamlessly with your operational incident management process, allowing for:<ul> <li>Adding detailed messages.</li> <li>Assigning responsibility to specific users.</li> <li>Resolving and closing alerts.</li> </ul> </li> </ul>"},{"location":"concept/alerts-notifications/#notifications","title":"Notifications","text":"<p>Monitoring Service Integrity</p> <ul> <li>Trigger: Notifications are raised by the InfraSonar platform when expected data is missing or when errors occur during data retrieval or parsing.</li> <li>Significance: Notifications indicate a potential disruption or failure in the monitoring service itself.</li> <li>Resolution: Prompt resolution is essential to maintain monitoring integrity. This typically involves:<ul> <li>Restoring data access.</li> <li>Disabling problematic checks.</li> </ul> </li> <li>Focus: Notifications focus on the health of the monitoring platform itself.</li> </ul>"},{"location":"concept/alerts-notifications/#rules","title":"Rules","text":"<p>Rules can be used for both alerts and notifications to send external notifications or start automation actions using webhooks.</p> <p>Considerations while configuring rules</p> <p>When setting up rules take notifications into consideration as they can be a powerful indictor something is wrong within an infrastructure. Take for example an internet outage, this results in an Agentcore disconnected notification as we no longer receive data.</p>"},{"location":"concept/assets/","title":"Assets","text":""},{"location":"concept/assets/#assets","title":"Assets","text":""},{"location":"concept/assets/#the-foundation-of-your-monitoring","title":"The Foundation of Your Monitoring","text":"<p>In InfraSonar, \"assets\" represent the objects you monitor. This encompasses a wide range of devices, from traditional IT components like routers, switches, and servers to diverse assets such as elevators, IoT devices, and more.</p> <p>Essentially, if we can retrieve data from it and transmit it to our cloud platform, we can monitor it.</p>"},{"location":"concept/assets/#features","title":"Features","text":"<ul> <li>Collectors: Collectors are deployed directly onto assets to gather monitoring data.</li> <li>Labels: Labels serve dual purposes: they facilitate easy identification and enable the application of conditions. By grouping conditions with labels, you can efficiently apply them to multiple assets.</li> <li>Asset Kinds: Assigning a predefined asset kind not only enhances filtering capabilities but also visually distinguishes assets with relevant icons.</li> </ul>"},{"location":"concept/assets/#guest-to-asset","title":"Guest to asset","text":"<p>Some collectors allow assets to be easily added from a \"guest list\" retrieved by the collector.</p> <p>Collectors that support this feature include:</p> <ul> <li>Discovery agent</li> <li>Microsoft hyperV</li> <li>Unifi collector</li> <li>VMware ESXi</li> <li>VMware vCenter</li> </ul>"},{"location":"concept/collectors/","title":"Collectors","text":""},{"location":"concept/collectors/#collectors","title":"Collectors","text":"<p>InfraSonar collectors collect monitoring data to be parsed by the InfraSonar cloud platform.</p>"},{"location":"concept/collectors/#collector-types","title":"Collector types","text":"<p>InfraSonar supports three types of collectors used to retrieve monitoring data.</p> <pre><code>graph LR\n  A(((Agents))) ~~~ B(((Probes)));\n  B ~~~ C(((Services)));</code></pre>"},{"location":"concept/collectors/#agents","title":"Agents","text":"<p>Agents are deployed on an asset an run autonomously.</p> <p>Monitoring data is typically send directly to the InfraSonar platform using an HTTPS connection to our api endpoint (<code>api.infrasonar.com</code>) </p> <p>Proxy</p> <p>It is possible to use the InfraSonar appliance as a proxy for agents which don't have a direct internet connection, contact support for more information regarding this setup.</p> <p>Collected data is associated to the correct asset by providing an Asset ID and an authentication token to access the InfraSonar container.</p> <p>See our agent documentation for additional agent related documentation and an overview currently supported agents.</p>"},{"location":"concept/collectors/#probes","title":"Probes","text":"<p>Probes collect data remotely from an asset using open standards or other vendor provided methods.</p> <p>Probes are orchestrated by an InraSonar proces called AgentCore, this Agentcore orchestrates our probes, is responsible for scheduling checks and ensures an encrypted connection to our backend.</p> <p>During the startup sequence of a probe, it will \u201c announce\u201d itself to the Agentcore.</p>"},{"location":"concept/collectors/#connectivity","title":"Connectivity","text":"<p>During the startup sequence of a probe, a connection is established on TCP port 8750 between the probe and to the InfraSonar Agentcore to \u201c announce\u201d its presence. As probes usually run in the same Docker network as the Agentcore, they can easily connect to it.</p> <p>The InfraSonar Agentcore connects to our platform using TCP poort 8730 using an TLS/SSL encrypted connection.</p> <pre><code>graph LR\n  probe[Probe] --&gt; | TCP 8750 | Agentcore[Agentcore] --&gt; | TCP 8730 TLS/SSL | infrasonarcloud[InfraSonar Cloud Platform];</code></pre> <p>it is possible to use TCP port 443 instead of 8730 we don't recommended this but some environment refuse inter traffic to ports other then 80 and 443</p>"},{"location":"concept/collectors/#infrasonar-appliance","title":"InfraSonar appliance","text":"<p>When we refer to our InfraSonar appliance we refer to an Agentcore and a collection of probes. In a typical deployment the appliance is a Linux host running Docker as our preferred deployment method for probes are Docker containers.</p>"},{"location":"concept/collectors/#configuration","title":"Configuration","text":"<p>Probes can easily be deployed and maintained using our remote appliance manager which also allows you to install a selection of agents on the appliance such as our docker agent to monitor the appliance, our speedtest agent to monitor the internet speed and our discovery agent to periodically run a Nmap scan. </p>"},{"location":"concept/collectors/#services","title":"Services","text":"<p>Services are like probes as they retrieve data agentless but are deployed on an isolated section on our InfraSonar cloud platform. Examples of InfraSonar services include our Microsoft Azure, Microsoft 365 and mail roundtrip.</p> <p>See our services documentation for additional services related documentation and an overview currently supported services.</p>"},{"location":"concept/collectors/#mix-and-match","title":"Mix and match","text":"<p>Collectors can be combined on assets.</p> <p>You can for example use our Microsoft Azure service to provide information from a cloud provider perspective while using our Microsoft Windows agent to monitoring the Microsoft Windows internals and our DNS probe to monitor internal DNS records.</p> <p>When you are monitoring an on-premise infrastructure we suggest deploying our InfraSonar appliance first and start with an agent-less implementation.</p>"},{"location":"concept/collectors/#check-interval","title":"Check interval","text":"<p>InfraSonar has a minimum check-interval of 1 minute per check. We strive to spread our checks to ensure a minimum footprint</p>"},{"location":"concept/collectors/#exact-check-interval","title":"Exact check interval","text":"<p>InfraSonar also uses an exact schedule interval as this ensures more accurate predictions, consistent comparisons, and streamlined data analysis. This approach ensures that measurements are made at predetermined times, regardless of external factors or human error.</p>"},{"location":"concept/collectors/#data-analysis","title":"Data analysis","text":"<p>Probes, services and agents send their collected data to the InfraSonar platform, a fully managed cloud solutions where the last known state is stored, data is evaluated using conditions and performance metrics are stored for future analysis.</p>"},{"location":"concept/collectors/#available-collectors","title":"Available collectors","text":"<p>See our collector documentation for a list of available collectors or contact support if you feel a collector is missing as some of our collectors are running in extensive private beta's.</p> <p>All InfraSonar provided probes are available as  open source on our  GitHub repository as we believe in transparency with regards to data collection and systems access.</p>"},{"location":"concept/conditions/","title":"Conditions","text":""},{"location":"concept/conditions/#conditions","title":"Conditions","text":"<p>InfraSonar processes check results in real-time, immediately evaluating them against predefined conditions. This ensures rapid detection of anomalies and potential issues.</p>"},{"location":"concept/conditions/#key-features","title":"Key Features","text":"<ul> <li>Label-Based Assignment: Conditions are associated with one or more labels, allowing for flexible and targeted application.</li> <li>Asset Association: By assigning labels to assets, you automatically apply the corresponding conditions. This simplifies configuration and ensures consistent monitoring.</li> <li>Best Practice Library: InfraSonar includes a comprehensive library of pre-built conditions, developed from years of industry experience and best practices. This provides a solid foundation for your monitoring setup.</li> <li>Simplified Scripting: Custom conditions can be created or modified using a user-friendly scripting language based on <code>case</code> statements. This empowers you to tailor monitoring to your specific needs without requiring extensive programming knowledge.</li> <li>Last know state, new data can easily be validated against the previous state to detect for example unwanted changes.</li> <li>Forecasting, forecasting is automatically enabled when used in an condition, ensuring forecasting is enabled when you expect it to be. </li> </ul>"},{"location":"concept/containers/","title":"Containers","text":""},{"location":"concept/containers/#containers","title":"Containers","text":"<p>Containers represent a logical grouping of monitored infrastructure assets in the InfraSonar platform</p>"},{"location":"concept/containers/#usage","title":"Usage","text":"<p>Here's how InfraSonar uses containers:</p> <ul> <li>Grouping and managing assets: Containers act as organizational units for assets, collectors, alerts, notifications, rules and views.</li> <li>Querying and filtering: InfraSonar allows users to query containers and their associated data, such as IDs, alerts, assets, and collectors</li> <li>Configuration: <ul> <li>Containers have configurable properties like mode, properties, zones, external notification rules etc.</li> <li>Authorizations, labels and conditions propagate form their parents to their children.</li> <li>Authorization is inherited to \"lower\" containers. Inheritance can be \"broken\" down the chain.</li> </ul> </li> </ul> <p>The picture below outlines our container conceptually:</p> <pre><code>graph LR\n  A[InfraSonar] --&gt; B[container 1];\n  B --&gt;C((assets));\n  A --&gt;D[container 2];\n  D --&gt;E[container 2.1];\n  D --&gt;F[container 2.2];\n  E --&gt;G((assets));\n  F --&gt;H((assets));\n  A --&gt;I[container 3];\n  I --&gt;J((assets));\n  I --&gt;K[container 3.1];\n  K --&gt;L[container 3.1.1];\n  L --&gt;N[container 3.1.1.1];\n  L --&gt;O((assets));\n  N --&gt;S((assets));</code></pre> <p>Don't overthink this, InfraSonar makes it easy to move containers and assets. Labels and conditions can also be moved but only to an \"upstream\" parent. </p> <p>Note</p> <p>When you are new to InfraSonar and sign in for the first time, you will see the message:</p> <p>Welcome to InfraSonar! It appears that you are not yet a member of an InfraSonar container. If you are a member of an organization that uses InfraSonar, ask for permission from an authorized person to add you to the relevant container. Otherwise, request a free demo via the website!</p>"},{"location":"concept/containers/#service-provider-specific","title":"Service provider specific","text":"<p>Containers are a useful feature for managed service providers as it allows them to create a container per customer.</p> <p>If you feel our container concept might fit your needs we suggest to use your top level container as an organization placeholder and not to add assets here.</p> <p>An example hierarchy implementation for a service provider using an elaborate container hierarchy</p> <pre><code>graph LR\n  A[InfraSonar] --&gt; B[service provider];\n  B --&gt; C[internal infrastructure]\n  B --&gt; D[monitoring only]\n  B --&gt; E[managed service]\n  C --&gt; F((assets))\n  D --&gt; customer1[customer 1]\n  D --&gt; customer2[customer 2]\n  customer1 --&gt; I((assets))\n  customer2 --&gt; J((assets))\n  E --&gt; customer3[customer 3]\n  customer3 --&gt; K((assets))\n  E --&gt; customer4[customer 4]\n  customer4 --&gt; L((assets))\n  E --&gt; customer5[customer 5]\n  customer5 --&gt; M[development]\n  customer5 --&gt; N[acceptance]\n  customer5 --&gt; O[production]\n  M --&gt; Q((assets))\n  N --&gt; R((assets))\n  O --&gt; S((assets))</code></pre>"},{"location":"concept/containers/#limitations","title":"Limitations","text":"<p>A container can contain a maximum of 2.000 assets.</p> <p>If you have the need to add more assets please reach out to support so we can discuss potential solutions.</p>"},{"location":"concept/credentials/","title":"Credentials","text":"<p>Gathering monitoring data often requires credentials to authenticate against a remote system.</p> <p>At InfraSonar we have strict Security Design Principles </p> <p>We also have additional rules concerning management of credentials:</p> <ol> <li>Least Privilege: We opt to use accounts with minimal access privileges to access monitoring data whenever possible and opt to use read-only accounts were possible;</li> <li>Credentials are stored securely and never accessible outside the boundary of a container;</li> <li>Credentials are used over an encrypted connection where possible (some vendors / protocols don't support this however)</li> </ol>"},{"location":"concept/credentials/#remote-appliance-manager","title":"Remote appliance manager","text":"<p>The easiest way to manage credentials required for our probes is to use our remote appliance manager.</p> <p>The remote appliance manager encrypts your password in the browser and sends it directly over a secure connection to your appliance.</p>"},{"location":"concept/credentials/#services","title":"Services","text":"<p>Some of our serivce based collectors require an API token or credentials. These can be directly configured on the asset were this service is deployed on. </p> <p>Service credentials are stored securely in our cloud platform on a system on which only specific outbound connections are allowed.  </p>"},{"location":"concept/credentials/#ip-whitelisting","title":"IP Whitelisting","text":"<p>Some assets such as the SNMP collector require the IP address from which the asset is queried to be whitelisted.</p>"},{"location":"concept/views/","title":"Views","text":""},{"location":"concept/views/#see-your-infrastructure-clearly-all-in-one-place","title":"See your infrastructure clearly, all in one place","text":"<p>Imagine having a single pane of glass where you can see the most important information about your infrastructure, no matter where it comes from. That's the power of Views. They allow you to bring together data from different assets and collectors into a unified and understandable format.</p> <p>Here's how Views can help you:</p> <ul> <li>Tailored Team Dashboards: Equip specialized teams with custom dashboards relevant to their specific needs.</li> <li>Enhanced Customer Communication: Provide customers with controlled access to key asset data, like SLA performance, fostering transparency.</li> <li>Streamlined Troubleshooting: By combining diverse detailed sources into a consistent view, engineers can effortlessly spot connections and underlying causes.</li> <li>Simplified Resource Management: Get a comprehensive overview of resources, for instance, easily identifying all active Windows service accounts.</li> </ul> <p>Views transform the vast amount of detailed monitoring data collected by InfraSonar into focused, actionable insights.</p>"},{"location":"concept/views/#secure-access","title":"Secure Access","text":"<p>Control access precisely by setting up view-only permissions, ensuring accounts used for dashboards are restricted to the data displayed within the view.</p>"},{"location":"guides/agent-less/","title":"Agentless implementation","text":"<p>Our agentless implementation leans on our probes and services collector concepts.</p> <p>In this guide we show you how to deploy your own basic agentless implementation.</p> <p>Deployment steps</p> <ol> <li>Prepare the container you want to use for your agentless deployment</li> <li>Deploy the InfraSonar appliance</li> <li>Configure the probes</li> <li>Add assets</li> <li>Review our conditions</li> </ol>"},{"location":"guides/agent-less/#prepare-your-container","title":"Prepare your container","text":"<p>Setup tokens for the agentcore and agents.</p>"},{"location":"guides/agent-less/#deploy-the-infrasonar-appliance","title":"Deploy the InfraSonar appliance","text":"<p>We suggest using our Ubuntu appliance installation to setup your appliance.</p> <p>If you don't feel comfortable deploying a Linux VM or prefer to setup a dedicated monitoring hardware appliance please contact support.</p> <p>If the appliance deployment went okay you should see an agentcore in your container.</p>"},{"location":"guides/agent-less/#deploy-collectors","title":"Deploy collectors","text":"<p>First step is to deploy collectors, this can easily be done using our Remote Appliance Manager.</p> <ol> <li>Navigate to the collectors page in your container.</li> <li>Enable tne <code>wmi</code>, <code>eventlog</code>,<code>snmp</code> and <code>lastseen</code> collectors by toggling them on.</li> <li>Go to the agentcore menu and click the  gear icon.</li> <li>Select the Probes tab and click Sync with container.</li> <li>Select the  pencil next to the wmi probe and enter domain admin credentials, see our WMI probe for more information.</li> <li>Select the  pencil next to the eventlog probe and toggle Use reference configuration on, ensure wmi is selected as reference configuration.</li> <li>Click apply changes and wait  for the probes to get deployed to the appliance.</li> </ol>"},{"location":"guides/agent-less/#add-assets","title":"Add assets","text":"<p>We outline how to setup monitoring for a Microsoft Windows asset and a common networking switch.</p>"},{"location":"guides/agent-less/#microsoft-windows","title":"Microsoft Windows","text":"<p>Add your Windows assets,</p> <ol> <li>Navigate to the Assets page in your container.</li> <li>Click the Add asset button.</li> <li>Enter a name for your asset, we suggest using the actual name and even better de FQDN of your asset.</li> <li>Enter an optional description.</li> <li>Leave Mode set to Normal, see our Modes documentation for more information.</li> <li>Leave Zone to default :: 0, see our Zones documentation section for more information.</li> <li>Add the following Collectors: <code>wmi</code> and <code>eventlog</code></li> <li>Add the <code>Windows</code> label in the Labels menu</li> <li>Open the eventlog tab and provide the server address. (if the previously entered name can be resolved by the appliance you can leave the address empty.)</li> <li>Open the wmi tab and provide the server address.</li> </ol> <p>Note several notifications appearing as we did't not receive any data yet, these notifications should disappear within the monitoring interval once data is retrieved.</p>"},{"location":"guides/agent-less/#generic-networking-switch","title":"Generic networking switch","text":"<p>Adding a generic network switch is easy, it requires however a managed switch that support SNMP.</p> <ol> <li>Configure your switch to accept SNMP queries from your appliance IP address and configure a SNMP community string, see also our SNMP Prerequisites documentation.</li> <li>Click the Add asset button.</li> <li>Enter a name for your asset, we suggest using the actual name and even better de FQDN of your asset.</li> <li>Enter an optional description.</li> <li>Leave Mode set to Normal, see our Modes documentation for more information.</li> <li>Leave Zone to default :: 0, see our Zones documentation section for more information.</li> <li>Add the following Collector: <code>snmp</code>Note for a number of network switch vendors we have optional collectors, see our snmp collector section.</li> <li>Add the <code>Network Switch</code> label in the Labels menu</li> <li>Open the snmo tab and provide the switch IP address. (if the previously entered name can be resolved by the appliance you can leave the address empty.)</li> </ol>"},{"location":"guides/agent-less/#last-seen","title":"Last seen","text":"<p>When you observe your asset list you will note a  grey dot in the active column.</p> <p>This indicates we don't monitor when data for this asset arrived. We can easily fix this by adding our <code>lastseen</code> collector.</p> <ol> <li>Open the asset and click the  pencil icon.</li> <li>Add the <code>lastseen</code> collector and click save</li> <li>Observe the  grey dot turning into a  green dot, hopefully ... if the dot turn into a  dot this implies we have not seen data for this asset for some time, see also our lastseen collector documentation for additional information.</li> </ol>"},{"location":"guides/agent-less/#conditions","title":"Conditions","text":"<p>Let's find out which conditions are used to monitor your assets.</p> <ol> <li>Open the asset and click the  pencil icon.</li> <li>Open the Effective tab and note which conditions are now active.</li> </ol>"},{"location":"guides/agent-less/#conclusion","title":"Conclusion","text":"<p>We hope this gave you some insight howto get started with InfraSonar. If you encounter any problems please contact us, we are always eager to learn how we can improve or advise you on next steps.</p>"},{"location":"guides/cli/","title":"command line interface","text":"<p>The InfraSonar client is a command-line application which can be used to manage assets for a container. </p> <p>The tool has two main features. One is to read all assets from a container to YAML or JSON output. Zones, labels and collectors are included. The other feature of this tool is to apply a YAML or JSON file to InfraSonar. These two features combined allow you to easily add new assets as well as managing existing assets for a container.</p> <p> InfraSonar cli</p>"},{"location":"guides/dns/","title":"DNS monitoring","text":""},{"location":"guides/dns/#dns-monitoring","title":"DNS Monitoring","text":""},{"location":"guides/dns/#ensuring-infrastructure-resilience","title":"Ensuring Infrastructure Resilience","text":"<p>Domain Name System (DNS) is a critical infrastructure component, facilitating not only hostname resolution but also underpinning essential services like Active Directory and email. Consequently, robust DNS monitoring is paramount for maintaining service availability and security.</p> <p>From an IT infrastructure perspective, effective DNS monitoring necessitates addressing both internal and external configurations. While external DNS is often managed by hosting providers or domain registrars, its configuration remains crucial to monitor for unauthorized modifications that could severely impact operations.</p> <p>This document outlines a comprehensive monitoring strategy for both external and internal DNS environments.</p>"},{"location":"guides/dns/#external-dns-configuration-monitoring","title":"External DNS Configuration Monitoring","text":"<p>External DNS encompasses publicly accessible domains, typically including the company's primary domain (e.g., cesbit.com) and potentially product-specific domains (e.g., infrasonar.com).</p> <p>To ensure accurate external DNS monitoring, we recommend leveraging both our internal DNS probe and external DNS service. The DNS probe observes records from within your network, often utilizing internal DNS servers, while the external DNS service provides an internet-facing perspective.</p> <p>At a minimum, monitor the bare domain (e.g., cesbit.com) as it contains critical records like mail routing (MX) and authoritative nameservers (NS).</p> <p>Tip</p> <p>During initial deployment of our DNS collectors, meticulously validate your records. While we cannot determine initial validity, we will alert you to any subsequent changes, preventing unauthorized modifications.</p>"},{"location":"guides/dns/#internal-dns-infrastructure-monitoring","title":"Internal DNS Infrastructure Monitoring","text":"<p>Internal DNS monitoring can be effectively achieved using our DNS probe, similar to the external monitoring approach.</p> <p>However, internal DNS monitoring extends beyond record validation. It is equally important to monitor the underlying operating system for availability and responsiveness. DNS server downtime can disrupt all dependent services.</p> <p>While our DNS collector monitors DNS response times and availibity of your DNS service we recommend also setting up operation system monitoring for your internal DNS servers to keep an eye on Server Availability to ensure consistent uptime of DNS servers and Resource Utilization (CPU, memory, and disk usage) to detect resource constraints.</p> <p>By implementing a comprehensive DNS monitoring strategy, you can proactively mitigate downtime, optimize performance, and strengthen the security posture of your infrastructure.</p>"},{"location":"guides/dns/#best-practices","title":"Best practices","text":""},{"location":"guides/dns/#internal-vs-external-response","title":"Internal vs External response","text":"<p>Setup an asset to monitor your internal and external DNS response.</p> <p>This can easily be done by monitoring for example <code>google.com</code> on your internal DNS servers and Google DNS servers, for IPv4: <code>8.8.8.8</code> and/or <code>8.8.4.4</code>  and for IPv6: <code>2001:4860:4860::8888</code> and/or <code>2001:4860:4860::8844</code>.</p> <p>The average DNS lookup time should be between 20 and 120 milliseconds. Anything between that and under is generally considered very good.</p>"},{"location":"guides/dns/#microsoft-active-directory","title":"Microsoft Active Directory","text":"<p>source</p> <p>Setup a DNS probe to monitor for Microsoft Active Directory specific DNS entries for each DNS server in your forest / domain.</p> <p>Legend</p> <ul> <li>Domain_Name is the name of your domain.</li> <li>SiteName, name of your Active Directory Site</li> <li>DnsForestName, name of your DNS Forest.</li> </ul> <p>The following SRV records are registered by Net Logon:</p> <ul> <li><code>_ldap._tcp.&lt;Domain_Name&gt;.</code>Allows a client to locate servers running the LDAP service in the domain of Domain_Name.</li> <li><code>_ldap._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code>Allows a client to locate servers running the LDAP service in a domain in a site SiteName Domain_Name. SiteName relative file name, which is stored in the Configuration container in Active Directory.</li> <li><code>_ldap._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain controller in the domain Domain_Name. All DC register this SRV record.</li> <li><code>_ldap._tcp. &lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain controller in the domain in site SiteName Domain_Name.All DC register this SRV record.</li> <li><code>_ldap._tcp.pdc._msdcs.&lt;Domain_Name&gt;.</code>Allows a client to find a domain PDC Domain_Name.Only PDC server registers this SRV record.</li> <li><code>_ldap._tcp.gc._msdcs.&lt;DnsForestName&gt;.</code>Allows a client to find a DC in the forest DnsForestName.Only GC servers register this SRV record.</li> <li><code>_ldap._tcp. &lt;SiteName&gt;._sites.gc._msdcs.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in the forest.Only GC server DnsForestName owned by this forest register this SRV record</li> <li><code>_gc._tcp.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in the domain. Only GC servers owned by this forest DnsForestName register this SRV record.</li> <li><code>_gc._tcp.&lt;SiteName&gt;._sites.&lt;DnsForestName&gt;.</code>Allows a client to find a GC in this forest site SiteName DnsForestName.Only GC servers owned by this forest DnsForestName register this SRV record.</li> <li><code>_ldap._tcp.DomainGuid.domains._msdcs.&lt;DnsForestName&gt;.</code>Allows customers to find the DC GUID.A GUID is a 128-bit unique index. Admits when Domain_Name DnsForestName and changed.</li> <li><code>_kerberos._tcp.&lt;Domain_Name&gt;.</code>Allows clients to find a Kerberos KDC in that domain: Domain_Name.All DC register this SRV record.</li> <li><code>_kerberos._udp.&lt;Domain_Name&gt;.</code>Same as _kerberos <code>._tcp.&lt;Domain_Name&gt;</code> only over UDP</li> <li><code>_kerberos._tcp.&lt;SiteName&gt;._sites.&lt;Domain_Name&gt;.</code>Allows clients to find a Kerberos KDC in that domain: Domain_Name site SiteName.All DC register this SRV record.</li> <li><code>_kerberos._tcp.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name.All DC with the KDC log this SRV record.</li> <li><code>_kerberos.tcp.&lt;SiteName&gt;._sites.dc._msdcs.&lt;Domain_Name&gt;.</code>Allows clients to find a DC running a Kerberos KDC's role in that domain: Domain_Name site SiteName.All DC with the KDC log this SRV record.</li> <li><code>_kpasswd._tcp.&lt;Domain_Name&gt;.</code>Kerberos Password Change allows you to search for current domain.All kerberos KDC DC (c) role of the register this SRV record</li> <li><code>_kpasswd._udp.&lt;Domain_Name&gt;.</code>Same as <code>_kpassword._tcp.&lt;Domain_Name&gt;</code> only over UDP</li> </ul>"},{"location":"guides/dns/#dns-records","title":"DNS records","text":"<p>It is important to understand the different DNS record types. Fore your convenance  we extracted relevant information from this Wikipedia article.</p>"},{"location":"guides/dns/#a","title":"A","text":"<p>Address record, List of IPv4 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>185.199.111.153, 185.199.108.153, 185.199.109.153, 185.199.110.153</code>"},{"location":"guides/dns/#aaaa","title":"AAAA","text":"<p>IPv6 address record, list of IPv6 addresses, most commonly used to map hostnames to an IP address of the host</p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>2606:50c0:8003::153, 2606:50c0:8002::153, 2606:50c0:8001::153, 2606:50c0:8000::153</code>"},{"location":"guides/dns/#caa","title":"CAA","text":"<p>Certification Authority Authorization. DNS Certification Authority Authorization, constraining acceptable CAs for a host/domain.</p> <p>CAA record structure: <code>flag</code> <code>tag</code> <code>value</code></p> <code>flag</code> A flags byte which implements an extensible signaling system for future use. As of 2018, only the issuer critical flag has been defined, which instructs certificate authorities that they must understand the corresponding property tag before issuing a certificate. This flag allows the protocol to be extended in the future with mandatory extensions, similar to critical extensions in X.509 certificates. <code>tag</code> <p>One of the following property:</p> <code>issue</code> This property authorizes the holder of the domain specified in associated property value to issue certificates for the domain for which the property is published. <code>issuewild</code> This property acts like issue but only authorizes the issuance of wildcard certificates, and takes precedence over the issue property for wildcard certificate requests. <code>iodef</code> This property specifies a method for certificate authorities to report invalid certificate requests to the domain name holder using the Incident Object Description Exchange Format. As of 2018, not all certificate authorities support this tag, so there is no guarantee that all certificate issuances will be reported. <code>contactemail</code> Increasingly, contact information is not available in WHOIS due to concerns about potential GDPR violations. This property allows domain holders to publish contact information in DNS. <code>contactphone</code> As above, for phone numbers. <code>value</code> The value associated with the chosen property tag. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>0 issue \"pki.goog\"</code>"},{"location":"guides/dns/#cname","title":"CNAME","text":"<p>Canonical name record, alias of one name to another.</p> <p>A CNAME lookup returns only one canonical name.</p> <p>Example:</p> FQDN Result <code>docs.cesbit.com</code> <code>cesbit.github.io.</code>"},{"location":"guides/dns/#ds","title":"DS","text":"<p>Delegation signer. The record used to identify the DNSSEC signing key of a delegated zone.</p> <p>DS record structure: <code>Key Tag</code> <code>Algorithm</code> <code>Digest</code> <code>Type</code> <code>Digest</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>9907 8 2 33D13AB164664236CF3EF302E8057AF46FC226AAE2B6A2759E4E80BA AF448970</code>"},{"location":"guides/dns/#mx","title":"MX","text":"<p>Mail exchange record, list of mail exchange servers that accept email for a domain.</p> <p>Example output: <code>1 aspmx.l.google.com.,10 alt3.aspmx.l.google.com.,10 alt4.aspmx.l.google.com.,5 alt1.aspmx.l.google.com.,5 alt2.aspmx.l.google.com.</code></p> <p>MX Record</p> <p>An MX record is returned as follows: <code>preference</code> <code>address</code></p> <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>1 aspmx.l.google.com., 5 alt1.aspmx.l.google.com., 5 alt2.aspmx.l.google.com., 10 alt3.aspmx.l.google.com., 10 alt4.aspmx.l.google.com.</code>"},{"location":"guides/dns/#ns","title":"NS","text":"<p>Name server record, Delegates a DNS zone to use the given authoritative name servers.</p> <p>Example: </p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-a1.googledomains.com, ns-cloud-a2.googledomains.com, ns-cloud-a3.googledomains.com, ns-cloud-a4.googledomains.com</code>"},{"location":"guides/dns/#ptr","title":"PTR","text":"<p>PTR Resource Record, possible for IP addresses in the format:</p> <p><code>in-addr.arpa</code> is the namespace within <code>.arpa</code> for reverse DNS lookups in IPv4.</p> <p>IPv6</p> <p>IPv6 addresses are constructed differently from IPv4 addresses, and IPv6 PTR records exist in a different namespace within .arpa. IPv6 PTR records are stored under the IPv6 address, reversed and converted into four-bit sections (as opposed to 8-bit sections, as in IPv4), plus \".ip6.arpa\".</p> <p>So <code>2001:4860:4860::8844</code> becomes: <code>4.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code></p> <p>Example:</p> FQDN Result <code>8.8.8.8.in-addr.arpa.</code> <code>dns.google.</code> <code>.4.8.8.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.0.6.8.4.0.6.8.4.1.0.0.2.ip6.arpa</code> <code>dns.google.</code>"},{"location":"guides/dns/#srv","title":"SRV","text":"<p>Service locator, generalized service location record, used for newer protocols instead of creating protocol-specific records such as MX.</p> <p>SRV record structure: <code>Priority</code> <code>Weight</code> <code>Port</code> <code>Target</code></p> <code>priority</code> the priority of the target host, lower value means more preferred. <code>weight</code> A relative weight for records with the same priority, higher value means higher chance of getting picked. <code>port</code> the TCP or UDP port on which the service is to be found. <code>target</code> the canonical hostname of the machine providing the service, ending in a dot. <p>Example:</p> FQDN Result <code>_srv._test.test-technology.nl.</code> <code>0 5 5060 srvrecordtest.test-technology.nl.</code>"},{"location":"guides/dns/#soa","title":"SOA","text":"<p>Start of [a zone of] authority record. Specifies authoritative information about a DNS zone, including the primary name server, the email of the domain administrator, the domain serial number, and several timers relating to refreshing the zone.</p> <p>SOA record structure: <code>Primary NS</code> <code>Responsible name</code> <code>Serial</code> <code>Refresh</code> <code>Retry</code> <code>Expire</code> <code>Miniumum</code></p> <code>Primary NS</code> Primary master name server for this zone. <code>Responsible name</code> Email address of the administrator responsible for this zone. (As usual, the email address is encoded as a name. The part of the email address before the @ becomes the first label of the name; the domain name after the @ becomes the rest of the name. In zone-file format, dots in labels are escaped with backslashes; thus the email address john.doe@example.com would be represented in a zone file as john.doe.example.com.) <code>Serial</code> Serial number for this zone. If a secondary name server slaved to this one observes an increase in this number, the slave will assume that the zone has been updated and initiate a zone transfer. <code>Refresh</code> Number of seconds after which secondary name servers should query the master for the SOA record, to detect zone changes. Recommendation for small and stable zones: 86400 seconds (24 hours). <code>Retry</code> Number of seconds after which secondary name servers should retry to request the serial number from the master if the master does not respond. It must be less than Refresh. Recommendation for small and stable zones: 7200 seconds (2 hours). <code>Expire</code> Number of seconds after which secondary name servers should stop answering request for this zone if the master does not respond. This value must be bigger than the sum of Refresh and Retry. Recommendation for small and stable zones: 3600000 seconds (1000 hours). <code>Miniumum</code> Used in calculating the time to live for purposes of negative caching. Authoritative name servers take the smaller of the SOA TTL and the SOA MINIMUM to send as the SOA TTL in negative responses. Resolvers use the resulting SOA TTL to understand for how long they are allowed to cache a negative response. Recommendation for small and stable zones: 172800 seconds (2 days). Originally this field had the meaning of a minimum TTL value for resource records in this zone; it was changed to its current meaning by RFC 2308. <p>Example:</p> FQDN Result <code>infrasonar.com</code> <code>ns-cloud-e1.googledomains.com. cloud-dns-hostmaster.google.com. 15 21600 3600 259200 300</code>"},{"location":"guides/forecasting/","title":"Forecasting","text":""},{"location":"guides/forecasting/#forecasting","title":"Forecasting","text":"<p>Forecasting is automatically enabled for metrics when used in conditions.</p>"},{"location":"guides/forecasting/#view","title":"View","text":""},{"location":"guides/forecasting/#forecast-maintenance","title":"Forecast maintenance","text":"<p>In some scenarios a forecast needs to be reset.</p> <p>A good example is show below where free space drops and the settles.</p> <p></p> <p>You can force generating a new forecast by deleting the previous forecast as shown below:</p> <p></p>"},{"location":"guides/my-infrasonar/","title":"My InfraSonar","text":"<p>My InfraSonar is a light app designed for your phone to give you real-time notifications and alerts. To get started, just install it on your device using the instructions below.</p> <p>Configure your rules to use the App</p> <p>Make sure your InfraSonar alert and notification rules have the \"App\" configured to receive push notification on your mobile device (see Rules).</p>"},{"location":"guides/my-infrasonar/#on-android","title":"\ud83d\udcf1 On Android","text":"<ol> <li>Open Google Chrome on your Android device and navigate to https://my.infrasonar.com.</li> <li>Tap the three-dot menu \u22ee in the top right corner of the browser.</li> <li>In the menu that appears, select \"Add to Home screen\".</li> <li>You may be prompted to confirm the name of the app. Tap \"Add\" to finish.</li> </ol> <p>The app icon will now be on your home screen and in your app drawer.</p>"},{"location":"guides/my-infrasonar/#on-iphone-ios","title":"\ud83c\udf4e On iPhone (iOS)","text":"<ol> <li>Open Safari on your iPhone and go to https://my.infrasonar.com.</li> <li>Tap the Share button at the bottom of the screen. It looks like a square with an arrow pointing up.</li> <li>Scroll down in the sharing options and tap \"Add to Home Screen\".</li> <li>You can then edit the name of the app. Tap \"Add\" in the top right corner.</li> </ol> <p>The PWA icon will now appear on your home screen.</p>"},{"location":"guides/raspberrypi_dashboard/","title":"Raspberry Pi dashboard","text":""},{"location":"guides/raspberrypi_dashboard/#raspberry-pi-dashboard","title":"Raspberry PI Dashboard","text":"<p>This guide describes how we have setup some Raspberry Pi 3's at Cesbit HQ for our digital dashboards. <sup>1</sup></p>"},{"location":"guides/raspberrypi_dashboard/#intall-rspbian-desktop-edition","title":"Intall Rspbian desktop edition","text":"<p>Install Raspbian Download the \u201cdesktop\u201d edition, this more then sufficient for  our needs.</p> <p>Once your Raspberry Pi has started open the Raspberry Pi Configuration. (Menu \u2192 Preferences \u2192 Raspberry Pi Configuration)</p>"},{"location":"guides/raspberrypi_dashboard/#basic-configuration","title":"Basic configuration","text":"<ol> <li>Set your hostname in the system tab</li> <li>Enable VNC in the interfaces tab</li> <li>Optional: configure WLAN access</li> </ol>"},{"location":"guides/raspberrypi_dashboard/#software-installation","title":"Software installation","text":"<pre><code>sudo apt update &amp;&amp; \\\nsudo apt remove -y apt-listchanges &amp;&amp; \\\nsudo apt full-upgrade -y &amp;&amp; \\\nsudo apt install -y fonts-noto-color-emoji xdotool &amp;&amp; \\\nsudo apt autoremove -y &amp;&amp; \\\nsudo apt autoclean\n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#startup","title":"Startup","text":"<p>This startup script performs some cleanup actions after a reboot en ensure the dashboard is loaded upon a fresh start.</p> /home/pi/autostart.sh<pre><code>#!/usr/bin/env sh\n\n# Disable screensaver. Varies across Pi models &amp; Raspbian versions; might be outdated.\n# Google \"raspberry disable suspend screensaver\" for help\n\nxset s off\nxset -dpms\nxset s noblank\n\n# Move the mouse cursor out of the way!\nxdotool mousemove 0 0\n\n# Avoid \"Chrome didn't shutdown correctly\" notification on unclean shutdown\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/' ~/.config/chromium/'Local State'\nsed -i 's/\"exited_cleanly\":false/\"exited_cleanly\":true/; s/\"exit_type\":\"[^\"]\\+\"/\"exit_type\":\"Normal\"/' ~/.config/chromium/Default/Preferences\n\n# Start Chromium, in fullscreen \"kiosk\" mode, and disabling update notifications\nchromium-browser --kiosk --check-for-update-interval=31536000 'https://app.infrasonar.com/dashboard'\n</code></pre> <p>Ensure the startup script is executable:</p> <pre><code>chmod +x /home/pi/autostart.sh \n</code></pre> <p>Create the file <code>/home/pi/config/autostart/infrasonardashboard.desktop</code> with the following content:</p> <pre><code>[Desktop Entry]\nName=InfraSonar Dashboard\nExec=sh /home/pi/autostart.sh\nTerminal=false\nType=Application\n</code></pre> <p>Ensure this file is executable:</p> <pre><code>chmod +x /home/pi/config/autostart/infrasonardashboard.desktop \n</code></pre>"},{"location":"guides/raspberrypi_dashboard/#setup-the-dashboard","title":"Setup the dashboard","text":"<p>last step is to login to infrasonar and configure the dashboard to your liking.</p> <p>Note</p> <p>InfraSonar stores its dashboard configuration in local browser storage allowing you to setup multiple different dashboards using one account.</p>"},{"location":"guides/raspberrypi_dashboard/#enjoy","title":"Enjoy","text":"<p>That's all enjoy your new dashboard!</p> <p>Don't forget to send us a picture for our wall of dashboards fame!</p> <p>support+dashboard@infrasonar.com</p> <ol> <li> <p>Based upon the excellent work done by unito \u21a9</p> </li> </ol>"},{"location":"integrations/","title":"Overview","text":"<p>InfraSonar's open nature makes integrations easy.</p> <p>At the moment we have two \"off the shelve\" integrations. Our development team however is eager to create any integration you might require.</p> <p> </p>"},{"location":"integrations/connectwise_manage/","title":"ConnectWise","text":"<p>InfraSonar has a specific API endpoint to integrate with ConnectWise Manage.</p> <p>This integration allows an InfraSonar environment to be \"mapped\" to a ConnectWise Manage company, thus allowing the automatic creation of ConnectWise Manage tickets from InfraSonar alerts.</p> <p>If you want to use this integration, please get in touch with InfraSonar support for assistance.</p>"},{"location":"integrations/halo_psa/","title":"HaloPSA","text":"<p>In close cooperation with Effort IT we have laid the groundwork for a two way HaloPSA integration.</p>"},{"location":"integrations/halo_psa/#features","title":"Features","text":"<ul> <li>Create Halo PSA tickets using our rules</li> <li>Close alerts automatically when the Halo PSA ticket is closed</li> <li>Asset management, create InfraSonar assets from Halo PSA or use InfraSonar to keep your HaloPSA asset list actual</li> <li>Show ticket statistics in InfraSonar as metrics.</li> </ul>"},{"location":"introduction/getting_started/","title":"Getting started","text":""},{"location":"introduction/getting_started/#getting-started-with-infrasonar","title":"Getting started with InfraSonar","text":"<p>Feel free to book a free implementation consultancy session to get you up and running quickly.</p> <p>Begin your InfraSonar journey with our proven, actionable approach, designed to ensure a smooth and efficient implementation process.</p> <pre><code>flowchart LR\n  a([Get to Know&lt;br&gt; Our Concepts]) --&gt; b([Define Your Implementation Strategy]) --&gt; c([Prepare &lt;br&gt;for Deployment]) --&gt; d([Deploy]) --&gt; e([Adopt])</code></pre>"},{"location":"introduction/getting_started/#get-to-know-our-concepts","title":"Get to Know Our Concepts","text":"<ul> <li>Deep Dive into Documentation: Thoroughly review the InfraSonar documentation to understand its architecture, features, and capabilities.</li> <li>Conceptual Understanding: Grasp the core concepts, such as assets, collectors, labels, conditions, alerts, and notifications.</li> <li>Hands-on Exploration (Sandbox/Demo): setup sandbox environment or ask us for a demo to familiarize yourself with the platform's interface and functionality.</li> <li>Attend Training/Webinars: Participate in our training sessions to gain deeper insights and ask questions.</li> </ul>"},{"location":"introduction/getting_started/#define-your-implementation-strategy","title":"Define Your Implementation Strategy","text":"<ul> <li>Identify Monitoring Goals: Clearly define your monitoring objectives and the key performance indicators (KPIs) you want to track.</li> <li>Inventory Your Assets: Create a comprehensive inventory of all assets (IT, OT, etc.) that need to be monitored, consider using our discover collector to assist you in this task.</li> <li>Determine Monitoring Scope: Define the scope of your monitoring, decide which collectors you want to deploy.</li> <li>Develop a Labeling Strategy: Plan your labeling strategy to effectively organize and categorize your assets.</li> <li>Define Condition Requirements: Elevate our pre-defined conditions and determine if these are sufficient for your organizations needs.</li> <li>Create Authorization and User Roles: Plan what user roles you need, and what views they should have access to.</li> <li>Develop a Rollout Plan: Define a timeline and phased approach for deploying InfraSonar.</li> </ul>"},{"location":"introduction/getting_started/#prepare-for-deployment","title":"Prepare for Deployment","text":"<ul> <li>Infrastructure Assessment: Assess your existing infrastructure to ensure compatibility with InfraSonar.</li> <li>Network Configuration: Configure network settings and firewall rules to allow InfraSonar to communicate with your assets.</li> <li>Collector Deployment Planning: Plan where collectors will be deployed, and how they will be installed.</li> <li>Credential Management: Setup credentials for accessing monitored assets and define a process for changing the any passwords according to your organizations requirements.. </li> <li>Test Environment Setup: Create a test environment to validate your configuration and deployment process.</li> <li>Document Procedures: Create custom documentation for the deployment and configuration process for your organization.</li> </ul>"},{"location":"introduction/getting_started/#deploy","title":"Deploy","text":"<ul> <li>Install InfraSonar Appliance (if applicable): Deploy the InfraSonar appliance if applicable for your chosen deployment model.</li> <li>Deploy Collectors: Install and configure collectors for or on your assets. (probes, agents and/or services)</li> <li>Configure Assets and Labels: Add your assets to InfraSonar and apply the necessary labels.</li> <li>Define Conditions and Alerts: Configure the conditions and alerts based on your monitoring requirements.</li> <li>Validate Data Collection: Verify that InfraSonar is successfully collecting data from your assets, ensure there are no notifications.</li> <li>Test Alerting: Test the alerting functionality to ensure that notifications are being sent correctly.</li> <li>Create Views: Create custom views to visualize your monitoring data.</li> </ul>"},{"location":"introduction/getting_started/#adopt","title":"Adopt","text":"<ul> <li>Train Your Team: Provide training to your team on how to use InfraSonar and interpret monitoring data.</li> <li>Integrate with Existing Systems: Integrate InfraSonar with your existing incident management and ticketing systems.</li> <li>Establish Monitoring Procedures: Define clear procedures for responding to alerts and resolving issues.</li> <li>Regularly Review and Optimize: Continuously review your monitoring configuration and optimize it as needed.</li> <li>Gather Feedback: Collect feedback from your team and users to identify areas for improvement.</li> <li>Stay Up-to-Date: Keep up with the latest InfraSonar updates and features.</li> <li>Create Knowledge Base: Create a knowledge base with common issues and their solutions.</li> </ul>"},{"location":"introduction/platform/","title":"Platform","text":"<p>The InfraSonar cloud platform is hosted on the Google Cloud Platform.</p> <p>Data from a monitored environment is received and processed in the InfraSonar cloud platform on what we call the Hubs. These Hubs evaluate the data against configured conditions and store received time series data in SiriDB. Received state data is kept in memory by the Hubs.</p> <p>ThingsDB in our main back-end and the conductor of our Hubs which are in essence micro-services.</p> <p> </p> Architectural overview of the InfraSonar platform"},{"location":"introduction/platform/#connection-points","title":"Connection points","text":"service source destination TCP Port Frontend any app.infrasonar.com 443 API any api.infrasonar.com 443 HUB any hub.infrasonar.com 8730 InfraSonar Service 34.90.55.73 and 34.90.105.247 any any"},{"location":"introduction/platform/#notes","title":"Notes","text":""},{"location":"introduction/platform/#fronted","title":"Fronted","text":"<p>Users connect to our frontend using their web browser. This connection is SSL encrypted and users are required to logon using their Google or Microsoft identity.</p>"},{"location":"introduction/platform/#api","title":"API","text":"<p>The API endpoint is used by our agents and can be used for automation tasks. API request require the use of a token</p>"},{"location":"introduction/platform/#hub","title":"HUB","text":"<p>Probes send their data to the Agentcore. In most scenarios the Agentcore and probes are deployed using an InfraSonar appliance running in a customer environment. The Agentcore connects to hub.infrasonar.com using TCP port <code>8730</code> or TCP port <code>443</code>.</p> <p>Play nice and avoid using TCP port 443</p> <p>TCP port 443 can be configured as a fallback as most firewalls don't inspect traffic properly. We do advise however to keep friends with your firewall administrator and use TCP port 8730 as we use an encrypted streaming protocol and not HTTPS what would be expected on TCP port 443</p>"},{"location":"introduction/platform/#infrasonar-service","title":"InfraSonar Service","text":"<p>InfraSonar services connect to supported platforms using the protocol, URL or FQDN provided by the user or configured in the collector. In some scenario's our IP addresses must be authorized to allow data retrieval.</p>"},{"location":"introduction/platform/#network-considerations","title":"Network considerations","text":"<ul> <li>Data from probes is send to the InfraSonar cloud platform via an agentcore, see the agentcore documentation for it's TCP port usage here</li> <li>The IP addresses used by InfraSonar services might need to be whitelisted to allow data retrieval, the list of IP addresses used by services can be found here</li> <li>Agents send data to the InfraSonar API using HTTPS</li> </ul>"},{"location":"introduction/terminology/","title":"Terminology","text":""},{"location":"introduction/terminology/#terminology","title":"Terminology","text":"<p>Terminology in IT is always a bit of a challenge   we try to make it easier by outlining what we mean with curtain terms.</p>"},{"location":"introduction/terminology/#terminology-overview","title":"Terminology overview","text":"Term Description Agentcore Central component in a monitored infrastructure that acts as a relay between probes and the InfraSonar cloud. Agents A standalone InfraSonar component that can send monitoring data to InfraSonar via the API API The API allows users to perform automated access using a personal access token. Appliance A dedicated (virtual) Linux appliance for InfraSonar. Asset A monitored network component in an environment. Collectors These perform the actual measurement and are tailored per monitored component. InfraSonar knows three types of collectors: probes for agentless monitoring, agents for standalone or event driven monitoring and services for remote monitoring from the cloud. Container Used to organize environments and authorization in those environments. Frontend These are the webservers hosting the UI for end users to access InfraSonar. Hub State is stored here in memory, and logic is performed when new monitoring data arrives. SiriDB The database used for storing timeseries data with a long term retention."},{"location":"lang/","title":"InfraSonar Expression language","text":"<p>In InfraSonar, most conditions leverage a powerful, custom expression language to test your data. We specifically designed this language for its flexibility.</p> <p>A key advantage over a purely graphical interface is the ability to embed comments directly within your expressions. This means you can thoroughly explain the rationale behind specific tests, significantly improving readability and maintainability for your team.</p> <p>Despite its power, we've kept the language simple and robust, ensuring a gentle learning curve. Its built-in data type checking actively helps prevent common mistakes, making your expressions more reliable.</p>"},{"location":"lang/basics/and_or_logic/","title":"Using AND/OR logic","text":"<p>InfraSonar's expression language allows you to combine multiple <code>case</code> statements using both AND logic (through nesting) and OR logic (through sequential <code>case</code> statements). This flexibility helps you define highly specific alert triggers.</p>"},{"location":"lang/basics/and_or_logic/#and-logic","title":"AND Logic","text":"<p>When you nest <code>case</code> statements, they form an AND relationship. The inner <code>case</code> will only be evaluated if all preceding outer <code>case</code> conditions are met.</p> <p>Suppose you want to raise an alert only when memory usage for some collector exceeds 80% AND the operating system is neither \"Windows\" nor \"ChromeOS\". You could achieve this by nesting:</p> <pre><code>// Raise a WARNING if memory usage &gt; 80%\n// AND the OS is NOT Windows\n// AND the OS is NOT ChromeOS\ncase item.memory_usage_ratio &gt; 0.8:\n    case item.os != \"Windows\":\n        case item.os != \"ChromeOS\":\n            return WARNING, \"Memory usage of @item.name exceeds 80%\"\nreturn OK\n</code></pre> <p>While functional, this nested approach can become less readable as more conditions are added, especially for exclusion logic.</p>"},{"location":"lang/basics/and_or_logic/#or-logic","title":"OR Logic","text":"<p>A more elegant and readable way to handle exclusions or multiple conditions that lead to the same outcome is to use sequential <code>case</code> statements, which act as OR conditions. The first <code>case</code> statement that evaluates to true will be executed.</p> <p>To achieve the same goal (alert when memory usage &gt; 80%, but not for Windows or ChromeOS), we can place an early <code>return</code> statement for the excluded operating systems.</p> <pre><code>case item.os == \"Windows\":\ncase item.os == \"ChromeOS\":\n    return // Exclude when \"os\" is Windows OR ChromeOS\n\n// Test if memory usage exceeds 80 percent\ncase item.memory_usage_ratio &gt; 0.8:\n    return WARNING, \"Memory usage of @item.name exceeds 80%\"\nreturn OK\n</code></pre> <p>This method improves readability and maintainability, especially when dealing with more complex exclusion criteria.</p>"},{"location":"lang/basics/asset_properties/","title":"Asset Properties","text":"<p>By exposing asset properties directly to your expressions, InfraSonar empowers you to achieve more granular control over your alerts; this enables precise asset-based filtering and exclusions according to criteria such as environment or team, alongside the ability to enhance alert messages with valuable, custom details.</p> <p>Asset properties are accessed via their defined type, followed by their key:</p> <ul> <li><code>asset.string.&lt;key&gt;</code>: Accesses a single string property.</li> <li><code>asset.strings.&lt;key&gt;</code>: Accesses a list of strings property.</li> <li><code>asset.number.&lt;key&gt;</code>: Accesses a single numeric value (<code>integer</code> or <code>float</code>) property.</li> <li><code>asset.numbers.&lt;key&gt;</code>: Accesses a list of numeric values property.</li> <li><code>asset.boolean.&lt;key&gt;</code>: Accesses a single boolean property (<code>true</code> or <code>false</code>).</li> </ul> <p>Null properties</p> <p>If an asset property does not exist, or if it explicitly holds a <code>null</code> value, attempting to access it will result in <code>null</code>. There is no functional difference in expression evaluation between a non-existent property and one explicitly set to <code>null</code>.</p>"},{"location":"lang/basics/asset_properties/#example-1-using-an-asset-property-for-exclusion","title":"Example 1: Using an Asset Property for Exclusion","text":"<p>This example demonstrates how to prevent alerts for items whose names are present in an <code>exclusion_list</code> strings property defined on the asset.</p> <pre><code>// Return to suppress the alert if a property `exclusion_list`\n// exists and `item.name` is part of the list of strings.\ncase item.name in asset.strings.exclusion_list?:\n    return\n// Continue with expression...\n</code></pre>"},{"location":"lang/basics/asset_properties/#example-2-including-asset-properties-in-an-alert-message","title":"Example 2: Including Asset Properties in an Alert Message","text":"<p>This example shows how to embed an asset's location property directly into an alert message, providing immediate context. <pre><code>var.asset_location = asset.string.location? ?? \"Unknown Location\"\n\ncase true:\n    return DEBUG, \"Location: @var.asset_location\"\n</code></pre></p>"},{"location":"lang/basics/case_statements/","title":"Case statements","text":"<p>InfraSonar expressions use case statements to define conditional logic.</p>"},{"location":"lang/basics/case_statements/#boolean-comparisons","title":"Boolean Comparisons","text":"<p>When working with boolean metrics (<code>true</code> or <code>false</code>), you can test their state directly:</p> <pre><code>case item.is_started:\n    return DEBUG, \"Service Started: @item.name\"\n</code></pre> <p>To check for a <code>false</code> value or perform an explicit comparison:</p> <pre><code>case item.is_started == false:\n    return DEBUG, \"Service Not Started: @item.name\"\n</code></pre> <p>Note: The <code>==</code> (equality) and <code>!=</code> (inequality) operators can be used to explicitly compare any two values, including <code>null</code>, across all data types.</p>"},{"location":"lang/basics/case_statements/#numeric-comparisons","title":"Numeric Comparisons","text":"<p>Numeric values can be compared using standard relational operators: <code>==</code> (equal to), <code>!=</code> (not equal to), <code>&gt;</code> (greater than), <code>&lt;</code> (less than), <code>&gt;=</code> (greater than or equal to), and <code>&lt;=</code> (less than or equal to).</p> <pre><code>case item.count &gt; 10:\n    return DEBUG, \"Count too large: @item.count\"\n</code></pre>"},{"location":"lang/basics/case_statements/#string-and-list-membership","title":"String and List Membership","text":"<p>The <code>in</code> and <code>not in</code> operators are versatile for checking membership.</p>"},{"location":"lang/basics/case_statements/#substring-check","title":"Substring Check","text":"<p>To test if a substring exists within a larger string:</p> <pre><code>case 'error' in item.message.lower():\n    return ERROR, \"Error in message: @item.message\"\n</code></pre>"},{"location":"lang/basics/case_statements/#list-membership","title":"List Membership","text":"<p>To test if a value is present within a list of values:</p> <pre><code>case weekday in ['Saturday', 'Sunday']:\n    return DEBUG, \"It is weekend\"\n</code></pre> <p>All elements within a single list must be of the same data type (e.g., all strings, all integers). You cannot mix types within the same list.</p>"},{"location":"lang/basics/dynamic_thresholds/","title":"Dynamic Thresholds","text":"<p>Setting fixed alert thresholds can be challenging. For instance, is \"80% memory usage\" truly high? The answer often depends on the specific server or context; 10% might be critical for one system, while 80% is normal for another.</p> <p>To address this, InfraSonar employs dynamic thresholds powered by its forecasting engine, Enodo. Based on historical data, Enodo automatically generates an expected upper and lower bound for your metrics. This allows your alerts to adapt to the normal behavior of each individual item.</p> <p>Consider a traditional fixed threshold:</p> <pre><code>case item.memory_usage_ratio &gt; 0.8:\n    return WARNING, \"Memory usage too high: @fmt.item.memory_usage_ratio\"\n</code></pre> <p>With dynamic thresholds, you can use the forecasted upper bound instead of a static value:</p> <pre><code>case item.memory_usage_ratio &gt; enodo.memory_usage_ratio?.upper:\n    return WARNING, \"\nMemory usage higher than predicted:\n  Actual value: @fmt.item.memory_usage_ratio\n  Forecast Upper: @fmt.enodo.memory_usage_ratio.upper\n\"\n</code></pre>"},{"location":"lang/basics/dynamic_thresholds/#important-considerations","title":"Important Considerations","text":"<ul> <li>Optional Forecasted Values: Forecasted metrics, such as <code>enodo.memory_usage_ratio?.upper</code>, are optional. They will be <code>null</code> when a check is first enabled or when there isn't enough historical data for Enodo to generate a reliable forecast.</li> <li>Automatic Forecasting: You do not need to manually configure or activate forecasting. InfraSonar automatically begins generating forecasts for a metric once an expression referencing <code>enodo.&lt;metric&gt;</code> exists.</li> </ul>"},{"location":"lang/basics/dynamic_thresholds/#analyzing-differences-rate-of-change","title":"Analyzing Differences (Rate of Change)","text":"<p>For metrics that continuously increase, such as counters (e.g., <code>error_count</code>, <code>byte_sent</code>), comparing the current value directly isn't always meaningful. Instead, it's often more useful to analyze the difference or rate of change between the current and previous values.</p> <p>To make this difference independent of your check interval, you can calculate the value per second. This allows for consistent comparisons regardless of how frequently your checks run.</p> <p>InfraSonar supports this analysis by allowing you to define forecasts based on <code>diff</code> (total difference) or <code>diffps</code> (difference per second).</p> <p>Here's how you can alert on an unexpected increase in errors, comparing the current error rate per second (<code>diffps</code>) against a forecasted upper bound:</p> <pre><code>case item.error_count.diffps() &gt; enodo.error_count?.diffps.upper:\n    return DEBUG, \"More errors than expected\"\n</code></pre> <p>This approach helps identify abnormal spikes in activity, even if the total counter value is generally high.</p>"},{"location":"lang/basics/first_expression/","title":"Writing you first expression","text":"<p>Let's create an expression to monitor a simple webpage.</p> <pre><code>// Test if the website has responded with status code 200\ncase item.statusCode != 200:\n    return WARNING, \"HTTP Status not OK, actual status: @item.statusCode\"\n</code></pre> <p>Consider an <code>item</code> with the following data:</p> <pre><code>      {\n        \"name\": \"https://devapi.infrasonar.com/ready\",\n        \"responseTime\": 0.002146540746092796,\n        \"statusCode\": 503\n      }\n</code></pre> <p>This expression would trigger an alert with <code>WARNING</code> severity:</p> <pre><code>HTTP Status not OK, actual status: 503\n</code></pre> <p>When you're writing expressions in InfraSonar, our editor is designed to make the process smoother and help prevent errors.</p> <p>As you type, once you enter <code>item.</code>, you'll see an autocomplete list of all available metrics on your item. This makes it easy to discover and select the exact metrics you need, without having to remember their names.</p> <p>The editor also understands data types. This means you can't accidentally compare a numerical metric like <code>statusCode</code> with a text string, for instance. This built-in validation helps you avoid common mistakes before they even happen.</p> <p>Similarly, after typing <code>return</code> and a space, a list of available severities (like <code>WARNING</code>, <code>CRITICAL</code>, etc.) will pop up, ensuring you select a valid option. Plus, all your expressions are thoroughly validated for syntax and type correctness before you can save them, giving you immediate feedback and preventing invalid configurations from being deployed.</p> <p>Indentation Matters</p> <p>Indentation is crucial for defining the logic and structure of your expressions. Best practice is to use 4 spaces for indentation. Proper indentation significantly impacts how case statements are interpreted, as demonstrated in the AND/OR logic documentation where nesting and sequential case statements have distinct meanings.</p>"},{"location":"lang/basics/message_templates/","title":"Message Templates","text":"<p>You can embed dynamic values within your alert messages using message templates. These templates allow you to include relevant data, such as an item's name or metric values, directly in the alert.</p> <pre><code>return DEBUG, \"Memory usage of @item.name to high\"\n</code></pre> <p>In this example, <code>@item.name</code> acts as a placeholder that will be replaced with the actual name of the item when the message is generated.</p>"},{"location":"lang/basics/message_templates/#escaping-the-symbol","title":"Escaping the <code>@</code> Symbol","text":"<p>If you need to include a literal <code>@</code> sign in your message that shouldn't be interpreted as the start of a variable, add an exclamation mark (<code>!</code>) immediately after it:</p> <pre><code>return DEBUG, \"Use @! in message.\"  // Renders as: \"Use @ in message.\"\n</code></pre>"},{"location":"lang/basics/message_templates/#escaping-the-single-and-double-quotes","title":"Escaping the single and double quotes","text":"<p>It is possible to use single quotes in a double quote string, but sometimes you just want a double quote in a double quote string. In this case, you need to write two of them</p> <pre><code>return DEBUG, \"Use \"\"Double quotes\"\" in a double quote string.\"\n// Renders as: Use \"Double quotes\" in a double quote string.\n</code></pre>"},{"location":"lang/basics/message_templates/#explicitly-ending-a-variable-placeholder","title":"Explicitly Ending a Variable Placeholder","text":"<p>Sometimes, characters immediately following a variable placeholder (like a period) can cause ambiguity. The system might incorrectly try to include that character as part of the variable name, leading to a template error.</p> <pre><code>return DEBUG, \"Failed item: @item.name.\"\n</code></pre> <p>This would produce an error similar to:</p> <pre><code>template error: ambiguous `.` after `@item.name`; maybe you want to print the dot? use: @item.name!.\n</code></pre> <p>To resolve this, explicitly mark the end of the variable placeholder with an exclamation mark (<code>!</code>) before the punctuation:</p> <pre><code>return DEBUG, \"Failed item: @item.name!.\"  // Renders as: \"Failed item: my-item.\"\n</code></pre> <p>Notice that the <code>!</code> used to terminate the variable does not appear in the final message.</p>"},{"location":"lang/basics/message_templates/#including-a-literal-exclamation-mark-after-a-variable","title":"Including a Literal Exclamation Mark After a Variable","text":"<p>If you genuinely want an exclamation mark to appear after a variable in your message, simply add two exclamation marks:</p> <pre><code>return DEBUG, \"Failed item: @item.name!!\"  // Renders as: \"Failed item: my-item!\"\n</code></pre>"},{"location":"lang/basics/message_templates/#accessing-previous-item-values","title":"Accessing Previous Item Values","text":"<p>You can reference values from the previous evaluation cycle using the pr`ev keyword. This is useful for comparing current and historical data:</p> <pre><code>return DEBUG, \"Memory usage: @item.usage_memory (Previous: @prev.usage_memory)\"\n// Example output: \"Memory usage: 76853248, Previous value: 63619072\"\n</code></pre>"},{"location":"lang/basics/message_templates/#formatted-values-with-fmt","title":"Formatted Values with <code>fmt.</code>","text":"<p>Raw metric values (like <code>76853248</code>) might not be user-friendly. For better readability, use the <code>fmt.</code> prefix to display formatted values (e.g., human-readable sizes, percentages):</p> <pre><code>return DEBUG, \"Memory usage: @fmt.item.usage_memory\"\n// Example output: \"Memory usage: 73.29 MiB\"\n</code></pre>"},{"location":"lang/basics/message_templates/#multiline-messages","title":"Multiline Messages","text":"<p>Messages are multiline by default. You can define them across multiple lines using a multiline string:</p> <pre><code>var.message = \"\nMemory usage: @fmt.item.usage_memory\nPrevious value: @fmt.prev.usage_memory\n\"\n</code></pre> <p>Note: Any leading or trailing whitespace (like the newline character at the start and end of the example above) will be automatically trimmed from the rendered message.</p>"},{"location":"lang/basics/message_templates/#listing-all-items-in-a-message","title":"Listing All Items in a Message","text":"<p>You can iterate through and list all items directly within a message template. This is particularly useful when you want a single alert to provide a comprehensive overview of multiple items, rather than generating separate alerts for each.</p> <p>It is even possible to list all items in a message. This can be especially useful if you want a single alert, but the message to contain all item.</p> <pre><code>var.message = \"\nAll items:\n\n#for @pod in @items:\n- @pod.name : @pod.status\n#end\n\"\n\ncase item.status != \"Running\":\n    return DEBUG, var.message\n</code></pre> <p>When this alert is triggered, the <code>var.message</code> template will render a detailed list of items. For example, the output might look like this:</p> <pre><code>All items:\n\n- forecast-0 : Running\n- forecast-1 : Stopped\n- hub-0 : Running\n- hub-1 : Running\n- hub-2 : Running\n- hub-3 : Stopped\n- notifications-0 : Running\n- notifications-1 : Running\n</code></pre>"},{"location":"lang/basics/message_templates/#available-message-placeholders","title":"Available Message Placeholders","text":"<p>This table provides an overview of the most commonly used placeholders and their respective examples and descriptions.</p> Placeholder Example output Description <code>@asset.id</code> <code>34567</code> The unique identifier for the asset. <code>@asset.name</code> <code>myhost.local</code> The name of the asset. <code>@asset.string.&lt;key&gt;</code> <code>...</code> The asset property <code>&lt;key&gt;</code> containing a string value. <code>@asset.strings.&lt;key&gt;</code> <code>[..., ...]</code> The asset property <code>&lt;key&gt;</code> containing a list of string values. <code>@asset.number.&lt;key&gt;</code> <code>[..., ...]</code> The asset property <code>&lt;key&gt;</code> containing a list of string values. <code>@check.duration</code> <code>4.05123</code> The duration of the current check in seconds (float). <code>@check.interval</code> <code>300</code> The configured check interval in seconds (integer). <code>@check.local_datetime</code> <code>2022-07-21 16:45:44+02:00</code> The timezone-aware local date and time of the current check result. <code>@check.prev.local_datetime</code> <code>2022-07-21 16:40:43+02:00</code> The timezone-aware local date and time of the previous check result. <code>@check.prev.timestamp</code> <code>1658253617</code> The Unix timestamp of the previous check result. <code>@check.prev.utc_datetime</code> <code>2022-07-21 14:40:44+00:00</code> The UTC date and time of the previous check result. <code>@check.timestamp</code> <code>1658253918</code> The Unix timestamp of the current check result. <code>@check.utc_datetime</code> <code>2022-07-21 14:45:44+00:00</code> The UTC date and time of the current check result. <code>@container.id</code> <code>12345</code> The unique identifier for the container. <code>@container.name</code> <code>Cesbit</code> The name of the container. <code>@enodo.&lt;metric&gt;.diffps.upper</code> <code>0.01234</code> The raw forecasted upper bound value, compared to the previous value per second. <code>@enodo.&lt;metric&gt;.upper</code> <code>0.1234</code> The raw forecasted upper bound value from Enodo. <code>@fmt.enodo.&lt;metric&gt;.lower</code> <code>99%</code> The formatted forecasted lower bound value from Enodo. <code>@fmt.item.&lt;metric&gt;</code> <code>123 MB</code> The formatted value of the current item's metric (e.g., human-readable). <code>@fmt.other.&lt;metric&gt;</code> <code>99%</code> The formatted value of another item's metric. <code>@fmt.prev.&lt;metric&gt;</code> <code>99%</code> The formatted value of the item's metric from the previous check. <code>@hit</code> <code>0</code> The number of items currently triggering an alert (0 or more). <code>@hour</code> <code>0</code> The current hour (0-23). <code>@item.&lt;metric&gt;</code> <code>cpu1</code> The raw value of the current item's metric. <code>@minute</code> <code>0</code> The current minute (0-59). <code>@new</code> <code>True</code> <code>True</code> if the item is newly detected, <code>False</code> otherwise. <code>@other.&lt;metric&gt;</code> <code>99.14525</code> The raw value of a metric from another item. <code>@prev.&lt;metric&gt;</code> <code>99.14525</code> The raw value of the item's metric from the previous check result. <code>@ticks</code> <code>0</code> The total number of times this specific alert has been triggered previously (0 or more). <code>@var.variable</code> <code>...</code> The value of a user-defined variable (see Variables in Expressions). <code>@weekday</code> <code>Monday</code> The current day of the week (e.g., Monday, Tuesday). <code>#for @x in @items: ...#end</code> <code>...</code> Loops through all items (using raw values) (see Listing All Items in a Message). <code>#for @x in @fmt.items: ... #end</code> <code>...</code> Loops through all items, using formatted values within the loop (see Listing All Items in a Message)."},{"location":"lang/basics/optional_metrics/","title":"Optional Metrics","text":"<p>In InfraSonar, you may encounter metrics with a question mark (<code>?</code>) appended to their name (e.g., <code>item.some_metric?</code>). This visual cue indicates that the metric is optional and its value can potentially be <code>null</code>. Unlike regular metrics which are guaranteed to always have a value, optional metrics might not always be present or valid in the incoming data.</p> <p>When working with such metrics in your expressions, InfraSonar requires you to explicitly mark them with a question mark (e.g., <code>item.payload?</code>). While the question mark itself doesn't change how InfraSonar evaluates the expression at runtime, its presence generates awareness. It visually reminds you that the value might be <code>null</code>, prompting you to handle this possibility in your logic.</p> <p>Consider the following expression, which might be used with data from the <code>http</code> or <code>httpsvc</code> collector:</p> <pre><code>// Test if the payload contains the word \"ERROR\"\ncase \"ERROR\" in item.payload.upper():\n    return ERROR, \"Payload contains an error\"\n</code></pre> <p>If the <code>payload</code> metric is optional and you omit the question mark, InfraSonar will prevent you from saving the expression, displaying a clear message like this:</p> <pre><code>metric `payload` is nullable and must be marked with a question mark like `item.payload?\n</code></pre> <p>To correctly handle the optional <code>payload</code> and allow the expression to be saved, you must include the question mark:</p> <pre><code>case \"ERROR\" in item.payload?.upper():\n    return ERROR, \"Payload contains an error\"\n</code></pre> <p>It's crucial to understand how InfraSonar expressions behave when an optional metric (marked with <code>?</code>) is actually <code>null</code>.</p> <p>When an optional metric like <code>item.payload?</code> is <code>null</code>, any attempt to access its properties or call its methods (like <code>item.payload?.upper()</code>) will automatically cause that specific part of the expression to evaluate as <code>false</code>. The operation on the <code>null</code> value is simply skipped, and the overall condition will not be met.</p> <p>In essence, if a nullable metric is <code>null</code>, any operation on it (unless it's an explicit <code>null</code> check) will result in <code>false</code>.</p> <p>If you want to explicitly detect and act upon a missing or <code>null</code> metric, you must test for <code>null</code> directly:</p> <pre><code>case item.payload? == null:\n    return ERROR, \"Payload is missing\"\n</code></pre> <p>This ensures you have full control over how your expressions respond to the absence of data, allowing you to differentiate between a metric being present but not matching a condition, and a metric being entirely <code>null</code>.</p>"},{"location":"lang/basics/the_return_statement/","title":"The <code>return</code> Statement","text":"<p>The previous expression we looked at had a small limitation: once it triggered a <code>WARNING</code> alert, that alert would stay open indefinitely, even if the memory usage returned to normal. You'd have to close it manually or remove the condition.</p> <p>Ideally, we want alerts to automatically resolve when the issue is fixed.</p> <p>Technically, InfraSonar implicitly adds an empty <code>return</code> at the end of your expression. It's like this:</p> <pre><code>// Test if memory usage exceeds 80 percent.\ncase item.memory_usage_ratio &gt; 0.8:\n    return WARNING, \"Memory usage of @item.name exceeds 80%\"\nreturn  // Implicit return, means no change in alert state if condition is false\n</code></pre> <p>To automatically close the alert when memory usage drops back below 80%, we can explicitly tell InfraSonar to return an <code>OK</code> status. This signals InfraSonar to close any open alerts for that condition.</p> <p>Here's how we'd modify the expression:</p> <pre><code>// Test if memory usage exceeds 80 percent.\ncase item.memory_usage_ratio &gt; 0.8:\n    return WARNING, \"Memory usage of @item.name exceeds 80%\"\nreturn OK  // Explicitly return OK if memory usage is 80% or below\n</code></pre> <p>With this change, if memory usage falls to 80% or below, the expression will evaluate to <code>OK</code>, and an active alert generated by this specific expression for that item will automatically close.</p>"},{"location":"lang/basics/the_return_statement/#multiple-return-statements-and-alert-threshholds","title":"Multiple <code>return</code> Statements and Alert Threshholds","text":"<p>InfraSonar expressions support multiple <code>return</code> statements, giving you fine-grained control over alert severities and allowing for \"dead zones\" where no state change occurs. This is crucial for preventing \"flapping\" alerts \u2013 where an alert rapidly opens and closes due to minor fluctuations around a single threshold.</p> <p>Consider a scenario where memory usage hovers around an 80% warning threshold (e.g., 79.99% then 80.01%). Without a buffer, this would constantly trigger and resolve alerts, creating unnecessary noise.</p> <p>To prevent this, we can introduce a lower \"clear\" threshold. Here's an example that defines different alert levels and a resolution window:</p> <pre><code>// Test if memory usage exceeds 80 percent.\ncase item.memory_usage_ratio &gt; 0.9:\n    return ERROR, \"Memory usage of @item.name exceeds 90%\"\ncase item.memory_usage_ratio &gt; 0.8:\n    return WARNING, \"Memory usage of @item.name exceeds 80%\"\ncase item.memory_usage_ratio &lt; 0.78:\n    return OK  // Explicitly return OK if memory usage is 78% or below\n</code></pre> <p>Only when the memory usage drops below 78% does the return <code>OK</code> statement get hit, which will then explicitly close any open alerts generated by this expression for that item.</p>"},{"location":"lang/basics/variables_in_expression/","title":"Variables in Expression","text":"<p>You can define variables within your expression to reuse values multiple times. This improves readability and maintainability, especially for complex calculations.</p> <p>Variables must be assigned before any <code>case</code> statements. This ensures they are properly defined and available for use in your expression.</p> <pre><code>// Define \"var.ratio\"\nvar.ratio = item.usage_memory?.div(item.allocatable_memory)\n\ncase var.ratio? &gt; 0.9:\n    return CRITICAL, \"Memory usage way too high!\"\ncase var.ratio? &gt; 0.8:\n    return WARNING, \"Hign memory usage\"\n</code></pre>"},{"location":"lang/basics/variables_in_expression/#handling-optional-metrics-null-values","title":"Handling Optional Metrics (Null Values)","text":"<p>When a variable's value is derived from an optional metric (which might be <code>null</code>), the variable itself can also be <code>null</code>. To correctly handle this in your expressions, you should mark the variable as optional with a <code>?</code>.</p> <p>For example, <code>item.usage_memory</code> might be <code>null</code>. In such cases, <code>var.ratio</code> would also be <code>null</code>, requiring <code>var.ratio?</code> in the <code>case</code> statements.</p>"},{"location":"lang/basics/variables_in_expression/#preventing-errors-and-null-values","title":"Preventing Errors and Null values","text":"<p>Expressions can encounter issues like division by zero or other errors if source metrics are missing or invalid (e.g., <code>item.allocatable_memory</code> is <code>0</code>). To gracefully handle such scenarios, you can use the nullish coalescing operator <code>??</code>.</p> <p>The <code>??</code> operator assigns the value on its right if the expression on its left evaluates to <code>null</code> or an error.</p> <pre><code>// Define \"var.ratio\"\nvar.ratio = item.usage_memory?.div(item.allocatable_memory) ?? 0\n\ncase var.ratio &gt; 0.9:\n    return CRITICAL, \"Memory usage way too high!\"\ncase var.ratio &gt; 0.8:\n    return WARNING, \"Hign memory usage\"\n</code></pre> <p>In this example, if <code>item.usage_memory?.div(item.allocatable_memory)</code> results in <code>null</code> or an error (like zero division), <code>var.ratio</code> will be assigned <code>0</code> instead. This provides robust error handling.</p>"},{"location":"lang/basics/variables_in_expression/#chaining-optional-metrics-with","title":"Chaining Optional Metrics with <code>??</code>","text":"<p>If multiple metrics involved in a calculation are optional, you can strategically use <code>??</code> to ensure valid types for operations.</p> <p>Suppose <code>item.allocatable_memory</code> is also optional: <pre><code>var.ratio = item.usage_memory?.div(item.allocatable_memory?)\n// This would cause a type error:\n//   function div(..) with argument type NullableInt\n</code></pre></p> <p>Directly passing <code>item.allocatable_memory?</code> (which can be NullableInt) to <code>div()</code> results in an error as <code>div()</code> expects a non-null number.</p> <p>To solve this, use <code>??</code> to provide a default non-null value for optional metrics before using them in calculations:</p> <pre><code>var.allocatable_memory = item.allocatable_memory? ?? 0\nvar.ratio = item.usage_memory?.div(var.allocatable_memory) ?? 0\n</code></pre> <p>By assigning <code>item.allocatable_memory? ?? 0</code> to <code>var.allocatable_memory</code>, we ensure that <code>var.allocatable_memory</code> is always a non-null integer (either the actual value or 0). This allows InfraSonar to perform type validation successfully.</p>"},{"location":"lang/functions/abs/","title":"Function: <code>abs</code>","text":"<p>The <code>abs()</code> function returns the absolute value of a number. It can be used on both <code>float</code> and <code>integer</code> types.</p>"},{"location":"lang/functions/abs/#syntax","title":"Syntax:","text":"<pre><code>&lt;number&gt;.abs()\n</code></pre>"},{"location":"lang/functions/abs/#example","title":"Example:","text":"<pre><code>var.test_value = -7.8\nvar.abs_value = var.test_value.abs()\n\ncase true:\n    // Render as: \"Absolute value: 7.8\"\n    return DEBUG, \"Absolute value: @var.abs_value\"\n</code></pre>"},{"location":"lang/functions/add/","title":"Function: <code>add</code>","text":"<p>The <code>add()</code> function performs addition, adding one number to another.</p> <ul> <li>If both numbers are integers, the result will be an integer.</li> <li>If either number is a float, the result will be a float.</li> </ul>"},{"location":"lang/functions/add/#syntax","title":"Syntax:","text":"<pre><code>&lt;number&gt;.add(&lt;number&gt;)\n</code></pre>"},{"location":"lang/functions/add/#example","title":"Example:","text":"<pre><code>var.test_value = 5\nvar.new_value = var.test_value.add(6)\n\ncase true:\n    // Render as: \"New value: 11\"\n    return DEBUG, \"New value: @var.new_value\"\n</code></pre>"},{"location":"lang/functions/diff/","title":"Function: <code>diff</code>","text":"<p>The <code>diff()</code> function calculates the absolute difference between the current value of a numeric metric and its value from the previous check. It is typically used for counter-type metrics that continuously increase.</p> <p>The function can be applied to both <code>float</code> and <code>integer</code> metrics, returning a value of the same type.</p> <p>Dependency</p> <p>The <code>diff()</code> function requires a previous value for the metric to compute the difference. Therefore this expression will only start if a previous value is available.</p>"},{"location":"lang/functions/diff/#syntax","title":"Syntax:","text":"<pre><code>&lt;numeric_metric&gt;.diff()\n</code></pre>"},{"location":"lang/functions/diff/#example","title":"Example:","text":"<pre><code>// Calculate the number of new errors since the last check\nvar.new_errors = item.error_count.diff()\n\ncase var.new_errors &gt; 0:\n    return WARNING, \"Errors detected since last check: @var.new_errors\"\n</code></pre>"},{"location":"lang/functions/diffps/","title":"Function: <code>diffps</code>","text":"<p>The <code>diffps()</code> function calculates the rate of change per second of a numeric metric between its current value and its value from the previous check. It is specifically designed for counter-type metrics that continuously increase, providing an interval-independent measure of activity.</p> <p>he function can be applied to both <code>float</code> and <code>integer</code> metrics. The returned value will be a <code>float</code>, as it represents a rate over time.</p> <p>Dependency</p> <p>The <code>diffps()</code> function requires a previous value for the metric to compute the difference. Therefore this expression will only start if a previous value is available.</p>"},{"location":"lang/functions/diffps/#syntax","title":"Syntax:","text":"<pre><code>&lt;numeric_metric&gt;.diffps()\n</code></pre>"},{"location":"lang/functions/diffps/#example","title":"Example:","text":"<pre><code>// Calculate the number of new errors per second since the last check\nvar.error_rate_per_second = item.error_count.diffps()\n\ncase var.error_rate_per_second &gt; 0.0:\n    return WARNING, \"Errors detected at rate: @var.error_rate_per_second /s\"\n</code></pre>"},{"location":"lang/functions/div/","title":"Function: <code>div</code>","text":"<p>The <code>div()</code> function performs floating-point division, dividing one number by another. It always returns a <code>float</code> value, even if both operands are integers.</p> <p>If you require floor division, use the fdiv() function instead.</p>"},{"location":"lang/functions/div/#syntax","title":"Syntax:","text":"<pre><code>&lt;numerator&gt;.div(&lt;denominator&gt;)\n</code></pre> <p>Division by Zero</p> <p>If the denominator is <code>0</code>, the <code>div()</code> function will result in an error. You should handle this case using the nullish coalescing operator (<code>??</code>) to provide a default value or specific case logic to avoid runtime errors.</p> <p>This example calculates an error rate by dividing the <code>error_count</code> by the metric <code>time_span</code>.</p>"},{"location":"lang/functions/div/#example","title":"Example:","text":"<pre><code>// Calculate the error rate by a second metric providing the time span\nvar.error_rate = item.error_count.div(item.time_span)\n\ncase var.error_rate &gt; 0.1:\n    return WARNING, \"Error rate is high: @var.error_rate\"\n\ncase var.error_rate &gt; 0:\n    return NOTICE, \"Errors detected at a rate of: @var.error_rate\"\n\n// Implicitly returns OK if error_rate is 0\nreturn OK\n</code></pre>"},{"location":"lang/functions/endswith/","title":"Function: <code>endswith</code>","text":"<p>The <code>endswith()</code> function checks if a string ends with a specified substring. It returns <code>true</code> if the string ends with the given substring, and <code>false</code> otherwise. This comparison is case-sensitive.</p> <p>For case-insensitive matching, you can combine <code>endswith()</code> with the lower() or upper() functions.</p>"},{"location":"lang/functions/endswith/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.endswith(&lt;string&gt;)\n</code></pre>"},{"location":"lang/functions/endswith/#example","title":"Example:","text":"<pre><code>var.file_name = \"report.csv\"\n\ncase var.file_name.upper().endswith(\".CSV\"):\n    return DEBUG, \"File is a CSV: @var.file_name\"\n</code></pre>"},{"location":"lang/functions/fdiv/","title":"Function: <code>fdiv</code>","text":"<p>The <code>fdiv()</code> function performs floor division (also known as integer division), which divides one number by another and then rounds the result down to the nearest whole number.</p> <ul> <li>If both the numerator and denominator are integers, the function returns an <code>integer</code>.</li> <li>If either the numerator or denominator is a float, the function returns a <code>float</code>.</li> </ul>"},{"location":"lang/functions/fdiv/#syntax","title":"Syntax:","text":"<pre><code>&lt;numerator&gt;.fdiv(&lt;denominator&gt;)\n</code></pre> <p>Division by Zero</p> <p>If the denominator is <code>0</code>, the <code>fdiv()</code> function will result in an error. You should handle this case using the nullish coalescing operator (<code>??</code>) to provide a default value or specific case logic to avoid runtime errors.</p> <p>This example uses <code>fdiv()</code> to check if an HTTP status code falls outside the 2xx range (success codes).</p>"},{"location":"lang/functions/fdiv/#example","title":"Example:","text":"<pre><code>// Perform floor division: e.g., 200 fdiv 100 = 2, 301 fdiv 100 = 3\ncase item.statusCode.fdiv(100) != 2:\n    return WARNING, \"HTTP Status Code outside 2xx range: @var.status_code\"\n\n// If the status code is 2xx, return OK to clear or prevent an alert.\nreturn OK\n</code></pre>"},{"location":"lang/functions/imatch/","title":"Function: <code>imatch</code>","text":"<p>The <code>imatch()</code> function evaluates whether a string matches a specified regular expression at the beginning of a string. It returns <code>true</code> if any part of the string matches the pattern, and <code>false</code> otherwise. The match will be case in-sensitive.</p> <p>Regular expressions</p> <p>Regular expressions provide powerful pattern matching capabilities. It's crucial to understand basic regex syntax when using this function. If you need to search for a pattern anywhere within a string, you must explicitly anchor your regular expression pattern to allow for characters at the beginning (e.g., using <code>.*</code>).</p> <p>For case-sensitive matching, use the match() function instead.</p>"},{"location":"lang/functions/imatch/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.imatch(&lt;regular_expression&gt;)\n</code></pre>"},{"location":"lang/functions/imatch/#example","title":"Example:","text":"<pre><code>var.log_entry = \"System Error[53]: Disk full.\"\n\n// Test if error[X] is found, case in-sensitive\ncase var.log_entry.imatch(\".*error\\[\\d+\\]\"):\n    return WARNING, \"Error found: @var.log_entry\"\n</code></pre>"},{"location":"lang/functions/lower/","title":"Function: <code>lower</code>","text":"<p>The <code>lower()</code> function converts all uppercase characters in a string to their lowercase equivalents. It can be called on a single string or on a list of strings.</p> <ul> <li>When called on a string, it returns a new string with all characters converted to lowercase.</li> <li>When called on a list of strings, it returns a new list where each string element has been converted to lowercase.</li> </ul>"},{"location":"lang/functions/lower/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.lower()\n&lt;list_of_strings&gt;.lower()\n</code></pre>"},{"location":"lang/functions/lower/#example-1-single-string","title":"Example 1: Single String","text":"<pre><code>var.test_string = \"Hello World!\"\nvar.lower_case_string = var.test_string.lower()\n\ncase true:\n    // Render as: \"Lower case string: hello world!\"\n    return DEBUG, \"Lower case string: @var.lower_case_string\"\n</code></pre>"},{"location":"lang/functions/lower/#example-2-list-of-strings","title":"Example 2: List of Strings","text":"<pre><code>var.test_list = [\"Apple\", \"BANANA\", \"Cherry\"]\nvar.lower_case_list = var.test_list.lower()\n\n// Check if \"banana\" is present in the new lowercase list\ncase \"banana\" in var.lower_case_list:\n    return DEBUG, \"Yes, 'banana' is in the list!\"\n</code></pre>"},{"location":"lang/functions/match/","title":"Function: <code>match</code>","text":"<p>The <code>match()</code> function evaluates whether a string matches a specified regular expression at the beginning of a string. It returns <code>true</code> if any part of the string matches the pattern, and <code>false</code> otherwise.</p> <p>Regular expressions</p> <p>Regular expressions provide powerful pattern matching capabilities. It's crucial to understand basic regex syntax when using this function. If you need to search for a pattern anywhere within a string, you must explicitly anchor your regular expression pattern to allow for characters at the beginning (e.g., using <code>.*</code>).</p> <p>For case-insensitive matching, use the imatch() function instead.</p>"},{"location":"lang/functions/match/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.match(&lt;regular_expression&gt;)\n</code></pre>"},{"location":"lang/functions/match/#example","title":"Example:","text":"<pre><code>var.test_message = \"5262 - Test message\"\n\ncase var.test_message.match(\"\\d+\"):\n    return DEBUG, \"Starts with a number.\"\n</code></pre>"},{"location":"lang/functions/mod/","title":"Function: <code>mod</code>","text":"<p>The <code>mod()</code> function performs the modulo operation (remainder after division). This is useful for tasks like checking divisibility, cyclical behavior, or ensuring a value stays within a certain range.</p> <ul> <li>If both numbers are integers, the result will be an integer.</li> <li>If either number is a float, the result will be a float.</li> </ul>"},{"location":"lang/functions/mod/#syntax","title":"Syntax:","text":"<pre><code>&lt;operand&gt;.mod(&lt;modulus&gt;)\n</code></pre> <p>Modulo by Zero</p> <p>If the modulus is <code>0</code>, the <code>mod()</code> function will result in an error. You should handle this case using the nullish coalescing operator (<code>??</code>) to provide a default value or specific case logic to avoid runtime errors.</p>"},{"location":"lang/functions/mod/#example","title":"Example:","text":"<pre><code>var.my_number = 15\n\n// Check if the number is odd (remainder is 1 when divided by 2)\ncase var.my_number.mod(2) == 1:\n    return DEBUG, \"My number (@var.my_number) is odd.\"\n\n// Check if the number is even (remainder is 0 when divided by 2)\ncase var.my_number.mod(2) == 0:\n    return DEBUG, \"My number (@var.my_number) is even.\"\n</code></pre>"},{"location":"lang/functions/mul/","title":"Function: <code>mul</code>","text":"<p>The <code>mul()</code> function performs multiplication.</p> <ul> <li>If both numbers are integers, the result will be an integer.</li> <li>If either number is a float, the result will be a float.</li> </ul>"},{"location":"lang/functions/mul/#syntax","title":"Syntax:","text":"<pre><code>&lt;number&gt;.mul(&lt;number&gt;)\n</code></pre>"},{"location":"lang/functions/mul/#example","title":"Example:","text":"<pre><code>var.test_value = 7\nvar.new_value = var.test_value.mul(6)\n\ncase true:\n    // Render as: \"New value: 42\"\n    return DEBUG, \"New value: @var.new_value\"\n</code></pre>"},{"location":"lang/functions/ref/","title":"Function: <code>ref</code>","text":"<p>The <code>ref()</code> function allows you to access information from a parent item when a hierarchical relationship exists between items within the same check result. This is incredibly useful for creating alerts that consider the health or state of a related parent entity.</p> <p>For example, in a Kubernetes context, a container has a parent (its Pod). If an expression is running for the container, you can use <code>ref()</code> to retrieve metrics or properties directly from its associated Pod.</p>"},{"location":"lang/functions/ref/#syntax","title":"Syntax","text":"<pre><code>&lt;related_item_property&gt;.ref(&lt;parent_metric_name&gt;)\n</code></pre>"},{"location":"lang/functions/ref/#example","title":"Example","text":"<p>In this Kubernetes scenario, we have an expression evaluating a container. We want to check the status of its parent Pod and trigger an alert if the Pod is not running.</p> <pre><code>// Retrieve the 'status' metric from the container's parent Pod.\n// If the Pod or its status isn't found, default to \"Unknown\".\nvar.pod_status = item.pod.ref('status') ?? \"Unknown\"\n\n// If the Pod's status is not \"Running\", trigger an error alert.\ncase var.pod_status != \"Running\":\n    return ERROR, \"Pod for container @item.name has status: @var.pod_status\"\n</code></pre>"},{"location":"lang/functions/round/","title":"Function: <code>round</code>","text":"<p>The <code>round()</code> function returns a floating point number that is a rounded version of the specified number, with the specified number of decimals.</p>"},{"location":"lang/functions/round/#syntax","title":"Syntax:","text":"<pre><code>&lt;number&gt;.round(&lt;number&gt;)\n</code></pre>"},{"location":"lang/functions/round/#example","title":"Example:","text":"<pre><code>var.test_value = 5.426793\nvar.new_value = var.test_value.round(2)\n\ncase true:\n    // Render as: \"New value: 5.43\"\n    return DEBUG, \"New value: @var.new_value\"\n</code></pre>"},{"location":"lang/functions/startswith/","title":"Function: <code>startswith</code>","text":"<p>The <code>startswith()</code> function checks if a string begins with a specified substring. It returns <code>true</code> if the string starts with the given substring, and <code>false</code> otherwise. This comparison is case-sensitive.</p> <p>For case-insensitive matching, you can combine <code>startswith()</code> with the lower() or upper() functions.</p>"},{"location":"lang/functions/startswith/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.startswith(&lt;string&gt;)\n</code></pre>"},{"location":"lang/functions/startswith/#example","title":"Example:","text":"<pre><code>var.log_message = \"Error: Connection refused.\"\n\ncase var.log_message.lower().startswith(\"error\"):\n    return DEBUG, \"Log message indicates an error.\"\n</code></pre>"},{"location":"lang/functions/strip/","title":"Function: <code>strip</code>","text":"<p>The <code>strip()</code> function creates a new string with any leading, and trailing whitespaces removed.</p>"},{"location":"lang/functions/strip/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.strip()\n</code></pre>"},{"location":"lang/functions/strip/#example","title":"Example:","text":"<pre><code>var.original = \"\n  Test strip function!\n\"\nvar.stripped = var.original.strip()\n\ncase true:\n    // Render as: 'Message: \"Test strip function!\"'\n    return DEBUG, \"Message: \"\"@var.stripped\"\"\"\n</code></pre>"},{"location":"lang/functions/sub/","title":"Function: <code>sub</code>","text":"<p>The <code>sub()</code> function performs subtraction, subtracting one number from another.</p> <ul> <li>If both numbers are integers, the result will be an integer.</li> <li>If either number is a float, the result will be a float.</li> </ul>"},{"location":"lang/functions/sub/#syntax","title":"Syntax:","text":"<pre><code>&lt;number&gt;.sub(&lt;number&gt;)\n</code></pre>"},{"location":"lang/functions/sub/#example","title":"Example:","text":"<pre><code>var.test_value = 21\nvar.new_value = var.test_value.sub(6)\n\ncase true:\n    // Render as: \"New value: 15\"\n    return DEBUG, \"New value: @var.new_value\"\n</code></pre>"},{"location":"lang/functions/upper/","title":"Function: <code>upper</code>","text":"<p>The <code>upper()</code> function converts all lowercase characters in a string to their uppercase equivalents. It can be called on a single string or on a list of strings.</p> <ul> <li>When called on a string, it returns a new string with all characters converted to uppercase.</li> <li>When called on a list of strings, it returns a new list where each string element has been converted to uppercase.</li> </ul>"},{"location":"lang/functions/upper/#syntax","title":"Syntax:","text":"<pre><code>&lt;string&gt;.upper()\n&lt;list_of_strings&gt;.upper()\n</code></pre>"},{"location":"lang/functions/upper/#example-1-single-string","title":"Example 1: Single String","text":"<pre><code>var.test_string = \"Hello World!\"\nvar.upper_case_string = var.test_string.upper()\n\ncase true:\n    // Render as: \"Lower case string: HELLO WORLD!\"\n    return DEBUG, \"Lower case string: @var.upper_case_string\"\n</code></pre>"},{"location":"lang/functions/upper/#example-2-list-of-strings","title":"Example 2: List of Strings","text":"<pre><code>var.test_list = [\"Apple\", \"banana\", \"Cherry\"]\nvar.upper_case_list = var.test_list.upper()\n\n// Check if \"APPLE\" is present in the new uppercase list\ncase \"APPLE\" in var.upper_case_list:\n    return DEBUG, \"Yes, 'APPLE' is in the list!\"\n</code></pre>"},{"location":"lang/keywords/hit/","title":"Keyword: <code>hit</code>","text":"<p>The <code>hit</code> keyword provides the count of items that are currently triggering an alert within the scope of the current check and expression. This allows you to create alerts that respond to the number of affected items, rather than just individual item states.</p> <p>The value of <code>hit</code> ranges from <code>0</code> to the total number of items being evaluated with an alert as result.</p>"},{"location":"lang/keywords/hit/#example-limiting-alert-volume","title":"Example: Limiting Alert Volume","text":"<p>Consider a scenario where you want to be notified about errors, but prevent alert storms for widespread, minor issues.</p> <pre><code>case hit &gt; 5:\n    return OK // Suppress alerts if more than 5 interfaces are hitting the error condition\n\ncase item.errors == 0:\n    return OK // Close alerts for interfaces with no errors\n\nreturn NOTICE, \"Errors detected on interface: @item.name\"\n</code></pre> <p>This example effectively creates alerts for a maximum of five interfaces. Alerts for individual interfaces will automatically close when their errors resolve.</p>"},{"location":"lang/keywords/minute_hour_weekday/","title":"Keywords: <code>minute</code>, <code>hour</code>, <code>weekday</code>","text":"<p>InfraSonar provides dedicated keywords to make your alert expressions time-dependent. This is highly valuable for controlling when alerts are active.</p>"},{"location":"lang/keywords/minute_hour_weekday/#keyword-definitions","title":"Keyword Definitions:","text":"<ul> <li><code>minute</code>: A numeric (integer) value representing the current minute, ranging from <code>0</code> to <code>59</code>.</li> <li><code>hour</code>: A numeric (integer) value representing the current hour (in 24-hour format), ranging from <code>0</code> to <code>23</code>.</li> <li><code>weekday</code>: A string value representing the current day of the week (e.g., <code>\"Monday\"</code>, <code>\"Tuesday\"</code>, ..., <code>\"Sunday\"</code>).</li> </ul> <p>It is important to note that for all time-dependent keywords (<code>minute</code>, <code>hour</code>, <code>weekday</code>), the timezone of the container running the expression is used.</p>"},{"location":"lang/keywords/minute_hour_weekday/#example-time-based-alert-suppression","title":"Example: Time-Based Alert Suppression","text":"<p>This example demonstrates how to suppress alerts for new errors outside of typical business hours (Monday-Friday, 8:00 AM - 5:30 PM).</p> <pre><code>case weekday in ['Saturday', 'Sunday']:\n    return // Suppress all alerts on weekends\n\ncase hour &lt; 8:\n    return // Suppress all alerts before 8 AM\n\ncase hour &gt; 17:\n    case minute &gt; 30:\n        return // Suppress all alerts after 5:30 PM (17:30)\n\n// If none of the above conditions are met\ncase item.error_count.diff() &gt; 0:\n    return WARNING, \"Error(s) found on item: @item.name\"\n</code></pre> <p>This setup allows for precise control over when alerts are active, reducing noise during non-operational hours.</p>"},{"location":"lang/keywords/new/","title":"Keyword: <code>new</code>","text":"<p>The <code>new</code> keyword allows you to identify whether an item is being detected for the first time by InfraSonar.</p> <p>The <code>new</code> keyword evaluates to <code>true</code> if the item has no previous historical data in InfraSonar, and <code>false</code> otherwise.</p>"},{"location":"lang/keywords/new/#example-alerting-on-new-items","title":"Example: Alerting on New Items","text":"<p><pre><code>case new:\n    return DEBUG, \"New item detected: @item.name\"\n</code></pre> a In this example, an alert will be triggered only when <code>@item.name</code> is discovered by InfraSonar for the very first time.</p>"},{"location":"lang/keywords/new/#important-note-on-testing","title":"Important Note on Testing:","text":"<p>The <code>new</code> keyword relies on an item's historical presence within the InfraSonar system. Consequently, the <code>new</code> keyword will always evaluate to <code>false</code> during expression testing.</p> <p>Therefore, when testing expressions that include the <code>new</code> keyword, keep in mind that the case statement will not trigger based on new: <code>true</code>. You may need to temporarily adjust your test cases or logic to account for this.</p>"},{"location":"lang/keywords/now/","title":"Keyword: <code>now</code>","text":"<p>The <code>now</code> keyword provides the current Unix timestamp (the number of seconds that have elapsed since the Unix epoch - January 1, 1970, 00:00:00 UTC) as an integer to the expression.</p> <p>It is intentionally an integer, as the precision of monitoring checks and the practical need for time comparisons in expressions are generally at the second level.</p>"},{"location":"lang/keywords/now/#example","title":"Example","text":"<pre><code>case item.log_time &lt; now.sub(3600):\n    return DEBUG, \"Log time older than one hour: @fmt.item.log_time\"\n\ncase item.log_time &gt; now:\n    return DEBUG, \"Log time in the future: @fmt.item.log_time\"\n</code></pre>"},{"location":"lang/keywords/ticks/","title":"Keyword: <code>ticks</code>","text":"<p>The <code>ticks</code> keyword represents the number of consecutive times an item has triggered an alert for a specific expression.</p> <p>This keyword is particularly useful for implementing escalating severities or delaying alerts, allowing you to react differently based on the persistence of an issue.</p>"},{"location":"lang/keywords/ticks/#example-escalating-cpu-alert-severity","title":"Example: Escalating CPU Alert Severity","text":"<p>This example demonstrates how to increase the alert severity for high CPU usage over time.</p> <pre><code>var.message = \"CPU usage consistently too high\" // Updated message for clarity\n\ncase item.cpu_usage &gt; enodo.cpu_usage?.upper:\n    // If CPU has been high for more than 10 consecutive checks\n    case ticks &gt; 10:\n        return CRITICAL, var.message\n    // If CPU has been high for more than 5 consecutive checks\n    case ticks &gt; 5:\n        return ERROR, var.message\n    // Initial alert for high CPU usage\n    return WARNING, var.message\n\n// Close the alert when CPU usage returns to normal\nreturn OK\n</code></pre> <p>This setup ensures that minor, transient spikes might only generate a warning, while persistent high CPU usage will automatically escalate to higher severities, drawing more urgent attention.</p>"},{"location":"lang/special_cases/compare_with_another_item/","title":"Compare with Another Item (<code>other</code> keyword)","text":"<p>InfraSonar allows you to compare the current item's metrics against metrics of another item within the same check result using the <code>other</code> keyword. This is particularly useful for scenarios where you need to verify consistency across multiple instances of a service or application (e.g., ensuring all instances run the same version).</p> <p>This feature is often used in conjunction with the \"Single Alert\" option to consolidate notifications when an inconsistency is found among multiple items.</p> <pre><code>var.message = \"\nVersion mismatch: @item.name (v@item.version) vs. @other.name (v@other.version)\n\"\n\n// Example: Alert if item's version does not match 'other' item's version\ncase item.version != other.version:\n    return ERROR, var.message\nreturn OK\n</code></pre>"},{"location":"lang/special_cases/compare_with_another_item/#how-other-works","title":"How <code>other</code> Works:","text":"<p>When an expression uses the <code>other</code> keyword, InfraSonar internally manages its evaluation to enable cross-item comparisons:</p> <ol> <li>Selection of other: For each evaluation cycle, InfraSonar selects one item from the current check result to be designated as other.</li> <li>Iterative Comparison: The expression is then executed for every other item in the check result, where item refers to the current item being evaluated, and other refers to the pre-selected item from step 1.</li> <li>Single Item Edge Case: If there is only one item present in the check result, <code>other</code> will be assigned the same item as <code>item</code>. In this specific scenario, <code>item.metric == other.metric</code> will always evaluate to <code>true</code>, ensuring that the condition will be able to automatically close any previous alert which can happen when items are removed. This prevents unnecessary alerts when only one instance exists.</li> </ol> <p>By using <code>other</code>, you can detect inconsistencies across your monitored items effectively.</p>"},{"location":"lang/special_cases/cross_item_data/","title":"Cross-Item Data","text":"<p>InfraSonar expressions are evaluated for each individual item. However, there are scenarios where you need to reference the state or metrics of other items within the same check result before deciding to raise an alert. InfraSonar exposes the full check result, allowing you to access data from other items.</p> <p>The syntax for retrieving a specific metric from another item is:</p> <pre><code>result.&lt;type-name&gt;.get(\"&lt;item-name&gt;\", \"&lt;metric-name&gt;\")\n</code></pre> <p>Note: If the <code>&lt;type-name&gt;</code> is optional, it might be <code>null</code> so in that case you should mark the type-name as optional with a question mark (<code>?</code>).</p> <p>Consider a setup with two critical services, <code>\"Primary\"</code> and <code>\"Secondary\"</code>, each having a <code>Started</code> metric. You want to trigger an alert only if both services are not started.</p> <pre><code>// Define a variable for the 'Started' metric of the \"Secondary\" service\n// Use '?? false' to default to false if 'Secondary' service or 'Started'\n// metric is not found\nvar.secondaryStarted = result.services.get(\"Secondary\", \"Started\") ?? false\n\n// This expression logic is designed to run only when evaluating\n// the \"Primary\" service item.\n// If the current item is not \"Primary\", we exit without action.\ncase item.name != \"Primary\":\n    return\n\n// If either the \"Primary\" service is Started OR the \"Secondary\" service\n// is Started, then both are not down, so we return OK\n// (close any existing alert).\ncase item.Started:\ncase var.secondaryStarted:\n    return OK\n\n// If neither of the above conditions are met, it means:\n// 1. The current item IS \"Primary\".\n// 2. \"Primary\".Started is false.\n// 3. \"Secondary\".Started (var.secondaryStarted) is false.\n// Therefore, both services are down.\nreturn ERROR, \"Both the primary and secondary service are down\"\n</code></pre> <p>This powerful feature allows you to define complex cross-item alert conditions within a single expression.</p>"},{"location":"lang/special_cases/item_missing/","title":"Item Missing","text":"<p>While most expressions evaluate live data, InfraSonar also allows you to define conditions specifically for \"item missing\" alerts. This means an expression can trigger when an item that was previously detected is no longer reporting data or has disappeared.</p> <p>When defining an \"item missing\" condition, the expression is evaluated for each item that is currently missing (i.e., not found in the latest check result, but was present in the previous one).</p> <p>The <code>item</code> variable within this context will contain the last known data of the missing item from its previous successful check.</p> <p>The <code>prev</code> variable will always be <code>null</code> in an \"item missing\" expression, as there is no current data point to compare against a previous one. Therefore, <code>prev</code> cannot be used in these expressions.</p> <p>This feature is crucial for detecting outages or accidental deletions of expected items.</p>"},{"location":"privacy-security/privacy/","title":"Our Commitment to Your Privacy","text":"<p>At InfraSonar, safeguarding your privacy is paramount. This page outlines our practices and provides guidance on how you can further enhance your privacy within our platform.</p>"},{"location":"privacy-security/privacy/#your-data-your-control","title":"Your Data, Your Control","text":"<p>We recognize that your data belongs to you. We process it solely in accordance with our agreements. You have full control over your user-related information, including the ability to manage and delete it.</p>"},{"location":"privacy-security/privacy/#restricted-access-user-best-practices","title":"Restricted Access &amp; User Best Practices","text":"<p>To ensure maximum privacy, we limit access to user data to a select group of InfraSonar employees.</p> <p>We strongly encourage you to implement the same principle within your InfraSonar environment, granting users access only to the resources they require.</p>"},{"location":"privacy-security/privacy/#transparent-data-practices","title":"Transparent Data Practices","text":"<p>We maintain transparency regarding data collection and usage. We adhere to regulations like the GDPR and follow privacy best practices. We only collect data essential for the platform's operation, leaving you to decide which monitoring data to gather.</p> <p>We are committed to your privacy and will never sell your customer or service data to third parties.</p>"},{"location":"privacy-security/privacy/#data-retention-policies","title":"Data Retention Policies","text":"<p>InfraSonar employs specific retention periods for various data types:</p> <ul> <li>Configuration Data:<ul> <li>Stored as configured.</li> <li>No historical records are retained for configuration changes other then in our logging.</li> </ul> </li> <li>Time Series Data (SiriDB):<ul> <li>Performance data for actively monitored assets is retained for 66 weeks (approximately 15 months).</li> <li>Time series data inactive for three weeks is automatically purged.</li> </ul> </li> <li>Closed Alerts:<ul> <li>Retained for 8 weeks.</li> </ul> </li> <li>State Data:<ul> <li>Stored in memory and considered volatile.</li> </ul> </li> <li>Backup Retention:<ul> <li>SiriDB backups: 4-day retention.</li> <li>Configuration data backups: 8-week retention.</li> </ul> </li> </ul> <p>## Data Localization within the EU</p> <p>All data collected by InfraSonar is stored within the European Union, ensuring compliance with the GDPR.</p>"},{"location":"privacy-security/security_considerations/","title":"Security Overview","text":"<p>InfraSonar is an infrastructure monitoring platform as a service. This document outlines security considerations to keep in mind when deploying InfraSonar. Our primary focus is on securely retrieving monitoring data and sending it to the InfraSonar cloud platform for analysis.</p>"},{"location":"privacy-security/security_considerations/#data-collection-and-use","title":"Data Collection and Use","text":"<p>probes, agents and services</p> <ul> <li>InfraSonar collectors (probes, agents and services) gather data relevant to the status and performance of the monitored device. We do not collect extraneous data.</li> <li>Our open-source collectors allow for easy auditing of data retrieval methods.</li> </ul> <p>Note</p> <p>InfraSonar is not an IT automation tool and cannot modify the monitored environment. However, some implementations use the InfraSonar API to integrate with on-premises automation solutions like Ansible, ensuring a central configuration management point.</p>"},{"location":"privacy-security/security_considerations/#understanding-the-context","title":"Understanding the Context","text":"<p>For a clear understanding of this security document, consider the following:</p> <ul> <li>InfraSonar collects monitoring data through:<ul> <li>Probes running in Docker containers on a monitoring appliance.</li> <li>Agents sending data via the InfraSonar API</li> <li>Services running in the InfraSonar cloud platform that autonomously retrieve monitoring data.</li> </ul> </li> <li>Collected data is sent to the InfraSonar platform for analysis and user access through the InfraSonar frontend.</li> <li>The platform architecture is explained in more detail in the Platform Guide.</li> </ul>"},{"location":"privacy-security/security_considerations/#infrasonar-security-design-principles","title":"InfraSonar Security Design Principles","text":"<p>Our development team adheres to the following security principles:</p> <ul> <li>Least Privilege: Use accounts with minimal access privileges to access monitoring data whenever possible.</li> <li>Vendor Standards: Utilize vendor-documented standards (APIs or management protocols) to query data.</li> <li>Credential Storage: When credentials are required, store them encrypted on the monitoring appliance.</li> <li>Customer Data Control: The customer or managed service provider controls access to InfraSonar data.</li> <li>Minimize Third-Party Libraries: Avoid using third-party libraries whenever possible.</li> <li>Security Scanning: Integrate security scanners into our version control system for all projects.</li> <li>Security Issue Prioritization: Security vulnerabilities are addressed with the highest priority.</li> </ul>"},{"location":"privacy-security/security_considerations/#data-states","title":"Data States","text":"<p>InfraSonar processes large amounts of monitoring data used for historical analysis, such as identifying trends. We strive to secure all collected data as if it were sensitive.</p> <p>InfraSonar data can exist in three states:</p> <ul> <li>Data at Rest: Data not currently being accessed, stored on a physical or logical medium. InfraSonar stores data on AES256 encrypted disks within its cloud platform. The appliance itself does not have disk encryption but uses file-based encryption where possible.</li> <li>Data in Transit: Data transferred between devices. Encrypted SSL is used for all data communication between InfraSonar services. Data collected by probes might be unencrypted, as some data collection technologies don't support encryption (e.g., SNMP v2c).</li> <li>Data in Use: Data actively used by applications for analysis or user access. Readable data formats are necessary for data in use, especially for end-user consumption. Automated data processing occurs in data centers that comply with various security certifications, including (but not limited to):<ul> <li>ISO/IEC 27001</li> <li>ISO/IEC 27017</li> <li>ISO/IEC 27018</li> <li>SOC 2</li> <li>SOC 3</li> </ul> </li> </ul> <p>The InfraSonar appliance relies on the security measures of the environment it's deployed in to protect data at rest.</p>"},{"location":"privacy-security/security_considerations/#data-classification","title":"Data Classification","text":"<p>InfraSonar data is classified as follows:</p> <ul> <li> Restricted<ul> <li>Configuration data containing (encrypted) credentials stored on the monitoring appliance.</li> <li>Log data potentially containing user IDs stored on the appliance.</li> <li>InfraSonar account lists.</li> </ul> </li> <li> Sensitive<ul> <li>Time series data and performance metrics collected on monitored assets/hosts.</li> <li>State data.</li> <li>InfraSonar platform source code.</li> <li>CRM data.</li> <li>Contracts.</li> </ul> </li> <li> Internal<ul> <li>InfraSonar back office data, such as invoices.</li> <li>InfraSonar support incidents.</li> <li>InfraSonar Slack and email communication.</li> </ul> </li> <li> Public<ul> <li>InfraSonar open-source code:<ul> <li>SiriDB, time series database used by InfraSonar.</li> <li>ThingsDB, backend database used by InfraSonar.</li> <li>InfraSonar, collectors.</li> </ul> </li> <li>InfraSonar documentation</li> </ul> </li> </ul>"},{"location":"privacy-security/security_considerations/#securing-your-monitoring-appliance","title":"Securing Your Monitoring Appliance","text":"<p>Since many monitoring vendors don't support \"least privilege\" data collection, the appliance hosting InfraSonar probes and agentcore requires extra security measures. These probes often rely on privileged accounts, increasing the attack surface.</p> <p>Here's how to strengthen your monitoring appliance's security:</p>"},{"location":"privacy-security/security_considerations/#ssh-access","title":"SSH Access","text":"<ul> <li>Enforce SSH Key-Based Authentication: Eliminate password logins and utilize SSH keys for secure access.</li> <li>Disable Passwordless Login Requests: Prevent users from requesting passwordless logins.</li> <li>Restrict SSH Root Logins: Disable root access via SSH entirely.</li> <li>Upgrade to SSH Protocol 2: Ensure you're using the more secure SSHv2 protocol.</li> <li>Set SSH Session Timeouts: Automatically disconnect idle SSH connections after a set time.</li> <li>Limit SSH Access: Restrict access to authorized users or user groups only.</li> <li>Implement Login Attempt Throttling: Limit login attempts to prevent brute-force attacks.</li> </ul>"},{"location":"privacy-security/security_considerations/#system-maintenance","title":"System Maintenance","text":"<ul> <li>Regular OS Updates: Apply timely updates to your underlying Linux operating system to patch vulnerabilities.</li> <li>Daily InfraSonar Updates: Utilize a daily pull command to ensure you have the latest InfraSonar container images.</li> <li>Use Latest Tags (Unless Specified): By default, leverage the latest tag for InfraSonar containers for automatic updates. Opt-out only if instructed by InfraSonar support due to specific version requirements.</li> <li>Version Pinning Notification: If your company enforces version pinning, notify InfraSonar support to receive explicit update notifications.</li> <li>Regular Probe Password Rotation: Change the passwords used by InfraSonar probes frequently.</li> </ul>"},{"location":"privacy-security/security_considerations/#physical-security","title":"Physical Security:","text":"<ul> <li>Disk Encryption (if possible): If your hardware or operating supports it, consider disk encryption for additional data protection.</li> <li>Backup consideration: If a backup of your appliance is for some reason accessible to unauthorized personal you assume all configured accounts as compromised and act accordingly. At a minimum you should change all passwords immediately and verify all security logs for unauthorized access. </li> </ul> <p>These recommendations will significantly enhance the security posture of your monitoring appliance and minimize the risk associated with privileged access requirements.</p>"},{"location":"support/","title":"Index","text":""},{"location":"support/#support","title":"Support","text":"<p>We understand that questions and challenges can arise, and we're here to help. As a Netherlands-based European company, we're committed to providing you with reliable support.</p> <p>Feel free to reach out to our team via phone, email, or join our active Slack community. We're available Monday through Friday, from 8:00 AM to 5:00 PM CET <sup>1</sup>, to ensure you get the assistance you need.</p>"},{"location":"support/#contact-details","title":"Contact details","text":"<p> support@infrasonar.com</p> <p> +31 85 876 8733</p> <p> Slack, mail </p> <ol> <li> <p>Different times are possible by appointment.\u00a0\u21a9</p> </li> </ol>"},{"location":"support/consultancy/","title":"Consultancy","text":""},{"location":"support/consultancy/#consultancy-services","title":"Consultancy Services","text":""},{"location":"support/consultancy/#streamlined-implementation","title":"Streamlined Implementation","text":"<p>Implementing a robust monitoring solution doesn't have to be daunting. Our experienced implementation consultants are here to guide you through every step. We go beyond simply installing InfraSonar; we analyze your existing infrastructure and processes to seamlessly integrate the platform, ensuring optimal performance and efficiency.</p> <p>As infrastructure specialists, we understand the complexities of your environment. We'll work closely with you to address any specific requirements and collaborate on designing customized InfraSonar dashboards that provide the precise insights you need.</p>"},{"location":"support/consultancy/#data-driven-insights-analysis","title":"Data-Driven Insights &amp; Analysis","text":"<p>InfraSonar's strength lies in its ability to analyze vast amounts of monitoring data and create custom dashboards for a comprehensive view of your infrastructure. However, navigating this data can be challenging. That's where our analysis support comes in.</p> <p>We'll partner with you to dissect your data, ask the right questions, and uncover hidden patterns. Through collaborative analysis, we'll help you gain deeper insights, identify potential issues proactively, and optimize your infrastructure for peak performance.</p>"},{"location":"support/development/","title":"Custom collectors","text":""},{"location":"support/development/#custom-development","title":"Custom development","text":"<p>InfraSonar is an open platform</p> <p>A InfraSonar is an open platform adding custom probes, agents and or services to our platform is easily done.</p>"},{"location":"support/development/#your-collector-needs-covered-by-us","title":"Your collector needs covered by us","text":"<p>We understand that every environment is unique, and sometimes, standard monitoring tools just don't cut it. That's where we come in. We offer a specialized service to help you develop custom data collectors, allowing you to monitor the specific metrics that matter most to your business.</p> <p>Imagine being able to track the performance of that custom application you built, or get detailed insights from a specialized piece of hardware. With our team's expertise, we can turn those monitoring needs into reality. We'll work closely with you to understand your requirements, and provided we have the necessary information, we aim to deliver an initial, functional version of your custom data collector within just two weeks.</p> <p>If your custom collector addresses a need shared by a wider audience, we'll integrate it into our core product at no extra cost. This means you not only get the precise monitoring you need, but you also contribute to a more comprehensive solution for everyone.</p> <p>Contact our support team to learn more about this unique service.</p>"},{"location":"support/remote_support/","title":"Remote support","text":"<p>We provide extensive remote support specifically tailored to your infrastructure monitoring needs.</p> <p>Our team is dedicated to helping you get the most out of InfraSonar. </p> <p>We begin by expertly guiding you through the initial setup process, ensuring a smooth and efficient start. </p> <p>Following setup, we provide comprehensive assistance in configuring InfraSonar to precisely align with your unique environment and monitoring requirements. </p> <p>Understanding alerts and notifications is crucial, and we're here to help you make sense of them, enabling you to proactively address potential issues. </p> <p>Furthermore, we empower you to extend your monitoring capabilities by providing support in developing custom collectors, allowing InfraSonar to monitor even the most specialized aspects of your infrastructure. </p> <p>As a standard part of our service, you can rely on our responsive email support for any questions or assistance you may need. </p> <p>For more direct support, we offer optional paid services, including remote sessions where our experts can connect directly to your system to provide hands-on guidance and accelerate issue resolution. In specific, critical situations where remote support may not be sufficient, we also offer on-site visits to provide direct, in-person expertise, subject to availability and additional terms.</p>"},{"location":"support/training/","title":"Training","text":""},{"location":"support/training/#training","title":"Training","text":"<p>Master Your Infrastructure Monitoring</p> <p>We offer a comprehensive training program designed to empower you with the knowledge and skills to effectively utilize InfraSonar for comprehensive infrastructure monitoring. Our courses cater to various roles and experience levels, ensuring that you gain the specific expertise needed to optimize your monitoring strategy.</p>"},{"location":"support/training/#training-tracks","title":"Training Tracks","text":""},{"location":"support/training/#infrasonar-fundamentals","title":"InfraSonar Fundamentals","text":"<ul> <li>Target Audience: New InfraSonar users, system administrators, IT operators.</li> <li>Course Content:<ul> <li>Introduction to InfraSonar's architecture and core concepts.</li> <li>Asset management, labeling, and collector deployment.</li> <li>Condition creation and alert configuration.</li> <li>Dashboard customization and data visualization.</li> <li>Basic troubleshooting and maintenance.</li> </ul> </li> </ul>"},{"location":"support/training/#infrasonar-advanced-administration","title":"InfraSonar Advanced Administration","text":"<ul> <li>Target Audience: Experienced InfraSonar users, system administrators, IT managers.</li> <li>Course Content:<ul> <li>Advanced condition scripting and alert customization.</li> <li>Multi-tenant configuration and management.</li> <li>Integration with external systems (e.g., ticketing, automation).</li> <li>Performance tuning and optimization.</li> <li>Security best practices and data privacy.</li> </ul> </li> </ul>"},{"location":"support/training/#infrasonar-for-msps-managed-service-providers","title":"InfraSonar for MSPs (Managed Service Providers)","text":"<ul> <li>Target Audience: MSPs, service providers, IT consultants.</li> <li>Course Content:<ul> <li>Leveraging InfraSonar for multi-client monitoring.</li> <li>Efficient onboarding and management of client environments.</li> <li>Customizing dashboards and reports for clients.</li> <li>Billing and reporting integration.</li> <li>Best practices for delivering managed monitoring services.</li> </ul> </li> </ul>"},{"location":"support/training/#delivery","title":"Delivery","text":"<p>We offer flexible training options to suit your needs and preferences:</p> <ul> <li>On-Site Training: For larger groups or when hands-on interaction is preferred, we can conduct customized training sessions at your location. These sessions are tailored to your specific environment and learning objectives.</li> <li>Virtual Instructor-Led Training (VILT): Our interactive online sessions, led by expert instructors, provide a convenient and engaging learning experience, regardless of your location. </li> </ul> <p>Contact us to discuss your training needs and schedule a session that best fits your team.</p>"},{"location":"wiki/microsoft_sql_allowing_autoclose_on_sql_server_databases/","title":"Microsoft SQL - Allowing AutoClose on SQL Server Databases","text":"<p>source Original author: Michael K. Campbell</p> <p>Simply stated, allowing or enabling AutoClose on production SQL Server databases is a worst practice.</p>"},{"location":"wiki/microsoft_sql_allowing_autoclose_on_sql_server_databases/#what-is-autoclose-why-is-it-bad","title":"What is AutoClose &amp; Why is It Bad?","text":"<p>AutoClose is a database option or setting \u2013 set on a database by database basis (meaning that it can\u2019t be controlled at the server level).</p> <p>According to Books Online:</p> <p>When set to ON, the database is shut down cleanly and its resources are freed after the last user exits. The database automatically reopens when a user tries to use the database again.</p> <p>When set to OFF, the database remains open after the last user exits.</p> <p>Since most Sys Admins and DBAs I know (or work with) tend to be wired for optimization, the prospect of cleanly tearing down a database after users are no longer in it seems to make all sorts of logical sense.</p> <p>The problem, however, is that there is minimal cost and overhead associated with not only tearing down existing connections, file-handles, and buffer allocations in order to \u2018shut down\u2019 a database when it auto-closes, but there can also be significant overhead involved in spinning a database back up when it\u2019s accessed by subsequent applications or users.</p> <p>In fact, if you think about the benefits of how SQL Server connection pooling works from within .NET applications \u2013 the entire purpose of connection pooling is designed to amortize the COST of making expensive, initial, connections to SQL Server databases over multiple requests.</p> <p>As such, it makes no sense to allow production databases to automatically turn themselves off when active connections stop \u2013 especially if a new connection might spin up within just a few seconds (or even milliseconds) after the AutoClose procedure terminates.</p> <p>Accordingly, while AutoClose may seem like it makes a lot of sense, it can actually cause performance problems \u2013 to the point where it\u2019s among the first-things I\u2019ll check when troubleshooting performance for clients.</p> <p>Likewise, I\u2019m also not a fan of the fact that when AutoClose is on you\u2019ll start to see potentially gobs of SQL Server log entries to the tune of \u201cStarting up database \u201d. (My rule of thumb is to try and keep Log File entries as \u2018clutter free\u2019 as possible to enable higher signal-to-noise ratios when the logs are being scanned for potential problems.)</p> <p>That, and since many SQL Server DMVs that are useful in troubleshooting, tuning, and validating the removal of potentially non-used objects, have their data/values \u2018reset\u2019 each time a database is taken offline, there are other, ugly, side-effects that come with routinely allowing SQL Server to take databases offline.</p>"},{"location":"wiki/microsoft_sql_allowing_autoclose_on_sql_server_databases/#but-doesnt-sql-server-2005-remove-performance-overhead-of-autoclose","title":"But Doesn\u2019t SQL Server 2005+ REMOVE Performance Overhead of AutoClose?","text":"<p>According to Books Online:</p> <p>In earlier versions of SQL Server, AUTO_CLOSE is a synchronous process that can degrade performance when the database is accessed by an application that repeatedly makes and breaks connections to the Database Engine. Starting in SQL Server 2005, the AUTO_CLOSE process is asynchronous; repeatedly opening and closing the database no longer reduces performance.</p> <p>While that may appear to contradict most of what I just said, it\u2019s sadly misleading. Yes, SOME of the performance costs I mentioned above are now gone by means of the fact that SQL Server can more adeptly shut-down a database.</p> <p>But the overhead/cost of establishing new connections still remains, AND the bigger problem is that SQL Server now has to load data back into the buffer to satisfy queries, and any queries fired against the database itself have to be re-compiled as well.</p> <p>Translation: The SQL Server 2005+ ENGINE might not block/choke when doing the \u2018AutoClose Shuffle\u2019, but ALL of the performance penalties and negatives of allowing/enabling AutoClose still remain \u2013 making it a worst practice.</p>"},{"location":"wiki/microsoft_sql_allowing_autoclose_on_sql_server_databases/#how-do-databases-get-set-to-autoclose","title":"How Do Databases Get Set to AutoClose?","text":"<p>By default, databases created by SQL Server aren\u2019t set to AutoClose by default (unless your model database has been explicitly set to enable AutoClose). But, databases that may have been \u2018upsized\u2019 from SQL Server 2000 MSDE instances and databases created on SQL Server Express are set to AutoClose by DEFAULT.</p> <p>And, in the case of databases that were designed to be deployed on mobile laptops without full-blown \u2018server\u2019 capabilities, I think you COULD argue that it sort of makes sense that AutoClose might be beneficial. Only, if you\u2019re THAT worried about reclaiming resources, you\u2019re better off just shutting down SQL Server when it\u2019s not in use because it already does a fantastic job of yielding resources on a heavily used box when a given database is NOT being used. (SQL Server itself is very \u2018friendly\u2019 in this same fashion and I think that with modern, non 8086 processors and RAM, SQL Server is just fine being \u2018left\u2019 running on most boxes anyhow.)</p> <p>Another scenario, however, where databases may be set to AutoClose is when non-SQL Server-savvy sysadmins or DBAs are in poking around with database properties and settings, see the \u2018Auto Close\u2019 option, read about how it \u2018returns resources to the server\u2019 in Books Online, and think that turning this option on makes tons of sense. And, frankly, who could blame them \u2013 Books Online does NOT do a good enough job of warning readers that turning AutoClose on is a BAD idea on production servers.</p>"},{"location":"wiki/microsoft_sql_allowing_autoclose_on_sql_server_databases/#cases-where-autoclose-might-make-sense","title":"Cases Where AutoClose Might Make Sense","text":"<p>As with all things SQL Server, it\u2019s almost impossible to lay down blanket statements or truisms that will work for every use-case or scenario. Consequently, the point of this blog post was to point out why AutoClose for those who are inclined to think that allowing SQL Server to reclaim resources would make sense (without fully understanding the cost of what that means in practice).</p> <p>Accordingly, allowing production databases to run with AutoClose on is a worst practice \u2013 it can cause all sorts of performance problems and other issues/side-effects that you don\u2019t want in play on production databases.</p> <p>However, on dev or testing servers where there may be limited resources and multiple databases or test-cases that need to be addressed, setting databases to AutoClose can make sense in some cases \u2013 as long as it\u2019s possible to effectively define discrete periods of time where one database won\u2019t be used while another will. That said, I regularly beat up my own test/dev databases on a VMware host and NEVER bother with setting any of my databases to AutoClose \u2013 simply because the amount of resources that will be returned to SQL Server by shutting off a single database just doesn\u2019t merit the effort nor is it worth the risk that one of these databases might somehow make it into production with AutoClose turned on.</p> <p>Similarly, I think it could be (theoretically) argued that in some very rare and very well-thought-out edge cases that turning on AutoClose on a production server/database might make sense. But for 99.99% of production databases out there, this shouldn\u2019t even be a consideration. And, in the .01% of databases where this might even make sense to consider, I\u2019m guessing that in 99% of those cases, AutoClose will STILL be the wrong choice. So, only in the most theoretical and perfectly considered environment would AutoClose even begin to make sense on a production database \u2013 meaning that you really don\u2019t want to go there.</p>"},{"location":"wiki/microsoft_sql_auto_shrink_enabled/","title":"Microsoft SQL Auto-Shrink Enabled or Job has Shrink Steps","text":"<p>source</p> <p>Running out of disk space sucks.  SQL Server can help: it can automatically shrink databases to remove unused space.  However, this option has way more drawbacks than positives.  We check <code>sys.databases</code> to see if <code>is_auto_shrink_on = 1</code> for any of the databases.</p> <p>We can also create our own Agent jobs with <code>DBCC SHRINKDATABASE</code> or <code>SHRINKFILE</code> commands, too.  <code>sp_Blitz</code> also checks for jobs with those key words in the job steps.  It\u2019s not perfect \u2013 for example, it doesn\u2019t catch maintenance plans set up to shrink databases.</p> <p>Shrinking databases is the fastest way to achieve fragmentation.  SQL Server goes to the last page in the database, moves it to the first free available space, and then repeats the process again.  This shuffles the deck, putting your pages out of order.</p> <p>To make things worse, this is often combined with a nightly index rebuild process that puts indexes back in order again \u2013 but leaves free space behind.  The very next time shrink runs, it re-fragments everything, and your storage is stuck on the Hamster Wheel of Death.</p> <p>(That\u2019s a technical term.)</p>"},{"location":"wiki/microsoft_sql_auto_shrink_enabled/#why-shrinking-causes-problems-data-files-and-log-files","title":"Why Shrinking Causes Problems: Data Files and Log Files","text":""},{"location":"wiki/microsoft_sql_auto_shrink_enabled/#data-file-pain","title":"Data file pain","text":"<ul> <li>CPU, there\u2019s no such thing as a free shrink; they\u2019re usually expensive</li> <li>Disk I/O, heavy read and write churn to find highest allocated page and shove it as far forward as it can</li> <li>Log file, this is a fully logged operation. If your log file is on the same drive, you\u2019re going nowhere fast.</li> <li>Blocking, shrinks can block and be blocked</li> </ul>"},{"location":"wiki/microsoft_sql_auto_shrink_enabled/#log-files-are-a-slightly-different-animal","title":"Log files are a slightly different animal","text":"<ul> <li> <p>No pages</p> </li> <li> <p>Data segments called virtual log files (VLFs)</p> </li> </ul> <p>No Instant File Initialization</p> <ul> <li>Every growth causes I/O waits while SQL zeroes out the space</li> </ul> <p>Truncating for size reasons only</p> <ul> <li>They will likely grow to that size again</li> <li>Can be a long and painful process.</li> </ul>"},{"location":"wiki/microsoft_sql_auto_shrink_enabled/#to-fix-the-problem","title":"To Fix the Problem","text":"<p>If we\u2019re dealing with auto-shrink, in SQL Server Management Studio, you can right-click on each database and go into its properties to turn off auto-shrink.  This takes effect immediately. You can also change this setting with an <code>ALTER DATABASE</code> script setting <code>AUTO_SHRINK OFF</code>.</p> <pre><code>/*This will script out the command for you, check it and execute the output */\n\n    SELECT  'ALTER DATABASE ' + QUOTENAME(name) + ' SET AUTO_SHRINK OFF WITH NO_WAIT;' AS [To Execute]\n    FROM    sys.databases\n    WHERE   is_auto_shrink_on = 1;\nGO\n</code></pre> <p>This script only creates the T-SQL for your change: you still need to copy it and execute it.</p> <p>If we\u2019re dealing with an Agent job that does a shrink, comment out that line of the job step.</p> <p>After the change, you should see faster runtimes for index reorg/rebuild jobs and faster storage response times.</p>"},{"location":"wiki/microsoft_sql_checksum_vs_torn_page_detection/","title":"Microsoft SQL Checksum vs Torn Page Detection","text":"<p>microsoft_sql_checksum_vs_torn_page_detection</p> <p>The choice between Checksum and Torn Page Detection on your SQL server depends on your specific needs and priorities. Here's a breakdown of both options:</p>"},{"location":"wiki/microsoft_sql_checksum_vs_torn_page_detection/#checksum","title":"Checksum","text":"<ul> <li>Purpose: Verifies the data integrity of each page (8 KB block) in a database.</li> <li> <p>How it works: Calculates a checksum value for each page and compares it to the stored value. If there's a mismatch, it indicates potential data corruption.</p> </li> <li> <p>Pros:</p> <ul> <li>Provides a basic level of data integrity protection.</li> <li>Relatively lightweight, with minimal performance overhead.</li> </ul> </li> <li> <p>Cons:</p> <ul> <li>May not detect all types of data corruption, especially if the corruption only affects a small portion of a page.</li> <li>Can be less effective for large databases or those with frequent updates.</li> </ul> </li> </ul>"},{"location":"wiki/microsoft_sql_checksum_vs_torn_page_detection/#torn-page-detection","title":"Torn Page Detection","text":"<ul> <li>Purpose: Detects more severe data corruption that can result from hardware failures or software bugs.</li> <li> <p>How it works: Checks for inconsistencies between the header and footer of each page. If there's a mismatch, it indicates a torn page, which means the page may be partially overwritten or corrupted.</p> </li> <li> <p>Pros:</p> <ul> <li>Can detect more severe data corruption than checksums.</li> <li>More reliable for large databases or those with frequent updates.</li> </ul> </li> <li> <p>Cons:</p> <ul> <li>Can have a higher performance overhead than checksums.</li> <li>May not detect all types of data corruption, especially if the corruption is confined to a small area within a page.</li> </ul> </li> </ul>"},{"location":"wiki/microsoft_sql_checksum_vs_torn_page_detection/#recommendations","title":"Recommendations:","text":"<ul> <li>For most databases: Both Checksum and Torn Page Detection are recommended. Checksum provides a basic level of protection, while Torn Page Detection catches more severe corruption.</li> <li>For databases with high performance requirements: Consider disabling Torn Page Detection if the performance impact is significant. However, this should only be done if you have other mechanisms in place to monitor and detect data corruption.</li> <li>For databases with very high data integrity requirements: Both Checksum and Torn Page Detection should be enabled, and additional measures like backup and recovery plans should be in place.</li> </ul> <p>It's important to consider the performance overhead associated with TORN_PAGE_DETECTION. If you have a large database with high performance requirements, you may need to evaluate the trade-off between data integrity and performance. In some cases, disabling TORN_PAGE_DETECTION might be acceptable if you have other mechanisms in place to monitor and detect data corruption.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/","title":"Microsoft SQL server - determine which process is blocked","text":"<p>There are several ways to determine which process is blocked in Microsoft SQL Server:</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-the-sp_who-system-procedure","title":"Using the <code>sp_who</code> system procedure:","text":"<p>This procedure provides a snapshot of all active connections to the server. To check for blocked processes, look for the blocked column. A non-zero value indicates that the process is blocked. You can also use the <code>sp_who2</code> procedure for more detailed information.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-the-sysdm_exec_requests-dmv","title":"Using the <code>sys.dm_exec_requests</code> DMV:","text":"<p>This DMV provides detailed information about all running requests in the server. To check for blocked processes, look for the blocking_session_id column. A non-zero value indicates that the process is blocked by another process with that session ID.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-the-sysdm_os_wait_stats-dmv","title":"Using the <code>sys.dm_os_wait_stats</code> DMV:","text":"<p>This DMV provides information about the wait statistics for different types of waits in the server. To check for blocked processes, look for the wait_type column. Some wait types, such as <code>PAGEIOLATCH_EX</code> and <code>LCK</code>, often indicate blocking.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-the-sysdm_tran_locks-dmv","title":"Using the <code>sys.dm_tran_locks</code> DMV:","text":"<p>This DMV provides information about the locks held by different transactions in the server. To check for blocked processes, look for the request_session_id and request_mode columns. A request_mode of <code>CONVERT</code> or <code>UPDATE</code> often indicates a blocking request.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-the-dbcc-inputbuffer-command","title":"Using the <code>DBCC INPUTBUFFER</code> command:","text":"<p>This command displays the last statement executed by a specific session. To check for blocked processes, you can use the <code>DBCC INPUTBUFFER</code> command with the session ID of the blocked process to see what statement is causing the block.</p>"},{"location":"wiki/microsoft_sql_server_determine_which_process_is_blocked/#using-sql-server-profiler","title":"Using SQL Server Profiler:","text":"<p>SQL Server Profiler can capture events that occur in the server, including blocking events. You can configure Profiler to capture events related to blocking and analyze the trace log to identify the cause of the block.</p> <p>It's important to note that these methods provide different levels of detail and may require additional analysis to determine the root cause of the blocking. It's often helpful to combine multiple methods to get a complete picture of the situation.</p>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/","title":"Microsoft SQL server - Determining the Root Cause of Deadlocks","text":"<p>Deadlocks occur in SQL Server when two or more transactions are waiting for each other to release locks on resources. Here are some common approaches to identifying and resolving deadlock issues:</p>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#review-the-sql-server-error-log","title":"Review the SQL Server Error Log","text":"<ul> <li>Check for deadlock messages: These messages typically include information about the transactions involved, the resources they're contending for, and the deadlock victim.</li> <li>Look for patterns: If you see recurring deadlocks, it can help pinpoint the root cause.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#utilize-the-sysdm_exec_requests-dynamic-management-function-dmf","title":"Utilize the <code>sys.dm_exec_requests</code> Dynamic Management Function (DMF)","text":"<ul> <li>Monitor active requests: This DMF provides information about running queries, their blocking status, and the resources they're holding.</li> <li>Identify blocking chains: Look for circular dependencies where multiple transactions are blocking each other.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#analyze-the-sysdm_exec_deadlocks-dmf","title":"Analyze the <code>sys.dm_exec_deadlocks</code> DMF","text":"<ul> <li>Examine deadlock graphs: This DMF captures the deadlock graph at the time of the deadlock, showing the transactions involved, the resources they're waiting for, and the locks they're holding.</li> <li>Use tools like SQL Server Management Studio (SSMS) or third-party tools to visualize the deadlock graph and identify the root cause.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#enable-deadlock-detection-and-tracing","title":"Enable Deadlock Detection and Tracing","text":"<ul> <li>Set the <code>deadlock_trace</code> option: This enables SQL Server to capture deadlock information and write it to the error log.</li> <li>Use trace flags: Trace flags like <code>3604</code> can provide additional deadlock information.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#review-application-code-and-query-execution-plans","title":"Review Application Code and Query Execution Plans","text":"<ul> <li>Identify poorly performing queries: Deadlocks can sometimes be a symptom of inefficient queries that are holding resources for extended periods.</li> <li>Analyze execution plans: Look for queries that might be blocking other transactions due to excessive locking or resource contention.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#consider-index-optimization","title":"Consider Index Optimization","text":"<ul> <li>Ensure appropriate indexing: Well-designed indexes can help reduce blocking by minimizing the time transactions hold locks on data pages.</li> <li>Avoid index fragmentation: Regularly rebuild or reorganize indexes to improve query performance and reduce blocking.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#adjust-transaction-isolation-levels","title":"Adjust Transaction Isolation Levels","text":"<ul> <li>Use a lower isolation level: If appropriate, consider using a lower isolation level (e.g., <code>READ UNCOMMITTED</code>) to reduce blocking, but be aware of the potential for dirty reads.</li> <li>Balance isolation and concurrency: Choose an isolation level that strikes the right balance between data integrity and concurrency.</li> </ul>"},{"location":"wiki/microsoft_sql_server_determining_the_root_cause_of_deadlocks/#monitor-and-tune-application-behavior","title":"Monitor and Tune Application Behavior","text":"<ul> <li>Identify hotspots: Look for areas of your application that frequently experience deadlocks.</li> <li>Optimize application logic: Modify application code to avoid patterns that can lead to deadlocks, such as long-running transactions or excessive locking.</li> </ul> <p>By following these steps and carefully analyzing the information provided by SQL Server, you can effectively identify and address the root causes of deadlocks in your database.</p> <p>Would you like to delve deeper into any specific aspect of deadlock resolution?</p>"},{"location":"wiki/microsoft_windows_an-overview_of_troubleshooting_memory_issues/","title":"Microsoft - An Overview of Troubleshooting Memory Issues","text":"<p>source</p> <p>We've talked quite a bit in the past about various memory management concepts - the use of the /3GB switch, Understanding Pool Resources, the x86 Virtual Address Space and so on.  The most common manifestation of memory issues is a memory shortage - essentially a situation with insufficient resources. There are two types of memory pressure to consider - first, a system with too little physical RAM installed.  When a system has too little RAM, the Virtual Memory Manager has an increased workload as it attempts to keep the most recently accessed virtual memory pages of processes in Physical RAM so that they can be quickly retrieved.  Performance of both applications, and the overall system may suffer as a result of the increased paging to disk.  Although the excessive paging is really a secondary symptom, it is the easiest symptom to detect.  The second type of memory issue occurs when a process exhausts the available virtual memory.  This is most commonly referred to as a memory leak.  Most memory leaks are fairly easy to detect and are usually caused by software code defects.  However, normal system workload can also cause a memory depletion - there is no real memory leak, however overall virtual memory usage continues to grow until the system experiences a shortage.</p> <p>One of the problems with configuring and troubleshooting memory on a system is that the memory is not used in quite the same fashion as the other hardware on a system.  Program instructions and data occupy physical memory to execute.  Often, they will occupy physical memory locations long after they are actively addressed.  The idle code and data are removed from RAM only when new requests for physical memory addresses cannot be satisfied from existing free RAM.  Also, because of the manner in which virtual memory address space is mapped to physical memory on demand, RAM tends to appear fully utilized all the time.</p> <p>So now that we understand some of the mechanisms and how issues may manifest, how do we go about troubleshooting?  The first thing to understand is whether the problem is due to insufficient physical memory that results in excessive paging.  However, remember that excessive paging may occur even if there is plenty of available memory - for example if an application is leaking memory.  As we've mentioned before, it is important to have a baseline of your system's performance to compare to any new performance data that you gather.  Below are some of the key performance counters - the descriptions are pulled directly from the counter descriptions in Performance Monitor on Windows Vista:</p> Counter Name Description Values Memory \\ %Committed Bytes in Use % Committed Bytes In Use is the ratio of Memory \\ Committed Bytes to the Memory \\ Commit Limit. Committed memory is the physical memory in use for which space has been reserved in the paging file should it need to be written to disk. The commit limit is determined by the size of the paging file.  If the paging file is enlarged, the commit limit increases, and the ratio is reduced). This counter displays the current percentage value only; it is not an average. If this value is consistently over 80% then your page file may be too small (refer back to our post \" What is the Page File for anyway? \") Memory \\ Available Bytes Available Bytes is the amount of physical memory, in bytes, immediately available for allocation to a process or for system use. It is equal to the sum of memory assigned to the standby (cached), free and zero page lists. If this value falls below 5% of installed RAM on a consistent basis, then you should investigate.  If the value drops below 1% of installed RAM on a consistent basis, there is a definite problem! Memory \\ Committed Bytes Committed Bytes is the amount of committed virtual memory, in bytes. Committed memory is the physical memory which has space reserved on the disk paging file(s). There can be one or more paging files on each physical drive. This counter displays the last observed value only; it is not an average. Keep an eye on the trend of this value - if the value is constantly increasing without leveling off, you should investigate Memory \\ Pages / sec Pages/sec is the rate at which pages are read from or written to disk to resolve hard page faults. This counter is a primary indicator of the kinds of faults that cause system-wide delays.  It is the sum of Memory \\ Pages Input/sec and Memory \\ Pages Output/sec.  It is counted in numbers of pages, so it can be compared to other counts of pages, such as Memory\\Page Faults/sec, without conversion. It includes pages retrieved to satisfy faults in the file system cache (usually requested by applications) non-cached mapped memory files. This will depend on the speed of the disk on which the page file is stored.  If there are consistently more than 40 per second on a slower disk or 300 per second on fast disks you should investigate Memory \\ Pages Input / sec Pages Input/sec is the rate at which pages are read from disk to resolve hard page faults. Hard page faults occur when a process refers to a page in virtual memory that is not in its working set or elsewhere in physical memory, and must be retrieved from disk. When a page is faulted, the system tries to read multiple contiguous pages into memory to maximize the benefit of the read operation. Compare the value of Memory\\Pages Input/sec to the value of  Memory\\Page Reads/sec to determine the average number of pages read into memory during each read operation. This will vary - based on the disk hardware and overall system performance.  On a slow disk, if this value is consistently over 20 you might have an issue.  A faster disk can handle more Memory \\ Pool Nonpaged Bytes Pool Nonpaged Bytes is the size, in bytes, of the nonpaged pool, an area of system memory (physical memory used by the operating system) for objects that cannot be written to disk, but must remain in physical memory as long as they are allocated.  Memory\\Pool Nonpaged Bytes is calculated differently than Process \\ Pool Nonpaged Bytes, so it might not equal Process \\ Pool Nonpaged Bytes \\ _Total.  This counter displays the last observed value only; it is not an average. If Nonpaged pool is running at greater than 80%, on a consistent basis, you may be headed for a Nonpaged Pool Depletion issue (Event ID 2019) Memory \\ Pool Paged Bytes Pool Paged Bytes is the size, in bytes, of the paged pool, an area of system memory (physical memory used by the operating system) for objects that can be written to disk when they are not being used.  Memory \\ Pool Paged Bytes is calculated differently than Process \\ Pool Paged Bytes, so it might not equal Process \\ Pool Paged Bytes \\ _Total. This counter displays the last observed value only; it is not an average. Paged Pool is a larger resource than Nonpaged pool - however, if this value is consistently greater than 70% of the maximum configured pool size, you may be at risk of a Paged Pool depletion (Event ID 2020).  See our post \" Understanding Pool Resources \" for more details, including how to find out what your current maximum paged and nonpaged pool sizes are. Process (_Total) \\ Private Bytes Private Bytes is the current size, in bytes, of memory that this process has allocated that cannot be shared with other processes. Similar to the Committed Bytes counter for memory, keep an eye on the trending of this value.  A consistently increasing value may be indicative of a memory leak LogicalDisk (pagefile drive) \\ % idle time % Idle Time reports the percentage of time during the sample interval that the disk was idle. If the drive(s) hosting the page file are idle less than 50% of the time, you may have an issue with high disk I/O LogicalDisk (pagefile drive) \\ Split I/O / sec Split IO/Sec reports the rate at which I/Os to the disk were split into multiple I/Os. A split I/O may result from requesting data of a size that is too large to fit into a single I/O or that the disk is fragmented. Issues relating to Split I/O depend on the disk drive type and configuration <p>So, if the page file shows a high degree of usage, the paging file may be sized too small.  Similarly, if the disk hosting the page file is excessively busy, overall system performance may be impacted.  Memory leaks caused by applications manifest in different ways - you may get an error message indicating that the system is low on virtual memory.  A memory leak in an application will show up as a gradual increase in the value of the Private Bytes counter listed above.  A memory leak in one process may cause excessive paging as it squeezes other process working sets out of RAM.</p> <p>Now that you've gathered your data and determined what the issue is, how do you address it?  In the case of a server that is short on physical memory, you can either add more RAM (if the system hardware and the OS Version that you are running will support additional RAM).  You may also elect to offload some of the workload to another system.  However, if your data does not indicate an issue with the amount of Physical RAM, then it's time to look at other components that may be experiencing issues based on the data you have collected.</p> <p>If the memory does seem to be an issue, then we have to determine the specific cause.  In Terminal Services environments in particular, as more and more applications are added to the Terminal Server environment, the amount of resources required by the various processes increases.  In some cases, you may be able to narrow down the cause to a specific process.  In those situations, one of two things may need to occur - you need to add more RAM to the machine, or there is a problem with the process itself that needs attention.  The key here is to understand exactly what the process is doing.  If the virtual memory of the process climbs steadily and then levels off, then increasing the size of the page file may be all that is needed to offer relief.  If there is still insufficient RAM however, you will notice increased paging which may result in system performance issues.  However, the key here is that the process does not consume virtual memory indefinitely - it levels off at a certain point.</p> <p>On the other hand, if the application consumes memory and never levels off, then the application is probably leaking memory.  In a memory leak scenario, the application reserves and consumes memory resources, but never releases them when they are no longer required.  Depending on how severe the leak is, the virtual memory could be depleted within weeks, days, hours - or even minutes (in the most extreme circumstances)!  It is more normal to see a slow leak, which can be identified using Performance Monitor logging.</p> <p>Another scenario that can cause performance degradation occurs when the page file itself is heavily fragmented.  This occurs when the page file is located on a disk that is heavily used by other applications.  In these cases, the disk itself is probably fragmented as well.  Defragmenting the disk should alleviate some of the issues, however since the built-in disk defragmenter does not defragment paging files, you may want to consider moving the page file to another drive temporarily, setting the page file on the fragmented disk to 0 MB.  Reboot the system to enable the other page file to be used and perform the disk defragmentation on the original drive.  Once the defragmentation is complete, you can reset the page file on the original drive to the necessary values, zero out the page file size on the temporary drive and reboot the system again.</p> <p>That brings us to the end of this post.  In our next post, we'll continue our look at memory troubleshooting.  Until next time ...</p> <p>Additional Resources:</p> <ul> <li>Microsoft KB 139606: High Number of Pages /Sec does not necessarily indicate a Low Memory Cond...</li> <li>Microsoft KB 889654: Determining the appropriate page file size for 64-bit versions of Windows...</li> </ul>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/","title":"VMWare vCenter VMSA-2024-0003","text":"<p>source</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#synopsis","title":"Synopsis","text":"<p>Addressing Arbitrary Authentication Relay and Session Hijack Vulnerabilities in Deprecated VMware Enhanced Authentication Plug-in (EAP) (CVE-2024-22245, CVE-2024-22250)</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#impacted-products","title":"Impacted Products","text":"<p>VMware Enhanced Authentication Plug-in (EAP)</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#introduction","title":"Introduction","text":"<p>Arbitrary Authentication Relay and Session Hijack vulnerabilities in the deprecated VMware Enhanced Authentication Plug-in (EAP) were responsibly reported to VMware. Guidance is available on removing this deprecated component from impacted environments.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#arbitrary-authentication-relay-vulnerability-in-deprecated-eap-browser-plugin-cve-2024-22245","title":"Arbitrary Authentication Relay Vulnerability in Deprecated EAP Browser Plugin (CVE-2024-22245)","text":""},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#description","title":"Description","text":"<p>The VMware Enhanced Authentication Plug-in (EAP) contains an Arbitrary Authentication Relay vulnerability. VMware has evaluated the severity of this issue to be in the Critical severity range with a maximum CVSSv3 base score of 9.6.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#known-attack-vectors","title":"Known Attack Vectors","text":"<p>A malicious actor could trick a target domain user with EAP installed in their web browser into requesting and relaying service tickets for arbitrary Active Directory Service Principal Names (SPNs).</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#resolution","title":"Resolution","text":"<p>To address CVE-2024-22245 remove the EAP plugin by following the guidance in KB96442.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#workarounds","title":"Workarounds","text":"<p>None.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#additional-documentation","title":"Additional Documentation","text":"<p>A supplemental FAQ was created for clarification. Please see: https://via.vmw.com/vmsa-2024-0003-qna</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#notes","title":"Notes","text":"<p>Deprecation of the EAP was announced in 2021 with the release of vCenter Server 7.0u2.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#acknowledgements","title":"Acknowledgements","text":"<p>VMware would like to thank Ceri Coburn from Pen Test Partners for reporting this issue to us.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#session-hijack-vulnerability-in-deprecated-eap-browser-plugin-cve-2024-22250","title":"Session Hijack Vulnerability in Deprecated EAP Browser Plugin (CVE-2024-22250)","text":"<p>Description</p> <p>The VMware Enhanced Authentication Plug-in (EAP) contains a Session Hijack vulnerability. VMware has evaluated the severity of this issue to be in the Important severity range with a maximum CVSSv3 base score of 7.8.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#known-attack-vectors_1","title":"Known Attack Vectors","text":"<p>A malicious actor with unprivileged local access to a windows operating system can hijack a privileged EAP session when initiated by a privileged domain user on the same system.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#resolution_1","title":"Resolution","text":"<p>To address CVE-2024-22250 remove the EAP plugin by following the guidance in KB96442.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#workarounds_1","title":"Workarounds","text":"<p>None.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#additional-documentation_1","title":"Additional Documentation","text":"<p>A supplemental FAQ was created for clarification. Please see: https://via.vmw.com/vmsa-2024-0003-qna</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#notes_1","title":"Notes","text":"<p>Deprecation of the EAP was announced in 2021 with the release of vCenter Server 7.0u2.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#acknowledgements_1","title":"Acknowledgements","text":"<p>VMware would like to thank Ceri Coburn from Pen Test Partners for reporting this issue to us.</p>"},{"location":"wiki/vmware_vcenter_vmsa_2024-0003/#references","title":"References","text":"<ul> <li>Fixed Version(s) and Release Notes</li> </ul> <p>Mitre CVE Dictionary Links:</p> <ul> <li>https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-22245</li> <li>https://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2024-22250</li> </ul> <p>FIRST CVSSv3 Calculator:</p> <ul> <li>CVE-2024-22245</li> <li>CVE-2024-22250</li> </ul>"}]}